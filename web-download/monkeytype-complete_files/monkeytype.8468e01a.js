(()=>{"use strict";var e,t={9835:(e,t,o)=>{o.r(t)},6144:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CLIENT_VERSION=void 0,t.CLIENT_VERSION="2023.06.16_11.07.c51a1e01e",$(document.body).on("click",".version",(e=>{e.shiftKey&&alert(t.CLIENT_VERSION)}))},6617:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Auth=t.app=void 0;const r=o(5503),s=o(522),u=o(3660),l=a(o(3368)),d=o(3388);try{t.app=(0,r.initializeApp)(u.firebaseConfig),t.Auth=(0,s.getAuth)(t.app)}catch(e){t.app=void 0,t.Auth=void 0,console.error("Authentication failed to initialize",e),(0,d.isLocalhost)()&&l.addBanner((0,d.createErrorMessage)(e,"Authentication uninitialized")+" Check your firebase-config.ts",0,void 0,!1)}},2681:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.clear=void 0;const r=a(o(6350)),s=a(o(3388));t.clear=function(){$(".pageAccount .globalTimeTyping .val").text("-"),$(".pageAccount .globalTestsStarted .val").text("-"),$(".pageAccount .globalTestsCompleted .val").text("-")},t.update=function(){var e,t;const o=r.getSnapshot();if(o){if(void 0!==o.typingStats){const n=null!==(t=null===(e=null==o?void 0:o.typingStats)||void 0===e?void 0:e.timeTyping)&&void 0!==t?t:0;let i="";i=0===n?"-":s.secondsToString(Math.round(n),!0,!0),$(".pageAccount .globalTimeTyping .val").text(i)}void 0!==o.typingStats&&($(".pageAccount .globalTestsStarted .val").text(o.typingStats.startedTests),$(".pageAccount .globalTestsCompleted .val").text(o.typingStats.completedTests))}}},6472:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateData=t.show=t.updatePosition=void 0;const s=a(o(1833)),u=r(o(6705)),l=a(o(3388)),d=s.result.options.scales;function c(){$(".pageAccount .miniResultChartWrapper").stop(!0,!0).fadeOut(125),$(".pageAccount .miniResultChartBg").stop(!0,!0).fadeOut(125)}t.updatePosition=function(e,t){$(".pageAccount .miniResultChartWrapper").css({top:t,left:e})},t.show=function(){$(".pageAccount .miniResultChartWrapper").stop(!0,!0).fadeIn(125),$(".pageAccount .miniResultChartBg").stop(!0,!0).fadeIn(125)},t.updateData=function(e){let t=[];for(let o=1;o<=e.wpm.length;o++)t.push(o.toString());e.wpm=e.wpm.slice(0,e.raw.length),e.err=e.err.slice(0,e.raw.length),t=t.slice(0,e.raw.length);const o=l.smooth(e.raw,1);s.miniResult.data.labels=t,s.miniResult.data.datasets[0].data=e.wpm,s.miniResult.data.datasets[1].data=o,s.miniResult.data.datasets[2].data=e.err;const n=Math.max(Math.max(...e.wpm),Math.max(...e.raw)),i=Math.min(Math.min(...e.wpm),Math.min(...e.raw));d.wpm.max=Math.round(n),d.raw.max=Math.round(n),u.default.startGraphsAtZero?(d.wpm.min=0,d.raw.min=0):(d.wpm.min=Math.round(i),d.raw.min=Math.round(i)),s.miniResult.updateColors()},$(document).on("keydown",(e=>{"Escape"===e.key&&l.isElementVisible(".pageAccount .miniResultChartWrapper")&&(c(),e.preventDefault())})),$(".pageAccount").on("click",".miniResultChartBg",(()=>{c()}))},140:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const s=r(o(6705)),u=r(o(9546)),l=a(o(3388));function d(e,t,o){var n;let i="",a="";const r=s.default.alwaysShowCPM?5:1,d=`${o} ${"time"===t?"seconds":"words"}`,c=s.default.alwaysShowCPM?"cpm":"wpm";try{const p=(null!==(n=e[t][o])&&void 0!==n?n:[]).sort(((e,t)=>t.wpm-e.wpm))[0],f=new Date(p.timestamp);p.timestamp&&(a=(0,u.default)(f,"dd MMM yyyy"));let h=p.wpm*r;h=s.default.alwaysShowDecimalPlaces?l.roundTo2(h).toFixed(2):Math.round(h),h+=` ${c}`;let m=p.raw*r;m=s.default.alwaysShowDecimalPlaces?l.roundTo2(m).toFixed(2):Math.round(m),m+=" raw";let g=p.acc;g=void 0===g?"-":s.default.alwaysShowDecimalPlaces?l.roundTo2(g).toFixed(2):Math.round(g),g+=" acc";let v=p.consistency;v=void 0===v?"-":s.default.alwaysShowDecimalPlaces?l.roundTo2(v).toFixed(2):Math.round(v),v+=" con",i=`<div class="quick">\n      <div class="test">${d}</div>\n      <div class="wpm">${Math.round(p.wpm*r)}</div>\n      <div class="acc">${void 0===p.acc?"-":Math.floor(p.acc)+"%"}</div>\n    </div>\n    <div class="fullTest">\n      <div>${d}</div>\n      <div>${h}</div>\n      <div>${m}</div>\n      <div>${g}</div>\n      <div>${v}</div>\n      <div>${a}</div>\n    </div>`}catch(e){i=`<div class="quick">\n    <div class="test">${d}</div>\n    <div class="wpm">-</div>\n    <div class="acc">-</div>\n  </div>`}return`\n  <div class="group">\n  ${i}\n  </div>\n  `}t.update=function(e,t=!1){if(function(e){const t=e?"Profile":"Account",o=e?"":'<div class="buttonGroup"><div\n  class="showAllButton button"\n  data-balloon-pos="left"\n  aria-label="Show all personal bests"\n>\n  <i class="fas fa-ellipsis-v"></i>\n</div></div>';$(`.page${t} .profile .pbsWords`).html(`\n      <div class="group">\n      <div class="quick">\n        <div class="test">10 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">25 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">50 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">100 words</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    ${o}\n  `),$(`.page${t} .profile .pbsTime`).html(`\n      <div class="group">\n      <div class="quick">\n        <div class="test">15 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">30 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">60 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    <div class="group">\n      <div class="quick">\n        <div class="test">120 seconds</div>\n        <div class="wpm">-</div>\n        <div class="acc">-</div>\n      </div>\n    </div>\n    ${o}\n  `)}(t),void 0===e)return;let o="";const n=t?"Profile":"Account";$(`.page${n} .profile .pbsTime`).html(""),$(`.page${n} .profile .pbsWords`).html(""),["15","30","60","120"].forEach((t=>{o+=d(e,"time",t)}));const i=t?"":'<div class="buttonGroup"><div\n      class="showAllButton button"\n      data-balloon-pos="left"\n      aria-label="Show all personal bests"\n    >\n      <i class="fas fa-ellipsis-v"></i>\n    </div></div>';$(`.page${n} .profile .pbsTime`).append(o+i),o="",["10","25","50","100"].forEach((t=>{o+=d(e,"words",t)})),$(`.page${n} .profile .pbsWords`).append(o+i)}},1329:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.removeButtons=t.appendButtons=t.toggle=t.updateActive=t.reset=t.loadTags=t.getFilter=t.getGroup=t.getFilters=t.deleteFilterPreset=t.startCreateFilterPreset=t.setFilterPreset=t.updateFilterPresets=t.load=t.filters=t.defaultResultFilters=void 0;const u=a(o(3388)),l=a(o(6350)),d=s(o(6705)),c=a(o(3368)),p=s(o(7355)),f=a(o(9817)),h=o(2710);function m(){window.localStorage.setItem("resultFilters",JSON.stringify(t.filters))}function g(){var e,t;return r(this,void 0,void 0,(function*(){const o=document.querySelector(".pageAccount .presetFilterButtons"),n=document.querySelector(".pageAccount .presetFilterButtons .filterBtns");if(!o||!n)return;n.innerHTML="";const i=null!==(t=null===(e=l.getSnapshot())||void 0===e?void 0:e.filterPresets.map((e=>(e.name=e.name.replace(/_/g," "),e))))&&void 0!==t?t:[];if(i.length>0){let e="";for(const t of i)e+=`<div class="filterPresets">\n      <div class="select-filter-preset button" data-id="${t._id}">${t.name} </div>\n      <div class="button delete-filter-preset" data-id="${t._id}">\n        <i class="fas fa-fw fa-trash"></i>\n      </div>\n    </div>`;n.innerHTML=e,o.classList.remove("hidden")}else o.classList.add("hidden")}))}function v(e){return JSON.parse(JSON.stringify(e))}function y(){return r(this,void 0,void 0,(function*(){(0,h.showNewResultFilterPresetPopup)((e=>r(this,void 0,void 0,(function*(){return function(e){return r(this,void 0,void 0,(function*(){e=e.replace(/ /g,"_"),f.show();const o=yield p.default.users.addResultFilterPreset(Object.assign(Object.assign({},t.filters),{name:e}));f.hide(),200===o.status?(function(e){const t=l.getSnapshot();t&&l.setSnapshot(Object.assign(Object.assign({},t),{filterPresets:[...t.filterPresets,v(e)]}))}(Object.assign(Object.assign({},t.filters),{name:e,_id:o.data})),g(),c.add("Filter preset created",1)):(c.add("Error creating filter preset: "+o.message,-1),console.log("error creating filter preset: "+o.message))}))}(e)}))))}))}function b(e){return r(this,void 0,void 0,(function*(){f.show();const t=yield p.default.users.removeResultFilterPreset(e);f.hide(),200===t.status?(function(e){const t=l.getSnapshot();if(!t)return;const o=[...t.filterPresets],n=o.findIndex((t=>t._id===e));n>-1&&o.splice(n,1),l.setSnapshot(Object.assign(Object.assign({},t),{filterPresets:o}))}(e),g(),P(),c.add("Filter preset deleted",1)):(c.add("Error deleting filter preset: "+t.message,-1),console.log("error deleting filter preset",t.message))}))}function w(){$(".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset").removeClass("active")}function C(){return t.filters}function _(e){return t.filters[e]}function S(e,o){return t.filters[e][o]}function P(){t.filters=t.defaultResultFilters,m()}function x(){var e,t,o,n;const i={};function a(e){var t,o,n,a,r;let s="";return s+="<div class='group'>","difficulty"==e?s+='<span aria-label="Difficulty" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i>':"mode"==e?s+='<span aria-label="Mode" data-balloon-pos="up"><i class="fas fa-fw fa-bars"></i>':"punctuation"==e?s+='<span aria-label="Punctuation" data-balloon-pos="up"><i class="fas fa-fw fa-at"></i>':"numbers"==e?s+='<span aria-label="Numbers" data-balloon-pos="up"><i class="fas fa-fw fa-hashtag"></i>':"words"==e?s+='<span aria-label="Words" data-balloon-pos="up"><i class="fas fa-fw fa-font"></i>':"time"==e?s+='<span aria-label="Time" data-balloon-pos="up"><i class="fas fa-fw fa-clock"></i>':"date"==e?s+='<span aria-label="Date" data-balloon-pos="up"><i class="fas fa-fw fa-calendar"></i>':"tags"==e?s+='<span aria-label="Tags" data-balloon-pos="up"><i class="fas fa-fw fa-tags"></i>':"language"==e?s+='<span aria-label="Language" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i>':"funbox"==e&&(s+='<span aria-label="Funbox" data-balloon-pos="up"><i class="fas fa-fw fa-gamepad"></i>'),(null===(t=i[e])||void 0===t?void 0:t.all)?s+="all":s+="tags"===e?null===(n=null===(o=i.tags)||void 0===o?void 0:o.array)||void 0===n?void 0:n.map((e=>{var t,o;if("none"==e)return e;const n=l.getSnapshot();if(void 0===n)return e;const i=null===(t=n.tags)||void 0===t?void 0:t.filter((t=>t._id==e))[0];return void 0!==i?null===(o=n.tags)||void 0===o?void 0:o.filter((t=>t._id==e))[0].display:i})).join(", "):null===(r=null===(a=i[e])||void 0===a?void 0:a.array)||void 0===r?void 0:r.join(", ").replace(/_/g," "),s+="</span></div>",s}Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&(i[e]={all:!0,array:[]},Object.keys(_(e)).forEach((t=>{var o;const n=i[e];if(void 0===n)return;let a;S(e,t)?null===(o=n.array)||void 0===o||o.push(t):void 0!==n.all&&(n.all=!1),a="date"===e?$(`.pageAccount .group.topFilters .filterGroup[group="${e}"] .button[filter="${t}"]`):$(`.pageAccount .group.filterButtons .filterGroup[group="${e}"] .button[filter="${t}"]`),S(e,t)?a.addClass("active"):a.removeClass("active")})))}));let r="";r+=a("date"),r+='<div class="spacer"></div>',r+=a("mode"),r+='<div class="spacer"></div>',(null===(t=null===(e=i.mode)||void 0===e?void 0:e.array)||void 0===t?void 0:t.includes("time"))&&(r+=a("time"),r+='<div class="spacer"></div>'),(null===(n=null===(o=i.mode)||void 0===o?void 0:o.array)||void 0===n?void 0:n.includes("words"))&&(r+=a("words"),r+='<div class="spacer"></div>'),r+=a("difficulty"),r+='<div class="spacer"></div>',r+=a("punctuation"),r+='<div class="spacer"></div>',r+=a("numbers"),r+='<div class="spacer"></div>',r+=a("language"),r+='<div class="spacer"></div>',r+=a("funbox"),r+='<div class="spacer"></div>',r+=a("tags"),setTimeout((()=>{$(".pageAccount .group.chart .above").html(r)}),0)}function k(e,o){w();try{"date"===e&&Object.keys(_("date")).forEach((e=>{t.filters.date[e]=!1})),t.filters[e][o]=!t.filters[e][o],m()}catch(e){c.add("Something went wrong toggling filter. Reverting to defaults.",0),console.log("toggling filter error"),console.error(e),P(),x()}}t.defaultResultFilters={_id:"default-result-filters-id",name:"default result filters",pb:{no:!0,yes:!0},difficulty:{normal:!0,expert:!0,master:!0},mode:{words:!0,time:!0,quote:!0,zen:!0,custom:!0},words:{10:!0,25:!0,50:!0,100:!0,custom:!0},time:{15:!0,30:!0,60:!0,120:!0,custom:!0},quoteLength:{short:!0,medium:!0,long:!0,thicc:!0},punctuation:{on:!0,off:!0},numbers:{on:!0,off:!0},date:{last_day:!1,last_week:!1,last_month:!1,last_3months:!1,all:!0},tags:{none:!0},language:{},funbox:{none:!0}},t.filters=t.defaultResultFilters,t.load=function(){return r(this,void 0,void 0,(function*(){try{const e=window.localStorage.getItem("resultFilters");if(e){const o=JSON.parse(e);let n=!1;for(const e of Object.keys(t.defaultResultFilters)){if(!0===n)break;if(void 0===o[e]){n=!0;break}if("object"==typeof t.defaultResultFilters[e])for(const i of Object.keys(t.defaultResultFilters[e]))if(void 0===o[e][i]){n=!0;break}}t.filters=n?t.defaultResultFilters:o}else t.filters=t.defaultResultFilters;const o={none:!1};Object.keys(t.defaultResultFilters.tags).forEach((e=>{void 0!==t.filters.tags[e]?o[e]=t.filters.tags[e]:o[e]=!0})),t.filters.tags=o,m()}catch(e){console.log("error in loading result filters"),t.filters=t.defaultResultFilters,m()}}))},t.updateFilterPresets=g,t.setFilterPreset=function(e){var o;return r(this,void 0,void 0,(function*(){const n=null===(o=l.getSnapshot())||void 0===o?void 0:o.filterPresets.find((t=>t._id===e));n&&(t.filters=function(e){const o=v(e);return Object.entries(t.defaultResultFilters).forEach((e=>{const t=e[0],n=e[1];void 0===o[t]&&(o[t]=n)})),o}(n),m(),x()),$(".pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset").removeClass("active"),$(`.pageAccount .group.presetFilterButtons .filterBtns .filterPresets .select-filter-preset[data-id=${e}]`).addClass("active")}))},t.startCreateFilterPreset=y,t.deleteFilterPreset=b,t.getFilters=C,t.getGroup=_,t.getFilter=S,t.loadTags=function(e){e.forEach((e=>{t.defaultResultFilters.tags[e._id]=!0}))},t.reset=P,t.updateActive=x,t.toggle=k,$(".pageAccount .filterButtons .buttonsAndTitle .buttons, .pageAccount .group.topFilters .buttonsAndTitle.testDate .buttons").on("click",".button",(e=>{const o=$(e.target).parents(".buttons").attr("group"),n=$(e.target).attr("filter");$(e.target).hasClass("allFilters")?(Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&Object.keys(_(e)).forEach((o=>{"date"===e?t.filters[e][o]=!1:void 0!==t.filters[e]&&(t.filters[e][o]=!0)}))})),t.filters.date.all=!0):$(e.target).hasClass("noFilters")?Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&"date"!==e&&Object.keys(_(e)).forEach((o=>{t.filters[e][o]=!1}))})):$(e.target).hasClass("button")&&(e.shiftKey?(Object.keys(_(o)).forEach((e=>{t.filters[o][e]=!1})),t.filters[o][n]=!0):k(o,n)),x(),m()})),$(".pageAccount .topFilters .button.allFilters").on("click",(()=>{w(),console.log(C()),Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&Object.keys(_(e)).forEach((o=>{t.filters[e][o]="date"!==e}))})),t.filters.date.all=!0,x(),m()})),$(".pageAccount .topFilters .button.currentConfigFilter").on("click",(()=>{var e,o;if(w(),Object.keys(C()).forEach((e=>{"_id"!==e&&"name"!==e&&Object.keys(_(e)).forEach((o=>{t.filters[e][o]=!1}))})),t.filters.pb.no=!0,t.filters.pb.yes=!0,t.filters.difficulty[d.default.difficulty]=!0,t.filters.mode[d.default.mode]=!0,"time"===d.default.mode)if([15,30,60,120].includes(d.default.time)){const e=d.default.time;t.filters.time[e]=!0}else t.filters.time.custom=!0;else if("words"===d.default.mode)if([10,25,50,100,200].includes(d.default.words)){const e=d.default.words;t.filters.words[e]=!0}else t.filters.words.custom=!0;else"quote"===d.default.mode&&["short","medium","long","thicc"].forEach(((e,o)=>{d.default.quoteLength.includes(o)?t.filters.quoteLength[e]=!0:t.filters.quoteLength[e]=!1}));if(d.default.punctuation?t.filters.punctuation.on=!0:t.filters.punctuation.off=!0,d.default.numbers?t.filters.numbers.on=!0:t.filters.numbers.off=!0,"quote"===d.default.mode&&/english.*/.test(d.default.language)?t.filters.language.english=!0:t.filters.language[d.default.language]=!0,"none"===d.default.funbox)t.filters.funbox.none=!0;else for(const e of d.default.funbox.split("#"))t.filters.funbox[e]=!0;t.filters.tags.none=!0,null===(o=null===(e=l.getSnapshot())||void 0===e?void 0:e.tags)||void 0===o||o.forEach((e=>{!0===e.active&&(t.filters.tags.none=!1,t.filters.tags[e._id]=!0)})),t.filters.date.all=!0,x(),m()})),$(".pageAccount .topFilters .button.toggleAdvancedFilters").on("click",(()=>{$(".pageAccount .filterButtons").slideToggle(250),$(".pageAccount .topFilters .button.toggleAdvancedFilters").toggleClass("active")})),t.appendButtons=function(){var e,t,o;return r(this,void 0,void 0,(function*(){let n,i;try{n=yield u.getLanguageList()}catch(e){console.error(u.createErrorMessage(e,"Failed to append language buttons"))}if(n){let e="";for(const t of n)e+=`<div class="button" filter="${t}">${t.replace("_"," ")}</div>`;const t=document.querySelector(".pageAccount .content .filterButtons .buttonsAndTitle.languages .buttons");t&&(t.innerHTML=e)}try{i=yield u.getFunboxList()}catch(e){console.error(u.createErrorMessage(e,"Failed to append funbox buttons"))}if(i){let e="";for(const t of i)e+=`<div class="button" filter="${t.name}">${t.name.replace(/_/g," ")}</div>`;const t=document.querySelector(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .buttons");t&&(t.innerHTML='<div class="button" filter="none">none</div>'+e)}const a=l.getSnapshot();if((null!==(t=null===(e=null==a?void 0:a.tags)||void 0===e?void 0:e.length)&&void 0!==t?t:0)>0){$(".pageAccount .content .filterButtons .buttonsAndTitle.tags").removeClass("hidden");let e='<div class="button" filter="none">no tag</div>';for(const t of null!==(o=null==a?void 0:a.tags)&&void 0!==o?o:[])e+=`<div class="button" filter="${t._id}">${t.display}</div>`;const t=document.querySelector(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons");t&&(t.innerHTML=e)}else $(".pageAccount .content .filterButtons .buttonsAndTitle.tags").addClass("hidden");g()}))},t.removeButtons=function(){$(".pageAccount .content .filterButtons .buttonsAndTitle.languages .buttons").empty(),$(".pageAccount .content .filterButtons .buttonsAndTitle.funbox .buttons").empty(),$(".pageAccount .content .filterButtons .buttonsAndTitle.tags .buttons").empty()},$(".pageAccount .topFilters .button.createFilterPresetBtn").on("click",(()=>{y()})),$(".group.presetFilterButtons .filterBtns").on("click",".filterPresets .delete-filter-preset",(e=>{b($(e.currentTarget).data("id"))}))},3271:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildHttpClient=void 0;const a=o(6617),r=o(522),s=i(o(9669));function u(e,t){return(o,i={})=>n(this,void 0,void 0,(function*(){var u,l,d;let c="";try{const s=yield function(e){return n(this,void 0,void 0,(function*(){const t=null===a.Auth||void 0===a.Auth?void 0:a.Auth.currentUser,o=t&&(yield(0,r.getIdToken)(t));return{params:e.searchQuery,data:e.payload,headers:Object.assign(Object.assign(Object.assign({},e.headers),{Accept:"application/json","Content-Type":"application/json"}),o&&{Authorization:`Bearer ${o}`})}}))}(i);let u;u="get"===t||"delete"===t?yield e(o,s):yield e(o,s.data,s);const{message:l,data:d}=u.data;return{status:u.status,message:l,data:d}}catch(e){console.error(e);const t=e;if(c=t.message,s.default.isAxiosError(t))return Object.assign({status:null!==(l=null===(u=t.response)||void 0===u?void 0:u.status)&&void 0!==l?l:500,message:t.message},null===(d=t.response)||void 0===d?void 0:d.data)}return{status:500,message:c}}))}t.buildHttpClient=function(e,t){const o=s.default.create({baseURL:e,timeout:t});return{get:u(o.get,"get"),post:u(o.post,"post"),put:u(o.put,"put"),patch:u(o.patch,"patch"),delete:u(o.delete,"delete")}}},6510:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/ape-keys";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}generate(e,t){return o(this,void 0,void 0,(function*(){const o={name:e,enabled:t};return yield this.httpClient.post(n,{payload:o})}))}update(e,t){return o(this,void 0,void 0,(function*(){const o=Object.assign({},t);return yield this.httpClient.patch(`/ape-keys/${e}`,{payload:o})}))}delete(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/ape-keys/${e}`)}))}}},4146:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/configs";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}save(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch(n,{payload:{config:e}})}))}}},1571:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(4146)),a=n(o(7771)),r=n(o(472)),s=n(o(3870)),u=n(o(3082)),l=n(o(8413)),d=n(o(9303)),c=n(o(6510)),p=n(o(4253));t.default={Configs:i.default,Leaderboards:a.default,Presets:r.default,Psas:s.default,Public:p.default,Quotes:u.default,Results:l.default,Users:d.default,ApeKeys:c.default}},7771:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/leaderboards";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(e){return o(this,void 0,void 0,(function*(){const{language:t,mode:o,mode2:i,isDaily:a,skip:r=0,limit:s=50,daysBefore:u}=e,l=a&&u,d=Object.assign({language:t,mode:o,mode2:i,skip:Math.max(r,0),limit:Math.max(Math.min(s,50),0)},l&&{daysBefore:u}),c=`${n}/${a?"daily":""}`;return yield this.httpClient.get(c,{searchQuery:d})}))}getRank(e){return o(this,void 0,void 0,(function*(){const{language:t,mode:o,mode2:i,isDaily:a,daysBefore:r}=e,s=a&&r,u=Object.assign({language:t,mode:o,mode2:i},s&&{daysBefore:r}),l=`${n}${a?"/daily":""}/rank`;return yield this.httpClient.get(l,{searchQuery:u})}))}}},472:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/presets";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}add(e,t){return o(this,void 0,void 0,(function*(){const o={name:e,config:t};return yield this.httpClient.post(n,{payload:o})}))}edit(e,t,i){return o(this,void 0,void 0,(function*(){const o={_id:e,name:t,config:i};return yield this.httpClient.patch(n,{payload:o})}))}delete(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/presets/${e}`)}))}}},3870:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(6144);t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return n(this,void 0,void 0,(function*(){return yield this.httpClient.get("/psas",{headers:{"Client-Version":i.CLIENT_VERSION}})}))}}},4253:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}getSpeedHistogram(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/public/speedHistogram",{searchQuery:e})}))}getTypingStats(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/public/typingStats")}))}}},3082:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/quotes";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}submit(e,t,i,a){return o(this,void 0,void 0,(function*(){const o={text:e,source:t,language:i,captcha:a};return yield this.httpClient.post(n,{payload:o})}))}approveSubmission(e,t,n){return o(this,void 0,void 0,(function*(){const o={quoteId:e,editText:t,editSource:n};return yield this.httpClient.post("/quotes/approve",{payload:o})}))}rejectSubmission(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/quotes/reject",{payload:{quoteId:e}})}))}getRating(e){return o(this,void 0,void 0,(function*(){const t={quoteId:e.id,language:e.language};return yield this.httpClient.get("/quotes/rating",{searchQuery:t})}))}addRating(e,t){return o(this,void 0,void 0,(function*(){const o={quoteId:e.id,rating:t,language:e.language};return yield this.httpClient.post("/quotes/rating",{payload:o})}))}report(e,t,n,i,a){return o(this,void 0,void 0,(function*(){const o={quoteId:e,quoteLanguage:t,reason:n,comment:i,captcha:a};return yield this.httpClient.post("/quotes/report",{payload:o})}))}}},8413:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=o(6144),a="/results";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}get(){return n(this,void 0,void 0,(function*(){return yield this.httpClient.get(a)}))}save(e){return n(this,void 0,void 0,(function*(){return yield this.httpClient.post(a,{payload:{result:e},headers:{"Client-Version":i.CLIENT_VERSION}})}))}updateTags(e,t){return n(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/results/tags",{payload:{resultId:e,tagIds:t}})}))}deleteAll(){return n(this,void 0,void 0,(function*(){return yield this.httpClient.delete(a)}))}}},9303:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const n="/users";t.default=class{constructor(e){this.httpClient=e,this.httpClient=e}getData(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(n)}))}create(e,t,n,i){return o(this,void 0,void 0,(function*(){const o={email:n,name:e,uid:i,captcha:t};return yield this.httpClient.post("/users/signup",{payload:o})}))}getNameAvailability(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(`/users/checkName/${e}`)}))}delete(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(n)}))}reset(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/users/reset")}))}optOutOfLeaderboards(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/optOutOfLeaderboards")}))}updateName(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/users/name",{payload:{name:e}})}))}updateLeaderboardMemory(e,t,n,i){return o(this,void 0,void 0,(function*(){const o={mode:e,mode2:t,language:n,rank:i};return yield this.httpClient.patch("/users/leaderboardMemory",{payload:o})}))}updateEmail(e,t){return o(this,void 0,void 0,(function*(){const o={newEmail:e,previousEmail:t};return yield this.httpClient.patch("/users/email",{payload:o})}))}deletePersonalBests(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete("/users/personalBests")}))}addResultFilterPreset(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/resultFilterPresets",{payload:e})}))}removeResultFilterPreset(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/users/resultFilterPresets/${e}`)}))}getTags(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/users/tags")}))}createTag(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/tags",{payload:{tagName:e}})}))}editTag(e,t){return o(this,void 0,void 0,(function*(){const o={tagId:e,newName:t};return yield this.httpClient.patch("/users/tags",{payload:o})}))}deleteTag(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/users/tags/${e}`)}))}deleteTagPersonalBest(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.delete(`/users/tags/${e}/personalBest`)}))}getCustomThemes(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/users/customThemes")}))}editCustomTheme(e,t){return o(this,void 0,void 0,(function*(){const o={themeId:e,theme:{name:t.name,colors:t.colors}};return yield this.httpClient.patch("/users/customThemes",{payload:o})}))}deleteCustomTheme(e){return o(this,void 0,void 0,(function*(){const t={themeId:e};return yield this.httpClient.delete("/users/customThemes",{payload:t})}))}addCustomTheme(e){return o(this,void 0,void 0,(function*(){const t={name:e.name,colors:e.colors};return yield this.httpClient.post("/users/customThemes",{payload:t})}))}getOauthLink(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/users/discord/oauth")}))}linkDiscord(e,t,n){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/discord/link",{payload:{tokenType:e,accessToken:t,state:n}})}))}unlinkDiscord(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/discord/unlink")}))}addQuoteToFavorites(e,t){return o(this,void 0,void 0,(function*(){const o={language:e,quoteId:t};return yield this.httpClient.post("/users/favoriteQuotes",{payload:o})}))}removeQuoteFromFavorites(e,t){return o(this,void 0,void 0,(function*(){const o={language:e,quoteId:t};return yield this.httpClient.delete("/users/favoriteQuotes",{payload:o})}))}getProfileByUid(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(`/users/${e}/profile?isUid`)}))}getProfileByName(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get(`/users/${e}/profile`)}))}updateProfile(e,t){return o(this,void 0,void 0,(function*(){return yield this.httpClient.patch("/users/profile",{payload:Object.assign(Object.assign({},e),{selectedBadgeId:t})})}))}getInbox(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/users/inbox")}))}updateInbox(e){return o(this,void 0,void 0,(function*(){const t={mailIdsToDelete:e.mailIdsToDelete,mailIdsToMarkRead:e.mailIdsToMarkRead};return yield this.httpClient.patch("/users/inbox",{payload:t})}))}report(e,t,n,i){return o(this,void 0,void 0,(function*(){const o={uid:e,reason:t,comment:n,captcha:i};return yield this.httpClient.post("/users/report",{payload:o})}))}verificationEmail(){return o(this,void 0,void 0,(function*(){return yield this.httpClient.get("/users/verificationEmail")}))}forgotPasswordEmail(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/forgotPasswordEmail",{payload:{email:e}})}))}setStreakHourOffset(e){return o(this,void 0,void 0,(function*(){return yield this.httpClient.post("/users/setStreakHourOffset",{payload:{hourOffset:e}})}))}}},7355:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(1571)),a=o(3271),r=""+("localhost"===window.location.hostname?"http://localhost:5005":"https://api.monkeytype.com"),s=(0,a.buildHttpClient)(r,1e4),u={users:new i.default.Users(s),configs:new i.default.Configs(s),results:new i.default.Results(s),psas:new i.default.Psas(s),quotes:new i.default.Quotes(s),leaderboards:new i.default.Leaderboards(s),presets:new i.default.Presets(s),publicStats:new i.default.Public(s),apeKeys:new i.default.ApeKeys(s)};t.default=u},9102:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.pushCurrent=t.setCurrent=t.current=t.getList=t.commands=void 0;const u=s(o(5724)),l=s(o(3045)),d=s(o(7589)),c=s(o(2050)),p=s(o(3635)),f=s(o(4475)),h=s(o(1386)),m=s(o(1453)),g=s(o(1489)),v=s(o(3750)),y=s(o(5828)),b=s(o(8489)),w=s(o(2291)),$=s(o(5989)),C=s(o(5900)),_=s(o(6528)),S=s(o(2132)),P=s(o(944)),x=s(o(3553)),k=s(o(4267)),T=s(o(5504)),O=s(o(5547)),M=s(o(1059)),A=s(o(7087)),j=s(o(4770)),L=s(o(7428)),W=s(o(8128)),B=s(o(5943)),I=s(o(4847)),E=s(o(5979)),F=s(o(6742)),D=s(o(7941)),R=s(o(8846)),V=s(o(4730)),q=s(o(129)),K=s(o(3054)),H=s(o(1531)),N=s(o(9050)),z=s(o(7357)),U=s(o(4981)),Q=s(o(1404)),G=s(o(6609)),J=s(o(8520)),Y=s(o(5031)),Z=s(o(2745)),X=s(o(9950)),ee=s(o(856)),te=s(o(2815)),oe=s(o(5264)),ne=s(o(554)),ie=s(o(5215)),ae=s(o(6373)),re=s(o(9651)),se=s(o(6704)),ue=s(o(4846)),le=s(o(4580)),de=s(o(9937)),ce=s(o(8137)),pe=s(o(6880)),fe=s(o(3049)),he=s(o(1276)),me=s(o(788)),ge=s(o(5077)),ve=s(o(2274)),ye=s(o(5093)),be=s(o(2546)),we=s(o(7898)),$e=s(o(2647)),Ce=s(o(68)),_e=s(o(8633)),Se=s(o(3487)),Pe=s(o(6649)),xe=s(o(7103)),ke=a(o(2642)),Te=a(o(6780)),Oe=a(o(4766)),Me=a(o(8351)),Ae=a(o(8638)),je=a(o(5064)),Le=a(o(1178)),We=a(o(6705)),Be=We,Ie=a(o(3388)),Ee=o(743),Fe=a(o(2786)),De=a(o(8835)),Re=a(o(3368)),Ve=a(o(2864)),qe=a(o(4924)),Ke=a(o(2474)),He=a(o(2338)),Ne=a(o(2560));Ie.getLayoutsList().then((e=>{(0,ke.update)(e),(0,Le.update)(e)})).catch((e=>{console.error(Ie.createErrorMessage(e,"Failed to update layouts commands"))})),Ie.getLanguageList().then((e=>{(0,je.update)(e)})).catch((e=>{console.error(Ie.createErrorMessage(e,"Failed to update language commands"))})),Ie.getFunboxList().then((e=>{(0,Te.update)(e),Te.default[0].subgroup&&(Te.default[0].subgroup.beforeList=()=>{(0,Te.update)(e)})})).catch((e=>{console.error(Ie.createErrorMessage(e,"Failed to update funbox commands"))})),Ie.getFontsList().then((e=>{(0,Ae.update)(e)})).catch((e=>{console.error(Ie.createErrorMessage(e,"Failed to update fonts commands"))})),Ie.getThemesList().then((e=>{(0,Oe.update)(e)})).catch((e=>{console.error(Ie.createErrorMessage(e,"Failed to update themes commands"))})),Ie.getChallengeList().then((e=>{(0,Me.update)(e)})).catch((e=>{console.error(Ie.createErrorMessage(e,"Failed to update challenges commands"))})),t.commands={title:"",list:[...we.default,...u.default,...m.default,...l.default,...d.default,...c.default,...f.default,{id:"changeCustomModeText",display:"Change custom text",icon:"fa-align-left",exec:()=>{Fe.show()}},{id:"viewQuoteSearchPopup",display:"Search for quotes",icon:"fa-search",exec:()=>{Be.setMode("quote"),He.show()},shouldFocusTestUI:!1},...ge.default,{id:"shareTestSettings",display:"Share test settings",icon:"fa-share",exec:()=>r(void 0,void 0,void 0,(function*(){qe.show()}))},...Se.default,...xe.default,...ve.default,...Z.default,...v.default,...y.default,...k.default,...T.default,...H.default,...U.default,...Q.default,...G.default,...je.default,...ue.default,...Te.default,{id:"changeCustomLayoutfluid",display:"Custom layoutfluid...",defaultValue:()=>We.default.customLayoutfluid,input:!0,icon:"fa-tint",exec:e=>{void 0!==e&&Be.setCustomLayoutfluid(e)}},...P.default,...x.default,...j.default,...h.default,...p.default,...A.default,...O.default,...M.default,...R.default,...ke.default,...W.default,...z.default,...L.default,...g.default,...te.default,...ee.default,...oe.default,...X.default,...ne.default,...ie.default,...ae.default,...re.default,...se.default,...I.default,...V.default,...F.default,...E.default,...D.default,...be.default,...Ae.default,...fe.default,...le.default,...de.default,...ce.default,...Le.default,...pe.default,...Oe.default,...J.default,...Pe.default,...B.default,...q.default,..._e.default,{id:"changeCustomBackground",display:"Custom background...",icon:"fa-image",defaultValue:()=>We.default.customBackground,input:!0,exec:e=>{e||(e=""),Be.setCustomBackground(e)}},...$e.default,...Ce.default,...Y.default,{id:"randomizeTheme",display:"Next random theme",icon:"fa-random",exec:()=>r(void 0,void 0,void 0,(function*(){return(0,Ee.randomizeTheme)()})),available:()=>"off"!==We.default.randomTheme},...b.default,...w.default,...$.default,..._.default,...S.default,...K.default,...N.default,...C.default,...me.default,{id:"toggleMonkey",display:"Toggle Monkey",icon:"fa-egg",visible:!1,exec:()=>{Be.setMonkey(!We.default.monkey)}},...he.default,...Me.default,...ye.default,{id:"watchVideoAd",display:"Watch video ad",alias:"support donate",icon:"fa-ad",exec:()=>{Ve.show()}},{id:"importSettingsJSON",display:"Import settings JSON",icon:"fa-cog",alias:"import config",input:!0,exec:e=>{if(e)try{Be.apply(JSON.parse(e)),Be.saveFullConfigToLocalStorage(),De.update(),Re.add("Done",1)}catch(e){Re.add("An error occured while importing settings: "+e,-1)}}},{id:"exportSettingsJSON",display:"Export settings JSON",icon:"fa-cog",alias:"export config",input:!0,defaultValue:()=>JSON.stringify(We.default)},{id:"clearNotifications",display:"Clear all notifications",icon:"fa-trash-alt",exec:()=>r(void 0,void 0,void 0,(function*(){Re.clearAllNotifications()}))},{id:"clearSwCache",display:"Clear SW cache",icon:"fa-cog",exec:()=>r(void 0,void 0,void 0,(function*(){const e=yield caches.keys();for(const t of e)yield caches.delete(t);window.location.reload()}))},{id:"getSwCache",display:"Get SW cache",icon:"fa-cog",exec:()=>r(void 0,void 0,void 0,(function*(){alert(yield caches.keys())}))},{id:"copyResultStats",display:"Copy result stats",icon:"fa-cog",visible:!1,exec:()=>r(void 0,void 0,void 0,(function*(){navigator.clipboard.writeText(JSON.stringify(Ke.getStats())).then((()=>{Re.add("Copied to clipboard",1)})).catch((e=>{Re.add("Failed to copy to clipboard: "+e,-1)}))}))},{id:"fpsCounter",display:"FPS counter...",icon:"fa-cog",visible:!1,subgroup:{title:"FPS counter...",list:[{id:"startFpsCounter",display:"show",icon:"fa-cog",exec:()=>{Ne.start()}},{id:"stopFpsCounter",display:"hide",icon:"fa-cog",exec:()=>{Ne.stop()}}]}},{id:"joinDiscord",display:"Join the Discord server",icon:"fa-users",exec:()=>{window.open("https://discord.gg/monkeytype")}}]};const ze={keymapLayouts:Le.default[0].subgroup,enableAds:he.default[0].subgroup,customThemesList:Pe.default[0].subgroup,themes:Oe.default[0].subgroup,loadChallenge:Me.default[0].subgroup,languages:je.default[0].subgroup,difficulty:Z.default[0].subgroup,lazyMode:R.default[0].subgroup,paceCaretMode:ee.default[0].subgroup,showAverage:C.default[0].subgroup,minWpm:U.default[0].subgroup,minAcc:Q.default[0].subgroup,minBurst:G.default[0].subgroup,funbox:Te.default[0].subgroup,confidenceMode:p.default[0].subgroup,stopOnError:h.default[0].subgroup,layouts:ke.default[0].subgroup,oppositeShiftMode:j.default[0].subgroup,tags:Se.default[0].subgroup,resultSaving:ve.default[0].subgroup,blindMode:k.default[0].subgroup};t.getList=function(e){const t=ze[e];if(!t)throw Re.add(`List not found: ${e}`,-1),new Error(`List ${e} not found`);return t},t.current=[],t.current=[t.commands],t.setCurrent=function(e){t.current=e},t.pushCurrent=function(e){t.current.push(e)}},4487:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.isSingleListCommandLineActive=void 0;const r=a(o(743)),s=a(o(6705)),u=s,l=a(o(8911)),d=a(o(9102)),c=a(o(8673)),p=a(o(6350)),f=a(o(3368)),h=a(o(3326)),m=a(o(5705)),g=a(o(9470)),v=a(o(7346)),y=o(6617),b=o(3388),w=o(6649),C=o(3487),_=a(o(590)),S=a(o(2203)),P="commandLineWrapper";let x=!1,k=!1,T=0;const O={usingSingleList:!1};function M(){return O.usingSingleList}function A(){$("#commandLineWrapper").addClass("noBackground"),s.default.showOutOfFocusWarning&&$("#words").removeClass("blurred")}function j(){$("#commandLineWrapper").removeClass("noBackground"),s.default.showOutOfFocusWarning&&$("#words").addClass("blurred")}function L(){$("#commandLine .suggestions").empty();let e="";const t=d.current[d.current.length-1];let o=0;if($.each(t.list,((n,i)=>{var a;if(i.found&&(void 0===i.available||i.available())){let n=null!==(a=i.icon)&&void 0!==a?a:"fa-chevron-right";n=/^fa-/g.test(n)?`<i class="fas fa-fw ${n}"></i>`:`<div class="textIcon">${n}</div>`,t.configKey&&(n=i.configValueMode&&"include"===i.configValueMode&&s.default[t.configKey].includes(i.configValue)||s.default[t.configKey]===i.configValue?'<i class="fas fa-fw fa-check"></i>':'<i class="fas fa-fw"></i>');let r=`<div class="icon">${n}</div>`;i.noIcon&&!M()&&(r="");let u="";i.customStyle&&(u=i.customStyle),i.id.startsWith("changeTheme")&&i.customData?e+=`<div class="entry withThemeBubbles" command="${i.id}" index="${o}" style="${u}">\n        ${r}<div>${i.display}</div>\n        <div class="themeBubbles" style="background: ${i.customData.bgColor};outline: 0.25rem solid ${i.customData.bgColor};">\n          <div class="themeBubble" style="background: ${i.customData.mainColor}"></div>\n          <div class="themeBubble" style="background: ${i.customData.subColor}"></div>\n          <div class="themeBubble" style="background: ${i.customData.textColor}"></div>\n        </div>\n        </div>`:e+=`<div class="entry" command="${i.id}" index="${o}" style="${u}">${r}<div>${i.display}</div></div>`,o++}})),$("#commandLine .suggestions").html(e),0==$("#commandLine .suggestions .entry").length?$("#commandLine .separator").css({height:0,margin:0}):$("#commandLine .separator").css({height:"1px","margin-bottom":".5rem"}),$("#commandLine .suggestions .entry").length>0)try{$.each(t.list,((e,t)=>!t.found||(/changeTheme.+/gi.test(t.id)?A():j(),/theme/gi.test(t.id)&&"toggleCustomTheme"!==t.id||r.randomTheme||r.clearPreview(),/font/gi.test(t.id)||u.previewFontFamily(s.default.fontFamily),t.hover&&t.hover(),!1)))}catch(e){}$("#commandLine .listTitle").remove()}function W(){const e=$("#commandLine input").val().toLowerCase().split(" ").filter(((e,t)=>e||0==t)),t=d.current[d.current.length-1];if(t.beforeList&&t.beforeList(),""===e[0]&&"on"===s.default.singleListCommandLine&&1===d.current.length)return $.each(t.list,((e,t)=>{t.found=!1})),void L();e[0]&&">"==e[0][0]&&(e[0]=e[0].replace(/^>+/,"")),""==e[0]&&1==e.length?$.each(t.list,((e,t)=>{!1!==t.visible&&(t.found=!0)})):$.each(t.list,((t,o)=>{let n=0;$.each(e,((e,t)=>{if(""==t)return;const i=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),a=new RegExp("\\b"+i,"g"),r=o.display.toLowerCase().match(a),s=void 0!==o.alias?o.alias.toLowerCase().match(a):null;null!=r&&r.length>0||null!=s&&s.length>0?n++:n--})),n>e.length-1?o.found=!0:o.found=!1})),L(),T=0,R()}function B(e=!0){u.previewFontFamily(s.default.fontFamily),r.randomTheme||r.clearPreview(),$("#commandLineWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{j(),$("#commandLineWrapper").addClass("hidden"),$("#commandLine").removeClass("allCommands"),O.usingSingleList=!1,e&&c.focusWords(),_.remove(P)})),e&&c.focusWords()}function I(e){let o=!1,n=!1,i=!0;const a=d.current[d.current.length-1];let r=!1;S.set(),$.each(a.list,((a,s)=>{var u;if(s.id==e)if(void 0!==s.shouldFocusTestUI&&(i=s.shouldFocusTestUI),s.input){n=!0;const e=null!==(u=s.display.split("</i>")[1])&&void 0!==u?u:s.display;!function(e,t,o=""){$("#commandLineWrapper").removeClass("hidden"),$("#commandLine").addClass("hidden"),$("#commandInput").removeClass("hidden"),$("#commandInput input").attr("placeholder",t),$("#commandInput input").val(o),$("#commandInput input").trigger("focus"),$("#commandInput input").attr("command",""),$("#commandInput input").attr("command",e),""!=o&&$("#commandInput input").trigger("select")}(s.id,e,s.defaultValue?s.defaultValue():"")}else s.subgroup?(o=!0,s.subgroup.beforeList&&s.subgroup.beforeList(),d.current.push(s.subgroup),(0,t.show)()):(s.exec&&s.exec(),!0===s.sticky&&(r=!0))})),o||n||r||(h.log("usedCommandLine",{command:e}),B(i))}function E(e,t,o="",n){var i,a,r,u;let l=t.display;!0!==(null===(i=t)||void 0===i?void 0:i.input)&&(l=t.display.replace(/\s?\.\.\.$/g,""));let d='<i class="fas fa-fw"></i>';if(void 0!==t.configValue&&s.default[null==n?void 0:n.configKey]===t.configValue&&(d='<i class="fas fa-fw fa-check"></i>'),(t.noIcon||!0===t.input)&&(d=""),o&&(l=o+" > "+d+l),t.subgroup){const o=t;(null===(a=o.subgroup)||void 0===a?void 0:a.beforeList)&&o.subgroup.beforeList();try{null===(u=(null===(r=t)||void 0===r?void 0:r.subgroup).list)||void 0===u||u.forEach((o=>{t.configKey=t.subgroup.configKey,E(e,o,l,t)}))}catch(e){}}else{const i=Object.assign({},t);n&&(i.icon=n.icon),o&&(i.display=l),(null==n?void 0:n.available)&&(i.available=n.available),e.push(i)}}function F(){const e=[],o=t.show;return t.show=()=>{},d.commands.list.forEach((t=>E(e,t))),t.show=o,{title:"All Commands",list:e}}function D(e=!0){const o=F();d.setCurrent([o]),"manual"!=s.default.singleListCommandLine&&(O.usingSingleList=!0,$("#commandLine").addClass("allCommands")),e&&(0,t.show)()}function R(){$("#commandLineWrapper #commandLine .suggestions .entry").removeClass("active"),$(`#commandLineWrapper #commandLine .suggestions .entry[index=${T}]`).addClass("active")}t.isSingleListCommandLineActive=M,t.show=()=>{k=!1,T=0,x=!1,(0,b.isElementVisible)(".page.pageLoading")||(l.set(!1),_.append(P),$("#commandLine").removeClass("hidden"),$("#commandInput").addClass("hidden"),O.usingSingleList&&$("#commandLine").addClass("allCommands"),(0,b.isPopupVisible)(P)||$("#commandLineWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125),$("#commandLine input").val(""),W(),$("#commandLine input").trigger("focus"))},$("#commandLineWrapper #commandLine input").on("input",(()=>{x=!1,W()})),$(document).ready((()=>{$(document).on("keydown",(e=>{var o;if(!m.get()){if(("Escape"===e.key&&"esc"!==s.default.quickRestart||"p"===(null===(o=e.key)||void 0===o?void 0:o.toLowerCase())&&(e.metaKey||e.ctrlKey)&&e.shiftKey||("Tab"===e.key||"Escape"===e.key)&&"esc"===s.default.quickRestart)&&(0,b.isPopupVisible)(P))return d.current.length>1?(d.current.pop(),O.usingSingleList=!1,$("#commandLine").removeClass("allCommands"),(0,t.show)()):B(),void u.setFontFamily(s.default.fontFamily,!0);if("Escape"===e.key&&"esc"!==s.default.quickRestart||"Tab"===e.key&&"esc"===s.default.quickRestart&&!g.hasTab&&!e.shiftKey||"Tab"===e.key&&"esc"===s.default.quickRestart&&g.hasTab&&e.shiftKey||e.key&&"p"===e.key.toLowerCase()&&(e.metaKey||e.ctrlKey)&&e.shiftKey){const o=(0,b.isAnyPopupVisible)(),n=(0,b.isElementVisible)(".pageAccount .miniResultChartWrapper");if(o||n)return;if("esc"===s.default.quickRestart&&"login"===v.get())return;e.preventDefault(),"on"==s.default.singleListCommandLine?D(!1):d.setCurrent([d.commands]),(0,t.show)()}}}))})),$("#commandInput input").on("keydown",(e=>{if("Enter"===e.key){e.preventDefault();const t=$("#commandInput input").attr("command"),o=$("#commandInput input").val(),n=d.current[d.current.length-1];$.each(n.list,((e,n)=>{n.id==t&&n.exec&&n.exec(o)})),h.log("usedCommandLine",{command:null!=t?t:""}),B()}})),$(document).on("mousemove",(()=>{x||(x=!0)})),$("#commandLineWrapper #commandLine").on("mouseenter",".suggestions .entry",(e=>{var t;x&&(T=parseInt(null!==(t=$(e.target).attr("index"))&&void 0!==t?t:"0"),R())})),$("#commandLineWrapper #commandLine").on("mouseleave",".suggestions .entry",(e=>{var t;x&&(T=parseInt(null!==(t=$(e.target).attr("index"))&&void 0!==t?t:"0"),R())})),$("#commandLineWrapper #commandLine .suggestions").on("mouseover",(e=>{if(!x)return;const t=$(e.target).attr("command");try{const e=d.current[d.current.length-1];$.each(e.list,((e,o)=>{o.id==t&&(/changeTheme.+/gi.test(o.id)?A():j(),/theme/gi.test(o.id)&&"toggleCustomTheme"!==o.id||r.randomTheme||r.clearPreview(),/font/gi.test(o.id)||u.previewFontFamily(s.default.fontFamily),o.hover&&!k&&o.hover())}))}catch(e){}})),$("#commandLineWrapper #commandLine").on("click",".suggestions .entry",(e=>{k=!0,I($(e.currentTarget).attr("command"))})),$("#commandLineWrapper").on("mousedown",(e=>{"commandLineWrapper"===$(e.target).attr("id")&&(B(),u.setFontFamily(s.default.fontFamily,!0))})),$(document).on("keydown",(e=>{if((0,b.isPopupVisible)(P)){if($("#commandLine input").trigger("focus"),x=!1,">"==e.key&&"manual"==s.default.singleListCommandLine){if(!M())return void D(!1);if(">"==$("#commandLine input").val())return void e.preventDefault()}if("Backspace"!==e.key&&"Delete"!==e.key||setTimeout((()=>{const e=$("#commandLine input").val();"manual"==s.default.singleListCommandLine&&M()&&">"!==e[0]&&function(e=!0){M()&&(O.usingSingleList=!1,$("#commandLine").removeClass("allCommands"),d.setCurrent(d.current.filter((e=>"All Commands"!=e.title))),d.current.length<1&&d.setCurrent([d.commands])),e&&(0,t.show)()}(!1)}),1),"Enter"===e.key)return e.preventDefault(),void I($(".suggestions .entry.active").attr("command"));if("ArrowUp"===e.key||"ArrowDown"===e.key||"Tab"===e.key||e.ctrlKey&&("p"===e.key||"n"===e.key||"j"===e.key||"k"===e.key)){e.preventDefault(),$("#commandLineWrapper #commandLine .suggestions .entry").unbind("mouseenter mouseleave");const t=$(".suggestions .entry");("ArrowUp"===e.key||"Tab"===e.key&&e.shiftKey&&"esc"!==s.default.quickRestart||"p"===e.key||"k"===e.key)&&(0==T?T=t.length-1:T--),("ArrowDown"===e.key||"Tab"===e.key&&!e.shiftKey&&"esc"!==s.default.quickRestart||"n"===e.key||"j"===e.key)&&(T+1==t.length?T=0:T++),R(),function(){var e,t;try{const o=Math.abs((null===(e=$(".suggestions").offset())||void 0===e?void 0:e.top)-(null===(t=$(".entry.active").offset())||void 0===t?void 0:t.top)-$(".suggestions").scrollTop())-$(".suggestions").outerHeight()/2+$($(".entry")[0]).outerHeight();$(".suggestions").scrollTop(o)}catch(e){e instanceof Error&&console.log("could not scroll suggestions: "+e.message)}}();try{const e=d.current[d.current.length-1],t=$("#commandLineWrapper #commandLine .suggestions .entry.active").attr("command");$.each(e.list,((e,o)=>{o.id==t&&(/changeTheme.+/gi.test(o.id)?A():j(),/theme/gi.test(o.id)&&"toggleCustomTheme"!==o.id||r.randomTheme||r.clearPreview(),/font/gi.test(o.id)||u.previewFontFamily(s.default.fontFamily),o.hover&&o.hover())}))}catch(e){}return!1}}})),$("#commandLineMobileButton").on("click",(()=>{"on"==s.default.singleListCommandLine?D(!1):d.setCurrent([d.commands]),(0,t.show)()})),$("#keymap").on("click",".r5 .keySpace",(()=>{d.setCurrent([d.getList("keymapLayouts")]),(0,t.show)()})),$(".pageTest").on("click","#testModesNotice .textButton",(e=>{const o=$(e.currentTarget).attr("commands");if(void 0===o)return;const n=d.getList(o);void 0!==n&&("tags"===$(e.currentTarget).attr("commands")&&(0,C.update)(),d.pushCurrent(n),(0,t.show)())})),$("#bottom").on("click",".leftright .right .current-theme",(e=>{var o,n;if(e.shiftKey)if(s.default.customTheme)u.setCustomTheme(!1);else{if((null===y.Auth||void 0===y.Auth?void 0:y.Auth.currentUser)&&(null!==(n=null===(o=p.getSnapshot())||void 0===o?void 0:o.customThemes.length)&&void 0!==n?n:0)<1)return f.add("No custom themes!",0),void u.setCustomTheme(!1);u.setCustomTheme(!0)}else s.default.customTheme&&(0,w.update)(),d.setCurrent([s.default.customTheme?d.getList("customThemesList"):d.getList("themes")]),(0,t.show)()})),$(".supportButtons .button.ads").on("click",(()=>{d.pushCurrent(d.getList("enableAds")),(0,t.show)()})),$(document.body).on("click","#supportMeWrapper .button.ads",(()=>{d.pushCurrent(d.getList("enableAds")),(0,t.show)()})),_.save(P)},8633:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=r,u=[{id:"addThemeToFavorite",display:"Add current theme to favorite",icon:"fa-heart",available:()=>!r.default.customTheme&&!r.default.favThemes.includes(r.default.theme),exec:()=>{const{theme:e,favThemes:t,customTheme:o}=r.default;o||t.includes(e)||s.setFavThemes([...t,e])}},{id:"removeThemeFromFavorite",display:"Remove current theme from favorite",icon:"fa-heart-broken",available:()=>!r.default.customTheme&&r.default.favThemes.includes(r.default.theme),exec:()=>{const{theme:e,favThemes:t,customTheme:o}=r.default;!o&&t.includes(e)&&s.setFavThemes([...t.filter((t=>t!==e))])}}];t.default=u},6742:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeAlwaysShowCPM",display:"Always show CPM...",icon:"fa-tachometer-alt",subgroup:{title:"Always show CPM...",configKey:"alwaysShowCPM",list:[{id:"setAlwaysShowCPMOff",display:"off",configValue:!1,exec:()=>{r.setAlwaysShowCPM(!1)}},{id:"setAlwaysShowCPMOn",display:"on",configValue:!0,exec:()=>{r.setAlwaysShowCPM(!0)}}]}}];t.default=s},5979:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeAlwaysShowDecimal",display:"Always show decimal places...",icon:"00",subgroup:{title:"Always show decimal places...",configKey:"alwaysShowDecimalPlaces",list:[{id:"setAlwaysShowDecimalPlacesOff",display:"off",configValue:!1,exec:()=>{r.setAlwaysShowDecimalPlaces(!1)}},{id:"setAlwaysShowDecimalPlacesOn",display:"on",configValue:!0,exec:()=>{r.setAlwaysShowDecimalPlaces(!0)}}]}}];t.default=s},68:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=r,u=[{id:"setCustomBackgroundFilter",display:"custom background filter...",icon:"fa-image",subgroup:{title:"Custom background filter...",configKey:"customBackgroundFilter",list:[{id:"setCustomBackgroundBlur",display:"blur...",icon:"fa-image",input:!0,defaultValue:()=>r.default.customBackgroundFilter[0].toString(),exec:e=>{if(!e)return;const t=r.default.customBackgroundFilter;t[0]=parseFloat(e),s.setCustomBackgroundFilter(t)}},{id:"setCustomBackgroundBrightness",display:"brightness...",icon:"fa-image",input:!0,defaultValue:()=>r.default.customBackgroundFilter[1].toString(),exec:e=>{if(!e)return;const t=r.default.customBackgroundFilter;t[1]=parseFloat(e),s.setCustomBackgroundFilter(t)}},{id:"setCustomBackgroundSaturation",display:"saturation...",icon:"fa-image",input:!0,defaultValue:()=>r.default.customBackgroundFilter[2].toString(),exec:e=>{if(!e)return;const t=r.default.customBackgroundFilter;t[2]=parseFloat(e),s.setCustomBackgroundFilter(t)}},{id:"setCustomBackgroundOpacity",display:"opacity...",icon:"fa-image",input:!0,defaultValue:()=>r.default.customBackgroundFilter[3].toString(),exec:e=>{if(!e)return;const t=r.default.customBackgroundFilter;t[3]=parseFloat(e),s.setCustomBackgroundFilter(t)}}]}}];t.default=u},2647:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"setCustomBackgroundSize",display:"Custom background size...",icon:"fa-image",subgroup:{title:"Custom background size...",configKey:"customBackgroundSize",list:[{id:"setCustomBackgroundSizeCover",display:"cover",icon:"fa-image",configValue:"cover",exec:()=>{r.setCustomBackgroundSize("cover")}},{id:"setCustomBackgroundSizeContain",display:"contain",icon:"fa-image",configValue:"contain",exec:()=>{r.setCustomBackgroundSize("contain")}},{id:"setCustomBackgroundSizeMax",display:"max",icon:"fa-image",configValue:"max",exec:()=>{r.setCustomBackgroundSize("max")}}]}}];t.default=s},5077:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=r(o(6705)),u=a(o(8248)),l=a(o(3013)),d=a(o(4897)),c=a(o(7717));function p(){return"custom"===s.default.mode&&!0===c.isCustomTextLong()||"custom"===s.default.mode&&u.isWordRandom&&(u.word>=5e3||0==u.word)||"custom"===s.default.mode&&!u.isWordRandom&&!u.isTimeRandom&&u.text.length>=5e3||"custom"===s.default.mode&&u.isTimeRandom&&(u.time>=3600||0==u.time)||"words"===s.default.mode&&s.default.words>=5e3||0===s.default.words||"time"===s.default.mode&&(s.default.time>=3600||0===s.default.time)||"zen"==s.default.mode}const f=[{id:"bailOut",display:"Bail out...",icon:"fa-running",subgroup:{title:"Are you sure...",list:[{id:"bailOutNo",display:"Nevermind",available:()=>p()},{id:"bailOutForSure",display:"Yes, I am sure",exec:()=>{d.setBailout(!0),l.finish()},available:()=>p()}]},visible:!1,available:()=>p()}];t.default=f},4267:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeBlindMode",display:"Blind mode...",icon:"fa-eye-slash",subgroup:{title:"Blind mode...",configKey:"blindMode",list:[{id:"setBlindModeOff",display:"off",configValue:!1,exec:()=>{r.setBlindMode(!1)}},{id:"setBlindModeOn",display:"on",configValue:!0,exec:()=>{r.setBlindMode(!0)}}]}}];t.default=s},4846:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=[{id:"changeBritishEnglish",display:"British english...",icon:"fa-language",subgroup:{title:"British english...",configKey:"britishEnglish",list:[{id:"setBritishEnglishOff",display:"off",configValue:!1,exec:()=>{r.setBritishEnglish(!1),s.restart()}},{id:"setBritishEnglishOn",display:"on",configValue:!0,exec:()=>{r.setBritishEnglish(!0),s.restart()}}]}}];t.default=u},9050:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"capsLockWarning",display:"Caps lock warning...",icon:"fa-exclamation-triangle",subgroup:{title:"Caps lock warning...",configKey:"capsLockWarning",list:[{id:"capsLockWarningOn",display:"on",configValue:!0,exec:()=>{r.setCapsLockWarning(!0)}},{id:"capsLockWarningOff",display:"off",configValue:!1,exec:()=>{r.setCapsLockWarning(!1)}}]}}];t.default=s},2815:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeCaretStyle",display:"Caret style...",icon:"fa-i-cursor",subgroup:{title:"Caret style...",configKey:"caretStyle",list:[{id:"setCaretStyleOff",display:"off",configValue:"off",exec:()=>{r.setCaretStyle("off")}},{id:"setCaretStyleDefault",display:"line",configValue:"default",exec:()=>{r.setCaretStyle("default")}},{id:"setCaretStyleBlock",display:"block",configValue:"block",exec:()=>{r.setCaretStyle("block")}},{id:"setCaretStyleOutline",display:"outline-block",configValue:"outline",exec:()=>{r.setCaretStyle("outline")}},{id:"setCaretStyleUnderline",display:"underline",configValue:"underline",exec:()=>{r.setCaretStyle("underline")}},{id:"setCaretStyleCarrot",display:"carrot",configValue:"carrot",visible:!1,exec:()=>{r.setCaretStyle("carrot")}},{id:"setCaretStyleBanana",display:"banana",configValue:"banana",visible:!1,exec:()=>{r.setCaretStyle("banana")}}]}}];t.default=s},129:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeColorfulMode",display:"Colorful mode...",icon:"fa-fill-drip",subgroup:{title:"Colorful mode...",configKey:"colorfulMode",list:[{id:"setColorfulModeOff",display:"off",configValue:!1,exec:()=>{r.setColorfulMode(!1)}},{id:"setColorfulModeOn",display:"on",configValue:!0,exec:()=>{r.setColorfulMode(!0)}}]}}];t.default=s},3635:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeConfidenceMode",display:"Confidence mode...",icon:"fa-backspace",subgroup:{title:"Confidence mode...",configKey:"confidenceMode",list:[{id:"changeConfidenceModeOff",display:"off",configValue:"off",exec:()=>{r.setConfidenceMode("off")}},{id:"changeConfidenceModeOn",display:"on",configValue:"on",exec:()=>{r.setConfidenceMode("on")}},{id:"changeConfidenceModeMax",display:"max",configValue:"max",exec:()=>{r.setConfidenceMode("max")}}]}}];t.default=s},8520:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.subgroup=void 0;const r=a(o(6705));t.subgroup={title:"Custom theme",configKey:"customTheme",list:[{id:"setCustomThemeOff",display:"off",configValue:!1,exec:()=>{r.setCustomTheme(!1)}},{id:"setCustomThemeOn",display:"on",configValue:!0,exec:()=>{r.setCustomTheme(!0)}}]};const s=[{id:"setCustomTheme",display:"Custom theme...",icon:"fa-palette",subgroup:t.subgroup}];t.default=s},6649:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.subgroup=void 0;const r=a(o(6705)),s=o(6617),u=a(o(6350)),l=a(o(743));t.subgroup={title:"Custom themes list...",beforeList:()=>c(),list:[]};const d=[{id:"setCustomThemeId",display:"Custom themes...",icon:"fa-palette",subgroup:t.subgroup,available:()=>!!(null===s.Auth||void 0===s.Auth?void 0:s.Auth.currentUser)}];function c(){var e,o;(null===s.Auth||void 0===s.Auth?void 0:s.Auth.currentUser)&&(t.subgroup.list=[],u.getSnapshot()&&0!==(null===(e=u.getSnapshot())||void 0===e?void 0:e.customThemes.length)&&(null===(o=u.getSnapshot())||void 0===o||o.customThemes.forEach((e=>{t.subgroup.list.push({id:"setCustomThemeId"+e._id,display:e.name,configValue:e._id,hover:()=>{l.preview(e._id,!0)},exec:()=>{r.setCustomTheme(!0),l.set(e._id,!0)}})}))))}t.update=c,t.default=d},2745:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeDifficulty",display:"Difficulty...",icon:"fa-star",subgroup:{title:"Difficulty...",configKey:"difficulty",list:[{id:"setDifficultyNormal",display:"normal",configValue:"normal",exec:()=>{r.setDifficulty("normal")}},{id:"setDifficultyExpert",display:"expert",configValue:"expert",exec:()=>{r.setDifficulty("expert")}},{id:"setDifficultyMaster",display:"master",configValue:"master",exec:()=>{r.setDifficulty("master")}}]}}];t.default=s},1276:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.subgroup=void 0;const r=a(o(6705));t.subgroup={title:"Set enable ads...",configKey:"ads",list:[{id:"setEnableAdsOff",display:"off",configValue:"off",exec:()=>{r.setAds("off")}},{id:"setEnableAdsOn",display:"result",configValue:"result",exec:()=>{r.setAds("result")}},{id:"setEnableOn",display:"on",configValue:"on",exec:()=>{r.setAds("on")}},{id:"setEnableSellout",display:"sellout",configValue:"sellout",exec:()=>{r.setAds("sellout")}}]};const s=[{id:"setEnableAds",display:"Enable ads...",icon:"fa-ad",subgroup:t.subgroup}];t.default=s},5943:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeFlipTestColors",display:"Flip test colors...",icon:"fa-adjust",subgroup:{title:"Flip test colors...",configKey:"flipTestColors",list:[{id:"setFlipTestColorsOff",display:"off",configValue:!1,exec:()=>{r.setFlipTestColors(!1)}},{id:"setFlipTestColorsOn",display:"on",configValue:!0,exec:()=>{r.setFlipTestColors(!0)}}]}}];t.default=s},8638:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=a(o(6705)),s=r,u={title:"Font family...",configKey:"fontFamily",list:[]},l=[{id:"changeFontFamily",display:"Font family...",icon:"fa-font",subgroup:u}];t.update=function(e){e.forEach((e=>{const t=e.name.replace(/ /g,"_");u.list.push({id:"changeFont"+e.name.replace(/ /g,"_"),display:void 0!==e.display?e.display:e.name,configValue:t,customStyle:`font-family: ${e.name}`,hover:()=>{s.previewFontFamily(e.name)},exec:()=>{s.setFontFamily(e.name.replace(/ /g,"_"))}})})),u.list.push({id:"setFontFamilyCustom",display:"custom...",input:!0,hover:()=>{s.previewFontFamily(r.default.fontFamily)},exec:e=>{e&&s.setFontFamily(e.replace(/\s/g,"_"))}})},t.default=l},2546:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=r,u=[{id:"changeFontSize",display:"Font size...",icon:"fa-font",input:!0,defaultValue:()=>r.default.fontSize.toString(),exec:e=>{e&&s.setFontSize(parseFloat(e))}}];t.default=u},944:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeFreedomMode",display:"Freedom mode...",icon:"fa-feather-alt",subgroup:{title:"Freedom mode...",configKey:"freedomMode",list:[{id:"setfreedomModeOff",display:"off",configValue:!1,exec:()=>{r.setFreedomMode(!1)}},{id:"setfreedomModeOn",display:"on",configValue:!0,exec:()=>{r.setFreedomMode(!0)}}]}}];t.default=s},6780:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const s=a(o(2591)),u=a(o(3013)),l=a(o(2203)),d=r(o(6705)),c={title:"Funbox...",configKey:"funbox",list:[{id:"changeFunboxNone",display:"none",configValue:"none",alias:"off",exec:()=>{s.setFunbox("none")&&u.restart()}}]},p=[{id:"changeFunbox",display:"Funbox...",alias:"fun box",icon:"fa-gamepad",subgroup:c}];t.update=function(e){c.list=[],c.list.push({id:"changeFunboxNone",display:"none",configValue:"none",alias:"off",exec:()=>{l.set(),s.setFunbox("none")&&u.restart()}}),e.forEach((t=>{let o;o=d.default.funbox.includes(t.name)?'<i class="fas fa-fw fa-check"></i>'+t.name.replace(/_/g," "):'<i class="fas fa-fw"></i>'+t.name.replace(/_/g," "),c.list.push({id:"changeFunbox"+t.name,noIcon:!0,display:o,sticky:!0,alias:t.alias,configValue:t.name,exec:()=>{s.toggleFunbox(t.name),l.set(),u.restart();for(let t=0;t<e.length;t++){let o=e[t].name.replace(/_/g," ");o=d.default.funbox.includes(e[t].name)?'<i class="fas fa-fw fa-check"></i>'+o:'<i class="fas fa-fw"></i>'+o,$("#commandLine").hasClass("allCommands")?$(`#commandLine .suggestions .entry[command='changeFunbox${e[t].name}']`).html('<div class="icon"><i class="fas fa-fw fa-gamepad"></i></div><div>Funbox  > '+o):$(`#commandLine .suggestions .entry[command='changeFunbox${e[t].name}']`).html(o)}if(e.length>0){const e="none"===d.default.funbox?'<i class="fas fa-fw fa-check"></i>none':'<i class="fas fa-fw"></i>none';$("#commandLine").hasClass("allCommands")?$("#commandLine .suggestions .entry[command='changeFunboxNone']").html('<div class="icon"><i class="fas fa-fw fa-gamepad"></i></div><div>Funbox  > '+e):$("#commandLine .suggestions .entry[command='changeFunboxNone']").html(e)}}})}))},t.default=p},1059:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeHideExtraLetters",display:"Hide extra letters...",icon:"fa-eye-slash",subgroup:{title:"Hide extra letters...",configKey:"hideExtraLetters",list:[{id:"setHideExtraLettersOff",display:"off",configValue:!1,exec:()=>{r.setHideExtraLetters(!1)}},{id:"setHideExtraLettersOn",display:"on",configValue:!0,exec:()=>{r.setHideExtraLetters(!0)}}]}}];t.default=s},9651:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeHighlightMode",display:"Highlight mode...",icon:"fa-highlighter",subgroup:{title:"Highlight mode...",configKey:"highlightMode",list:[{id:"setHighlightModeOff",display:"off",configValue:"off",exec:()=>{r.setHighlightMode("off")}},{id:"setHighlightModeLetter",display:"letter",configValue:"letter",exec:()=>{r.setHighlightMode("letter")}},{id:"setHighlightModeWord",display:"word",configValue:"word",exec:()=>{r.setHighlightMode("word")}}]}}];t.default=s},5547:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeIndicateTypos",display:"Indicate typos...",icon:"fa-exclamation",subgroup:{title:"Indicate typos...",configKey:"indicateTypos",list:[{id:"setIndicateTyposOff",display:"off",configValue:"off",exec:()=>{r.setIndicateTypos("off")}},{id:"setIndicateTyposBelow",display:"below",configValue:"below",exec:()=>{r.setIndicateTypos("below")}},{id:"setIndicateTyposReplace",display:"replace",configValue:"replace",exec:()=>{r.setIndicateTypos("replace")}}]}}];t.default=s},2132:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeKeyTips",display:"Key tips...",icon:"fa-question",subgroup:{title:"Key tips...",configKey:"showKeyTips",list:[{id:"setKeyTipsOff",display:"off",configValue:!1,exec:()=>{r.setKeyTips(!1)}},{id:"setKeyTipsOn",display:"on",configValue:!0,exec:()=>{r.setKeyTips(!0)}}]}}];t.default=s},1178:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.subgroup=void 0;const r=a(o(6705)),s=a(o(3013)),u=o(3388);t.subgroup={title:"Change keymap layout...",configKey:"keymapLayout",list:[{id:"couldnotload",display:"Could not load the layouts list :("}]};const l=[{id:"changeKeymapLayout",display:"Keymap layout...",alias:"keyboard",icon:"fa-keyboard",subgroup:t.subgroup}];t.update=function(e){t.subgroup.list=[],t.subgroup.list.push({id:"changeKeymapLayoutOverrideSync",display:"emulator sync",configValue:"overrideSync",exec:()=>{r.setKeymapLayout("overrideSync"),s.restart()}}),Object.keys(e).forEach((e=>{"default"!=e.toString()&&t.subgroup.list.push({id:"changeKeymapLayout"+(0,u.capitalizeFirstLetterOfEachWord)(e),display:e.replace(/_/g," "),configValue:e,exec:()=>{r.setKeymapLayout(e),s.restart()}})}))},t.default=l},8137:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeKeymapLegendStyle",display:"Keymap legend style...",alias:"keyboard",icon:"fa-keyboard",subgroup:{title:"Keymap legend style...",configKey:"keymapLegendStyle",list:[{id:"setKeymapLegendStyleLowercase",display:"lowercase",configValue:"lowercase",exec:()=>{r.setKeymapLegendStyle("lowercase")}},{id:"setKeymapLegendStyleUppercase",display:"uppercase",configValue:"uppercase",exec:()=>{r.setKeymapLegendStyle("uppercase")}},{id:"setKeymapLegendStyleBlank",display:"blank",configValue:"blank",exec:()=>{r.setKeymapLegendStyle("blank")}},{id:"setKeymapLegendStyleDynamic",display:"dynamic",configValue:"dynamic",exec:()=>{r.setKeymapLegendStyle("dynamic")}}]}}];t.default=s},4580:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"toggleKeymap",display:"Keymap mode...",icon:"fa-keyboard",alias:"keyboard",subgroup:{title:"Keymap mode...",configKey:"keymapMode",list:[{id:"setKeymapModeOff",display:"off",configValue:"off",exec:()=>{r.setKeymapMode("off")}},{id:"setKeymapModeStatic",display:"static",configValue:"static",exec:()=>{r.setKeymapMode("static")}},{id:"setKeymapModeNext",display:"next",configValue:"next",exec:()=>{r.setKeymapMode("next")}},{id:"setKeymapModeReact",display:"react",alias:"flash",configValue:"react",exec:()=>{r.setKeymapMode("react")}}]}}];t.default=s},6880:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeKeymapShowTopRow",display:"Keymap show top row...",alias:"keyboard",icon:"fa-keyboard",subgroup:{title:"Keymap show top row...",configKey:"keymapShowTopRow",list:[{id:"keymapShowTopRowAlways",display:"always",configValue:"always",exec:()=>{r.setKeymapShowTopRow("always")}},{id:"keymapShowTopRowLayout",display:"layout dependent",configValue:"layout",exec:()=>{r.setKeymapShowTopRow("layout")}},{id:"keymapShowTopRowNever",display:"never",configValue:"never",exec:()=>{r.setKeymapShowTopRow("never")}}]}}];t.default=s},9937:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeKeymapStyle",display:"Keymap style...",alias:"keyboard",icon:"fa-keyboard",subgroup:{title:"Keymap style...",configKey:"keymapStyle",list:[{id:"setKeymapStyleStaggered",display:"staggered",configValue:"staggered",exec:()=>{r.setKeymapStyle("staggered")}},{id:"setKeymapStyleAlice",display:"alice",configValue:"alice",exec:()=>{r.setKeymapStyle("alice")}},{id:"setKeymapStyleMatrix",display:"matrix",configValue:"matrix",exec:()=>{r.setKeymapStyle("matrix")}},{id:"setKeymapStyleSplit",display:"split",configValue:"split",exec:()=>{r.setKeymapStyle("split")}},{id:"setKeymapStyleSplitMatrix",display:"split matrix",configValue:"split_matrix",exec:()=>{r.setKeymapStyle("split_matrix")}},{id:"setKeymapStyleSteno",display:"steno",configValue:"steno",exec:()=>{r.setKeymapStyle("steno")}},{id:"setKeymapStyleStenoMatrix",display:"steno matrix",configValue:"steno_matrix",exec:()=>{r.setKeymapStyle("steno_matrix")}}]}}];t.default=s},5064:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=a(o(6705)),s=a(o(3013)),u=o(3388),l={title:"Language...",configKey:"language",list:[{id:"couldnotload",display:"Could not load the languages list :("}]},d=[{id:"changeLanguage",display:"Language...",icon:"fa-language",subgroup:l}];t.update=function(e){l.list=[],e.forEach((e=>{l.list.push({id:"changeLanguage"+(0,u.capitalizeFirstLetterOfEachWord)(e),display:e.replace(/_/g," "),configValue:e,exec:()=>{r.setLanguage(e),s.restart()}})}))},t.default=d},2642:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=a(o(6705)),s=a(o(3013)),u=o(3388),l={title:"Layout emulator...",configKey:"layout",list:[{id:"couldnotload",display:"Could not load the layouts list :("}]},d=[{id:"changeLayout",display:"Layout emulator...",icon:"fa-keyboard",subgroup:l}];t.update=function(e){l.list=[],l.list.push({id:"changeLayoutDefault",display:"off",configValue:"default",exec:()=>{r.setLayout("default"),s.restart()}}),Object.keys(e).forEach((e=>{l.list.push({id:"changeLayout"+(0,u.capitalizeFirstLetterOfEachWord)(e),display:"default"===e?"off":e.replace(/_/g," "),configValue:e,exec:()=>{r.setLayout(e),s.restart()}})}))},t.default=d},8846:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=[{id:"changeLazyMode",display:"Lazy mode...",icon:"fa-couch",subgroup:{title:"Lazy mode...",configKey:"lazyMode",list:[{id:"setLazyModeOff",display:"off",configValue:!1,exec:()=>{r.setLazyMode(!1),s.restart()}},{id:"setLazyModeOn",display:"on",configValue:!0,exec:()=>{r.setLazyMode(!0),s.restart()}}]}}];t.default=u},2291:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeLiveAcc",display:"Live accuracy...",icon:"fa-percentage",subgroup:{title:"Live accuracy...",configKey:"showLiveAcc",list:[{id:"setLiveAccOff",display:"off",configValue:!1,exec:()=>{r.setShowLiveAcc(!1)}},{id:"setLiveAccOn",display:"on",configValue:!0,exec:()=>{r.setShowLiveAcc(!0)}}]}}];t.default=s},5989:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeLiveBurst",display:"Live burst...",icon:"fa-fire-alt",subgroup:{title:"Live burst...",configKey:"showLiveBurst",list:[{id:"setLiveBurstOff",display:"off",configValue:!1,exec:()=>{r.setShowLiveBurst(!1)}},{id:"setLiveBurstOn",display:"on",configValue:!0,exec:()=>{r.setShowLiveBurst(!0)}}]}}];t.default=s},8489:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeLiveWpm",display:"Live WPM...",icon:"fa-tachometer-alt",subgroup:{title:"Live WPM...",configKey:"showLiveWpm",list:[{id:"setLiveWpmOff",display:"off",configValue:!1,exec:()=>{r.setShowLiveWpm(!1)}},{id:"setLiveWpmOn",display:"on",configValue:!0,exec:()=>{r.setShowLiveWpm(!0)}}]}}];t.default=s},8351:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.subgroup=void 0;const s=o(2428),u=a(o(7567)),l=a(o(3013)),d=o(3388);t.subgroup={title:"Load challenge...",list:[]};const c=[{id:"loadChallenge",display:"Load challenge...",icon:"fa-award",subgroup:t.subgroup}];t.update=function(e){e.forEach((e=>{t.subgroup.list.push({id:"loadChallenge"+(0,d.capitalizeFirstLetterOfEachWord)(e.name),noIcon:!0,display:e.display,exec:()=>r(this,void 0,void 0,(function*(){(0,s.navigate)("/"),yield u.setup(e.name),l.restart({nosave:!0})}))})}))},t.default=c},1404:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeMinAcc",display:"Minimum accuracy...",alias:"minimum",icon:"fa-bomb",subgroup:{title:"Change min accuracy mode...",configKey:"minAcc",list:[{id:"setMinAccOff",display:"off",configValue:"off",exec:()=>{r.setMinAcc("off")}},{id:"setMinAccCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(r.setMinAccCustom(parseInt(e)),r.setMinAcc("custom"))}}]}}];t.default=s},6609:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeMinBurst",display:"Minimum burst...",alias:"minimum",icon:"fa-bomb",subgroup:{title:"Change min burst mode...",configKey:"minBurst",list:[{id:"setMinBurstOff",display:"off",configValue:"off",exec:()=>{r.setMinBurst("off")}},{id:"setMinBurstFixed",display:"fixed...",configValue:"fixed",input:!0,exec:e=>{e&&(r.setMinBurst("fixed"),r.setMinBurstCustomSpeed(parseInt(e)))}},{id:"setMinBurstFlex",display:"flex...",configValue:"flex",input:!0,exec:e=>{e&&(r.setMinBurst("flex"),r.setMinBurstCustomSpeed(parseInt(e)))}}]}}];t.default=s},4981:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeMinWpm",display:"Minimum wpm...",alias:"minimum",icon:"fa-bomb",subgroup:{title:"Change min wpm mode...",configKey:"minWpm",list:[{id:"setMinWpmOff",display:"off",configValue:"off",exec:()=>{r.setMinWpm("off")}},{id:"setMinWpmCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(r.setMinWpmCustomSpeed(parseInt(e)),r.setMinWpm("custom"))}}]}}];t.default=s},3045:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=a(o(2203)),l=[{id:"changeMode",display:"Mode...",icon:"fa-bars",subgroup:{title:"Change mode...",configKey:"mode",list:[{id:"changeModeTime",display:"time",configValue:"time",exec:()=>{r.setMode("time"),s.restart()}},{id:"changeModeWords",display:"words",configValue:"words",exec:()=>{r.setMode("words"),s.restart()}},{id:"changeModeQuote",display:"quote",configValue:"quote",exec:()=>{r.setMode("quote"),s.restart()}},{id:"changeModeCustom",display:"custom",configValue:"custom",exec:()=>{r.setMode("custom"),s.restart()}},{id:"changeModeZen",display:"zen",configValue:"zen",exec:()=>{r.setMode("zen"),u.set(),s.restart()}}]}}];t.default=l},788:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"monkeyPower",display:"Power mode...",alias:"powermode",icon:"fa-egg",visible:!1,subgroup:{title:"Power mode...",configKey:"monkeyPowerLevel",list:[{id:"monkeyPowerLevelOff",display:"off",configValue:"off",exec:()=>r.setMonkeyPowerLevel("off")},{id:"monkeyPowerLevel1",display:"mellow",configValue:"1",exec:()=>r.setMonkeyPowerLevel("1")},{id:"monkeyPowerLevel2",display:"high",configValue:"2",exec:()=>r.setMonkeyPowerLevel("2")},{id:"monkeyPowerLevel3",display:"ultra",configValue:"3",exec:()=>r.setMonkeyPowerLevel("3")},{id:"monkeyPowerLevel4",display:"over 9000",configValue:"4",exec:()=>r.setMonkeyPowerLevel("4")}]}}];t.default=s},5093:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=o(2428),i=o(3388),a=[{id:"viewTypingPage",display:"View Typing Page",alias:"start begin type test",icon:"fa-keyboard",exec:()=>{(0,n.navigate)("/")}},{id:"viewLeaderboards",display:"View Leaderboards",icon:"fa-crown",exec:()=>{$("#top #menu .textButton.view-leaderboards").trigger("click")}},{id:"viewAbout",display:"View About Page",icon:"fa-info",exec:()=>{(0,n.navigate)("/about")}},{id:"viewSettings",display:"View Settings Page",icon:"fa-cog",exec:()=>{(0,n.navigate)("/settings")}},{id:"viewAccount",display:"View Account Page",icon:"fa-user",alias:"stats",exec:()=>{$("#top #menu .textButton.view-account").hasClass("hidden")?(0,n.navigate)("/login"):(0,n.navigate)("/account")}},{id:"toggleFullscreen",display:"Toggle Fullscreen",icon:"fa-expand",exec:()=>{(0,i.toggleFullscreen)()}}];t.default=a},1453:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=[{id:"changeNumbers",display:"Numbers...",icon:"fa-hashtag",subgroup:{title:"Numbers...",configKey:"numbers",list:[{id:"changeNumbersOn",display:"on",configValue:!0,exec:()=>{r.setNumbers(!0),s.restart()}},{id:"changeNumbersOff",display:"off",configValue:!1,exec:()=>{r.setNumbers(!1),s.restart()}}]}}];t.default=u},4770:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(2453)),u=[{id:"changeOppositeShiftMode",display:"Change opposite shift mode...",icon:"fa-exchange-alt",subgroup:{title:"Change opposite shift mode...",configKey:"oppositeShiftMode",list:[{id:"setOppositeShiftModeOff",display:"off",configValue:"off",exec:()=>{r.setOppositeShiftMode("off"),s.update()}},{id:"setOppositeShiftModeOn",display:"on",configValue:"on",exec:()=>{r.setOppositeShiftMode("on"),s.update()}},{id:"setOppositeShiftModeKeymap",display:"keymap",configValue:"keymap",exec:()=>{r.setOppositeShiftMode("keymap"),s.update()}}]}}];t.default=u},3054:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeOutOfFocusWarning",display:"Out of focus warning...",icon:"fa-exclamation",subgroup:{title:"Colorful mode...",configKey:"showOutOfFocusWarning",list:[{id:"setShowOutOfFocusWarningOff",display:"off",configValue:!1,exec:()=>{r.setShowOutOfFocusWarning(!1)}},{id:"setShowOutOfFocusWarningOn",display:"on",configValue:!0,exec:()=>{r.setShowOutOfFocusWarning(!0)}}]}}];t.default=s},9950:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changePaceCaretStyle",display:"Pace caret style...",icon:"fa-i-cursor",subgroup:{title:"Change pace caret style...",configKey:"paceCaretStyle",list:[{id:"setPaceCaretStyleOff",display:"off",configValue:"off",exec:()=>{r.setPaceCaretStyle("off")}},{id:"setPaceCaretStyleDefault",display:"line",configValue:"default",exec:()=>{r.setPaceCaretStyle("default")}},{id:"setPaceCaretStyleBlock",display:"block",configValue:"block",exec:()=>{r.setPaceCaretStyle("block")}},{id:"setPaceCaretStyleOutline",display:"outline-block",configValue:"outline",exec:()=>{r.setPaceCaretStyle("outline")}},{id:"setPaceCaretStyleUnderline",display:"underline",configValue:"underline",exec:()=>{r.setPaceCaretStyle("underline")}},{id:"setPaceCaretStyleCarrot",display:"carrot",configValue:"carrot",visible:!1,exec:()=>{r.setPaceCaretStyle("carrot")}},{id:"setPaceCaretStyleBanana",display:"banana",configValue:"banana",visible:!1,exec:()=>{r.setPaceCaretStyle("banana")}}]}}];t.default=s},856:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=[{id:"changePaceCaret",display:"Pace caret mode...",icon:"fa-i-cursor",subgroup:{title:"Pace caret mode...",configKey:"paceCaret",list:[{id:"setPaceCaretOff",display:"off",configValue:"off",exec:()=>{r.setPaceCaret("off"),s.restart()}},{id:"setPaceCaretPb",display:"pb",configValue:"pb",exec:()=>{r.setPaceCaret("pb"),s.restart()}},{id:"setPaceCaretLast",display:"last",configValue:"last",exec:()=>{r.setPaceCaret("last"),s.restart()}},{id:"setPaceCaretAverage",display:"average",configValue:"average",exec:()=>{r.setPaceCaret("average"),s.restart()}},{id:"setPaceCaretDaily",display:"daily",configValue:"daily",exec:()=>{r.setPaceCaret("daily"),s.restart()}},{id:"setPaceCaretCustom",display:"custom...",configValue:"custom",input:!0,exec:e=>{e&&(r.setPaceCaretCustomSpeed(parseInt(e)),r.setPaceCaret("custom"),s.restart())}}]}}];t.default=u},3049:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changePageWidth",display:"Page width...",icon:"fa-arrows-alt-h",subgroup:{title:"Page width...",configKey:"pageWidth",list:[{id:"setPageWidth100",display:"100",configValue:"100",exec:()=>{r.setPageWidth("100")}},{id:"setPageWidth125",display:"125",configValue:"125",exec:()=>{r.setPageWidth("125")}},{id:"setPageWidth150",display:"150",configValue:"150",exec:()=>{r.setPageWidth("150")}},{id:"setPageWidth200",display:"200",configValue:"200",exec:()=>{r.setPageWidth("200")}},{id:"setPageWidthMax",display:"max",configValue:"max",exec:()=>{r.setPageWidth("max")}}]}}];t.default=s},7103:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=a(o(6350)),s=a(o(2453)),u=a(o(8835)),l=a(o(4984)),d=a(o(2845)),c=o(6617),p={title:"Presets...",list:[],beforeList:()=>{h()}},f=[{visible:!1,id:"applyPreset",display:"Presets...",icon:"fa-sliders-h",subgroup:p,available:()=>!!(null===c.Auth||void 0===c.Auth?void 0:c.Auth.currentUser)}];function h(){const e=r.getSnapshot();p.list=[],e&&e.presets&&0!==e.presets.length&&(e.presets.forEach((e=>{const t=e.display;p.list.push({id:"applyPreset"+e._id,display:t,exec:()=>{u.setEventDisabled(!0),l.apply(e._id),u.setEventDisabled(!1),u.update(),s.update()}})})),p.list.push({id:"createPreset",display:"Create preset",icon:"fa-plus",exec:()=>{d.show("add")}}))}t.update=h,t.default=f},5724:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=[{id:"changePunctuation",display:"Punctuation...",icon:"fa-at",subgroup:{title:"Change punctuation...",configKey:"punctuation",list:[{id:"changePunctuationOn",display:"on",configValue:!0,exec:()=>{r.setPunctuation(!0),s.restart()}},{id:"changePunctuationOff",display:"off",configValue:!1,exec:()=>{r.setPunctuation(!1),s.restart()}}]}}];t.default=u},7087:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeQuickEnd",display:"Quick end...",icon:"fa-step-forward",subgroup:{title:"Quick end...",configKey:"quickEnd",list:[{id:"setQuickEndOff",display:"off",configValue:!1,exec:()=>{r.setQuickEnd(!1)}},{id:"setQuickEndOn",display:"on",configValue:!0,exec:()=>{r.setQuickEnd(!0)}}]}}];t.default=s},3750:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeQuickRestart",display:"Quick restart...",icon:"fa-redo-alt",subgroup:{title:"Quick restart...",configKey:"quickRestart",list:[{id:"changeQuickRestartTab",display:"tab",configValue:"tab",exec:()=>{r.setQuickRestartMode("tab")}},{id:"changeQuickRestartEsc",display:"esc",configValue:"esc",exec:()=>{r.setQuickRestartMode("esc")}},{id:"changeQuickRestartOff",display:"off",configValue:"off",exec:()=>{r.setQuickRestartMode("off")}}]}}];t.default=s},4475:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=o(6617),l=[{id:"changeQuoteLength",display:"Quote length...",icon:"fa-quote-right",alias:"quotes",subgroup:{title:"Change quote length...",configKey:"quoteLength",list:[{id:"changeQuoteLengthAll",display:"all",configValue:[0,1,2,3],exec:()=>{r.setMode("quote"),r.setQuoteLength([0,1,2,3]),s.restart()}},{id:"changeQuoteLengthShort",display:"short",configValue:0,configValueMode:"include",exec:()=>{r.setMode("quote"),r.setQuoteLength(0),s.restart()}},{id:"changeQuoteLengthMedium",display:"medium",configValue:1,configValueMode:"include",exec:()=>{r.setMode("quote"),r.setQuoteLength(1),s.restart()}},{id:"changeQuoteLengthLong",display:"long",configValue:2,configValueMode:"include",exec:()=>{r.setMode("quote"),r.setQuoteLength(2),s.restart()}},{id:"changeQuoteLengthThicc",display:"thicc",configValue:3,configValueMode:"include",exec:()=>{r.setMode("quote"),r.setQuoteLength(3),s.restart()}},{id:"changeQuoteLengthFavorite",display:"favorite",configValue:-3,configValueMode:"include",available:()=>!!(null===u.Auth||void 0===u.Auth?void 0:u.Auth.currentUser),exec:()=>{r.setMode("quote"),r.setQuoteLength(-3),s.restart()}}]}}];t.default=l},5031:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=o(6617),u=a(o(3368)),l=[{id:"changeRandomTheme",display:"Random theme...",icon:"fa-random",subgroup:{title:"Random theme...",configKey:"randomTheme",list:[{id:"setRandomOff",display:"off",configValue:"off",exec:()=>{r.setRandomTheme("off")}},{id:"setRandomOn",display:"on",configValue:"on",exec:()=>{r.setRandomTheme("on")}},{id:"setRandomFav",display:"fav",configValue:"fav",exec:()=>{r.setRandomTheme("fav")}},{id:"setRandomLight",display:"light",configValue:"light",exec:()=>{r.setRandomTheme("light")}},{id:"setRandomDark",display:"dark",configValue:"dark",exec:()=>{r.setRandomTheme("dark")}},{id:"setRandomCustom",display:"custom",configValue:"custom",exec:()=>{(null===s.Auth||void 0===s.Auth?void 0:s.Auth.currentUser)?r.setRandomTheme("custom"):u.add("Multiple custom themes are available to logged in users only",0)}}]}}];t.default=l},5828:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeRepeatQuotes",display:"Repeat quotes...",icon:"fa-sync-alt",subgroup:{title:"Repeat quotes...",configKey:"repeatQuotes",list:[{id:"setRepeatQuotesOff",display:"off",configValue:"off",exec:()=>{r.setRepeatQuotes("off")}},{id:"setRepeatQuotesTyping",display:"typing",configValue:"typing",exec:()=>{r.setRepeatQuotes("typing")}}]}}];t.default=s},5264:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeRepeatedPace",display:"Repeated pace...",icon:"fa-i-cursor",subgroup:{title:"Repeated pace...",configKey:"repeatedPace",list:[{id:"setRepeatedPaceOff",display:"off",configValue:!1,exec:()=>{r.setRepeatedPace(!1)}},{id:"setRepeatedPaceOn",display:"on",configValue:!0,exec:()=>{r.setRepeatedPace(!0)}}]}}];t.default=s},2274:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(1322)),s=a(o(2453)),u=[{id:"setResultSaving",display:"Result saving...",icon:"fa-save",alias:"results",subgroup:{title:"Result saving...",list:[{id:"setResultSavingOff",display:"off",alias:"disabled incognito",exec:()=>{r.setSaving(!1),s.update()}},{id:"setResultSavingOn",display:"on",alias:"enabled incognito",exec:()=>{r.setSaving(!0),s.update()}}]}}];t.default=u},7898:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(3013)),s=a(o(8673)),u=a(o(9196)),l=a(o(3388)),d=a(o(3368)),c=[{id:"nextTest",display:"Next test",alias:"restart start begin type test typing",icon:"fa-chevron-right",available:()=>s.resultVisible,exec:()=>{r.restart()}},{id:"repeatTest",display:"Repeat test",icon:"fa-sync-alt",exec:()=>{r.restart({withSameWordset:!0})},available:()=>s.resultVisible},{id:"practiseWords",display:"Practice words...",icon:"fa-exclamation-triangle",subgroup:{title:"Practice words...",list:[{id:"practiseWordsMissed",display:"missed",noIcon:!0,exec:()=>{u.init(!0,!1),r.restart({practiseMissed:!0})}},{id:"practiseWordsSlow",display:"slow",noIcon:!0,exec:()=>{u.init(!1,!0),r.restart({practiseMissed:!0})}},{id:"practiseWordsBoth",display:"both",noIcon:!0,exec:()=>{u.init(!0,!0),r.restart({practiseMissed:!0})}}]},available:()=>s.resultVisible},{id:"toggleWordHistory",display:"Toggle word history",icon:"fa-align-left",exec:()=>{s.toggleResultWords()},available:()=>s.resultVisible},{id:"saveScreenshot",display:"Save screenshot",icon:"fa-image",alias:"ss picture",exec:()=>{setTimeout((()=>{s.screenshot()}),500)},available:()=>s.resultVisible},{id:"copyWordsToClipboard",display:"Copy words to clipboard",icon:"fa-copy",subgroup:{title:"Are you sure...",list:[{id:"copyNo",display:"Nevermind"},{id:"copyYes",display:"Yes, I am sure",exec:()=>{const e=l.getWords();navigator.clipboard.writeText(e).then((()=>{d.add("Copied to clipboard",1)}),(()=>{d.add("Failed to copy!",-1)}))}}]},available:()=>s.resultVisible}];t.default=c},4730:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeShowAllLines",display:"Show all lines...",icon:"fa-align-left",subgroup:{title:"Show all lines...",configKey:"showAllLines",list:[{id:"setShowAllLinesOff",display:"off",configValue:!1,exec:()=>{r.setShowAllLines(!1)}},{id:"setShowAllLinesOn",display:"on",configValue:!0,exec:()=>{r.setShowAllLines(!0)}}]}}];t.default=s},5900:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeShowAverage",display:"Show average...",icon:"fa-chart-bar",subgroup:{title:"Show average...",configKey:"showAverage",list:[{id:"setShowAverageOff",display:"off",configValue:"off",exec:()=>{r.setShowAverage("off")}},{id:"setShowAverageSpeed",display:"wpm",configValue:"wpm",exec:()=>{r.setShowAverage("wpm")}},{id:"setShowAverageAcc",display:"accuracy",configValue:"acc",exec:()=>{r.setShowAverage("acc")}},{id:"setShowAverageBoth",display:"both",configValue:"both",exec:()=>{r.setShowAverage("both")}}]}}];t.default=s},6528:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeShowTimer",display:"Timer/progress...",icon:"fa-clock",subgroup:{title:"Timer/progress...",configKey:"showTimerProgress",list:[{id:"setTimerProgressOff",display:"off",configValue:!1,exec:()=>{r.setShowTimerProgress(!1)}},{id:"setTimerProgressOn",display:"on",configValue:!0,exec:()=>{r.setShowTimerProgress(!0)}}]}}];t.default=s},5504:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeShowWordsHistory",display:"Always show words history...",icon:"fa-align-left",subgroup:{title:"Always show words history...",configKey:"alwaysShowWordsHistory",list:[{id:"setAlwaysShowWordsHistoryOff",display:"off",configValue:!1,exec:()=>{r.setAlwaysShowWordsHistory(!1)}},{id:"setAlwaysShowWordsHistoryOn",display:"on",configValue:!0,exec:()=>{r.setAlwaysShowWordsHistory(!0)}}]}}];t.default=s},1531:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"singleListCommandLine",display:"Single list command line...",icon:"fa-list",subgroup:{title:"Single list command line...",configKey:"singleListCommandLine",list:[{id:"singleListCommandLineManual",display:"manual",configValue:"manual",exec:()=>{r.setSingleListCommandLine("manual")}},{id:"singleListCommandLineOn",display:"on",configValue:"on",exec:()=>{r.setSingleListCommandLine("on")}}]}}];t.default=s},1489:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeSmoothCaret",display:"Smooth caret...",icon:"fa-i-cursor",subgroup:{title:"Smooth caret...",configKey:"smoothCaret",list:[{id:"changeSmoothCaretoff",display:"off",configValue:"off",exec:()=>{r.setSmoothCaret("off")}},{id:"changeSmoothCaretSlow",display:"slow",configValue:"slow",exec:()=>{r.setSmoothCaret("slow")}},{id:"changeSmoothCaretMedium",display:"medium",configValue:"medium",exec:()=>{r.setSmoothCaret("medium")}},{id:"changeSmoothCaretFast",display:"fast",configValue:"fast",exec:()=>{r.setSmoothCaret("fast")}}]}}];t.default=s},4847:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeSmoothLineScroll",display:"Smooth line scroll...",icon:"fa-align-left",subgroup:{title:"Smooth line scroll...",configKey:"smoothLineScroll",list:[{id:"setSmoothLineScrollOff",display:"off",configValue:!1,exec:()=>{r.setSmoothLineScroll(!1)}},{id:"setSmoothLineScrollOn",display:"on",configValue:!0,exec:()=>{r.setSmoothLineScroll(!0)}}]}}];t.default=s},7357:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(5929)),u=[{id:"changeSoundOnClick",display:"Sound on click...",icon:"fa-volume-up",subgroup:{title:"Sound on click...",configKey:"playSoundOnClick",list:[{id:"setSoundOnClickOff",display:"off",configValue:"off",exec:()=>{r.setPlaySoundOnClick("off")}},{id:"setSoundOnClick1",display:"click",configValue:"1",hover:()=>{s.previewClick("1")},exec:()=>{r.setPlaySoundOnClick("1"),s.playClick()}},{id:"setSoundOnClick2",display:"beep",configValue:"2",hover:()=>{s.previewClick("2")},exec:()=>{r.setPlaySoundOnClick("2"),s.playClick()}},{id:"setSoundOnClick3",display:"pop",configValue:"3",hover:()=>{s.previewClick("3")},exec:()=>{r.setPlaySoundOnClick("3"),s.playClick()}},{id:"setSoundOnClick4",display:"nk creams",configValue:"4",hover:()=>{s.previewClick("4")},exec:()=>{r.setPlaySoundOnClick("4"),s.playClick()}},{id:"setSoundOnClick5",display:"typewriter",configValue:"5",hover:()=>{s.previewClick("5")},exec:()=>{r.setPlaySoundOnClick("5"),s.playClick()}},{id:"setSoundOnClick6",display:"osu",configValue:"6",hover:()=>{s.previewClick("6")},exec:()=>{r.setPlaySoundOnClick("6"),s.playClick()}},{id:"setSoundOnClick7",display:"hitmarker",configValue:"7",hover:()=>{s.previewClick("7")},exec:()=>{r.setPlaySoundOnClick("7"),s.playClick()}},{id:"setSoundOnClick8",display:"sine",configValue:"8",hover:()=>{s.playNote("KeyQ","sine")},exec:()=>{r.setPlaySoundOnClick("8"),s.playNote("KeyQ","sine")}},{id:"setSoundOnClick9",display:"sawtooth",configValue:"9",hover:()=>{s.playNote("KeyQ","sawtooth")},exec:()=>{r.setPlaySoundOnClick("9"),s.playNote("KeyQ","sawtooth")}},{id:"setSoundOnClick10",display:"square",configValue:"10",hover:()=>{s.playNote("KeyQ","square")},exec:()=>{r.setPlaySoundOnClick("10"),s.playNote("KeyQ","square")}},{id:"setSoundOnClick11",display:"triangle",configValue:"11",hover:()=>{s.playNote("KeyQ","triangle")},exec:()=>{r.setPlaySoundOnClick("11"),s.playNote("KeyQ","triangle")}},{id:"setSoundOnClick12",display:"pentatonic",configValue:"12",hover:()=>{s.scaleConfigurations[12].preview()},exec:()=>{r.setPlaySoundOnClick("12"),s.scaleConfigurations[12].preview()}},{id:"setSoundOnClick13",display:"wholetone",configValue:"13",hover:()=>{s.scaleConfigurations[13].preview()},exec:()=>{r.setPlaySoundOnClick("13"),s.scaleConfigurations[13].preview()}}]}}];t.default=u},7428:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(5929)),u=[{id:"changeSoundOnError",display:"Sound on error...",icon:"fa-volume-mute",subgroup:{title:"Sound on error...",configKey:"playSoundOnError",list:[{id:"setPlaySoundOnErrorOff",display:"off",configValue:!1,exec:()=>{r.setPlaySoundOnError(!1)}},{id:"setPlaySoundOnErrorOn",display:"on",configValue:!0,exec:()=>{r.setPlaySoundOnError(!0),s.playError()}}]}}];t.default=u},8128:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(5929)),u=[{id:"changeSoundVolume",display:"Sound volume...",icon:"fa-volume-down",subgroup:{title:"Sound volume...",configKey:"soundVolume",list:[{id:"setSoundVolume0.1",display:"quiet",configValue:"0.1",exec:()=>{r.setSoundVolume("0.1"),s.playClick()}},{id:"setSoundVolume0.5",display:"medium",configValue:"0.5",exec:()=>{r.setSoundVolume("0.5"),s.playClick()}},{id:"setSoundVolume1.0",display:"loud",configValue:"1.0",exec:()=>{r.setSoundVolume("1.0"),s.playClick()}}]}}];t.default=u},7941:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeStartGraphsAtZero",display:"Start graphs at zero...",icon:"fa-chart-line",subgroup:{title:"Start graphs at zero...",configKey:"startGraphsAtZero",list:[{id:"setStartGraphsAtZeroOff",display:"off",configValue:!1,exec:()=>{r.setStartGraphsAtZero(!1)}},{id:"setStartGraphsAtZeroOn",display:"on",configValue:!0,exec:()=>{r.setStartGraphsAtZero(!0)}}]}}];t.default=s},1386:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeStopOnError",display:"Stop on error...",icon:"fa-hand-paper",subgroup:{title:"Stop on error...",configKey:"stopOnError",list:[{id:"changeStopOnErrorOff",display:"off",configValue:"off",exec:()=>{r.setStopOnError("off")}},{id:"changeStopOnErrorLetter",display:"letter",configValue:"letter",exec:()=>{r.setStopOnError("letter")}},{id:"changeStopOnErrorWord",display:"word",configValue:"word",exec:()=>{r.setStopOnError("word")}}]}}];t.default=s},3553:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeStrictSpace",display:"Strict space...",icon:"fa-minus",subgroup:{title:"Strict space...",configKey:"strictSpace",list:[{id:"setStrictSpaceOff",display:"off",configValue:!1,exec:()=>{r.setStrictSpace(!1)}},{id:"setStrictSpaceOn",display:"on",configValue:!0,exec:()=>{r.setStrictSpace(!0)}}]}}];t.default=s},3487:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const s=a(o(6350)),u=a(o(7841)),l=a(o(2453)),d=a(o(9343)),c=r(o(6705)),p=a(o(5886)),f=o(6617),h={title:"Change tags...",list:[],beforeList:()=>{g()}},m=[{visible:!1,id:"changeTags",display:"Tags...",icon:"fa-tag",subgroup:h,available:()=>!!(null===f.Auth||void 0===f.Auth?void 0:f.Auth.currentUser)}];function g(){var e,t;const o=s.getSnapshot();h.list=[],o&&o.tags&&0!==o.tags.length?(h.list.push({id:"clearTags",display:"Clear tags",icon:"fa-times",exec:()=>{var e;const t=s.getSnapshot();t&&(t.tags=null===(e=t.tags)||void 0===e?void 0:e.map((e=>(e.active=!1,e))),s.setSnapshot(t),l.update(),d.saveActiveToLocalStorage())}}),null===(t=null===(e=s.getSnapshot())||void 0===e?void 0:e.tags)||void 0===t||t.forEach((e=>{let t=e.display;t=!0===e.active?'<i class="fas fa-fw fa-check"></i>'+t:'<i class="fas fa-fw"></i>'+t,h.list.push({id:"toggleTag"+e._id,noIcon:!0,display:t,sticky:!0,exec:()=>{d.toggle(e._id),l.update(),"average"===c.default.paceCaret&&(p.init(),l.update());let t=e.display;t=!0===e.active?'<i class="fas fa-fw fa-check"></i>'+t:'<i class="fas fa-fw"></i>'+t,$("#commandLine").hasClass("allCommands")?$(`#commandLine .suggestions .entry[command='toggleTag${e._id}']`).html('<div class="icon"><i class="fas fa-fw fa-tag"></i></div><div>Tags  > '+t):$(`#commandLine .suggestions .entry[command='toggleTag${e._id}']`).html(t)}})})),h.list.push({id:"createTag",display:"Create tag",icon:"fa-plus",shouldFocusTestUI:!1,exec:()=>{u.show("add")}})):h.list.push({id:"createTag",display:"Create tag",icon:"fa-plus",shouldFocusTestUI:!1,exec:()=>{u.show("add")}})}t.update=g,t.default=m},6704:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeTapeMode",display:"Tape mode...",icon:"fa-tape",subgroup:{title:"Tape mode...",configKey:"tapeMode",list:[{id:"setTapeModeOff",display:"off",configValue:"off",exec:()=>{r.setTapeMode("off")}},{id:"setTapeModeLetter",display:"letter",configValue:"letter",exec:()=>{r.setTapeMode("letter")}},{id:"setTapeModeWord",display:"word",configValue:"word",exec:()=>{r.setTapeMode("word")}}]}}];t.default=s},4766:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.subgroup=void 0;const r=a(o(6705)),s=r,u=o(3388),l=a(o(743));t.subgroup={title:"Theme...",configKey:"theme",list:[]};const d=[{id:"changeTheme",display:"Theme...",icon:"fa-palette",subgroup:t.subgroup}];t.update=function(e){t.subgroup.list=[];const o=[];e.forEach((e=>{r.default.favThemes.includes(e.name)?o.push({id:"changeTheme"+(0,u.capitalizeFirstLetterOfEachWord)(e.name),display:e.name.replace(/_/g," "),configValue:e.name,customData:{mainColor:e.mainColor,bgColor:e.bgColor,subColor:e.subColor,textColor:e.textColor},hover:()=>{l.preview(e.name,!1)},exec:()=>{s.setTheme(e.name)}}):t.subgroup.list.push({id:"changeTheme"+(0,u.capitalizeFirstLetterOfEachWord)(e.name),display:e.name.replace(/_/g," "),configValue:e.name,customData:{mainColor:e.mainColor,bgColor:e.bgColor,subColor:e.subColor,textColor:e.textColor},hover:()=>{l.preview(e.name,!1)},exec:()=>{s.setTheme(e.name)}})})),t.subgroup.list=[...o,...t.subgroup.list]},t.default=d},7589:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=[{id:"changeTimeConfig",display:"Time...",icon:"fa-clock",subgroup:{title:"Change time config...",configKey:"time",list:[{id:"changeTimeConfig15",display:"15",configValue:15,exec:()=>{r.setMode("time"),r.setTimeConfig(15),s.restart()}},{id:"changeTimeConfig30",display:"30",configValue:30,exec:()=>{r.setMode("time"),r.setTimeConfig(30),s.restart()}},{id:"changeTimeConfig60",display:"60",configValue:60,exec:()=>{r.setMode("time"),r.setTimeConfig(60),s.restart()}},{id:"changeTimeConfig120",display:"120",configValue:120,exec:()=>{r.setMode("time"),r.setTimeConfig(120),s.restart()}},{id:"changeTimeConfigCustom",display:"custom...",input:!0,exec:e=>{e&&(r.setMode("time"),r.setTimeConfig(parseInt(e)),s.restart())}}]}}];t.default=u},5215:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeTimerColor",display:"Timer/progress color...",icon:"fa-clock",subgroup:{title:"Timer/progress color...",configKey:"timerColor",list:[{id:"setTimerColorBlack",display:"black",configValue:"black",exec:()=>{r.setTimerColor("black")}},{id:"setTimerColorSub",display:"sub",configValue:"sub",exec:()=>{r.setTimerColor("sub")}},{id:"setTimerColorText",display:"text",configValue:"text",exec:()=>{r.setTimerColor("text")}},{id:"setTimerColorMain",display:"main",configValue:"main",exec:()=>{r.setTimerColor("main")}}]}}];t.default=s},6373:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeTimerOpacity",display:"Timer/progress opacity...",icon:"fa-clock",subgroup:{title:"Timer/progress opacity...",configKey:"timerOpacity",list:[{id:"setTimerOpacity.25",display:".25",configValue:.25,exec:()=>{r.setTimerOpacity("0.25")}},{id:"setTimerOpacity.5",display:".5",configValue:.5,exec:()=>{r.setTimerOpacity("0.5")}},{id:"setTimerOpacity.75",display:".75",configValue:.75,exec:()=>{r.setTimerOpacity("0.75")}},{id:"setTimerOpacity1",display:"1",configValue:1,exec:()=>{r.setTimerOpacity("1")}}]}}];t.default=s},554:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=[{id:"changeTimerStyle",display:"Timer/progress style...",icon:"fa-clock",subgroup:{title:"Timer/progress style...",configKey:"timerStyle",list:[{id:"setTimerStyleBar",display:"bar",configValue:"bar",exec:()=>{r.setTimerStyle("bar")}},{id:"setTimerStyleText",display:"text",configValue:"text",exec:()=>{r.setTimerStyle("text")}},{id:"setTimerStyleMini",display:"mini",configValue:"mini",exec:()=>{r.setTimerStyle("mini")}}]}}];t.default=s},2050:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(6705)),s=a(o(3013)),u=[{id:"changeWordCount",display:"Words...",alias:"words",icon:"fa-font",subgroup:{title:"Change word count...",configKey:"words",list:[{id:"changeWordCount10",display:"10",configValue:10,exec:()=>{r.setMode("words"),r.setWordCount(10),s.restart()}},{id:"changeWordCount25",display:"25",configValue:25,exec:()=>{r.setMode("words"),r.setWordCount(25),s.restart()}},{id:"changeWordCount50",display:"50",configValue:50,exec:()=>{r.setMode("words"),r.setWordCount(50),s.restart()}},{id:"changeWordCount100",display:"100",configValue:100,exec:()=>{r.setMode("words"),r.setWordCount(100),s.restart()}},{id:"changeWordCount200",display:"200",configValue:200,exec:()=>{r.setMode("words"),r.setWordCount(200),s.restart()}},{id:"changeWordCountCustom",display:"custom...",input:!0,exec:e=>{e&&(r.setMode("words"),r.setWordCount(parseInt(e)),s.restart())}}]}}];t.default=u},4332:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.isConfigValueValidAsync=t.isConfigValueValid=t.isConfigKeyValid=void 0;const s=a(o(3388)),u=a(o(3368));function l(e,t,o){void 0===o?u.add(`Invalid value for ${e} (${t}). Please try to change this setting again.`,-1):u.add(`Invalid value for ${e} (${t}). ${o}`,-1),console.error(`Invalid value key ${e} value ${t} type ${typeof t}`)}function d(e){return e instanceof Array}t.isConfigKeyValid=function(e){return null!=e&&""!==e&&!(e.length>30)&&/^[0-9a-zA-Z_.\-#+]+$/.test(e)},t.isConfigValueValid=function(e,t,o){let n=!1;for(const e of o)switch(e){case"boolean":"boolean"==typeof t&&(n=!0);break;case"null":null===t&&(n=!0);break;case"number":"number"!=typeof t||isNaN(t)||(n=!0);break;case"numberArray":d(t)&&t.every((e=>"number"==typeof e&&!isNaN(e)))&&(n=!0);break;case"string":"string"==typeof t&&(n=!0);break;case"stringArray":d(t)&&t.every((e=>"string"==typeof e))&&(n=!0);break;case"undefined":void 0!==t&&void 0!==t||(n=!0);break;default:d(e)&&e.includes(t)&&(n=!0)}return n||l(e,t,undefined),n},t.isConfigValueValidAsync=function(e,t,o){return r(this,void 0,void 0,(function*(){let n,i=!1;for(const e of o)switch(e){case"layoutfluid":{if("string"!=typeof t)break;const e=t.split(/[# ]+/);if(e.length<2||e.length>5)break;try{yield s.getLayoutsList()}catch(e){n=s.createErrorMessage(e,"Failed to validate layoutfluid value");break}const o=yield Promise.all(e.map((e=>r(this,void 0,void 0,(function*(){return s.getLayout(e)})))));if(!o.every((e=>void 0!==e))){n=`The following inputted layouts do not exist: ${e.map(((e,t)=>[e,o[t]])).filter((([e,t])=>void 0===t)).map((([e])=>e)).join(", ")}`;break}i=!0;break}}return i||l(e,t,n),i}))}},6705:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setShowTimerProgress=t.setPaceCaretStyle=t.setCaretStyle=t.setPageWidth=t.setOppositeShiftMode=t.setStrictSpace=t.setColorfulMode=t.setFlipTestColors=t.setRepeatQuotes=t.setAds=t.setQuickEnd=t.setShowAllLines=t.setCapsLockWarning=t.setSingleListCommandLine=t.setAlwaysShowWordsHistory=t.setMinBurstCustomSpeed=t.setMinBurst=t.setMinAccCustom=t.setMinAcc=t.setMinWpmCustomSpeed=t.setMinWpm=t.setRepeatedPace=t.setPaceCaretCustomSpeed=t.setPaceCaret=t.setShowOutOfFocusWarning=t.setAlwaysShowCPM=t.setAlwaysShowDecimalPlaces=t.setStopOnError=t.setAccountChartAvg100=t.setAccountChartAvg10=t.setAccountChartAccuracy=t.setAccountChart=t.setBlindMode=t.toggleFunbox=t.setFunbox=t.setFavThemes=t.setDifficulty=t.setSoundVolume=t.setPlaySoundOnClick=t.setPlaySoundOnError=t.setMode=t.setPunctuation=t.setNumbers=t.saveFullConfigToLocalStorage=t.setChangedBeforeDb=t.setDbConfigLoaded=t.setLocalStorageConfig=t.changedBeforeDb=t.dbConfigLoaded=t.localStorageConfig=void 0,t.loadFromLocalStorage=t.reset=t.apply=t.setBurstHeatmap=t.setMonkeyPowerLevel=t.setCustomBackgroundFilter=t.setCustomBackgroundSize=t.setCustomLayoutfluid=t.setCustomBackground=t.setFontSize=t.setLayout=t.setKeymapShowTopRow=t.setKeymapLayout=t.setKeymapStyle=t.setKeymapLegendStyle=t.setKeymapMode=t.setMonkey=t.setLanguage=t.setCustomThemeColors=t.setLazyMode=t.setBritishEnglish=t.setRandomTheme=t.setThemeDark=t.setThemeLight=t.setTheme=t.setCustomTheme=t.setAutoSwitchTheme=t.setIndicateTypos=t.setConfidenceMode=t.setFreedomMode=t.setFontFamily=t.previewFontFamily=t.setQuickRestartMode=t.setSmoothLineScroll=t.setStartGraphsAtZero=t.setSmoothCaret=t.setWordCount=t.setQuoteLength=t.setTimeConfig=t.setKeyTips=t.setTimerOpacity=t.setTimerColor=t.setTimerStyle=t.setHideExtraLetters=t.setTapeMode=t.setHighlightMode=t.setShowAverage=t.setShowLiveBurst=t.setShowLiveAcc=t.setShowLiveWpm=void 0,t.loadPromise=t.setConfig=t.getConfigChanges=void 0;const u=a(o(6350)),l=a(o(1333)),d=a(o(3368)),c=o(4332),p=a(o(1446)),f=s(o(2191)),h=o(6617),m=a(o(3326)),g=a(o(5344)),v=o(2189),y=o(8789);function b(e){t.changedBeforeDb=e}let w;t.dbConfigLoaded=!1,t.changedBeforeDb=!1,t.setLocalStorageConfig=function(e){t.localStorageConfig=e},t.setDbConfigLoaded=function(e){t.dbConfigLoaded=e},t.setChangedBeforeDb=b;let C=Object.assign({},f.default),_={};const S=(0,v.debounce)(1e3,(()=>{delete _.resultFilters,Object.keys(_).length>0&&(g.loading(!0),u.saveConfig(_).then((()=>{g.loading(!1)}))),_={}}));function P(e,o=!1,n=!1){return r(this,void 0,void 0,(function*(){if(t.dbConfigLoaded||n||o||b(!0),o)return;const i=C;delete i.resultFilters;const a=JSON.stringify(i);window.localStorage.setItem("config",a),n||(_[e]=C[e],yield S()),p.dispatch("saveToLocalStorage",a)}))}function x(e=!1){return r(this,void 0,void 0,(function*(){console.log("saving full config to localStorage"),t.dbConfigLoaded||e||b(!0);const o=C;delete o.resultFilters;const n=JSON.stringify(o);window.localStorage.setItem("config",n),e||(g.loading(!0),yield u.saveConfig(o),g.loading(!1)),p.dispatch("saveToLocalStorage",n)}))}function k(e,t){return!!(0,c.isConfigValueValid)("numbers",e,["boolean"])&&!!(0,y.canSetConfigWithCurrentFunboxes)("numbers",e,C.funbox)&&("quote"===C.mode&&(e=!1),C.numbers=e,P("numbers",t),p.dispatch("numbers",C.numbers),!0)}function T(e,t){return!!(0,c.isConfigValueValid)("punctuation",e,["boolean"])&&!!(0,y.canSetConfigWithCurrentFunboxes)("punctuation",e,C.funbox)&&("quote"===C.mode&&(e=!1),C.punctuation=e,P("punctuation",t),p.dispatch("punctuation",C.punctuation),!0)}function O(e,t){if(!(0,c.isConfigValueValid)("mode",e,[["time","words","quote","zen","custom"]]))return!1;if(!(0,y.canSetConfigWithCurrentFunboxes)("mode",e,C.funbox))return!1;const o=C.mode;return C.mode=e,"custom"==C.mode||"quote"==C.mode?(T(!1,!0),k(!1,!0)):"zen"==C.mode&&"off"!=C.paceCaret&&d.add("Pace caret will not work with zen mode.",0),P("mode",t),p.dispatch("mode",C.mode,t,o),!0}function M(e,t){return!!(0,c.isConfigValueValid)("play sound on error",e,["boolean"])&&(C.playSoundOnError=e,P("playSoundOnError",t),p.dispatch("playSoundOnError",C.playSoundOnError),!0)}function A(e,t){return!!(0,c.isConfigValueValid)("play sound on click",e,[["off","1","2","3","4","5","6","7","8","9","10","11","12","13"]])&&(C.playSoundOnClick=e,P("playSoundOnClick",t),p.dispatch("playSoundOnClick",C.playSoundOnClick),!0)}function j(e,t){return!!(0,c.isConfigValueValid)("sound volume",e,[["0.1","0.5","1.0"]])&&(C.soundVolume=e,P("soundVolume",t),p.dispatch("soundVolume",C.soundVolume),!0)}function L(e,t){return!!(0,c.isConfigValueValid)("difficulty",e,[["normal","expert","master"]])&&(C.difficulty=e,P("difficulty",t),p.dispatch("difficulty",C.difficulty,t),!0)}function W(e,t){return!!(0,c.isConfigValueValid)("favorite themes",e,["stringArray"])&&(C.favThemes=e,P("favThemes",t),p.dispatch("favThemes",C.favThemes),!0)}function B(e,t){if(!(0,c.isConfigValueValid)("funbox",e,["string"]))return!1;for(const e of C.funbox.split("#"))if(!(0,y.canSetFunboxWithConfig)(e,C))return!1;const o=e||"none";return C.funbox=o,P("funbox",t),p.dispatch("funbox",C.funbox),!0}function I(e,t){return!!(0,c.isConfigValueValid)("blind mode",e,["boolean"])&&(C.blindMode=e,P("blindMode",t),p.dispatch("blindMode",C.blindMode,t),!0)}function E(e,t){return!!(0,c.isConfigValueValid)("account chart",e,[["on","off"],"stringArray"])&&(C.accountChart=e,P("accountChart",t),p.dispatch("accountChart",C.accountChart),!0)}function F(e,t){return!!(0,c.isConfigValueValid)("stop on error",e,[["off","word","letter"]])&&(C.stopOnError=e,"off"!==C.stopOnError&&(C.confidenceMode="off"),P("stopOnError",t),p.dispatch("stopOnError",C.stopOnError,t),!0)}function D(e,t){return!!(0,c.isConfigValueValid)("always show decimal places",e,["boolean"])&&(C.alwaysShowDecimalPlaces=e,P("alwaysShowDecimalPlaces",t),p.dispatch("alwaysShowDecimalPlaces",C.alwaysShowDecimalPlaces),!0)}function R(e,t){return!!(0,c.isConfigValueValid)("always show CPM",e,["boolean"])&&(C.alwaysShowCPM=e,P("alwaysShowCPM",t),p.dispatch("alwaysShowCPM",C.alwaysShowCPM),!0)}function V(e,t){return!!(0,c.isConfigValueValid)("show out of focus warning",e,["boolean"])&&(C.showOutOfFocusWarning=e,C.showOutOfFocusWarning||l.hide(),P("showOutOfFocusWarning",t),p.dispatch("showOutOfFocusWarning",C.showOutOfFocusWarning),!0)}function q(e,t){return!!(0,c.isConfigValueValid)("pace caret",e,[["custom","off","average","pb","last","daily"]])&&("complete"!==document.readyState||"pb"!=e||(null===h.Auth||void 0===h.Auth?void 0:h.Auth.currentUser)?(C.paceCaret=e,P("paceCaret",t),p.dispatch("paceCaret",C.paceCaret,t),!0):(d.add("PB pace caret is unavailable without an account",0),!1))}function K(e,t){return!!(0,c.isConfigValueValid)("pace caret custom speed",e,["number"])&&(C.paceCaretCustomSpeed=e,P("paceCaretCustomSpeed",t),p.dispatch("paceCaretCustomSpeed",C.paceCaretCustomSpeed),!0)}function H(e,t){return!!(0,c.isConfigValueValid)("repeated pace",e,["boolean"])&&(C.repeatedPace=e,P("repeatedPace",t),p.dispatch("repeatedPace",C.repeatedPace),!0)}function N(e,t){return!!(0,c.isConfigValueValid)("min WPM",e,[["off","custom"]])&&(C.minWpm=e,P("minWpm",t),p.dispatch("minWpm",C.minWpm,t),!0)}function z(e,t){return!!(0,c.isConfigValueValid)("min WPM custom speed",e,["number"])&&(C.minWpmCustomSpeed=e,P("minWpmCustomSpeed",t),p.dispatch("minWpmCustomSpeed",C.minWpmCustomSpeed),!0)}function U(e,t){return!!(0,c.isConfigValueValid)("min acc",e,[["off","custom"]])&&(C.minAcc=e,P("minAcc",t),p.dispatch("minAcc",C.minAcc,t),!0)}function Q(e,t){return!!(0,c.isConfigValueValid)("min acc custom",e,["number"])&&(C.minAccCustom=e,P("minAccCustom",t),p.dispatch("minAccCustom",C.minAccCustom),!0)}function G(e,t){return!!(0,c.isConfigValueValid)("min burst",e,[["off","fixed","flex"]])&&(C.minBurst=e,P("minBurst",t),p.dispatch("minBurst",C.minBurst,t),!0)}function J(e,t){return!!(0,c.isConfigValueValid)("min burst custom speed",e,["number"])&&(C.minBurstCustomSpeed=e,P("minBurstCustomSpeed",t),p.dispatch("minBurstCustomSpeed",C.minBurstCustomSpeed),!0)}function Y(e,t){return!!(0,c.isConfigValueValid)("always show words history",e,["boolean"])&&(C.alwaysShowWordsHistory=e,P("alwaysShowWordsHistory",t),p.dispatch("alwaysShowWordsHistory",C.alwaysShowWordsHistory),!0)}function Z(e,t){return!!(0,c.isConfigValueValid)("single list command line",e,[["manual","on"]])&&(C.singleListCommandLine=e,P("singleListCommandLine",t),p.dispatch("singleListCommandLine",C.singleListCommandLine),!0)}function X(e,t){return!!(0,c.isConfigValueValid)("caps lock warning",e,["boolean"])&&(C.capsLockWarning=e,P("capsLockWarning",t),p.dispatch("capsLockWarning",C.capsLockWarning),!0)}function ee(e,t){return!!(0,c.isConfigValueValid)("show all lines",e,["boolean"])&&(e&&"off"!==C.tapeMode?(d.add("Show all lines doesn't support tape mode",0),!1):(C.showAllLines=e,P("showAllLines",t),p.dispatch("showAllLines",C.showAllLines,t),!0))}function te(e,t){return!!(0,c.isConfigValueValid)("quick end",e,["boolean"])&&(C.quickEnd=e,P("quickEnd",t),p.dispatch("quickEnd",C.quickEnd),!0)}function oe(e,t){return!!(0,c.isConfigValueValid)("ads",e,[["off","result","on","sellout"]])&&(C.ads=e,P("ads",t),t||(setTimeout((()=>{location.reload()}),3e3),d.add("Ad settings changed. Refreshing...",0)),p.dispatch("ads",C.ads),!0)}function ne(e,t){return!!(0,c.isConfigValueValid)("repeat quotes",e,[["off","typing"]])&&(C.repeatQuotes=e,P("repeatQuotes",t),p.dispatch("repeatQuotes",C.repeatQuotes),!0)}function ie(e,t){return!!(0,c.isConfigValueValid)("flip test colors",e,["boolean"])&&(C.flipTestColors=e,P("flipTestColors",t),p.dispatch("flipTestColors",C.flipTestColors),!0)}function ae(e,t){return!!(0,c.isConfigValueValid)("colorful mode",e,["boolean"])&&(C.colorfulMode=e,P("colorfulMode",t),p.dispatch("colorfulMode",C.colorfulMode),!0)}function re(e,t){return!!(0,c.isConfigValueValid)("strict space",e,["boolean"])&&(C.strictSpace=e,P("strictSpace",t),p.dispatch("strictSpace",C.strictSpace),!0)}function se(e,t){return!!(0,c.isConfigValueValid)("opposite shift mode",e,[["off","on","keymap"]])&&(C.oppositeShiftMode=e,P("oppositeShiftMode",t),p.dispatch("oppositeShiftMode",C.oppositeShiftMode),!0)}function ue(e,t){return!!(0,c.isConfigValueValid)("page width",e,[["max","100","125","150","200"]])&&(C.pageWidth=e,$("#centerContent").removeClass("wide125"),$("#centerContent").removeClass("wide150"),$("#centerContent").removeClass("wide200"),$("#centerContent").removeClass("widemax"),$("#app").removeClass("wide125"),$("#app").removeClass("wide150"),$("#app").removeClass("wide200"),$("#app").removeClass("widemax"),"100"!==e&&($("#centerContent").addClass("wide"+e),$("#app").addClass("wide"+e)),P("pageWidth",t),p.dispatch("pageWidth",C.pageWidth),!0)}function le(e,t){return!!(0,c.isConfigValueValid)("caret style",e,[["off","default","block","outline","underline","carrot","banana"]])&&(C.caretStyle=e,$("#caret").removeClass("off"),$("#caret").removeClass("default"),$("#caret").removeClass("underline"),$("#caret").removeClass("outline"),$("#caret").removeClass("block"),$("#caret").removeClass("carrot"),$("#caret").removeClass("banana"),"off"==e?$("#caret").addClass("off"):"default"==e?$("#caret").addClass("default"):"block"==e?$("#caret").addClass("block"):"outline"==e?$("#caret").addClass("outline"):"underline"==e?$("#caret").addClass("underline"):"carrot"==e?$("#caret").addClass("carrot"):"banana"==e&&$("#caret").addClass("banana"),P("caretStyle",t),p.dispatch("caretStyle",C.caretStyle),!0)}function de(e,t){return!!(0,c.isConfigValueValid)("pace caret style",e,[["off","default","block","outline","underline","carrot","banana"]])&&(C.paceCaretStyle=e,$("#paceCaret").removeClass("off"),$("#paceCaret").removeClass("default"),$("#paceCaret").removeClass("underline"),$("#paceCaret").removeClass("outline"),$("#paceCaret").removeClass("block"),$("#paceCaret").removeClass("carrot"),$("#paceCaret").removeClass("banana"),"default"==e?$("#paceCaret").addClass("default"):"block"==e?$("#paceCaret").addClass("block"):"outline"==e?$("#paceCaret").addClass("outline"):"underline"==e?$("#paceCaret").addClass("underline"):"carrot"==e?$("#paceCaret").addClass("carrot"):"banana"==e&&$("#paceCaret").addClass("banana"),P("paceCaretStyle",t),p.dispatch("paceCaretStyle",C.paceCaretStyle),!0)}function ce(e,t){return!!(0,c.isConfigValueValid)("show timer progress",e,["boolean"])&&(C.showTimerProgress=e,P("showTimerProgress",t),p.dispatch("showTimerProgress",C.showTimerProgress),!0)}function pe(e,t){return!!(0,c.isConfigValueValid)("show live WPM",e,["boolean"])&&(C.showLiveWpm=e,P("showLiveWpm",t),p.dispatch("showLiveWpm",C.showLiveWpm),!0)}function fe(e,t){return!!(0,c.isConfigValueValid)("show live acc",e,["boolean"])&&(C.showLiveAcc=e,P("showLiveAcc",t),p.dispatch("showLiveAcc",C.showLiveAcc),!0)}function he(e,t){return!!(0,c.isConfigValueValid)("show live burst",e,["boolean"])&&(C.showLiveBurst=e,P("showLiveBurst",t),p.dispatch("showLiveBurst",C.showLiveBurst),!0)}function me(e,t){return!!(0,c.isConfigValueValid)("show average",e,[["off","wpm","acc","both"]])&&(C.showAverage=e,P("showAverage",t),p.dispatch("showAverage",C.showAverage,t),!0)}function ge(e,t){return!!(0,c.isConfigValueValid)("highlight mode",e,[["off","letter","word"]])&&!!(0,y.canSetConfigWithCurrentFunboxes)("highlightMode",e,C.funbox)&&(C.highlightMode=e,P("highlightMode",t),p.dispatch("highlightMode",C.highlightMode),!0)}function ve(e,t){return!!(0,c.isConfigValueValid)("tape mode",e,[["off","letter","word"]])&&("off"!==e&&!0===C.showAllLines&&ee(!1,!0),C.tapeMode=e,P("tapeMode",t),p.dispatch("tapeMode",C.tapeMode),!0)}function ye(e,t){return!!(0,c.isConfigValueValid)("hide extra letters",e,["boolean"])&&(C.hideExtraLetters=e,P("hideExtraLetters",t),p.dispatch("hideExtraLetters",C.hideExtraLetters),!0)}function be(e,t){return!!(0,c.isConfigValueValid)("timer style",e,[["bar","text","mini"]])&&(C.timerStyle=e,P("timerStyle",t),p.dispatch("timerStyle",C.timerStyle),!0)}function we(e,t){return!!(0,c.isConfigValueValid)("timer color",e,[["black","sub","text","main"]])&&(C.timerColor=e,$("#timer").removeClass("timerSub"),$("#timer").removeClass("timerText"),$("#timer").removeClass("timerMain"),$("#timerNumber").removeClass("timerSub"),$("#timerNumber").removeClass("timerText"),$("#timerNumber").removeClass("timerMain"),$("#largeLiveWpmAndAcc").removeClass("timerSub"),$("#largeLiveWpmAndAcc").removeClass("timerText"),$("#largeLiveWpmAndAcc").removeClass("timerMain"),$("#miniTimerAndLiveWpm").removeClass("timerSub"),$("#miniTimerAndLiveWpm").removeClass("timerText"),$("#miniTimerAndLiveWpm").removeClass("timerMain"),"main"===e?($("#timer").addClass("timerMain"),$("#timerNumber").addClass("timerMain"),$("#largeLiveWpmAndAcc").addClass("timerMain"),$("#miniTimerAndLiveWpm").addClass("timerMain")):"sub"===e?($("#timer").addClass("timerSub"),$("#timerNumber").addClass("timerSub"),$("#largeLiveWpmAndAcc").addClass("timerSub"),$("#miniTimerAndLiveWpm").addClass("timerSub")):"text"===e&&($("#timer").addClass("timerText"),$("#timerNumber").addClass("timerText"),$("#largeLiveWpmAndAcc").addClass("timerText"),$("#miniTimerAndLiveWpm").addClass("timerText")),P("timerColor",t),p.dispatch("timerColor",C.timerColor),!0)}function $e(e,t){return!!(0,c.isConfigValueValid)("timer opacity",e,[["0.25","0.5","0.75","1"]])&&(C.timerOpacity=e,P("timerOpacity",t),p.dispatch("timerOpacity",C.timerOpacity),!0)}function Ce(e,t){return!!(0,c.isConfigValueValid)("key tips",e,["boolean"])&&(C.showKeyTips=e,C.showKeyTips?$("#bottom .keyTips").removeClass("hidden"):$("#bottom .keyTips").addClass("hidden"),P("showKeyTips",t),p.dispatch("showKeyTips",C.showKeyTips),!0)}function _e(e,t){if(!(0,c.isConfigValueValid)("time",e,["number"]))return!1;if(!(0,y.canSetConfigWithCurrentFunboxes)("words",e,C.funbox))return!1;const o=isNaN(e)||e<0?f.default.time:e;return C.time=o,P("time",t),p.dispatch("time",C.time),!0}function Se(e,t,o){return!!(0,c.isConfigValueValid)("quote length",e,[[-3,-2,-1,0,1,2,3],"numberArray"])&&(Array.isArray(e)?(1===e.length&&-1===e[0]&&(e=[1]),C.quoteLength=e):(Array.isArray(C.quoteLength)||(C.quoteLength=[]),(null===e||isNaN(e)||e<-3||e>3)&&(e=1),-1===(e=parseInt(e.toString()))?C.quoteLength=[0,1,2,3]:o&&e>=0?C.quoteLength.includes(e)?C.quoteLength.length>1&&(C.quoteLength=C.quoteLength.filter((t=>t!==e))):C.quoteLength.push(e):C.quoteLength=[e]),P("quoteLength",t),p.dispatch("quoteLength",C.quoteLength),!0)}function Pe(e,t){if(!(0,c.isConfigValueValid)("words",e,["number"]))return!1;if(!(0,y.canSetConfigWithCurrentFunboxes)("words",e,C.funbox))return!1;const o=e<0||e>1e5?f.default.words:e;return C.words=o,P("words",t),p.dispatch("words",C.words),!0}function xe(e,t){return!!(0,c.isConfigValueValid)("smooth caret",e,[["off","slow","medium","fast"]])&&(C.smoothCaret=e,"off"===e?$("#caret").css("animation-name","caretFlashHard"):$("#caret").css("animation-name","caretFlashSmooth"),P("smoothCaret",t),p.dispatch("smoothCaret",C.smoothCaret),!0)}function ke(e,t){return!!(0,c.isConfigValueValid)("start graphs at zero",e,["boolean"])&&(C.startGraphsAtZero=e,P("startGraphsAtZero",t),p.dispatch("startGraphsAtZero",C.startGraphsAtZero),!0)}function Te(e,t){return!!(0,c.isConfigValueValid)("smooth line scroll",e,["boolean"])&&(C.smoothLineScroll=e,P("smoothLineScroll",t),p.dispatch("smoothLineScroll",C.smoothLineScroll),!0)}function Oe(e,t){return!!(0,c.isConfigValueValid)("quick restart mode",e,[["off","esc","tab"]])&&("off"===e?$(".pageTest #restartTestButton").removeClass("hidden"):$(".pageTest #restartTestButton").addClass("hidden"),C.quickRestart=e,P("quickRestart",t),p.dispatch("quickRestart",C.quickRestart),!0)}function Me(e,t){return!!(0,c.isConfigValueValid)("font family",e,["string"])&&(""===e&&(e="roboto_mono",d.add("Empty input received, reverted to the default font.",0,{customTitle:"Custom font"})),e&&/^[0-9a-zA-Z_.\-#+()]+$/.test(e)?(C.fontFamily=e,document.documentElement.style.setProperty("--font",`"${e.replace(/_/g," ")}", "Roboto Mono", "Vazirmatn"`),P("fontFamily",t),p.dispatch("fontFamily",C.fontFamily),!0):(d.add(`Invalid font name value: "${e}".`,-1,{customTitle:"Custom font",duration:3}),!1))}function Ae(e,t){return!!(0,c.isConfigValueValid)("freedom mode",e,["boolean"])&&(null==e&&(e=!1),C.freedomMode=e,C.freedomMode&&"off"!==C.confidenceMode&&(C.confidenceMode="off"),P("freedomMode",t),p.dispatch("freedomMode",C.freedomMode),!0)}function je(e,t){return!!(0,c.isConfigValueValid)("confidence mode",e,[["off","on","max"]])&&(C.confidenceMode=e,"off"!==C.confidenceMode&&(C.freedomMode=!1,C.stopOnError="off"),P("confidenceMode",t),p.dispatch("confidenceMode",C.confidenceMode,t),!0)}function Le(e,t){return!!(0,c.isConfigValueValid)("indicate typos",e,[["off","below","replace"]])&&(C.indicateTypos=e,P("indicateTypos",t),p.dispatch("indicateTypos",C.indicateTypos),!0)}function We(e,t){return!!(0,c.isConfigValueValid)("custom theme",e,["boolean"])&&(C.customTheme=e,P("customTheme",t),p.dispatch("customTheme",C.customTheme),!0)}function Be(e,t){return!!(0,c.isConfigValueValid)("theme light",e,["string"])&&(C.themeLight=e,P("themeLight",t),p.dispatch("themeLight",C.themeLight,t),!0)}function Ie(e,t){return!!(0,c.isConfigValueValid)("theme dark",e,["string"])&&(C.themeDark=e,P("themeDark",t),p.dispatch("themeDark",C.themeDark,t),!0)}function Ee(e,t){var o;if(!(0,c.isConfigValueValid)("random theme",e,[["off","on","fav","light","dark","custom"]]))return!1;if("custom"===e){if(!(null===h.Auth||void 0===h.Auth?void 0:h.Auth.currentUser))return C.randomTheme=e,!1;if(!u.getSnapshot())return!0;if(0===(null===(o=u.getSnapshot())||void 0===o?void 0:o.customThemes.length))return d.add("You need to create a custom theme first",0),C.randomTheme="off",!1}return C.randomTheme=e,P("randomTheme",t),p.dispatch("randomTheme",C.randomTheme),!0}function Fe(e,t){return!!(0,c.isConfigValueValid)("british english",e,["boolean"])&&(e||(e=!1),C.britishEnglish=e,P("britishEnglish",t),p.dispatch("britishEnglish",C.britishEnglish),!0)}function De(e,t){return!!(0,c.isConfigValueValid)("lazy mode",e,["boolean"])&&(e||(e=!1),C.lazyMode=e,P("lazyMode",t),p.dispatch("lazyMode",C.lazyMode,t),!0)}function Re(e,t){return!!(0,c.isConfigValueValid)("language",e,["string"])&&(C.language=e,m.log("changedLanguage",{language:e}),P("language",t),p.dispatch("language",C.language),!0)}function Ve(e,t){return!!(0,c.isConfigValueValid)("monkey",e,["boolean"])&&(C.monkey=e,P("monkey",t),p.dispatch("monkey",C.monkey),!0)}function qe(e,t){return!!(0,c.isConfigValueValid)("keymap mode",e,[["off","static","react","next"]])&&($(".activeKey").removeClass("activeKey"),$(".keymapKey").attr("style",""),C.keymapMode=e,P("keymapMode",t),p.dispatch("keymapMode",C.keymapMode,t),!0)}function Ke(e,t){return!!(0,c.isConfigValueValid)("keymap legend style",e,[["lowercase","uppercase","blank","dynamic"]])&&(["lowercase","uppercase","blank","dynamic"].forEach((e=>{$(".keymapLegendStyle").removeClass(e)})),e=e||"lowercase",$(".keymapKey > .letter").css("display",""),$(".keymapKey > .letter").css("text-transform",""),"uppercase"===e&&$(".keymapKey > .letter").css("text-transform","capitalize"),"blank"===e&&$(".keymapKey > .letter").css("display","none"),$(".keymapLegendStyle").addClass(e),C.keymapLegendStyle=e,P("keymapLegendStyle",t),p.dispatch("keymapLegendStyle",C.keymapLegendStyle),!0)}function He(e,t){return!!(0,c.isConfigValueValid)("keymap style",e,[["staggered","alice","matrix","split","split_matrix","steno","steno_matrix"]])&&(e=e||"staggered",C.keymapStyle=e,P("keymapStyle",t),p.dispatch("keymapStyle",C.keymapStyle),!0)}function Ne(e,t){return!!(0,c.isConfigValueValid)("keymap layout",e,["string"])&&(C.keymapLayout=e,P("keymapLayout",t),p.dispatch("keymapLayout",C.keymapLayout),!0)}function ze(e,t){return!!(0,c.isConfigValueValid)("keymapShowTopRow",e,[["always","layout","never"]])&&(C.keymapShowTopRow=e,P("keymapShowTopRow",t),p.dispatch("keymapShowTopRow",C.keymapShowTopRow),!0)}function Ue(e,t){return!!(0,c.isConfigValueValid)("layout",e,["string"])&&(C.layout=e,P("layout",t),p.dispatch("layout",C.layout,t),!0)}function Qe(e,t){return"string"==typeof e&&["1","125","15","2","3","4"].includes(e)&&(e="125"===e?1.25:"15"===e?1.5:parseInt(e)),!!(0,c.isConfigValueValid)("font size",e,["number"])&&(e<0&&(e=1),15==e&&(e=1.5),C.fontSize=e,$("#words, #caret, #paceCaret, #miniTimerAndLiveWpm").css("fontSize",e+"rem"),P("fontSize",t),p.dispatch("fontSize",C.fontSize,t),$(window).trigger("resize"),!0)}function Ge(e,t){return!!(0,c.isConfigValueValid)("custom background",e,["string"])&&(e=e.trim(),/(https|http):\/\/(www\.|).+\..+\/.+(\.png|\.gif|\.jpeg|\.jpg)/gi.test(e)&&!/[<> "]/.test(e)||""==e?(C.customBackground=e,P("customBackground",t),p.dispatch("customBackground",C.customBackground)):d.add("Invalid custom background URL",0),!0)}function Je(e,t){return r(this,void 0,void 0,(function*(){const o=e.trim();if(!(yield(0,c.isConfigValueValidAsync)("layoutfluid",o,["layoutfluid"])))return!1;const n=o.replace(/ /g,"#");return C.customLayoutfluid=n,P("customLayoutfluid",t),p.dispatch("customLayoutFluid",C.customLayoutfluid),!0}))}function Ye(e,t){return!!(0,c.isConfigValueValid)("custom background size",e,[["max","cover","contain"]])&&("cover"!=e&&"contain"!=e&&"max"!=e&&(e="cover"),C.customBackgroundSize=e,P("customBackgroundSize",t),p.dispatch("customBackgroundSize",C.customBackgroundSize),!0)}function Ze(e,t){return!!(0,c.isConfigValueValid)("custom background filter",e,["numberArray"])&&(C.customBackgroundFilter=e,P("customBackgroundFilter",t),p.dispatch("customBackgroundFilter",C.customBackgroundFilter),!0)}function Xe(e,t){return!!(0,c.isConfigValueValid)("monkey power level",e,[["off","1","2","3","4"]])&&(["off","1","2","3","4"].includes(e)||(e="off"),C.monkeyPowerLevel=e,P("monkeyPowerLevel",t),p.dispatch("monkeyPowerLevel",C.monkeyPowerLevel),!0)}function et(e,t){return!!(0,c.isConfigValueValid)("burst heatmap",e,["boolean"])&&(e||(e=!1),C.burstHeatmap=e,P("burstHeatmap",t),p.dispatch("burstHeatmap",C.burstHeatmap),!0)}function tt(e){if(!e)return;e=function(e){const t=e;return!0===t.quickTab&&(t.quickRestart="tab"),"boolean"==typeof t.smoothCaret&&(t.smoothCaret=t.smoothCaret?"medium":"off"),!0===t.swapEscAndTab&&(t.quickRestart="esc"),t}(e);const t=e;var o,n,i,a;Object.keys(f.default).forEach((e=>{if(void 0===t[e]){const o=f.default[e];t[e]=o}})),null!=t&&(Be(t.themeLight,!0),Ie(t.themeDark,!0),o=t.theme,n=t.customTheme,i=t.customThemeColors,a=t.autoSwitchTheme,!0,(0,c.isConfigValueValid)("themes",o,["string"])&&(9===i.length&&(n&&d.add("Missing sub alt color. Please edit it in the custom theme settings and save your changes.",0,{duration:7}),i.splice(4,0,"#000000")),C.customThemeColors=i,C.theme=o,C.customTheme=n,C.autoSwitchTheme=a,P("theme",true),p.dispatch("setThemes",n)),Je(t.customLayoutfluid,!0),Ge(t.customBackground,!0),Ye(t.customBackgroundSize,!0),Ze(t.customBackgroundFilter,!0),Oe(t.quickRestart,!0),Ce(t.showKeyTips,!0),_e(t.time,!0),Se(t.quoteLength,!0),Pe(t.words,!0),Re(t.language,!0),Ue(t.layout,!0),Qe(t.fontSize,!0),Ae(t.freedomMode,!0),le(t.caretStyle,!0),de(t.paceCaretStyle,!0),L(t.difficulty,!0),I(t.blindMode,!0),te(t.quickEnd,!0),ie(t.flipTestColors,!0),ae(t.colorfulMode,!0),je(t.confidenceMode,!0),Le(t.indicateTypos,!0),be(t.timerStyle,!0),we(t.timerColor,!0),$e(t.timerOpacity,!0),qe(t.keymapMode,!0),He(t.keymapStyle,!0),Ke(t.keymapLegendStyle,!0),Ne(t.keymapLayout,!0),ze(t.keymapShowTopRow,!0),Me(t.fontFamily,!0),xe(t.smoothCaret,!0),Te(t.smoothLineScroll,!0),pe(t.showLiveWpm,!0),fe(t.showLiveAcc,!0),he(t.showLiveBurst,!0),ce(t.showTimerProgress,!0),D(t.alwaysShowDecimalPlaces,!0),Y(t.alwaysShowWordsHistory,!0),Z(t.singleListCommandLine,!0),X(t.capsLockWarning,!0),M(t.playSoundOnError,!0),A(t.playSoundOnClick,!0),j(t.soundVolume,!0),F(t.stopOnError,!0),W(t.favThemes,!0),B(t.funbox,!0),Ee(t.randomTheme,!0),ee(t.showAllLines,!0),V(t.showOutOfFocusWarning,!0),q(t.paceCaret,!0),K(t.paceCaretCustomSpeed,!0),H(t.repeatedPace,!0),ue(t.pageWidth,!0),E(t.accountChart,!0),G(t.minBurst,!0),J(t.minBurstCustomSpeed,!0),N(t.minWpm,!0),z(t.minWpmCustomSpeed,!0),U(t.minAcc,!0),Q(t.minAccCustom,!0),k(t.numbers,!0),T(t.punctuation,!0),ge(t.highlightMode,!0),R(t.alwaysShowCPM,!0),ye(t.hideExtraLetters,!0),ke(t.startGraphsAtZero,!0),re(t.strictSpace,!0),se(t.oppositeShiftMode,!0),O(t.mode,!0),Ve(t.monkey,!0),ne(t.repeatQuotes,!0),Xe(t.monkeyPowerLevel,!0),et(t.burstHeatmap,!0),Fe(t.britishEnglish,!0),De(t.lazyMode,!0),me(t.showAverage,!0),ve(t.tapeMode,!0),oe(t.ads,!0),p.dispatch("configApplied",void 0,void 0,void 0,C))}function ot(){p.dispatch("fullConfigChange"),tt(f.default),x()}t.saveFullConfigToLocalStorage=x,t.setNumbers=k,t.setPunctuation=T,t.setMode=O,t.setPlaySoundOnError=M,t.setPlaySoundOnClick=A,t.setSoundVolume=j,t.setDifficulty=L,t.setFavThemes=W,t.setFunbox=B,t.toggleFunbox=function(e,t){if(!(0,c.isConfigValueValid)("funbox",e,["string"]))return!1;let o;const n=C.funbox.split("#");if("none"==n[0]&&n.splice(0,1),n.includes(e))o=n.indexOf(e),n.splice(o,1),0==n.length?C.funbox="none":C.funbox=n.join("#"),o=-o-1;else{if(!(0,y.canSetFunboxWithConfig)(e,C))return!1;n.push(e),C.funbox=n.sort().join("#"),o=n.indexOf(e)}return P("funbox",t),p.dispatch("funbox",C.funbox),o},t.setBlindMode=I,t.setAccountChart=E,t.setAccountChartAccuracy=function(e,t){return!!(0,c.isConfigValueValid)("account chart accuracy",e,["boolean"])&&(C.accountChart[0]=e?"on":"off",P("accountChart",t),p.dispatch("accountChart",C.accountChart),!0)},t.setAccountChartAvg10=function(e,t){return!!(0,c.isConfigValueValid)("account chart avg 10",e,["boolean"])&&(C.accountChart[1]=e?"on":"off",P("accountChart",t),p.dispatch("accountChart",C.accountChart),!0)},t.setAccountChartAvg100=function(e,t){return!!(0,c.isConfigValueValid)("account chart avg 100",e,["boolean"])&&(C.accountChart[2]=e?"on":"off",P("accountChart",t),p.dispatch("accountChart",C.accountChart),!0)},t.setStopOnError=F,t.setAlwaysShowDecimalPlaces=D,t.setAlwaysShowCPM=R,t.setShowOutOfFocusWarning=V,t.setPaceCaret=q,t.setPaceCaretCustomSpeed=K,t.setRepeatedPace=H,t.setMinWpm=N,t.setMinWpmCustomSpeed=z,t.setMinAcc=U,t.setMinAccCustom=Q,t.setMinBurst=G,t.setMinBurstCustomSpeed=J,t.setAlwaysShowWordsHistory=Y,t.setSingleListCommandLine=Z,t.setCapsLockWarning=X,t.setShowAllLines=ee,t.setQuickEnd=te,t.setAds=oe,t.setRepeatQuotes=ne,t.setFlipTestColors=ie,t.setColorfulMode=ae,t.setStrictSpace=re,t.setOppositeShiftMode=se,t.setPageWidth=ue,t.setCaretStyle=le,t.setPaceCaretStyle=de,t.setShowTimerProgress=ce,t.setShowLiveWpm=pe,t.setShowLiveAcc=fe,t.setShowLiveBurst=he,t.setShowAverage=me,t.setHighlightMode=ge,t.setTapeMode=ve,t.setHideExtraLetters=ye,t.setTimerStyle=be,t.setTimerColor=we,t.setTimerOpacity=$e,t.setKeyTips=Ce,t.setTimeConfig=_e,t.setQuoteLength=Se,t.setWordCount=Pe,t.setSmoothCaret=xe,t.setStartGraphsAtZero=ke,t.setSmoothLineScroll=Te,t.setQuickRestartMode=Oe,t.previewFontFamily=function(e){return!!(0,c.isConfigValueValid)("preview font family",e,["string"])&&(document.documentElement.style.setProperty("--font",'"'+e.replace(/_/g," ")+'", "Roboto Mono", "Vazirmatn"'),!0)},t.setFontFamily=Me,t.setFreedomMode=Ae,t.setConfidenceMode=je,t.setIndicateTypos=Le,t.setAutoSwitchTheme=function(e,t){return!!(0,c.isConfigValueValid)("auto switch theme",e,["boolean"])&&(e=null!=e?e:f.default.autoSwitchTheme,C.autoSwitchTheme=e,P("autoSwitchTheme",t),p.dispatch("autoSwitchTheme",C.autoSwitchTheme),!0)},t.setCustomTheme=We,t.setTheme=function(e,t){return!!(0,c.isConfigValueValid)("theme",e,["string"])&&(C.theme=e,!0===C.customTheme&&We(!1),P("theme",t),p.dispatch("theme",C.theme),!0)},t.setThemeLight=Be,t.setThemeDark=Ie,t.setRandomTheme=Ee,t.setBritishEnglish=Fe,t.setLazyMode=De,t.setCustomThemeColors=function(e,t){return!!(0,c.isConfigValueValid)("custom theme colors",e,["stringArray"])&&(9===e.length&&(d.add("Missing sub alt color. Please edit it in the custom theme settings and save your changes.",0,{duration:7}),e.splice(4,0,"#000000")),void 0!==e&&(C.customThemeColors=e),P("customThemeColors",t),p.dispatch("customThemeColors",C.customThemeColors,t),!0)},t.setLanguage=Re,t.setMonkey=Ve,t.setKeymapMode=qe,t.setKeymapLegendStyle=Ke,t.setKeymapStyle=He,t.setKeymapLayout=Ne,t.setKeymapShowTopRow=ze,t.setLayout=Ue,t.setFontSize=Qe,t.setCustomBackground=Ge,t.setCustomLayoutfluid=Je,t.setCustomBackgroundSize=Ye,t.setCustomBackgroundFilter=Ze,t.setMonkeyPowerLevel=Xe,t.setBurstHeatmap=et,t.apply=tt,t.reset=ot,t.loadFromLocalStorage=function(){console.log("loading localStorage config");const e=window.localStorage.getItem("config");let o;if(null!=e&&""!==e){try{o=JSON.parse(e)}catch(e){o={}}tt(o),t.localStorageConfig=o,x(!0)}else ot();w()},t.getConfigChanges=function(){const e={};return Object.keys(C).filter((e=>C[e]!=f.default[e])).forEach((t=>{e[t]=C[t]})),e},t.setConfig=function(e){C=e},t.loadPromise=new Promise((e=>{w=e})),t.default=C},2191:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default={theme:"serika_dark",themeLight:"serika",themeDark:"serika_dark",autoSwitchTheme:!1,customTheme:!1,customThemeColors:["#323437","#e2b714","#e2b714","#646669","#2c2e31","#d1d0c5","#ca4754","#7e2a33","#ca4754","#7e2a33"],favThemes:[],showKeyTips:!0,showLiveWpm:!1,showTimerProgress:!0,smoothCaret:"medium",quickRestart:"off",punctuation:!1,numbers:!1,words:50,time:30,mode:"time",quoteLength:[1],language:"english",fontSize:1.5,freedomMode:!1,resultFilters:null,difficulty:"normal",blindMode:!1,quickEnd:!1,caretStyle:"default",paceCaretStyle:"default",flipTestColors:!1,layout:"default",funbox:"none",confidenceMode:"off",indicateTypos:"off",timerStyle:"mini",colorfulMode:!1,randomTheme:"off",timerColor:"main",timerOpacity:"1",stopOnError:"off",showAllLines:!1,keymapMode:"off",keymapStyle:"staggered",keymapLegendStyle:"lowercase",keymapLayout:"overrideSync",keymapShowTopRow:"layout",fontFamily:"Roboto_Mono",smoothLineScroll:!1,alwaysShowDecimalPlaces:!1,alwaysShowWordsHistory:!1,singleListCommandLine:"manual",capsLockWarning:!0,playSoundOnError:!1,playSoundOnClick:"off",soundVolume:"0.5",startGraphsAtZero:!0,showOutOfFocusWarning:!0,paceCaret:"off",paceCaretCustomSpeed:100,repeatedPace:!0,pageWidth:"125",accountChart:["on","on","on"],minWpm:"off",minWpmCustomSpeed:100,highlightMode:"letter",alwaysShowCPM:!1,ads:"result",hideExtraLetters:!1,strictSpace:!1,minAcc:"off",minAccCustom:90,showLiveAcc:!1,showLiveBurst:!1,monkey:!1,repeatQuotes:"off",oppositeShiftMode:"off",customBackground:"",customBackgroundSize:"cover",customBackgroundFilter:[0,1,1,1,1],customLayoutfluid:"qwerty#dvorak#colemak",monkeyPowerLevel:"off",minBurst:"off",minBurstCustomSpeed:100,burstHeatmap:!1,britishEnglish:!1,lazyMode:!1,showAverage:"off",tapeMode:"off"}},8361:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultSnap=void 0,t.defaultSnap={results:void 0,personalBests:{time:{},words:{},quote:{},zen:{},custom:{}},name:"",customThemes:[],presets:[],tags:[],favouriteThemes:[],banned:void 0,verified:void 0,emailVerified:void 0,lbMemory:{time:{15:{english:0},60:{english:0}}},typingStats:{timeTyping:0,startedTests:0,completedTests:0},quoteRatings:void 0,quoteMod:!1,favoriteQuotes:{},addedAt:0,filterPresets:[],xp:0,inboxUnreadSize:0,streak:0,maxStreak:0,streakHourOffset:void 0}},3660:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.firebaseConfig=void 0,t.firebaseConfig={apiKey:"AIzaSyB5m_AnO575kvWriahcF1SFIWp8Fj3gQno",authDomain:"monkey-type.firebaseapp.com",databaseURL:"https://monkey-type.firebaseio.com",projectId:"monkey-type",storageBucket:"monkey-type.appspot.com",messagingSenderId:"789788471140",appId:"1:789788471140:web:7e31b15959d68ac0a51471",measurementId:"G-PFV65WPEWF"}},6643:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.IgnoredKeys=void 0,t.IgnoredKeys=["MediaTrackNext","MediaTrackPrevious","MediaPlayPause","AudioVolumeUp","AudioVolumeDown","AudioVolumeMute"]},73:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.ModifierKeys=void 0,t.ModifierKeys=["Alt","AltGraph","CapsLock","Control","Fn","FnLock","Hyper","Meta","OS","NumLock","ScrollLock","Scroll","Shift","Super","Symbol","SymbolLock"]},4674:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.signOut=t.addPasswordAuth=t.addGoogleAuth=t.signInWithGoogle=t.signIn=t.loadUser=t.getDataAndInit=t.sendVerificationEmail=t.gmailProvider=void 0;const u=s(o(7355)),l=a(o(3368)),d=a(o(6705)),c=d,p=a(o(5344)),f=a(o(3388)),h=a(o(8835)),m=a(o(2681)),g=a(o(6350)),v=a(o(3013)),y=a(o(9817)),b=a(o(5705)),w=a(o(7346)),C=a(o(1322)),_=a(o(4335)),S=a(o(2588)),P=a(o(1329)),x=a(o(5886)),k=a(o(9343)),T=a(o(7058)),O=a(o(9608)),M=a(o(7520)),A=a(o(6001)),j=o(522),L=o(6617),W=o(5701),B=o(5513),I=o(2428),E=o(3487),F=a(o(3285));let D,R=!1;function V(){return r(this,void 0,void 0,(function*(){if(void 0===L.Auth)return void l.add("Authentication uninitialized",-1,{duration:3});y.show();const e=yield u.default.users.verificationEmail();200!==e.status?(y.hide(),l.add("Failed to request verification email: "+e.message,-1)):(y.hide(),l.add("Verification email sent",1))}))}function q(){return r(this,void 0,void 0,(function*(){try{console.log("getting account data"),"/account"!==window.location.pathname?_.updateBar(90):_.updateBar(45),_.updateText("Downloading user data..."),yield _.showBar(),yield g.initSnapshot()}catch(e){const t=e;p.loading(!1),429===t.responseCode&&(l.add("Doing so will save you bandwidth, make the next test be ready faster and will not sign you out (which could mean your new personal best would not save to your account).",0,{duration:0}),l.add("You will run into this error if you refresh the website to restart the test. It is NOT recommended to do that. Instead, use tab + enter or just tab (with quick tab mode enabled) to restart the test.",0,{duration:0}));const o=t.message||t;return l.add("Failed to get user data: "+o,-1),$("#top #menu .account").css("opacity",1),!1}"loading"==w.get()?_.updateBar(100):_.updateBar(45),_.updateText("Applying settings...");const e=g.getSnapshot();if($("#menu .textButton.account > .text").text(e.name),(0,B.showFavoriteQuoteLength)(),P.loadTags(e.tags),Promise.all([f.getLanguageList(),f.getFunboxList()]).then((e=>{const[t,o]=e;t.forEach((e=>{P.defaultResultFilters.language[e]=!0})),o.forEach((e=>{P.defaultResultFilters.funbox[e.name]=!0})),P.load()})).catch((e=>{console.log(f.createErrorMessage(e,"Something went wrong while loading the filters"))})),e.needsToChangeName&&l.addBanner("Your name was reset. <a class='openNameChange'>Click here</a> to change it and learn more about why.",-1,void 0,!0,void 0,!0),c.changedBeforeDb)console.log("config changed before db"),p.loading(!1);else{if(null===c.localStorageConfig&&e.config)console.log("no local config, applying db"),p.loading(!1),c.apply(e.config),h.update(),c.saveFullConfigToLocalStorage(!0),v.restart({nosave:!0});else if(void 0!==e.config){let t=!1;Object.keys(d.default).forEach((o=>{var n,i;const a=o;if(!t)try{"resultFilters"!==a&&(Array.isArray(d.default[a])?d.default[a].forEach(((o,n)=>{var i;const r=(null===(i=null==e?void 0:e.config)||void 0===i?void 0:i[a])[n];o!=r&&(t=!0,console.log(`.config is different: ${o} != ${r}`))})):d.default[a]!=(null===(n=null==e?void 0:e.config)||void 0===n?void 0:n[a])&&(t=!0,console.log(`..config is different ${a}: ${d.default[a]} != ${null===(i=null==e?void 0:e.config)||void 0===i?void 0:i[a]}`)))}catch(e){console.log(e),t=!0,console.log("...config is different")}})),t&&(console.log("configs are different, applying config from db"),p.loading(!1),c.apply(e.config),h.update(),c.saveFullConfigToLocalStorage(!0),"test"==w.get()&&v.restart({nosave:!0}),p.loading(!0),g.saveConfig(d.default).then((()=>{p.loading(!1)})))}c.setDbConfigLoaded(!0)}return"pb"!==d.default.paceCaret&&"average"!==d.default.paceCaret||C.isActive||x.init(),p.loading(!1),(0,E.update)(),k.loadActiveFromLocalStorage(),h.showAccountSection(),"/account"===window.location.pathname&&(_.updateBar(90),yield M.downloadResults()),"/login"===window.location.pathname?(0,I.navigate)("/account"):(0,I.navigate)(),!0}))}function K(e){return r(this,void 0,void 0,(function*(){b.set(!1),p.loading(!0),!1===(yield q())&&U();const{discordId:t,discordAvatar:o,xp:n,inboxUnreadSize:i}=g.getSnapshot();if(p.update(n,t,o),A.setNotificationBubbleVisible(i>0),S.hidePreloader(),$("#top .signInOut .icon").html('<i class="fas fa-fw fa-sign-out-alt"></i>'),null!==v.notSignedInLastResult&&!R){v.setNotSignedInUid(e.uid);const t=yield u.default.results.save(v.notSignedInLastResult);if(200!==t.status)return l.add("Failed to save last result: "+t.message,-1);v.clearNotSignedInResult(),l.add("Last test result saved",1)}}))}function H(){return r(this,void 0,void 0,(function*(){if(void 0===L.Auth)return void l.add("Authentication uninitialized",-1);if(!F.get())return void l.add("You are offline",0,{duration:2});c.setChangedBeforeDb(!1),D(),S.showPreloader(),S.disableInputs(),S.disableSignUpButton(),S.disableSignInButton();const e=$(".pageLogin .login input")[0].value,t=$(".pageLogin .login input")[1].value;if(""===e||""===t)return l.add("Please fill in all fields",0),S.hidePreloader(),S.enableInputs(),S.enableSignUpButton(),void S.enableSignInButton();const o=$(".pageLogin .login #rememberMe input").prop("checked")?j.browserLocalPersistence:j.browserSessionPersistence;return yield(0,j.setPersistence)(L.Auth,o),(0,j.signInWithEmailAndPassword)(L.Auth,e,t).then((e=>r(this,void 0,void 0,(function*(){yield K(e.user)})))).catch((function(e){let t=e.message;"auth/wrong-password"===e.code?t="Incorrect password":"auth/user-not-found"===e.code?t="User not found":"auth/invalid-email"===e.code&&(t="Invalid email format (make sure you are using your email to login - not your username)"),l.add(t,-1),S.hidePreloader(),S.enableInputs(),S.enableSignInButton(),S.updateSignupButton()}))}))}function N(){return r(this,void 0,void 0,(function*(){if(void 0===L.Auth)return void l.add("Authentication uninitialized",-1,{duration:3});if(!F.get())return void l.add("You are offline",0,{duration:2});c.setChangedBeforeDb(!1),S.showPreloader(),S.disableInputs(),S.disableSignUpButton(),S.disableSignInButton(),D();const e=$(".pageLogin .login #rememberMe input").prop("checked")?j.browserLocalPersistence:j.browserSessionPersistence;yield(0,j.setPersistence)(L.Auth,e),(0,j.signInWithPopup)(L.Auth,t.gmailProvider).then((e=>r(this,void 0,void 0,(function*(){var t;(null===(t=(0,j.getAdditionalUserInfo)(e))||void 0===t?void 0:t.isNewUser)?(0,W.dispatch)(e,!0):yield K(e.user)})))).catch((e=>{let t=e.message;"auth/wrong-password"===e.code?t="Incorrect password":"auth/user-not-found"===e.code?t="User not found":"auth/invalid-email"===e.code?t="Invalid email format (make sure you are using your email to login - not your username)":"auth/popup-closed-by-user"===e.code&&(t="Popup closed by user"),l.add(t,-1),S.hidePreloader(),S.enableInputs(),S.enableSignInButton(),S.updateSignupButton()}))}))}function z(){return r(this,void 0,void 0,(function*(){void 0!==L.Auth?(y.show(),null!==L.Auth.currentUser&&(0,j.linkWithPopup)(L.Auth.currentUser,t.gmailProvider).then((function(){y.hide(),l.add("Google authentication added",1),h.updateAuthSections()})).catch((function(e){y.hide(),l.add("Failed to add Google authentication: "+e.message,-1)}))):l.add("Authentication uninitialized",-1,{duration:3})}))}function U(){void 0!==L.Auth?L.Auth.currentUser&&L.Auth.signOut().then((function(){l.add("Signed out",0,{duration:2}),m.clear(),h.hideAccountSection(),p.update(),(0,I.navigate)("/login"),g.setSnapshot(void 0),$(".pageLogin .button").removeClass("disabled"),$(".pageLogin input").prop("disabled",!1),$("#top .signInOut .icon").html('<i class="far fa-fw fa-user"></i>'),setTimeout((()=>{(0,B.hideFavoriteQuoteLength)()}),125)})).catch((function(e){l.add(e.message,-1)})):l.add("Authentication uninitialized",-1,{duration:3})}function Q(){return r(this,void 0,void 0,(function*(){if(void 0===L.Auth)return void l.add("Authentication uninitialized",-1,{duration:3});if(!F.get())return void l.add("You are offline",0,{duration:2});T.show();const e=yield T.promise;if(!e)return void l.add("Please complete the captcha",-1);S.disableInputs(),S.disableSignUpButton(),S.showPreloader();const t=$(".pageLogin .register input")[0].value,o=$(".pageLogin .register input")[1].value,n=$(".pageLogin .register input")[2].value,i=$(".pageLogin .register input")[3].value,a=$(".pageLogin .register input")[4].value;if(""===t||""===o||""===n||""===i)return S.hidePreloader(),S.enableInputs(),S.updateSignupButton(),void l.add("Please fill in all fields",0);if(!o.match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/))return l.add("Invalid email",0),S.hidePreloader(),S.enableInputs(),void S.updateSignupButton();if(o!==n)return l.add("Emails do not match",0),S.hidePreloader(),S.enableInputs(),void S.updateSignupButton();if(i!==a)return l.add("Passwords do not match",0),S.hidePreloader(),S.enableInputs(),void S.updateSignupButton();if(!f.isLocalhost()&&!f.isPasswordStrong(i))return l.add("Password must contain at least one capital letter, number, a special character and must be between 8 and 64 characters long",0,{duration:4}),S.hidePreloader(),S.enableInputs(),void S.updateSignupButton();let r;D();try{r=yield(0,j.createUserWithEmailAndPassword)(L.Auth,o,i);const n=yield u.default.users.create(t,e,o,r.user.uid);if(200!==n.status)throw n;if(yield(0,j.updateProfile)(r.user,{displayName:t}),yield V(),m.clear(),$("#menu .textButton.account .text").text(t),$(".pageLogin .button").removeClass("disabled"),$(".pageLogin input").prop("disabled",!1),S.hidePreloader(),yield K(r.user),null!==v.notSignedInLastResult&&(v.setNotSignedInUid(r.user.uid),200===(yield u.default.results.save(v.notSignedInLastResult)).status)){const e=v.notSignedInLastResult;g.saveLocalResult(e),g.updateLocalStats(1,e.testDuration+e.incompleteTestSeconds-e.afkDuration)}l.add("Account created",1)}catch(e){if(r){try{yield u.default.users.delete()}catch(e){}try{yield r.user.delete()}catch(e){}}console.log(e);const t=f.createErrorMessage(e,"Failed to create account");return l.add(t,-1),S.hidePreloader(),S.enableInputs(),S.updateSignupButton(),void U()}}))}t.gmailProvider=new j.GoogleAuthProvider,t.sendVerificationEmail=V,t.getDataAndInit=q,t.loadUser=K,L.Auth&&F.get()?D=null===L.Auth||void 0===L.Auth?void 0:L.Auth.onAuthStateChanged((function(e){return r(this,void 0,void 0,(function*(){const t=window.location.search,o=window.location.hash;console.log(`auth state changed, user ${!!e}`),console.debug(e),e?($("#top .signInOut .icon").html('<i class="fas fa-fw fa-sign-out-alt"></i>'),yield K(e)):($("#top .signInOut .icon").html('<i class="far fa-fw fa-user"></i>'),"/account"==window.location.pathname&&window.history.replaceState("","","/login"),b.set(!1)),e||(0,I.navigate)(),O.loadCustomThemeFromUrl(t),O.loadTestSettingsFromUrl(t),O.linkDiscord(o),/challenge_.+/g.test(window.location.pathname)&&l.add("Challenge links temporarily disabled. Please use the command line to load the challenge manually",0,{duration:7})}))})):($("#menu .signInOut").addClass("hidden"),$("document").ready((()=>r(void 0,void 0,void 0,(function*(){const e=window.location.search,t=window.location.hash;$("#top .signInOut .icon").html('<i class="far fa-fw fa-user"></i>'),"/account"==window.location.pathname&&window.history.replaceState("","","/login"),b.set(!1),(0,I.navigate)(),O.loadCustomThemeFromUrl(e),O.loadTestSettingsFromUrl(e),O.linkDiscord(t),/challenge_.+/g.test(window.location.pathname)&&l.add("Challenge links temporarily disabled. Please use the command line to load the challenge manually",0,{duration:7})}))))),t.signIn=H,t.signInWithGoogle=N,t.addGoogleAuth=z,t.addPasswordAuth=function(e,o){return r(this,void 0,void 0,(function*(){if(void 0===L.Auth)return void l.add("Authentication uninitialized",-1,{duration:3});y.show();const n=L.Auth.currentUser;if(null===n)return;if(n.providerData.find((e=>"google.com"===e.providerId)))try{yield(0,j.reauthenticateWithPopup)(n,t.gmailProvider)}catch(e){y.hide();const t=f.createErrorMessage(e,"Failed to reauthenticate");return l.add(t,-1)}const i=j.EmailAuthProvider.credential(e,o);(0,j.linkWithCredential)(n,i).then((function(){y.hide(),l.add("Password authentication added",1),h.updateAuthSections()})).catch((function(e){y.hide(),l.add("Failed to add password authentication: "+e.message,-1)}))}))},t.signOut=U,$(".pageLogin .login input").keyup((e=>{"Enter"===e.key&&(c.setChangedBeforeDb(!1),H())})),$(".pageLogin .login .button.signIn").on("click",(()=>{c.setChangedBeforeDb(!1),H()})),$(".pageLogin .login .button.signInWithGoogle").on("click",(()=>{c.setChangedBeforeDb(!1),N()})),$("#top .signInOut").on("click",(()=>{void 0!==L.Auth?L.Auth.currentUser?(U(),R=!0):(0,I.navigate)("/login"):l.add("Authentication uninitialized",-1,{duration:3})})),$(".pageLogin .register input").keyup((e=>{$(".pageLogin .register .button").hasClass("disabled")||"Enter"===e.key&&Q()})),$(".pageLogin .register .button").on("click",(()=>{$(".pageLogin .register .button").hasClass("disabled")||Q()})),$(".pageSettings #addGoogleAuth").on("click",(()=>r(void 0,void 0,void 0,(function*(){F.get()?z():l.add("You are offline",0,{duration:2})})))),$(".pageAccount").on("click",".sendVerificationEmail",(()=>{F.get()?V():l.add("You are offline",0,{duration:2})}))},1493:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.destroyResult=t.showConsentPopup=t.updateTestPageAds=t.renderResult=t.reinstate=t.checkCookieblocker=t.checkAdblock=t.refreshVisible=t.removeResult=t.removeOn=t.removeSellout=t.removeAll=t.init=t.choice=t.cookieBlocker=t.adBlock=void 0;const u=o(2189),l=a(o(3388)),d=a(o(1446)),c=a(o(6389)),p=s(o(6705)),f=a(o(1322)),h=a(o(4213)),m=a(o(6408));let g=!0,v=!0,y=!1;function b(){"eg"===t.choice?h.init():m.init(),setInterval((()=>{f.isActive||("eg"===t.choice?h.refreshVisible():m.refreshVisible())}),6e4),y=!0}function w(){C(),_(),S()}function C(){$("#ad-footer-wrapper").remove(),$("#ad-footer-small-wrapper").remove(),$("#ad-about-1-wrapper").remove(),$("#ad-about-1-small-wrapper").remove(),$("#ad-about-2-wrapper").remove(),$("#ad-about-2-small-wrapper").remove(),$("#ad-settings-1-wrapper").remove(),$("#ad-settings-1-small-wrapper").remove(),$("#ad-settings-2-wrapper").remove(),$("#ad-settings-2-small-wrapper").remove(),$("#ad-settings-3-wrapper").remove(),$("#ad-settings-3-small-wrapper").remove(),$("#ad-account-1-wrapper").remove(),$("#ad-account-1-small-wrapper").remove(),$("#ad-account-2-wrapper").remove(),$("#ad-account-2-small-wrapper").remove()}function _(){$("#ad-vertical-right-wrapper").remove(),$("#ad-vertical-left-wrapper").remove()}function S(){$("#ad-result-wrapper").remove(),$("#ad-result-small-wrapper").remove()}function P(){const e=$("#bannerCenter").height()+l.convertRemToPixels(2)+"px";$("#ad-vertical-left-wrapper").css("margin-top",e),$("#ad-vertical-right-wrapper").css("margin-top",e)}function x(e=!1){const o=g;g=window.innerWidth>900,e||"off"!==p.default.ads&&y&&o!==g&&("eg"===t.choice?h.reinstate():m.reinstate())}function k(e=!1){if("pw"!==t.choice)return;const o=v;v=window.innerWidth>1330,e||"off"!==p.default.ads&&y&&o!==v&&m.reinstate()}function T(){return r(this,void 0,void 0,(function*(){return new Promise((e=>{"eg"===t.choice?void 0===t.adBlock&&(void 0===window.egAdPack?t.adBlock=!0:t.adBlock=!1):"pw"===t.choice&&void 0===window.ramp&&(t.adBlock=!0),e()}))}))}function O(){return r(this,void 0,void 0,(function*(){return new Promise((e=>{if(void 0===t.cookieBlocker){if("pw"===t.choice)return t.cookieBlocker=!1,void e();if(void 0===window.__tcfapi)return t.cookieBlocker=!0,void e();window.__tcfapi("getTCData",2,((e,o)=>{o?"cmpuishown"===e.eventStatus?t.cookieBlocker=!0:t.cookieBlocker=!1:t.cookieBlocker=!0}))}e()}))}))}t.choice="eg",t.init=b,t.removeAll=w,t.removeSellout=C,t.removeOn=_,t.removeResult=S,t.refreshVisible=function(){return r(this,void 0,void 0,(function*(){"eg"===t.choice?yield h.refreshVisible():yield m.refreshVisible()}))},t.checkAdblock=T,t.checkCookieblocker=O,t.reinstate=function(){return r(this,void 0,void 0,(function*(){return"off"!==p.default.ads&&(y?(yield T(),yield O(),!t.adBlock&&!t.cookieBlocker&&("eg"===t.choice?h.reinstate():m.reinstate())):(b(),!0))}))},t.renderResult=function(){return r(this,void 0,void 0,(function*(){"off"!==p.default.ads&&(y||b(),yield T(),yield O(),t.adBlock?$("#ad-result-wrapper .iconAndText .text").html('\n    Using an ad blocker? No worries\n    <div class="smalltext">\n      We understand ads can be annoying\n      <br />\n      You can\n      <i>disable all ads</i>\n      in the settings\n    </div>\n    '):t.cookieBlocker?$("#ad-result-wrapper .iconAndText .text").html('\n    Ads not working? Ooops\n    <div class="smalltext">\n      You may have a cookie popup blocker enabled - ads will not show without your consent\n      <br />\n      You can also \n      <i>disable all ads</i>\n      in the settings if you wish\n    </div>\n    '):"eg"===t.choice?h.renderResult(g):m.renderResult())}))},t.updateTestPageAds=function(e){e?($("#ad-vertical-left-wrapper").removeClass("testPage"),$("#ad-vertical-right-wrapper").removeClass("testPage"),$("#ad-footer-wrapper").removeClass("testPage"),$("#ad-footer-small-wrapper").removeClass("testPage")):($("#ad-vertical-left-wrapper").addClass("testPage"),$("#ad-vertical-right-wrapper").addClass("testPage"),$("#ad-footer-wrapper").addClass("testPage"),$("#ad-footer-small-wrapper").addClass("testPage"))},t.showConsentPopup=function(){"eg"===t.choice?window.__tcfapi("displayConsentUi",2,(function(){})):ramp.showCmpModal()},t.destroyResult=function(){"pw"===t.choice&&m.destroyAll()};const M=(0,u.debounce)(500,P),A=(0,u.debounce)(500,x),j=(0,u.debounce)(500,k);$(window).on("resize",(()=>{M(),A(),j()})),d.subscribe(((e,t)=>{"ads"===e&&("off"==t?w():"result"==t?(C(),_()):"on"==t&&C())})),c.subscribe((()=>{P()})),$(document).ready((()=>{x(!0),k()})),window.onerror=function(e){"eg"===t.choice&&"string"==typeof e&&"EG APS"===e.substring(0,6)&&$("#ad-result-wrapper .iconAndText").addClass("withLeft")}},3326:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.activateAnalytics=t.log=t.Analytics=void 0;const i=o(5296),a=o(6617),r=o(3388);t.log=function(e,o){return n(this,void 0,void 0,(function*(){try{(0,i.logEvent)(t.Analytics,e,o)}catch(e){console.log("Analytics unavailable")}}))};const s=localStorage.getItem("acceptedCookies");let u;function l(){try{t.Analytics=(0,i.getAnalytics)(a.app),(0,i.setAnalyticsCollectionEnabled)(t.Analytics,!0),$("body").append('\n    <script\n    async\n    src="https://www.googletagmanager.com/gtag/js?id=UA-165993088-1"\n  ><\/script>\n  <script>\n    window.dataLayer = window.dataLayer || [];\n    function gtag() {\n      dataLayer.push(arguments);\n    }\n    gtag("js", new Date());\n\n    gtag("config", "UA-165993088-1");\n  <\/script>')}catch(e){console.error((0,r.createErrorMessage)(e,"Failed to activate analytics"))}}u=s?JSON.parse(s):null,null!==u&&!0===u.analytics&&l(),t.activateAnalytics=l},7401:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getById=t.getHTMLById=void 0;const o={1:{id:1,name:"Developer",description:"I made this",icon:"fa-laptop",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},2:{id:2,name:"Collaborator",description:"I helped make this",icon:"fa-code",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},3:{id:3,name:"Server Mod",description:"Discord server moderator",icon:"fa-hammer",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"},4:{id:4,name:"OG Account",description:"First 1000 users on the site",icon:"fa-baby",color:"var(--bg-color)",background:"var(--main-color)"},5:{id:5,name:"OG Discordian",description:"First 1000 Discord server members",icon:"fa-baby",color:"var(--bg-color)",background:"var(--main-color)"},6:{id:6,name:"Supporter",description:"Donated money",icon:"fa-heart",color:"var(--text-color)",background:"var(--sub-color)"},7:{id:7,name:"Sugar Daddy",description:"Donated a lot of money",icon:"fa-gem",color:"var(--bg-color)",background:"var(--main-color)"},8:{id:8,name:"Monkey Supporter",description:"Donated more money",icon:"fa-heart",color:"var(--bg-color)",background:"var(--main-color)"},9:{id:9,name:"White Hat",description:"Reported critical vulnerabilities on the site",icon:"fa-user-secret",color:"var(--bg-color)",background:"var(--main-color)"},10:{id:10,name:"Bug Hunter",description:"Reported bugs on the site",icon:"fa-bug",color:"var(--text-color)",background:"var(--sub-color)"},11:{id:11,name:"Content Creator",description:"Verified content creator",icon:"fa-video",color:"var(--text-color)",background:"var(--sub-color)"},12:{id:12,name:"Contributor",description:"Contributed to the site",icon:"fa-hands-helping",color:"var(--text-color)",background:"var(--sub-color)"},13:{id:13,name:"Mythical",description:"Yes, I'm actually this fast",icon:"fa-rocket",color:"white",customStyle:"animation: rgb-bg 10s linear infinite;"}};t.getHTMLById=function(e,t=!1,n=!1){const i=o[e];if(!i)return"";let a="";i.background&&(a+=`background: ${i.background};`),i.color&&(a+=`color: ${i.color};`),i.customStyle&&(a+=i.customStyle);const r=(t?i.name+": ":"")+i.description;let s="";return n||(s=`aria-label="${r}" data-balloon-pos="right"`),`<div class="badge" ${s} style="${a}">${i.icon?`<i class="fas ${i.icon}"></i>`:""}${t?"":`<div class="text">${i.name}</div>`}</div>`},t.getById=function(e){return o[e]}},6953:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getResponse=t.reset=t.render=void 0;const o={};t.render=function(e,t,n){if(void 0!==o[t]&&null!==o[t])return;const i=grecaptcha.render(e,{sitekey:"6Lc-V8McAAAAAJ7s6LGNe7MBZnRiwbsbiWts87aj",callback:n});o[t]=i},t.reset=function(e){void 0!==o[e]&&null!==o[e]&&grecaptcha.reset(o[e])},t.getResponse=function(e){return void 0===o[e]||null===o[e]?"":grecaptcha.getResponse(o[e])}},7567:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.setup=t.verify=t.clearActive=void 0;const s=a(o(3388)),u=a(o(3368)),l=a(o(2203)),d=a(o(8248)),c=a(o(2591)),p=a(o(6705)),f=p,h=a(o(8673)),m=a(o(1446)),g=a(o(1322)),v=a(o(9817));let y=!1;function b(){!g.activeChallenge||y||h.testRestarting||(u.add("Challenge cleared",0),g.setActiveChallenge(null))}t.clearActive=b,t.verify=function(e){var t,o;try{if(g.activeChallenge){const n=e.afkDuration/e.testDuration*100;if(n>10)return u.add("Challenge failed: AFK time is greater than 10%",0),null;if(g.activeChallenge.requirements){let i=!0;const a=[];for(const r in g.activeChallenge.requirements){if(0==i)return null;const s=g.activeChallenge.requirements[r];if("wpm"==r){const t=Object.keys(s)[0];"exact"==t?Math.round(e.wpm)!=s.exact&&(i=!1,a.push(`WPM not ${s.exact}`)):"min"==t&&e.wpm<s.min&&(i=!1,a.push(`WPM below ${s.min}`))}else if("acc"==r){const t=Object.keys(s)[0];"exact"==t?e.acc!=s.exact&&(i=!1,a.push(`Accuracy not ${s.exact}`)):"min"==t&&e.acc<s.min&&(i=!1,a.push(`Accuracy below ${s.min}`))}else if("afk"==r)"max"==Object.keys(s)[0]&&Math.round(n)>s.max&&(i=!1,a.push(`AFK percentage above ${s.max}`));else if("time"==r)"min"==Object.keys(s)[0]&&Math.round(e.testDuration)<s.min&&(i=!1,a.push(`Test time below ${s.min}`));else if("funbox"==r){const n=s.exact.toString().split("#").sort().join("#");if(n!=e.funbox){i=!1;for(const o of n.split("#"))null==(null===(t=e.funbox)||void 0===t?void 0:t.split("#").find((e=>e==o)))&&a.push(`${o} funbox not active`);if(null===(o=e.funbox)||void 0===o?void 0:o.split("#"))for(const t of e.funbox.split("#"))null==n.split("#").find((e=>e==t))&&a.push(`${t} funbox active`)}}else if("raw"==r)"exact"==Object.keys(s)[0]&&Math.round(e.rawWpm)!=s.exact&&(i=!1,a.push(`Raw WPM not ${s.exact}`));else if("con"==r)"exact"==Object.keys(s)[0]&&Math.round(e.consistency)!=s.exact&&(i=!1,a.push(`Consistency not ${s.exact}`));else if("config"==r)for(const e in s){const t=s[e];p.default[e]!=t&&(i=!1,a.push(`${e} not set to ${t}`))}}return i?(g.activeChallenge.autoRole&&u.add("You will receive a role shortly. Please don't post a screenshot in challenge submissions.",1,{duration:5}),u.add(`${g.activeChallenge.display} challenge passed!`,1),g.activeChallenge.name):(u.add(`${g.activeChallenge.display} challenge failed: ${a.join(", ")}`,0),null)}return u.add(`${g.activeChallenge.display} challenge passed!`,1),g.activeChallenge.name}return null}catch(e){return console.error(e),u.add(`Something went wrong when verifying challenge: ${e.message}`,0),null}},t.setup=function(e){return r(this,void 0,void 0,(function*(){let t;y=!0,f.setFunbox("none");try{t=yield s.getChallengeList()}catch(e){const t=s.createErrorMessage(e,"Failed to setup challenge");return u.add(t,-1),l.set(),setTimeout((()=>{$("#top .config").removeClass("hidden"),$(".page.pageTest").removeClass("hidden")}),250),!1}const o=t.filter((t=>t.name===e))[0];let n;try{if(void 0===o)return u.add("Challenge not found",0),l.set(),setTimeout((()=>{$("#top .config").removeClass("hidden"),$(".page.pageTest").removeClass("hidden")}),250),!1;if("customTime"===o.type)f.setTimeConfig(o.parameters[0],!0),f.setMode("time",!0),f.setDifficulty("normal",!0),"englishMaster"===o.name&&(f.setLanguage("english_10k",!0),f.setNumbers(!0,!0),f.setPunctuation(!0,!0));else if("customWords"===o.type)f.setWordCount(o.parameters[0],!0),f.setMode("words",!0),f.setDifficulty("normal",!0);else if("customText"===o.type)d.setDelimiter(" "),d.setPopupTextareaState(o.parameters[0]),d.setText(o.parameters[0].split(" ")),d.setIsTimeRandom(!1),d.setIsSectionRandom(!1),d.setIsWordRandom(o.parameters[1]),d.setWord(o.parameters[2]),d.setTime(-1),f.setMode("custom",!0),f.setDifficulty("normal",!0);else if("script"===o.type){v.show();const e=yield fetch("/challenges/"+o.parameters[0]);if(v.hide(),200!==e.status)throw new Error(`${e.status} ${e.statusText}`);let t=(yield e.text()).trim();t=t.replace(/[\n\r\t ]/gm," "),t=t.replace(/ +/gm," "),d.setDelimiter(" "),d.setPopupTextareaState(t),d.setText(t.split(" ")),d.setIsWordRandom(!1),d.setIsSectionRandom(!1),d.setIsTimeRandom(!1),d.setTime(-1),d.setWord(-1),f.setMode("custom",!0),f.setDifficulty("normal",!0),null!=o.parameters[1]&&f.setTheme(o.parameters[1]),null!=o.parameters[2]&&c.activate(o.parameters[2])}else"accuracy"===o.type?(f.setTimeConfig(0,!0),f.setMode("time",!0),f.setDifficulty("master",!0)):"funbox"===o.type?(f.setFunbox(o.parameters[0],!0),f.setDifficulty("normal",!0),"words"===o.parameters[1]?f.setWordCount(o.parameters[2],!0):"time"===o.parameters[1]&&f.setTimeConfig(o.parameters[2],!0),f.setMode(o.parameters[1],!0),void 0!==o.parameters[3]&&f.setDifficulty(o.parameters[3],!0)):"special"===o.type&&"semimak"===o.name&&(f.setMode("time",!0),f.setTimeConfig(120,!0),f.setLanguage("english_10k",!0),f.setPunctuation(!0,!0),f.setStopOnError("word",!0),f.setLayout("semimak",!0),f.setKeymapLayout("overrideSync",!0),f.setKeymapMode("static",!0));return l.set(),n=o.message,$("#top .config").removeClass("hidden"),$(".page.pageTest").removeClass("hidden"),void 0===n?u.add(`Challenge '${o.display}' loaded.`,0):u.add("Challenge loaded. "+n,0),g.setActiveChallenge(o),y=!1,!0}catch(e){return u.add(s.createErrorMessage(e,"Failed to load challenge"),-1),!1}}))},m.subscribe((e=>{["difficulty","numbers","punctuation","mode","funbox","paceCaret","showAllLines","showLiveWpm","highlightMode","time","words","keymapMode","keymapLayout","layout"].includes(e)&&b()}))},1833:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateAllChartColors=t.setDefaultFontFamily=t.updateColors=t.updateAccountChartButtons=t.miniResult=t.globalSpeedHistogram=t.accountHistogram=t.accountActivity=t.accountHistory=t.accountHistoryActiveIndex=t.result=void 0;const u=o(3328),l=s(o(2341)),d=s(o(6679)),c=a(o(7346));u.Chart.register(u.BarController,u.BarElement,u.CategoryScale,u.Filler,u.LinearScale,u.LineController,u.LineElement,u.PointElement,u.ScatterController,u.TimeScale,u.TimeSeriesScale,u.Tooltip,d.default,l.default),u.Chart.defaults.animation.duration=0,u.Chart.defaults.elements.line.tension=.3,u.Chart.defaults.elements.line.fill="origin",o(6980);const p=s(o(9546)),f=s(o(6705)),h=a(o(4203)),m=a(o(1446)),g=a(o(4897)),v=a(o(3388));class y extends u.Chart{constructor(e,t){super(e,t)}updateColors(){S(this)}}function b(e,t){e?$(`.pageAccount ${t}`).addClass("active"):$(`.pageAccount ${t}`).removeClass("active")}function w(e=!0){const o="on"===f.default.accountChart[0];b(o,".toggleAccuracyOnChart"),t.accountHistory.data.datasets[2].hidden=!o,t.accountHistory.data.datasets[4].hidden=!o,t.accountHistory.data.datasets[6].hidden=!o,t.accountHistory.options.scales.acc.display=o,e&&t.accountHistory.updateColors()}function C(e=!0){const o="on"===f.default.accountChart[0],n="on"===f.default.accountChart[1];b(n,".toggleAverage10OnChart"),o?(t.accountHistory.data.datasets[3].hidden=!n,t.accountHistory.data.datasets[4].hidden=!n):t.accountHistory.data.datasets[3].hidden=!n,e&&t.accountHistory.updateColors()}function _(e=!0){const o="on"===f.default.accountChart[0],n="on"===f.default.accountChart[2];b(n,".toggleAverage100OnChart"),o?(t.accountHistory.data.datasets[5].hidden=!n,t.accountHistory.data.datasets[6].hidden=!n):t.accountHistory.data.datasets[5].hidden=!n,e&&t.accountHistory.updateColors()}function S(e){return r(this,void 0,void 0,(function*(){const t=yield h.get("bg"),o=yield h.get("sub"),n=yield h.get("main"),i=yield h.get("error"),a=yield h.get("text");if(e.data.datasets[0].borderColor=e=>{var t;return(null===(t=e.raw)||void 0===t?void 0:t.isPb)?a:n},e.data.datasets[1]&&(e.data.datasets[1].borderColor=o),e.data.datasets[2]&&(e.data.datasets[2].borderColor=i),void 0===e.data.datasets[0].type?"line"===e.config.type?e.data.datasets[0].pointBackgroundColor=e=>{var t;return(null===(t=e.raw)||void 0===t?void 0:t.isPb)?a:n}:"bar"===e.config.type&&(e.data.datasets[0].backgroundColor=n):"bar"===e.data.datasets[0].type?e.data.datasets[0].backgroundColor=n:"line"===e.data.datasets[0].type&&(e.data.datasets[0].pointBackgroundColor=n),e.data.datasets[1]&&(void 0===e.data.datasets[1].type?"line"===e.config.type?e.data.datasets[1].pointBackgroundColor=o:"bar"===e.config.type&&(e.data.datasets[1].backgroundColor=o):"bar"===e.data.datasets[1].type?e.data.datasets[1].backgroundColor=o:"line"===e.data.datasets[1].type&&(e.data.datasets[1].pointBackgroundColor=o)),2===e.data.datasets.length&&(e.data.datasets[1].borderColor=()=>o),7===e.data.datasets.length){e.data.datasets[2].borderColor=()=>o;const i="on"===f.default.accountChart[1],r="on"===f.default.accountChart[2],s=v.blendTwoHexColors(t,a,.2),u=v.blendTwoHexColors(t,n,.2),l=v.blendTwoHexColors(t,n,.4),d=v.blendTwoHexColors(t,o,.2),c=v.blendTwoHexColors(t,o,.4),[p,h,m,g,y,b,w]=e.data.datasets;i&&r?(p.pointBackgroundColor=u,h.borderColor=s,m.pointBackgroundColor=d,g.borderColor=l,y.borderColor=c,b.borderColor=n,w.borderColor=o):i&&!r||!i&&r?(h.borderColor=s,p.pointBackgroundColor=l,m.pointBackgroundColor=c,g.borderColor=n,b.borderColor=n,y.borderColor=o,w.borderColor=o):(h.borderColor=s,p.pointBackgroundColor=n,m.pointBackgroundColor=o)}const r=e.options;Object.keys(r.scales).forEach((e=>{const t=r.scales[e];t.ticks.color=o,t.title.color=o}));try{e.data.datasets[0].trendlineLinear.style=o}catch(e){}e.options.plugins.annotation.annotations.forEach((e=>{"funbox-label"!==e.id&&(e.borderColor=o),e.label.backgroundColor=o,e.label.color=t})),e.update("none")}))}function P(e){u.Chart.defaults.font.family=e.replace(/_/g," ")}t.result=new y($("#wpmChart"),{type:"line",data:{labels:[],datasets:[{clip:!1,label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"wpm",order:2,pointRadius:2},{clip:!1,label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"raw",order:3,pointRadius:2},{clip:!1,label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:3},pointHoverRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:5}}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{axis:"y",display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1,callbacks:{afterLabel:function(e){try{$(".wordInputAfter").remove();const t=g.keypressPerSecond[parseInt(e.label)-1].words;[...new Set(t)].forEach((e=>{const t=$($("#resultWordsHistory .words .word")[e]),o=t.attr("input");null!=o&&t.append(`<div class="wordInputAfter">${o.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt")}</div>`)}))}catch(e){}return""}}}}}}),t.accountHistory=new y($(".pageAccount #accountHistoryChart"),{type:"line",data:{datasets:[{yAxisID:"wpm",data:[],fill:!1,borderWidth:0,order:3},{yAxisID:"pb",data:[],fill:!1,stepped:!0,pointRadius:0,pointHoverRadius:0,order:4},{yAxisID:"acc",fill:!1,data:[],pointStyle:"triangle",borderWidth:0,pointRadius:3.5,order:3},{yAxisID:"wpmAvgTen",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:2},{yAxisID:"accAvgTen",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:2},{yAxisID:"wpmAvgHundred",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:1},{yAxisID:"accAvgHundred",label:"accAvgHundred",data:[],fill:!1,pointRadius:0,pointHoverRadius:0,order:1}]},options:{maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",type:"linear",reverse:!0,min:0,ticks:{stepSize:10},display:!1,grid:{display:!1}},wpm:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!0,title:{display:!0,text:"Words per Minute"},position:"right"},pb:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!1},acc:{axis:"y",beginAtZero:!0,min:0,max:100,reverse:!0,ticks:{stepSize:10},display:!0,title:{display:!0,text:"Accuracy"},grid:{display:!1},position:"left"},wpmAvgTen:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!1,grid:{display:!1}},accAvgTen:{axis:"y",beginAtZero:!0,min:0,max:100,reverse:!0,ticks:{stepSize:10},display:!1,grid:{display:!1}},wpmAvgHundred:{axis:"y",beginAtZero:!0,min:0,ticks:{stepSize:10},display:!1,grid:{display:!1}},accAvgHundred:{axis:"y",beginAtZero:!0,min:0,max:100,reverse:!0,ticks:{stepSize:10},display:!1,grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},enabled:!0,intersect:!1,external:function(e){e&&(e.tooltip.options.displayColors=!1)},filter:function(e){return 1!==e.datasetIndex&&3!==e.datasetIndex&&4!==e.datasetIndex&&5!==e.datasetIndex&&6!==e.datasetIndex},callbacks:{title:function(){return""},beforeLabel:function(e){if(0!==e.datasetIndex){const t=e.dataset.data[e.dataIndex];return`error rate: ${v.roundTo2(t.errorRate)}%\nacc: ${v.roundTo2(100-t.errorRate)}%`}const t=e.dataset.data[e.dataIndex];let o=`${f.default.alwaysShowCPM?"cpm":"wpm"}: ${t.wpm}\nraw: ${t.raw}\nacc: ${t.acc}\n\nmode: ${t.mode} `;("time"==t.mode||"words"==t.mode)&&(o+=t.mode2);let n=t.difficulty;return null==n&&(n="normal"),o+=`\ndifficulty: ${n}`,o+=`\npunctuation: ${t.punctuation}\nlanguage: ${t.language}`+(t.isPb?"\n\nnew personal best":"")+"\n\n"+`date: ${(0,p.default)(new Date(t.timestamp),"dd MMM yyyy HH:mm")}`,o},label:function(){return""},afterLabel:function(e){return t.accountHistoryActiveIndex=e.dataIndex,""}}}}}}),t.accountActivity=new y($(".pageAccount #accountActivityChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Seconds",data:[],trendlineLinear:{style:"rgba(255,105,180, .8)",lineStyle:"dotted",width:2},order:3},{yAxisID:"avgWpm",label:"Average Wpm",data:[],type:"line",order:2,tension:0,fill:!1}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},type:"time",time:{unit:"day",displayFormats:{day:"d MMM"}},bounds:"ticks",display:!0,title:{display:!1,text:"Date"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,title:{display:!0,text:"Time Typing"}},avgWpm:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,position:"right",title:{display:!0,text:"Average Wpm"},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},intersect:!1,mode:"index",callbacks:{title:function(e){const t=e[0].dataset.data[e[0].dataIndex];return(0,p.default)(new Date(t.x),"dd MMM yyyy")},beforeLabel:function(e){const t=e.dataset.data[e.dataIndex];switch(e.datasetIndex){case 0:return`Time Typing: ${v.secondsToString(Math.round(t.y),!0,!0)}\nTests Completed: ${t.amount}`;case 1:return`Average ${f.default.alwaysShowCPM?"Cpm":"Wpm"}: ${v.roundTo2(t.y)}`;default:return""}},label:function(){return""}}}}}}),t.accountHistogram=new y($(".pageAccount #accountHistogramChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Tests",data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",bounds:"ticks",display:!0,title:{display:!1,text:"Bucket"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,title:{display:!0,text:"Tests"}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},intersect:!1,mode:"index"}}}}),t.globalSpeedHistogram=new y($(".pageAbout #publicStatsHistogramChart"),{type:"bar",data:{labels:[],datasets:[{yAxisID:"count",label:"Users",data:[]}]},options:{responsive:!0,maintainAspectRatio:!1,hover:{mode:"nearest",intersect:!1},scales:{x:{axis:"x",bounds:"ticks",display:!0,title:{display:!1,text:"Bucket"},offset:!0},count:{axis:"y",beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20,stepSize:10},display:!0,title:{display:!0,text:"Users"}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},intersect:!1,mode:"index"}}}}),t.miniResult=new y($(".pageAccount #miniResultChart"),{type:"line",data:{labels:[],datasets:[{label:"wpm",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"wpm",order:2,pointRadius:2},{label:"raw",data:[],borderColor:"rgba(125, 125, 125, 1)",borderWidth:2,yAxisID:"raw",order:3,pointRadius:2},{label:"errors",data:[],borderColor:"rgba(255, 125, 125, 1)",pointBackgroundColor:"rgba(255, 125, 125, 1)",borderWidth:2,order:1,yAxisID:"error",type:"scatter",pointStyle:"crossRot",pointRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:3},pointHoverRadius:function(e){const t=e.dataIndex,o=e.dataset.data[t];return(null!=o?o:0)<=0?0:5}}]},options:{responsive:!0,maintainAspectRatio:!1,scales:{x:{axis:"x",ticks:{autoSkip:!0,autoSkipPadding:20},display:!0,title:{display:!1,text:"Seconds"}},wpm:{axis:"y",display:!0,title:{display:!0,text:"Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!0}},raw:{axis:"y",display:!1,title:{display:!0,text:"Raw Words per Minute"},beginAtZero:!0,min:0,ticks:{autoSkip:!0,autoSkipPadding:20},grid:{display:!1}},error:{display:!0,position:"right",title:{display:!0,text:"Errors"},beginAtZero:!0,ticks:{precision:0,autoSkip:!0,autoSkipPadding:20},grid:{display:!1}}},plugins:{annotation:{annotations:[]},tooltip:{animation:{duration:250},mode:"index",intersect:!1}}}}),t.updateAccountChartButtons=function(){w(!1),C(!1),_(!1)},t.updateColors=S,t.setDefaultFontFamily=P,t.updateAllChartColors=function(){h.update(),t.accountHistory.updateColors(),t.accountHistogram.updateColors(),t.globalSpeedHistogram.updateColors(),t.result.updateColors(),t.accountActivity.updateColors(),t.miniResult.updateColors()},m.subscribe(((e,t)=>{"accountChart"===e&&"account"===c.get()&&(w(),C(),_()),"fontFamily"===e&&P(t)}))},4213:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.refreshVisible=t.reinstate=t.renderResult=t.init=void 0,t.init=function(){$("head").append("<script>\n  !function(e){var s=new XMLHttpRequest;s.open(\"GET\",\"https://api.enthusiastgaming.net/scripts/cdn.enthusiast.gg/script/eg-aps/release/eg-aps-bootstrap-v2.0.0.bundle.js?site=monkeytype.com\",!0),s.onreadystatechange=function(){var t;4==s.readyState&&(200<=s.status&&s.status<300||304==s.status)&&((t=e.createElement(\"script\")).type=\"text/javascript\",t.text=s.responseText,e.head.appendChild(t))},s.send(null)}(document);\n  (function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\n    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\n  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n  })(window,document,'script','dataLayer','GTM-W7WN5QV');\n  <\/script>"),$("body").prepend('<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W7WN5QV"\n  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>')},t.renderResult=function(e){e?window.egAps.render(["ad-result","ad-vertical-left","ad-vertical-right","ad-footer"]):window.egAps.render(["ad-result-small","ad-vertical-left","ad-vertical-right","ad-footer-small"])},t.reinstate=function(){try{return window.egAps.reinstate(),!0}catch(e){return console.error(e),!1}},t.refreshVisible=function(){return o(this,void 0,void 0,(function*(){}))}},8553:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=a(o(3013)),l=a(o(8673)),d=a(o(2474)),c=a(o(7353)),p=s(o(6705)),f=a(o(3388)),h=a(o(2331)),m=a(o(8700)),g=a(o(2591)),v=a(o(5929)),y=a(o(4292)),b=a(o(2203)),w=a(o(8248)),C=a(o(4583)),_=a(o(5886)),S=a(o(8824)),P=a(o(8911)),x=a(o(5578)),k=a(o(4626)),T=a(o(6578)),O=a(o(3368)),M=a(o(5708)),A=a(o(7346)),j=a(o(1322)),L=a(o(8526)),W=a(o(4897)),B=a(o(9470)),I=a(o(6943)),E=a(o(7717)),F=o(2428),D=a(o(732)),R=a(o(8835)),V=a(o(5368)),q=o(6643),K=o(73);let H,N=!1,z=!0,U=!1;const Q=document.getElementById("wordsInput"),G=document.getElementById("koInputVisual");function J(e){e!==Q.value&&(Q.value=e)}function Y(){var e;const t=f.roundTo2(d.calculateAccuracy());if(isNaN(t)||h.update(t),"next"===p.default.keymapMode&&"zen"!==p.default.mode)if(p.default.language.startsWith("korean")){const t=I.disassemble(B.words.getCurrent(),!0),o=I.disassemble(W.input.current,!0),n=o.length-1;if(o[n]){const i=o[n].length;try{const a=null!==(e=t[n][i])&&void 0!==e?e:t[o.length][i-t[n].length];V.highlight(a)}catch(e){V.highlight("")}}else V.highlight(t[0][0])}else V.highlight(B.words.getCurrent().charAt(W.input.current.length).toString())}function Z(){var e;if(j.isActive&&0!==W.input.history.length&&0!==l.currentWordElementIndex&&(W.input.history[B.words.currentIndex-1]!=B.words.get(B.words.currentIndex-1)||p.default.freedomMode)&&!$($(".word")[B.words.currentIndex-1]).hasClass("hidden")&&"on"!==p.default.confidenceMode&&"max"!==p.default.confidenceMode){if(W.input.current=W.input.popHistory(),W.corrected.popHistory(),D.get(p.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("nospace")}))&&(W.input.current=W.input.current.slice(0,-1),J(" "+W.input.current+" ")),B.words.decreaseCurrentIndex(),l.setCurrentWordElementIndex(l.currentWordElementIndex-1),l.updateActiveElement(!0),g.toggleScript(B.words.getCurrent()),l.updateWordElement(),"zen"===p.default.mode){S.update();const t=(null===(e=document.querySelector("#words"))||void 0===e?void 0:e.children)||[];for(let e=t.length-1;e>=0&&t[e].classList.contains("newline");e--)t[e].remove()}y.updatePosition(),k.addReplayEvent("backWord")}}function X(){var e,t;if(!j.isActive)return;if(""===W.input.current)return;"zen"==p.default.mode&&($("#words .word.active").removeClass("active"),$("#words").append("<div class='word active'></div>"));const o=B.words.getCurrent();for(const t of D.get(p.default.funbox))(null===(e=t.functions)||void 0===e?void 0:e.handleSpace)&&t.functions.handleSpace();null===(t=R.groups.layout)||void 0===t||t.updateInput(),N=!0;const n=d.calculateBurst();m.update(Math.round(n)),W.pushBurstToHistory(n);const i=void 0!==D.get(p.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("nospace")})),a=o===W.input.current||"zen"==p.default.mode;if(T.addPower(a,!0),W.incrementAccuracy(a),a)_.handleSpace(!0,o),W.input.pushHistory(),B.words.increaseCurrentIndex(),l.setCurrentWordElementIndex(l.currentWordElementIndex+1),l.updateActiveElement(),g.toggleScript(B.words.getCurrent()),y.updatePosition(),W.incrementKeypressCount(),W.pushKeypressWord(B.words.currentIndex),i||v.playClick(),k.addReplayEvent("submitCorrectWord");else{i||(!p.default.playSoundOnError||p.default.blindMode?v.playClick():v.playError()),W.pushMissedWord(B.words.getCurrent()),W.incrementKeypressErrors();const e=W.input.current.length;if(e<=B.words.getCurrent().length&&(e>=W.corrected.current.length?W.corrected.current+="_":W.corrected.current=W.corrected.current.substring(0,e)+"_"+W.corrected.current.substring(e+1)),"off"!=p.default.stopOnError)return"expert"==p.default.difficulty||"master"==p.default.difficulty?void u.fail("difficulty"):void("word"==p.default.stopOnError&&(N=!1,k.addReplayEvent("incorrectLetter","_"),l.updateWordElement(!0),y.updatePosition()));if(_.handleSpace(!1,o),p.default.blindMode&&"off"!==p.default.highlightMode&&$("#words .word.active letter").addClass("correct"),W.input.pushHistory(),l.highlightBadWord(l.currentWordElementIndex,!p.default.blindMode),B.words.increaseCurrentIndex(),l.setCurrentWordElementIndex(l.currentWordElementIndex+1),l.updateActiveElement(),g.toggleScript(B.words.getCurrent()),y.updatePosition(),W.incrementKeypressCount(),W.pushKeypressWord(B.words.currentIndex),"expert"==p.default.difficulty||"master"==p.default.difficulty)return void u.fail("difficulty");if(B.words.currentIndex===B.words.length)return void u.finish();k.addReplayEvent("submitErrorWord")}let r;W.updateLastKeypress(),r="zen"===p.default.mode?W.input.current.length:B.words.getCurrent().length;const s=f.whorf(p.default.minBurstCustomSpeed,r);if("fixed"===p.default.minBurst&&n<p.default.minBurstCustomSpeed||"flex"===p.default.minBurst&&n<s)u.fail("min burst");else{if(W.corrected.pushHistory(),!p.default.showAllLines||"time"==p.default.mode||w.isWordRandom&&0===w.word||w.isTimeRandom){const e=Math.floor(document.querySelectorAll("#words .word")[l.currentWordElementIndex-1].offsetTop);let t;try{t=Math.floor(document.querySelectorAll("#words .word")[l.currentWordElementIndex].offsetTop)}catch(e){t=0}t>e&&l.lineJump(e)}"react"===p.default.keymapMode&&V.flash(" ",!0),"words"!==p.default.mode&&"custom"!==p.default.mode&&"quote"!==p.default.mode&&"zen"!==p.default.mode||S.update(),"time"!=p.default.mode&&"words"!=p.default.mode&&"custom"!=p.default.mode&&"quote"!=p.default.mode||u.addWord()}}function ee(e,t,o){var n,i,a,r,s;if(l.resultCalculating||l.resultVisible)return;W.spacingDebug&&console.log("handleChar",e,t,o);const d=performance.now(),c=W.input.getKoreanStatus();if(""===e){for(let e=0;e<3;e++)ee(".",t+e);return}for(const t of D.get(p.default.funbox))(null===(n=t.functions)||void 0===n?void 0:n.handleChar)&&(e=t.functions.handleChar(e));const f=void 0!==D.get(p.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("nospace")}));if("\n"!==e&&"\t"!==e&&/\s/.test(e)){if(f)return;if(X(),!("normal"!==p.default.difficulty||p.default.strictSpace&&"zen"!==p.default.mode||"word"===p.default.stopOnError&&t>0))return;if(N)return void(N=!1)}if("zen"!==p.default.mode&&"\n"!==B.words.getCurrent()[t]&&"\n"===e)return;if(!j.isActive&&!u.startTest(d))return;P.set(!0),y.stopAnimation();const h=function(e,t){var o;if(!z)return!1;if("zen"==p.default.mode)return!0;if(W.input.getKoreanStatus())return I.disassemble(B.words.getCurrent())[t]===e;const n=B.words.getCurrent()[t];if(n===e)return!0;const i=D.get(p.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.isCharCorrect}));return(null===(o=null==i?void 0:i.functions)||void 0===o?void 0:o.isCharCorrect)?i.functions.isCharCorrect(e,n):!((!p.default.language.startsWith("russian")||""!==e&&""!==e&&"e"!==e||""!==n&&""!==n&&"e"!==n)&&(""!==e&&""!==e&&"'"!==e&&""!==e||""!==n&&""!==n&&"'"!==n&&""!==n)&&('"'!==e&&""!==e&&""!=e&&""!==e||'"'!==n&&""!==n&&""!==n&&""!==n)&&(""!==e&&""!==e&&"-"!==e||"-"!==n&&""!==n&&""!==n))}(e,t);let m;if(h&&"zen"!==p.default.mode&&(e=c?I.disassemble(B.words.getCurrent())[t]:B.words.getCurrent().charAt(t)),!h&&"\n"===e){if(""===W.input.current)return;e=" "}if(""===W.input.current&&W.setBurstStart(d),c||p.default.language.startsWith("korean")?(m=(null!=o?o:"").slice(1),G.innerText=m.slice(-1)):m=W.input.current.substring(0,t)+e+W.input.current.substring(t+1),!h&&L.getComposing()&&!p.default.language.startsWith("korean"))return W.input.current=m,l.updateWordElement(),void y.updatePosition();if(T.addPower(h),W.incrementAccuracy(h),h||(W.incrementKeypressErrors(),W.pushMissedWord(B.words.getCurrent())),M.updateScore("zen"===p.default.mode?e:B.words.getCurrent()[t],h),h||!p.default.playSoundOnError||p.default.blindMode?v.playClick():v.playError(),"react"===p.default.keymapMode&&V.flash(e,h),!z&&"master"!=p.default.difficulty)return;if(""===W.corrected.current?W.corrected.current+=c?I.disassemble(m).join(""):m:t>=(c?I.disassemble(W.corrected.current).length:W.corrected.current.length)?W.corrected.current+=c?I.disassemble(e).concat():e:h||(W.corrected.current=W.corrected.current.substring(0,t)+e+W.corrected.current.substring(t+1)),W.incrementKeypressCount(),W.updateLastKeypress(),W.pushKeypressWord(B.words.currentIndex),"master"!==p.default.difficulty&&"letter"==p.default.stopOnError&&!h)return;if(k.addReplayEvent(h?"correctLetter":"incorrectLetter",e),1===(c?I.disassemble(W.input.current).length:W.input.current.length)&&0===B.words.currentIndex&&l.setActiveWordTop(null===(i=document.querySelector("#words .active"))||void 0===i?void 0:i.offsetTop),("zen"===p.default.mode&&t<30||"zen"!==p.default.mode&&t<B.words.getCurrent().length+20)&&(W.input.current=m),!h&&"master"==p.default.difficulty)return void u.fail("difficulty");if("zen"!=p.default.mode){const e=B.words.getCurrent(),t=B.words.currentIndex;if((e===W.input.current||p.default.quickEnd&&!p.default.language.startsWith("korean")&&e.length===W.input.current.length&&"off"==p.default.stopOnError)&&t===B.words.length-1)return void u.finish()}const g=null===(a=document.querySelector("#words .word.active"))||void 0===a?void 0:a.offsetTop;if(l.updateWordElement(),!p.default.hideExtraLetters&&g<(null===(r=document.querySelector("#words .word.active"))||void 0===r?void 0:r.offsetTop)&&!l.lineTransition&&W.input.current.length>1)if("zen"==p.default.mode){const e=Math.floor(null===(s=document.querySelectorAll("#words .word")[l.currentWordElementIndex-1])||void 0===s?void 0:s.offsetTop);p.default.showAllLines||l.lineJump(e)}else W.input.current=W.input.current.slice(0,-1),l.updateWordElement();(f&&W.input.current.length===B.words.getCurrent().length||"\n"===e&&h)&&X(),h&&p.default.language.startsWith("code")&&/^\t+/.test(B.words.getCurrent())&&"\t"===B.words.getCurrent()[W.input.current.length]&&$("#wordsInput").trigger($.Event("keydown",{key:"Tab",code:"Tab"})),"\n"!==e&&y.updatePosition()}let te=-1;$(document).keydown((e=>r(void 0,void 0,void 0,(function*(){var t,o,n;if("loading"==A.get())return;if(q.IgnoredKeys.includes(e.key))return;const i=$("#wordsInput").is(":focus"),a="test"===A.get(),r=f.isPopupVisible("commandLineWrapper"),s=f.isPopupVisible("leaderboardsWrapper"),d=f.isAnyPopupVisible(),h=a&&!r&&!s&&!d&&!l.resultVisible&&(i||"Enter"!==e.key);if(!h||i||["Enter",...K.ModifierKeys].includes(e.key)||(l.focusWords(),p.default.showOutOfFocusWarning&&e.preventDefault()),"Tab"==e.key&&function(e,t){if(l.resultCalculating)return void e.preventDefault();if($("#customTextPopup .textarea").is(":focus")){e.preventDefault();const t=$("#customTextPopup .textarea")[0],o=t.selectionStart,n=t.selectionEnd;return t.value=t.value.substring(0,o)+"\t"+t.value.substring(n),t.selectionStart=t.selectionEnd=o+1,void w.setPopupTextareaState(t.value)}let o=!1;("zen"==p.default.mode&&!e.shiftKey||B.hasTab&&!e.shiftKey)&&(o=!0);const n=f.isPopupVisible("commandLineWrapper")||t;if("esc"===p.default.quickRestart){if(n)return;if("login"===A.get())return;e.preventDefault(),!l.resultVisible&&o&&(ee("\t",W.input.current.length),J(" "+W.input.current))}else if("tab"===p.default.quickRestart){if(n)return;if("login"===A.get())return;if("test"!==A.get())return void(0,F.navigate)("/");if(e.shiftKey?b.set():b.reset(),!l.resultVisible&&o)return e.preventDefault(),ee("\t",W.input.current.length),void J(" "+W.input.current);u.restart({event:e})}else{if("test"!==A.get())return;if(l.resultVisible)return;if(o)return e.preventDefault(),ee("\t",W.input.current.length),void J(" "+W.input.current);e.preventDefault(),$("#restartTestButton").trigger("focus")}}(e,d),"Escape"===e.key&&"esc"===p.default.quickRestart){if(f.isPopupVisible("commandLineWrapper")||d)return;if("test"!==A.get())return void(0,F.navigate)("/");e.shiftKey?b.set():b.reset(),u.restart({event:e})}if(!h)return;if(!(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)||l.testRestarting)return void e.preventDefault();if(W.setKeypressNotAfk(),"Backspace"===e.key&&(v.playClick(),/INPUT|SELECT|TEXTAREA/i.test(e.target.tagName)||e.preventDefault(),"max"===p.default.confidenceMode))return void e.preventDefault();if(c.type(),"Backspace"===e.key&&0===W.input.current.length&&(Z(),W.input.current&&J(" "+W.input.current+" ")),"Enter"===e.key)if(e.shiftKey){if("zen"==p.default.mode)u.finish();else if(!f.canQuickRestart(p.default.mode,p.default.words,p.default.time,w,null!==(o=E.isCustomTextLong())&&void 0!==o&&o)){const e=Date.now()-te;-1===te||e>200?(te=Date.now(),e>=5e3&&O.add("Please double tap shift+enter to confirm bail out",0,{important:!0,duration:5})):(W.setBailout(!0),u.finish())}}else ee("\n",W.input.current.length),J(" "+W.input.current),"off"!==p.default.tapeMode&&l.scrollTape();if("Dead"===e.key&&!L.getComposing()){v.playClick();const e=document.querySelector("#words .word.active"),t=W.input.current.length,o=null==e?void 0:e.querySelectorAll("letter")[t];o&&o.classList.toggle("dead")}if("off"!==p.default.oppositeShiftMode)if("keymap"===p.default.oppositeShiftMode&&"overrideSync"!==p.default.keymapLayout){const t=yield f.getLayout(p.default.keymapLayout).catch((()=>{}));if(void 0===t)return void O.add("Failed to load keymap layout",-1);const o=x.layoutKeyToKeycode(e.key,t);z=void 0===o||x.isUsingOppositeShift(o)}else z=x.isUsingOppositeShift(e.code);const m=D.get(p.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.preventDefaultEvent}));if((null===(n=null==m?void 0:m.functions)||void 0===n?void 0:n.preventDefaultEvent)&&(yield m.functions.preventDefaultEvent(e))&&(e.preventDefault(),ee(e.key,W.input.current.length),Y(),J(" "+W.input.current),"off"!==p.default.tapeMode&&l.scrollTape()),"default"!==p.default.layout&&!(e.ctrlKey||e.altKey&&window.navigator.platform.search("Linux")>-1)){const t=yield C.getCharFromEvent(e);null!==t&&(e.preventDefault(),ee(t,W.input.current.length),Y(),J(" "+W.input.current)),"off"!==p.default.tapeMode&&l.scrollTape()}H="Backspace"===e.key||"delete"===e.key})))),$("#wordsInput").keydown((e=>{var t;if(null===(t=e.originalEvent)||void 0===t?void 0:t.repeat)return void console.log("spacing debug keydown STOPPED - repeat",e.key,e.code,e.which);W.spacingDebug&&console.log("spacing debug keydown",e.key,e.code,e.which),"NumpadEnter"===e.code&&p.default.funbox.includes("58008")&&(e.code="Space"),e.code.includes("Arrow")&&p.default.funbox.includes("arrows")&&(e.code="NoCode");const o=performance.now();setTimeout((()=>{const t=""===e.code||231===e.which?"NoCode":e.code;W.recordKeydownTime(o,t)}),0)})),$("#wordsInput").keyup((e=>{var t;if(null===(t=e.originalEvent)||void 0===t?void 0:t.repeat)return void console.log("spacing debug keydown STOPPED - repeat",e.key,e.code,e.which);W.spacingDebug&&console.log("spacing debug keyup",e.key,e.code,e.which),"NumpadEnter"===e.code&&p.default.funbox.includes("58008")&&(e.code="Space"),e.code.includes("Arrow")&&p.default.funbox.includes("arrows")&&(e.code="NoCode");const o=performance.now();setTimeout((()=>{const t=""===e.code||231===e.which?"NoCode":e.code;W.recordKeyupTime(o,t)}),0)})),$("#wordsInput").keyup((e=>{var t;(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&!l.testRestarting?q.IgnoredKeys.includes(e.key)||l.resultVisible||c.stop():e.preventDefault()})),$("#wordsInput").on("beforeinput",(e=>{var t;(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)&&""===e.target.value&&(e.target.value=" ")})),$("#wordsInput").on("input",(e=>{var t;if(!(null===(t=e.originalEvent)||void 0===t?void 0:t.isTrusted)||l.testRestarting)return void(e.target.value=" ");if(f.isAnyPopupVisible())return;W.setKeypressNotAfk(),"default"!=p.default.layout&&"korean"!=p.default.layout||!e.target.value.normalize().match(/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g)||W.input.setKoreanStatus(!0);const o=W.input.getKoreanStatus(),n=e.target.value.normalize(),i=o?I.disassemble(n).join("").slice(1):n.slice(1),a=o?I.disassemble(W.input.current).join(""):W.input.current;if(o&&!H&&(U||n.slice(1).length<W.input.current.length&&I.disassemble(W.input.current.slice(-1)).length>1))return void(U=!U);if("default"!==p.default.layout&&i.length>=a.length)return void J(" "+a);if(0===n.length&&0===a.length)Z();else if(i.length<a.length){if(o){const t=e.target.value.normalize().slice(1);W.input.current=t,G.innerText=t.slice(-1)}else W.input.current=i;l.updateWordElement(),y.updatePosition(),L.getComposing()||k.addReplayEvent("setLetterIndex",a.length-1)}else if(i!==a){let e=0;for(;i[e]===a[e];)e++;let t=0;"word"!==p.default.stopOnError&&/.+ .+/.test(i)&&(t=i.indexOf(" ")+1);for(let o=e;o<i.length;o++)ee(i[o],o-t,n)}J(" "+W.input.current),Y(),"off"!==p.default.tapeMode&&l.scrollTape();const r=L.getComposing();setTimeout((()=>{var t;const o=L.getComposing();r!==o&&l.updateWordElement(),e.target.selectionStart!==e.target.value.length&&(!f.trailingComposeChars.test(e.target.value)||(null!==(t=e.target.selectionStart)&&void 0!==t?t:0)<e.target.value.search(f.trailingComposeChars))&&(e.target.selectionStart=e.target.selectionEnd=e.target.value.length)}),0)})),$("#wordsInput").on("focus",(e=>{e.target.selectionStart=e.target.selectionEnd=e.target.value.length})),$("#wordsInput").on("copy paste",(e=>{e.preventDefault()})),$("#wordsInput").on("compositionstart",(()=>{"default"===p.default.layout&&(L.setComposing(!0),L.setStartPos(W.input.current.length))})),$("#wordsInput").on("compositionend",(()=>{"default"===p.default.layout&&L.setComposing(!1)}))},9033:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.change=void 0;const s=a(o(3388)),u=a(o(7346)),l=a(o(8835)),d=a(o(7520)),c=a(o(9011)),p=a(o(5331)),f=a(o(2588)),h=a(o(4335)),m=a(o(4471)),g=a(o(8949)),v=a(o(5973)),y=a(o(5705)),b=a(o(1493)),w=a(o(8911));t.change=function(e,t={}){return r(this,void 0,void 0,(function*(){return t=Object.assign(Object.assign({},{force:!1}),t),new Promise((o=>{if(y.get())return console.debug(`change page to ${e.name} stopped, page transition is true`),o(!1);if(!t.force&&u.get()===e.name)return console.debug(`change page ${e.name} stoped, page already active`),o(!1);console.log(`changing page ${e.name}`);const n={loading:h.page,test:c.page,settings:l.page,about:p.page,account:d.page,login:f.page,profile:m.page,profileSearch:g.page,404:v.page}[u.get()],i=e;null==n||n.beforeHide(),y.set(!0),$(".page").removeClass("active"),s.swapElements(n.element,i.element,250,(()=>r(this,void 0,void 0,(function*(){y.set(!1),i.element.addClass("active"),o(!0),null==i||i.afterShow(),b.reinstate()}))),(()=>r(this,void 0,void 0,(function*(){w.set(!1),u.set(i.name),null==n||n.afterHide(),yield null==i?void 0:i.beforeShow({params:t.params,data:t.data})}))))}))}))}},4984:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=void 0;const r=a(o(6705)),s=a(o(6350)),u=a(o(3368)),l=a(o(3013)),d=a(o(9343));t.apply=function(e){var t;const o=s.getSnapshot();o&&(null===(t=o.presets)||void 0===t||t.forEach((t=>{t._id==e&&(r.apply(t.config),d.clear(!0),t.config.tags&&(t.config.tags.forEach((e=>{d.set(e,!0,!1)})),d.saveActiveToLocalStorage()),l.restart(),u.add("Preset applied",1,{duration:2}),r.saveFullConfigToLocalStorage())})))}},6408:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setMobile=t.renderResult=t.destroyAll=t.refreshVisible=t.reinstate=t.init=void 0;const u=s(o(6705)),l=a(o(7346)),d=a(o(8673)),c=[{type:"leaderboard_atf",selectorId:"ad-result-wrapper"},{type:"med_rect_btf",selectorId:"ad-result-small-wrapper"}],p=[{type:"leaderboard_atf",selectorId:"ad-result-wrapper"},{type:"med_rect_btf",selectorId:"ad-result-small-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-right-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-left-wrapper"}],f=[{type:"leaderboard_atf",selectorId:"ad-result-wrapper"},{type:"med_rect_btf",selectorId:"ad-result-small-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-right-wrapper"},{type:"sky_btf",selectorId:"ad-vertical-left-wrapper"},{type:"leaderboard_btf",selectorId:"ad-footer-wrapper"},{type:"med_rect_btf",selectorId:"ad-footer-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-about-1-wrapper"},{type:"med_rect_btf",selectorId:"ad-about-1-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-about-2-wrapper"},{type:"med_rect_btf",selectorId:"ad-about-2-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-settings-1-wrapper"},{type:"med_rect_btf",selectorId:"ad-settings-1-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-settings-2-wrapper"},{type:"med_rect_btf",selectorId:"ad-settings-2-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-settings-3-wrapper"},{type:"med_rect_btf",selectorId:"ad-settings-3-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-account-1-wrapper"},{type:"med_rect_btf",selectorId:"ad-account-1-small-wrapper"},{type:"leaderboard_btf",selectorId:"ad-account-2-wrapper"},{type:"med_rect_btf",selectorId:"ad-account-2-small-wrapper"}];let h=!1;function m(){let e;"result"===u.default.ads?e=c:"on"===u.default.ads?e=p:"sellout"===u.default.ads&&(e=f);const t=[];for(const o of e){const e=document.querySelector(`#${o.selectorId}`);e&&"none"!==window.getComputedStyle(e).display&&null!==e.offsetParent&&t.push(o)}return t}function g(){return r(this,void 0,void 0,(function*(){h&&("test"!==l.get()||d.resultVisible?(yield ramp.destroyUnits("all"),yield ramp.addUnits(m()),yield ramp.displayUnits()):ramp.destroyUnits("all"))}))}t.init=function(){window.ramp={que:[],passiveMode:!0,forcePath:"320x50-test",onReady:()=>{h=!0,g()}};const e=document.getElementsByTagName("head")[0],t=document.createElement("script");t.setAttribute("async",!0),t.src="//cdn.intergient.com/1024888/74058/ramp.js",e.appendChild(t),window._pwGA4PageviewId="".concat(Date.now()),window.dataLayer=window.dataLayer||[],window.gtag=window.gtag||function(){dataLayer.push(arguments)},gtag("js",new Date),gtag("config","G-KETCPNHRJF",{send_page_view:!1}),gtag("event","ramp_js",{send_to:"G-KETCPNHRJF",pageview_id:window._pwGA4PageviewId})},t.reinstate=g,t.refreshVisible=function(){return r(this,void 0,void 0,(function*(){}))},t.destroyAll=function(){h&&ramp.destroyUnits("all")},t.renderResult=function(){return r(this,void 0,void 0,(function*(){if(!h)return;const e=m();yield ramp.addUnits(e),yield ramp.displayUnits()}))},t.setMobile=function(e){h&&ramp.setMobile(e)}},6750:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=o(3388),u=o(1446),l=a(o(6350)),d={quotes:[],length:0,language:null,groups:[]};function c(e){return e.replace(/_\d*k$/g,"")}const p=new class{constructor(){this.quoteCollection=d,this.quoteQueue=[],this.queueIndex=0}getQuotes(e,t){return r(this,void 0,void 0,(function*(){const o=c(e);if(this.quoteCollection.language!==o)try{const e=yield $.getJSON(`quotes/${o}.json`);if(void 0===e.quotes||0===e.quotes.length)return d;this.quoteCollection={quotes:[],length:e.quotes.length,groups:[],language:e.language},e.quotes.forEach((t=>{const o={text:t.text,source:t.source,length:t.length,id:t.id,language:e.language,group:0};this.quoteCollection.quotes.push(o)})),e.groups.forEach(((e,t)=>{const o=e[0],n=e[1];this.quoteCollection.groups[t]=this.quoteCollection.quotes.filter((e=>e.length>=o&&e.length<=n&&(e.group=t,!0)))})),void 0!==t&&this.updateQuoteQueue(t)}catch(e){return d}return this.quoteCollection}))}getQuoteById(e){return this.quoteCollection.quotes.find((t=>t.id===e))}updateQuoteQueue(e){this.quoteQueue=[],e.forEach((e=>{var t;e<0||null===(t=this.quoteCollection.groups[e])||void 0===t||t.forEach((e=>{this.quoteQueue.push(e)}))})),(0,s.shuffle)(this.quoteQueue),this.queueIndex=0}getRandomQuote(){if(0===this.quoteQueue.length)return null;this.queueIndex>=this.quoteQueue.length&&(this.queueIndex=0,(0,s.shuffle)(this.quoteQueue));const e=this.quoteQueue[this.queueIndex];return this.queueIndex+=1,e}getCurrentQuote(){return 0===this.quoteQueue.length?null:this.quoteQueue[this.queueIndex]}getRandomFavoriteQuote(e){const t=l.getSnapshot();if(!t)return null;const o=c(e),n=[],{favoriteQuotes:i}=t;if(Object.keys(i).forEach((e=>{c(e)===o&&n.push(...i[e])})),0===n.length)return null;const a=(0,s.randomElementFromArray)(n),r=this.getQuoteById(parseInt(a,10));return null!=r?r:null}isQuoteFavorite({language:e,id:t}){const o=l.getSnapshot();if(!o)return!1;const{favoriteQuotes:n}=o,i=c(e);return void 0!==Object.keys(n).find((e=>i===c(e)&&n[e].includes(t.toString())))}};(0,u.subscribe)(((e,t)=>{"quoteLength"===e&&p.updateQuoteQueue(t)})),t.default=p},7193:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const s=a(o(9033)),u=a(o(9011)),l=a(o(5331)),d=a(o(8835)),c=a(o(7520)),p=a(o(2588)),f=a(o(5973)),h=a(o(4471)),m=a(o(8949)),g=a(o(41)),v=a(o(8673)),y=a(o(5705)),b=a(o(2428)),w=o(6617),C=[{path:"/",load:()=>{s.change(u.page)}},{path:"/verify",load:()=>{s.change(u.page)}},{path:"/about",load:()=>{s.change(l.page)}},{path:"/settings",load:()=>{s.change(d.page)}},{path:"/login",load:()=>{w.Auth?w.Auth.currentUser?_("/account"):s.change(p.page):_("/")}},{path:"/account",load:(e,t)=>{w.Auth?s.change(c.page,{data:t.data}):_("/")}},{path:"/profile",load:e=>{s.change(m.page)}},{path:"/profile/:uidOrName",load:(e,t)=>{s.change(h.page,{force:!0,params:{uidOrName:e.uidOrName},data:t.data})}}];function _(e=window.location.pathname+window.location.search,t={}){v.testRestarting||v.resultCalculating||y.get()||(""===(e=e.replace(/\/$/,""))&&(e="/"),history.pushState(null,"",e),S(t))}function S(e={}){return r(this,void 0,void 0,(function*(){const t=C.map((e=>{return{route:e,result:location.pathname.match((t=e.path,new RegExp("^"+t.replace(/\//g,"\\/").replace(/:\w+/g,"(.+)")+"$")))};var t})).find((e=>null!==e.result));t?t.route.load(function(e){const t=e.result.slice(1),o=Array.from(e.route.path.matchAll(/:(\w+)/g)).map((e=>e[1]));return Object.fromEntries(o.map(((e,o)=>[e,t[o]])))}(t),e):s.change(f.page)}))}window.addEventListener("popstate",(()=>{S()})),document.addEventListener("DOMContentLoaded",(()=>{document.body.addEventListener("click",(e=>{const t=null==e?void 0:e.target;t.matches("[router-link]")&&(null==t?void 0:t.href)&&(e.preventDefault(),_(t.href))}))})),$("#top .logo").on("click",(()=>{_("/")})),$("#popups").on("click","#leaderboards a.entryName",(()=>{g.hide()})),b.subscribe(((e,t)=>{_(e,t)}))},5929:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setVolume=t.playError=t.playClick=t.playNote=t.playScale=t.scaleConfigurations=t.previewClick=t.init=t.initErrorSound=void 0;const s=r(o(6705)),u=a(o(1766)),l=a(o(1446)),d=o(3388),c=o(5578),p=o(4173),f=a(o(3368));let h=null,m=null;function g(){null===h&&(h=new u.Howl({src:["../sound/error.wav"]}))}function v(){null===m&&(m={1:[{sounds:[new u.Howl({src:"../sound/click1/click1_1.wav"}),new u.Howl({src:"../sound/click1/click1_1.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click1/click1_2.wav"}),new u.Howl({src:"../sound/click1/click1_2.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click1/click1_3.wav"}),new u.Howl({src:"../sound/click1/click1_3.wav"})],counter:0}],2:[{sounds:[new u.Howl({src:"../sound/click2/click2_1.wav"}),new u.Howl({src:"../sound/click2/click2_1.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click2/click2_2.wav"}),new u.Howl({src:"../sound/click2/click2_2.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click2/click2_3.wav"}),new u.Howl({src:"../sound/click2/click2_3.wav"})],counter:0}],3:[{sounds:[new u.Howl({src:"../sound/click3/click3_1.wav"}),new u.Howl({src:"../sound/click3/click3_1.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click3/click3_2.wav"}),new u.Howl({src:"../sound/click3/click3_2.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click3/click3_3.wav"}),new u.Howl({src:"../sound/click3/click3_3.wav"})],counter:0}],4:[{sounds:[new u.Howl({src:"../sound/click4/click4_1.wav"}),new u.Howl({src:"../sound/click4/click4_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_2.wav"}),new u.Howl({src:"../sound/click4/click4_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_3.wav"}),new u.Howl({src:"../sound/click4/click4_33.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_4.wav"}),new u.Howl({src:"../sound/click4/click4_44.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_5.wav"}),new u.Howl({src:"../sound/click4/click4_55.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click4/click4_6.wav"}),new u.Howl({src:"../sound/click4/click4_66.wav"})],counter:0}],5:[{sounds:[new u.Howl({src:"../sound/click5/click5_1.wav"}),new u.Howl({src:"../sound/click5/click5_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_2.wav"}),new u.Howl({src:"../sound/click5/click5_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_3.wav"}),new u.Howl({src:"../sound/click5/click5_33.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_4.wav"}),new u.Howl({src:"../sound/click5/click5_44.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_5.wav"}),new u.Howl({src:"../sound/click5/click5_55.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click5/click5_6.wav"}),new u.Howl({src:"../sound/click5/click5_66.wav"})],counter:0}],6:[{sounds:[new u.Howl({src:"../sound/click6/click6_1.wav"}),new u.Howl({src:"../sound/click6/click6_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click6/click6_2.wav"}),new u.Howl({src:"../sound/click6/click6_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click6/click6_3.wav"}),new u.Howl({src:"../sound/click6/click6_33.wav"})],counter:0}],7:[{sounds:[new u.Howl({src:"../sound/click7/click7_1.wav"}),new u.Howl({src:"../sound/click7/click7_11.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click7/click7_2.wav"}),new u.Howl({src:"../sound/click7/click7_22.wav"})],counter:0},{sounds:[new u.Howl({src:"../sound/click7/click7_3.wav"}),new u.Howl({src:"../sound/click7/click7_33.wav"})],counter:0}]})}t.initErrorSound=g,t.init=v,t.previewClick=function(e){null===m&&v(),m[e][0].sounds[0].seek(0),m[e][0].sounds[0].play()};let y="KeyA";$(document).on("keydown",(e=>{y=e.code||"KeyA"}));const b={C:[16.35,32.7,65.41,130.81,261.63,523.25,1046.5,2093,4186.01],Db:[17.32,34.65,69.3,138.59,277.18,554.37,1108.73,2217.46,4434.92],D:[18.35,36.71,73.42,146.83,293.66,587.33,1174.66,2349.32,4698.64],Eb:[19.45,38.89,77.78,155.56,311.13,622.25,1244.51,2489.02,4978.03],E:[20.6,41.2,82.41,164.81,329.63,659.26,1318.51,2637.02],F:[21.83,43.65,87.31,174.61,349.23,698.46,1396.91,2793.83],Gb:[23.12,46.25,92.5,185,369.99,739.99,1479.98,2959.96],G:[24.5,49,98,196,392,783.99,1567.98,3135.96],Ab:[25.96,51.91,103.83,207.65,415.3,830.61,1661.22,3322.44],A:[27.5,55,110,220,440,880,1760,3520],Bb:[29.14,58.27,116.54,233.08,466.16,932.33,1864.66,3729.31],B:[30.87,61.74,123.47,246.94,493.88,987.77,1975.53,3951.07]};function w(e,t=0){return o=>e[o+t]}const C={KeyZ:w(b.C),KeyS:w(b.Db),KeyX:w(b.D),KeyD:w(b.Eb),KeyC:w(b.E),KeyV:w(b.F),KeyG:w(b.Gb),KeyB:w(b.G),KeyH:w(b.Ab),KeyN:w(b.A),KeyJ:w(b.Bb),KeyM:w(b.B),Comma:w(b.C,1),KeyL:w(b.Db,1),Period:w(b.D,1),Semicolon:w(b.Eb,1),Slash:w(b.E,1),KeyQ:w(b.C,1),Digit2:w(b.Db,1),KeyW:w(b.D,1),Digit3:w(b.Eb,1),KeyE:w(b.E,1),KeyR:w(b.F,1),Digit5:w(b.Gb,1),KeyT:w(b.G,1),Digit6:w(b.Ab,1),KeyY:w(b.A,1),Digit7:w(b.Bb,1),KeyU:w(b.B,1),KeyI:w(b.C,2),Digit9:w(b.Db,2),KeyO:w(b.D,2),Digit0:w(b.Eb,2),KeyP:w(b.E,2),BracketLeft:w(b.F,2),Equal:w(b.Gb,2),BracketRight:w(b.G,2)},_={8:"sine",9:"sawtooth",10:"square",11:"triangle"};let S;function P(){if(null!==S)try{S=new AudioContext}catch(e){S=null,console.error(e),f.add((0,d.createErrorMessage)(e,"Error initializing audio context")+". Notes will not play.",-1)}}const x={pentatonic:["C","D","E","G","A"],wholetone:["C","D","E","Gb","Ab","Bb"]};function k(e){const t={position:0,octave:4,direction:1};return()=>{null===m&&v(),O(e,t)}}const T={position:0,octave:4,direction:1};function O(e,t){if(void 0===S&&P(),!S)return;const o=(0,d.randomIntFromRange)(0,x[e].length-1);Math.random()<.5&&(t.octave+=t.direction),t.octave>=6&&(t.direction=-1),t.octave<=4&&(t.direction=1);const n=b[x[e][o]][t.octave],i=S.createOscillator(),a=S.createGain();i.type="sine",a.gain.value=parseFloat(s.default.soundVolume)/10,i.connect(a),a.connect(S.destination),i.frequency.value=n,i.start(S.currentTime),a.gain.setTargetAtTime(0,S.currentTime,.3),i.stop(S.currentTime+2)}function M(e,t){if(void 0===S&&P(),!S)return;if(y=null!=e?e:y,!(y in C))return;const o=3+(c.leftState||c.rightState||p.capsState?1:0),n=C[y](o),i=S.createOscillator(),a=S.createGain();i.type=null!=t?t:_[s.default.playSoundOnClick],a.gain.value=parseFloat(s.default.soundVolume)/10,i.connect(a),a.connect(S.destination),i.frequency.value=n,i.start(S.currentTime),a.gain.setTargetAtTime(0,S.currentTime,.15),i.stop(S.currentTime+.5)}function A(e){u.default.Howler.volume(e)}t.scaleConfigurations={12:{name:"pentatonic",preview:k("pentatonic"),meta:T},13:{name:"wholetone",preview:k("wholetone"),meta:T}},t.playScale=O,t.playNote=M,t.playClick=function(e){if("off"===s.default.playSoundOnClick)return;if(s.default.playSoundOnClick in t.scaleConfigurations){const{name:e,meta:o}=t.scaleConfigurations[s.default.playSoundOnClick];return void O(e,o)}if(s.default.playSoundOnClick in _)return void M(null!=e?e:void 0);null===m&&v();const o=(0,d.randomElementFromArray)(m[s.default.playSoundOnClick]);o.counter++,2===o.counter&&(o.counter=0),o.sounds[o.counter].seek(0),o.sounds[o.counter].play()},t.playError=function(){s.default.playSoundOnError&&(null===h&&g(),h.seek(0),h.play())},t.setVolume=A,l.subscribe(((e,t)=>{"playSoundOnClick"===e&&"off"!==t&&v(),"soundVolume"===e&&A(t)}))},9343:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.loadActiveFromLocalStorage=t.toggle=t.set=t.clear=t.saveActiveToLocalStorage=void 0;const r=a(o(6350)),s=a(o(2453));function u(){var e,t;const o=[];try{null===(t=null===(e=r.getSnapshot())||void 0===e?void 0:e.tags)||void 0===t||t.forEach((e=>{!0===e.active&&o.push(e._id)})),window.localStorage.setItem("activeTags",JSON.stringify(o))}catch(e){}}function l(e,t=!1){var o,n;null===(n=null===(o=r.getSnapshot())||void 0===o?void 0:o.tags)||void 0===n||n.forEach((t=>{t._id===e&&(void 0===t.active?t.active=!0:t.active=!t.active)})),s.update(),t||u()}t.saveActiveToLocalStorage=u,t.clear=function(e=!1){var t;const o=r.getSnapshot();o&&(o.tags=null===(t=o.tags)||void 0===t?void 0:t.map((e=>(e.active=!1,e))),r.setSnapshot(o),s.update(),e||u())},t.set=function(e,t,o=!1){var n;const i=r.getSnapshot();i&&(i.tags=null===(n=i.tags)||void 0===n?void 0:n.map((o=>(o._id===e&&(o.active=t),o))),r.setSnapshot(i),s.update(),o||u())},t.toggle=l,t.loadActiveFromLocalStorage=function(){var e;let t=window.localStorage.getItem("activeTags");if(null!=t&&""!==t){try{t=null!==(e=JSON.parse(t))&&void 0!==e?e:[]}catch(e){t=[]}t.forEach((e=>{l(e,!0)})),u()}}},743:function(e,t,o){var n,i,a,r=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),u=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&r(t,e,o);return s(t,e),t},l=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.applyCustomBackground=t.applyCustomBackgroundSize=t.clearRandom=t.randomizeTheme=t.clearPreview=t.set=t.preview=t.loadStyle=t.colorVars=t.randomThemeIndex=t.randomTheme=void 0;const d=u(o(4203)),c=u(o(1833)),p=u(o(3388)),f=u(o(6705)),h=f,m=u(o(2183)),g=u(o(1446)),v=u(o(6350)),y=u(o(3368)),b=u(o(9817)),w=u(o(3326)),C=o(2189);let _=!1;t.randomTheme=null,t.randomThemeIndex=0,t.colorVars=["--bg-color","--main-color","--caret-color","--sub-color","--sub-alt-color","--text-color","--error-color","--error-extra-color","--colorful-error-color","--colorful-error-extra-color"];let S=[];function P(e){return l(this,void 0,void 0,(function*(){return new Promise((t=>{S.push(setTimeout((()=>{b.show()}),100)),$("#nextTheme").remove();const o=document.querySelector("#currentTheme"),n=document.createElement("link");n.type="text/css",n.rel="stylesheet",n.id="nextTheme",n.onload=()=>{b.hide(),$("#currentTheme").remove(),$("#nextTheme").attr("id","currentTheme"),S.map((e=>clearTimeout(e))),S=[],$("#keymap .keymapKey").stop(!0,!0).removeAttr("style"),t()},n.onerror=()=>{b.hide(),y.add("Failed to load theme",0),$("#currentTheme").remove(),$("#nextTheme").attr("id","currentTheme"),S.map((e=>clearTimeout(e))),S=[],$("#keymap .keymapKey").stop(!0,!0).removeAttr("style"),t()},n.href="custom"===e?"/./themes/serika_dark.css":`/./themes/${e}.css`,o?o.after(n):document.head.appendChild(n)}))}))}function x(e,o,n=!1){t.colorVars.forEach((e=>{document.documentElement.style.setProperty(e,"")}));let i="serika_dark";i=o?"custom":e,d.reset(),$(".keymapKey").attr("style",""),P(i).then((()=>{var i,a;if(d.update(),o){let r=f.default.customThemeColors;const s=v.getSnapshot();if(o&&!n&&s){const t=null!==(a=null===(i=s.customThemes.find((t=>t._id===e)))||void 0===i?void 0:i.colors)&&void 0!==a?a:[];t.length>0&&h.setCustomThemeColors(t)}if("custom"!==e&&s){const t=s.customThemes.find((t=>t._id===e));r=null==t?void 0:t.colors}t.colorVars.forEach(((e,t)=>{document.documentElement.style.setProperty(e,r[t])}))}w.log("changedTheme",{theme:e}),d.getAll().then((e=>{$(".keymapKey").attr("style",""),c.updateAllChartColors(),function(e,t){l(this,void 0,void 0,(function*(){setTimeout((()=>l(this,void 0,void 0,(function*(){let o,n;if(n=yield d.get("bg"),o=yield d.get("main"),p.isLocalhost()){const e=o;o=n,n=e}n==o&&(n="#111",o="#eee");const i=document.createElement("canvas");i.width=e,i.height=e;const a=i.getContext("2d"),r=.128,s=[0,0];function u(e,t){s[0]+=e*r,s[1]+=t*r,a.moveTo(s[0],s[1])}function l(e,t){s[0]+=e*r,s[1]+=t*r,a.lineTo(s[0],s[1])}function c(e,t,o,n){s[0]+=o*r,s[1]+=n*r,a.quadraticCurveTo(s[0]+e*r,s[1]+t*r,s[0],s[1])}a.beginPath(),a.moveTo(0,t),a.quadraticCurveTo(0,0,t,0),a.lineTo(48,0),a.quadraticCurveTo(e,0,e,t),a.lineTo(e,48),a.quadraticCurveTo(e,e,48,e),a.lineTo(t,e),a.quadraticCurveTo(0,e,0,48),a.fillStyle=n,a.fill(),a.beginPath(),u(71,188),l(0,166),l(40,0),l(0,-95),c(-33,0,35,-36),c(0,-27,27,30),l(0,101),l(40,0),l(0,-90),c(-36,0,35,-41),c(0,-27,27,30),l(0,101),l(40,0),l(0,-95),c(55,0,-55,-74),c(22,-27,-55,27),c(30,0,-47,-27),c(20,-19,-47,19),l(0,-16),a.fillStyle=o,a.fill(),a.closePath(),a.beginPath(),u(256,-40),l(0,40),l(-36,0),l(0,40),l(36,0),l(0,126),l(40,0),l(0,-126),l(36,0),l(0,-40),l(-36,0),l(0,-40),a.fillStyle=o,a.fill(),$("#favicon").attr("href",i.toDataURL("image/png"))}))),125)}))}(64,16),$("#metaThemeColor").attr("content",e.bg)})),$(".current-theme .text").text(o?"custom":e.replace(/_/g," "))}))}function k(e,t,o=!1){T(e,t,o)}t.loadStyle=P,t.preview=k;const T=(0,C.debounce)(250,((e,t,o)=>{_=!0,x(e,t,!o)}));function O(e,t){x(e,t)}function M(e=!0){_&&(_=!1,t.randomTheme=null,e&&(f.default.customTheme?x("custom",!0):x(f.default.theme,!1)))}t.set=O,t.clearPreview=M;let A=[];function j(){var e,o;return l(this,void 0,void 0,(function*(){let n;try{n=yield p.getThemesList()}catch(e){return void console.error(p.createErrorMessage(e,"Failed to update random theme list"))}"fav"===f.default.randomTheme&&f.default.favThemes.length>0?A=f.default.favThemes:"light"===f.default.randomTheme?A=n.filter((e=>p.isColorLight(e.bgColor))).map((e=>e.name)):"dark"===f.default.randomTheme?A=n.filter((e=>p.isColorDark(e.bgColor))).map((e=>e.name)):"on"===f.default.randomTheme?A=n.map((e=>e.name)):"custom"===f.default.randomTheme&&v.getSnapshot()&&(A=null!==(o=null===(e=v.getSnapshot())||void 0===e?void 0:e.customThemes.map((e=>e._id)))&&void 0!==o?o:[]),p.shuffle(A),t.randomThemeIndex=0}))}function L(){null!==t.randomTheme&&(t.randomTheme=null,f.default.customTheme?x("custom",!0):x(f.default.theme,!1))}function W(){"max"==f.default.customBackgroundSize?$(".customBackground img").css({objectFit:""}):$(".customBackground img").css({objectFit:f.default.customBackgroundSize})}function B(){""===f.default.customBackground?($("#words").removeClass("noErrorBorder"),$("#resultWordsHistory").removeClass("noErrorBorder"),$(".customBackground img").remove()):($("#words").addClass("noErrorBorder"),$("#resultWordsHistory").addClass("noErrorBorder"),$(".customBackground").html(`<img src="${f.default.customBackground}" alt="" />`),m.apply(),W())}t.randomizeTheme=function(){var e,o,n;return l(this,void 0,void 0,(function*(){if((0!==A.length||(yield j(),0!==A.length))&&(t.randomTheme=A[t.randomThemeIndex],t.randomThemeIndex++,t.randomThemeIndex>=A.length&&(p.shuffle(A),t.randomThemeIndex=0),k(t.randomTheme,"custom"===f.default.randomTheme),t.randomThemeIndex>=A.length)){let i=t.randomTheme.replace(/_/g," ");"custom"===f.default.randomTheme&&(i=(null!==(n=null===(o=null===(e=v.getSnapshot())||void 0===e?void 0:e.customThemes.find((e=>e._id===t.randomTheme)))||void 0===o?void 0:o.name)&&void 0!==n?n:"custom").replace(/_/g," ")),y.add(i,0)}}))},t.clearRandom=L,t.applyCustomBackgroundSize=W,t.applyCustomBackground=B,null===(a=null===(i=null===(n=window.matchMedia)||void 0===n?void 0:n.call(window,"(prefers-color-scheme: dark)"))||void 0===i?void 0:i.addEventListener)||void 0===a||a.call(i,"change",(e=>{f.default.autoSwitchTheme&&!f.default.customTheme&&(e.matches?O(f.default.themeDark,!1):O(f.default.themeLight,!1))})),g.subscribe(((e,t,o)=>{"randomTheme"===e&&j(),"customTheme"===e&&(t?O("custom",!0):O(f.default.theme,!1)),"customThemeColors"===e&&(o?k("custom",!0):O("custom",!0)),"theme"===e&&(M(!1),O(t,!1)),"setThemes"===e&&(M(!1),t?O("custom",!0):f.default.autoSwitchTheme?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O(f.default.themeDark,!1):O(f.default.themeLight,!1):O(f.default.theme,!1)),"randomTheme"===e&&"off"===t&&L(),"customBackground"===e&&B(),"customBackgroundSize"===e&&W(),"autoSwitchTheme"===e&&(t?window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?O(f.default.themeDark,!1):O(f.default.themeLight,!1):O(f.default.theme,!1)),"themeLight"!==e||!f.default.autoSwitchTheme||window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches||o||O(f.default.themeLight,!1),"themeDark"===e&&f.default.autoSwitchTheme&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches&&!o&&O(f.default.themeDark,!1)}))},6350:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setStreak=t.addBadge=t.addXp=t.updateLocalStats=t.saveLocalResult=t.saveConfig=t.updateLbMemory=t.saveLocalTagPB=t.getLocalTagPB=t.saveLocalPB=t.getLocalPB=t.getUserDailyBest=t.getUserAverage10=t.getUserHighestWpm=t.deleteCustomTheme=t.editCustomTheme=t.addCustomTheme=t.getCustomThemeById=t.getUserResults=t.initSnapshot=t.setSnapshot=t.getSnapshot=void 0;const u=s(o(7355)),l=a(o(3368)),d=a(o(4335)),c=s(o(2191)),p=o(6617),f=o(8361),h=a(o(3285)),m=o(3388);let g;function v(){return g}function y(e){const t=null==g?void 0:g.banned,o=null==g?void 0:g.verified,n=null==g?void 0:g.lbOptOut;try{null==e||delete e.banned}catch(e){}try{null==e||delete e.verified}catch(e){}try{null==e||delete e.lbOptOut}catch(e){}g=e,g&&(g.banned=t,g.verified=o,g.lbOptOut=n)}function b(){return r(this,void 0,void 0,(function*(){if(!(null===p.Auth||void 0===p.Auth?void 0:p.Auth.currentUser))return!1;if(!g)return!1;if(!h.get())return!1;if(void 0!==g.results)return!0;{d.updateText("Downloading results..."),d.updateBar(90);const e=yield u.default.results.get();if(200!==e.status)return l.add("Error getting results: "+e.message,-1),!1;const t=e.data;return t.forEach((e=>{void 0===e.bailedOut&&(e.bailedOut=!1),void 0===e.blindMode&&(e.blindMode=!1),void 0===e.lazyMode&&(e.lazyMode=!1),void 0===e.difficulty&&(e.difficulty="normal"),void 0===e.funbox&&(e.funbox="none"),void 0!==e.language&&null!==e.language||(e.language="english"),void 0===e.numbers&&(e.numbers=!1),void 0===e.punctuation&&(e.punctuation=!1),void 0===e.quoteLength&&(e.quoteLength=-1),void 0===e.restartCount&&(e.restartCount=0),void 0===e.incompleteTestSeconds&&(e.incompleteTestSeconds=0),void 0===e.afkDuration&&(e.afkDuration=0),void 0===e.tags&&(e.tags=[])})),g.results=null==t?void 0:t.sort(((e,t)=>t.timestamp-e.timestamp)),!0}}))}t.getSnapshot=v,t.setSnapshot=y,t.initSnapshot=function(){var e,t,o,n,i,a,s,l,d,h,m,v,y,b,w,$,C,_,S;return r(this,void 0,void 0,(function*(){const r=Object.assign({},f.defaultSnap);try{if(!(null===p.Auth||void 0===p.Auth?void 0:p.Auth.currentUser))return!1;const f=yield u.default.users.getData(),[P,x,k]=yield Promise.all([u.default.configs.get(),u.default.users.getTags(),u.default.presets.get()]);if(200!==f.status)throw{message:`${f.message} (user)`,responseCode:f.status};if(200!==P.status)throw{message:`${P.message} (config)`,responseCode:P.status};if(200!==x.status)throw{message:`${x.message} (tags)`,responseCode:x.status};if(200!==k.status)throw{message:`${k.message} (presets)`,responseCode:k.status};const[T,O,M,A]=[f,P,x,k].map((e=>e.data));r.name=T.name,r.personalBests=T.personalBests,null!==(e=r.personalBests)&&void 0!==e||(r.personalBests={time:{},words:{},quote:{},zen:{},custom:{}});for(const e of["time","words","quote","zen","custom"])null!==(t=(_=r.personalBests)[S=e])&&void 0!==t||(_[S]={});r.banned=T.banned,r.lbOptOut=T.lbOptOut,r.verified=T.verified,r.discordId=T.discordId,r.discordAvatar=T.discordAvatar,r.needsToChangeName=T.needsToChangeName,r.typingStats={timeTyping:T.timeTyping,startedTests:T.startedTests,completedTests:T.completedTests},r.quoteMod=T.quoteMod,r.favoriteQuotes=null!==(o=T.favoriteQuotes)&&void 0!==o?o:{},r.filterPresets=null!==(n=T.resultFilterPresets)&&void 0!==n?n:[],r.quoteRatings=T.quoteRatings,r.favouriteThemes=void 0===T.favouriteThemes?[]:T.favouriteThemes,r.details=T.profileDetails,r.addedAt=T.addedAt,r.inventory=T.inventory,r.xp=null!==(i=T.xp)&&void 0!==i?i:0,r.inboxUnreadSize=null!==(a=T.inboxUnreadSize)&&void 0!==a?a:0,r.streak=null!==(l=null===(s=null==T?void 0:T.streak)||void 0===s?void 0:s.length)&&void 0!==l?l:0,r.maxStreak=null!==(h=null===(d=null==T?void 0:T.streak)||void 0===d?void 0:d.maxLength)&&void 0!==h?h:0;const j=null===(m=null==T?void 0:T.streak)||void 0===m?void 0:m.hourOffset;if(r.streakHourOffset=null==j?void 0:j,(null===(v=T.lbMemory)||void 0===v?void 0:v.time15)||(null===(y=T.lbMemory)||void 0===y?void 0:y.time60)?r.lbMemory={}:T.lbMemory&&(r.lbMemory=T.lbMemory),O){const e=Object.assign({},c.default);for(const t in O.config){const o=O.config[t];e[t]=o}r.config=e}return r.customThemes=null!==(b=T.customThemes)&&void 0!==b?b:[],r.tags=M,r.tags.forEach((e=>{var t,o,n,i;e.display=e.name.replaceAll("_"," "),null!==(t=e.personalBests)&&void 0!==t||(e.personalBests={time:{},words:{},quote:{},zen:{},custom:{}});for(const t of["time","words","quote","zen","custom"])null!==(o=(n=e.personalBests)[i=t])&&void 0!==o||(n[i]={})})),r.tags=null===(w=r.tags)||void 0===w?void 0:w.sort(((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)),r.presets=A,null===($=r.presets)||void 0===$||$.forEach((e=>{e.display=e.name.replaceAll("_"," ")})),r.presets=null===(C=r.presets)||void 0===C?void 0:C.sort(((e,t)=>e.name>t.name?1:e.name<t.name?-1:0)),g=r,g}catch(e){throw g=f.defaultSnap,e}}))},t.getUserResults=b,t.getCustomThemeById=function(e){return null==g?void 0:g.customThemes.find((t=>t._id===e))},t.addCustomTheme=function(e){return r(this,void 0,void 0,(function*(){if(!g)return!1;if(g.customThemes.length>=10)return l.add("Too many custom themes!",0),!1;const t=yield u.default.users.addCustomTheme(e);if(200!==t.status)return l.add("Error adding custom theme: "+t.message,-1),!1;const o=Object.assign(Object.assign({},e),{_id:t.data.theme._id});return g.customThemes.push(o),!0}))},t.editCustomTheme=function(e,t){return r(this,void 0,void 0,(function*(){if(!(null===p.Auth||void 0===p.Auth?void 0:p.Auth.currentUser))return!1;if(!g)return!1;const o=g.customThemes.find((t=>t._id===e));if(!o)return l.add("Editing failed: Custom theme with id: "+e+" does not exist",-1),!1;const n=yield u.default.users.editCustomTheme(e,t);if(200!==n.status)return l.add("Error editing custom theme: "+n.message,-1),!1;const i=Object.assign(Object.assign({},t),{_id:e});return g.customThemes[g.customThemes.indexOf(o)]=i,!0}))},t.deleteCustomTheme=function(e){return r(this,void 0,void 0,(function*(){if(!(null===p.Auth||void 0===p.Auth?void 0:p.Auth.currentUser))return!1;if(!g)return!1;if(!g.customThemes.find((t=>t._id===e)))return!1;const t=yield u.default.users.deleteCustomTheme(e);return 200!==t.status?(l.add("Error deleting custom theme: "+t.message,-1),!1):(g.customThemes=g.customThemes.filter((t=>t._id!==e)),!0)}))},t.getUserHighestWpm=function(e,t,o,n,i,a){return r(this,void 0,void 0,(function*(){return g&&void 0!==g.results?function(){var r;let s=0;return null===(r=null==g?void 0:g.results)||void 0===r||r.forEach((r=>{r.mode==e&&`${r.mode2}`==`${t}`&&r.punctuation==o&&r.language==n&&r.difficulty==i&&(r.lazyMode===a||void 0===r.lazyMode&&!1===a)&&r.wpm>s&&(s=r.wpm)})),s}():0}))},t.getUserAverage10=function(e,t,o,n,i,a){return r(this,void 0,void 0,(function*(){const r=v();return r?null===r||null===(yield b())?[0,0]:function(){var s;const u=[];null===(s=null==r?void 0:r.tags)||void 0===s||s.forEach((e=>{!0===e.active&&u.push(e._id)}));let l=0,d=0,c=0,p=0,f=0,h=0;if(void 0!==(null==r?void 0:r.results))for(const s of r.results)if(s.mode===e&&s.punctuation===o&&s.language===n&&s.difficulty===i&&(s.lazyMode===a||void 0===s.lazyMode&&!1===a)&&(0===u.length||u.some((e=>s.tags.includes(e))))){if(`${s.mode2}`!=`${t}`&&"quote"!==e)continue;if(h<10&&(c+=s.wpm,p+=s.acc,h++),`${s.mode2}`==`${t}`&&(l+=s.wpm,d+=s.acc,f++,f>=10))break}return 0===f&&"quote"===e?[c/h,p/h]:[l/f,d/f]}():[0,0]}))},t.getUserDailyBest=function(e,t,o,n,i,a){return r(this,void 0,void 0,(function*(){const r=v();return r?null===r||null===(yield b())?0:function(){var s;const u=[];null===(s=null==r?void 0:r.tags)||void 0===s||s.forEach((e=>{!0===e.active&&u.push(e._id)}));let l=0;if(void 0!==(null==r?void 0:r.results))for(const s of r.results)if(s.mode===e&&s.punctuation===o&&s.language===n&&s.difficulty===i&&(s.lazyMode===a||void 0===s.lazyMode&&!1===a)&&(0===u.length||u.some((e=>s.tags.includes(e))))){if(s.timestamp<Date.now()-864e5)continue;if(`${s.mode2}`!=`${t}`&&"quote"!==e)continue;s.wpm>l&&(l=s.wpm)}return l}():0}))},t.getLocalPB=function(e,t,o,n,i,a,s){return r(this,void 0,void 0,(function*(){return(yield(0,m.getFunboxList)()).filter((e=>null==s?void 0:s.split("#").includes(e.name))).every((e=>e.canGetPb))?null===g?0:function(){let r=0;try{return(null==g?void 0:g.personalBests)?(g.personalBests[e][t].forEach((e=>{e.punctuation==o&&e.difficulty==i&&e.language==n&&(e.lazyMode===a||void 0===e.lazyMode&&!1===a)&&(r=e.wpm)})),r):r}catch(e){return r}}():0}))},t.saveLocalPB=function(e,t,o,n,i,a,s,u,l,d){return r(this,void 0,void 0,(function*(){"quote"!=e&&g&&null!=g&&function(){var r,c,p,f,h;if(!g)return;let m=!1;null!==(r=g.personalBests)&&void 0!==r||(g.personalBests={time:{},words:{},quote:{},zen:{},custom:{}}),null!==(c=(f=g.personalBests)[e])&&void 0!==c||(f[e]={[t]:[]}),null!==(p=(h=g.personalBests[e])[t])&&void 0!==p||(h[t]=[]),g.personalBests[e][t].forEach((e=>{e.punctuation==o&&e.difficulty==i&&e.language==n&&(e.lazyMode===a||void 0===e.lazyMode&&!1===a)&&(m=!0,e.wpm=s,e.acc=u,e.raw=l,e.timestamp=Date.now(),e.consistency=d,e.lazyMode=a)})),m||g.personalBests[e][t].push({language:n,difficulty:i,lazyMode:a,punctuation:o,wpm:s,acc:u,raw:l,timestamp:Date.now(),consistency:d})}()}))},t.getLocalTagPB=function(e,t,o,n,i,a,s){return r(this,void 0,void 0,(function*(){return null===g?0:function(){var r,u,l,d,c,p,f,h,m,g;let y=0;const b=(null!==(u=null===(r=v())||void 0===r?void 0:r.tags)&&void 0!==u?u:[]).filter((t=>t._id===e))[0];return void 0===b||(null!==(l=b.personalBests)&&void 0!==l||(b.personalBests={time:{},words:{},quote:{},zen:{},custom:{}}),null!==(d=(m=b.personalBests)[t])&&void 0!==d||(m[t]={[o]:[]}),null!==(c=(g=b.personalBests[t])[o])&&void 0!==c||(g[o]=[]),y=null!==(h=null===(f=(null!==(p=b.personalBests[t][o])&&void 0!==p?p:[]).find((e=>e.punctuation==n&&e.difficulty==a&&e.language==i&&(e.lazyMode===s||void 0===e.lazyMode&&!1===s))))||void 0===f?void 0:f.wpm)&&void 0!==h?h:0),y}()}))},t.saveLocalTagPB=function(e,t,o,n,i,a,s,u,l,d,c){return r(this,void 0,void 0,(function*(){"quote"!=t&&null!=g&&function(){var r,p,f,h,m,v;const y=null===(r=null==g?void 0:g.tags)||void 0===r?void 0:r.filter((t=>t._id===e))[0];null!==(p=y.personalBests)&&void 0!==p||(y.personalBests={time:{},words:{},quote:{},zen:{},custom:{}}),null!==(f=(m=y.personalBests)[t])&&void 0!==f||(m[t]={[o]:[]}),null!==(h=(v=y.personalBests[t])[o])&&void 0!==h||(v[o]=[]);try{let e=!1;y.personalBests[t][o].forEach((t=>{t.punctuation==n&&t.difficulty==a&&t.language==i&&(t.lazyMode===s||void 0===t.lazyMode&&!1===s)&&(e=!0,t.wpm=u,t.acc=l,t.raw=d,t.timestamp=Date.now(),t.consistency=c,t.lazyMode=s)})),e||y.personalBests[t][o].push({language:i,difficulty:a,lazyMode:s,punctuation:n,wpm:u,acc:l,raw:d,timestamp:Date.now(),consistency:c})}catch(e){y.personalBests={time:{},words:{},quote:{},zen:{},custom:{}},y.personalBests[t][o]=[{language:i,difficulty:a,lazyMode:s,punctuation:n,wpm:u,acc:l,raw:d,timestamp:Date.now(),consistency:c}]}}()}))},t.updateLbMemory=function(e,t,o,n,i=!1){return r(this,void 0,void 0,(function*(){if("time"===e){const a=e,r=t,s=v();if(!s)return;void 0===s.lbMemory&&(s.lbMemory={time:{15:{english:0},60:{english:0}}}),void 0===s.lbMemory[a]&&(s.lbMemory[a]={15:{english:0},60:{english:0}}),void 0===s.lbMemory[a][r]&&(s.lbMemory[a][r]={});const l=s.lbMemory[a][r][o];s.lbMemory[a][r][o]=n,i&&l!=n&&(yield u.default.users.updateLeaderboardMemory(e,t,o,n)),y(s)}}))},t.saveConfig=function(e){return r(this,void 0,void 0,(function*(){if(null===p.Auth||void 0===p.Auth?void 0:p.Auth.currentUser){const t=yield u.default.configs.save(e);200!==t.status&&l.add("Failed to save config: "+t.message,-1)}}))},t.saveLocalResult=function(e){const t=v();t&&null!==t&&void 0!==t.results&&(t.results.unshift(e),y(t))},t.updateLocalStats=function(e,t){const o=v();o&&(void 0===o.typingStats&&(o.typingStats={}),null!==o&&void 0!==o.typingStats&&(null==o.typingStats.timeTyping?o.typingStats.timeTyping=t:o.typingStats.timeTyping+=t,null==o.typingStats.startedTests?o.typingStats.startedTests=e:o.typingStats.startedTests+=e,null==o.typingStats.completedTests?o.typingStats.completedTests=1:o.typingStats.completedTests+=1),y(o))},t.addXp=function(e){const t=v();t&&(void 0===t.xp&&(t.xp=0),t.xp+=e,y(t))},t.addBadge=function(e){const t=v();t&&(void 0===t.inventory&&(t.inventory={badges:[]}),t.inventory.badges.push(e),y(t))},t.setStreak=function(e){const t=v();t&&(t.streak=e,t.streak>t.maxStreak&&(t.maxStreak=t.streak),y(t))}},5344:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateXpBar=t.update=t.loading=t.skipXpBreakdown=void 0;const s=o(6350),u=o(6617),l=a(o(3388)),d=o(4203),c=a(o(210));let p=!1,f=!1;function h(){return r(this,void 0,void 0,(function*(){const e=yield(0,d.getAll)(),t=$("#menu .level");t.text(parseInt(t.text())+1);const o=2*Math.random()-1,n=Math.random()+1;t.stop(!0,!0).css({backgroundColor:e.main,borderSpacing:100}).animate({backgroundColor:e.sub,borderSpacing:0},{step(e){t.css("transform",`scale(${1+e/200*n}) rotate(${e/10*o}deg)`)},duration:2e3,easing:"easeOutCubic",complete:()=>{t.css("background-color","")}})}))}t.skipXpBreakdown=function(){f=!0},t.loading=function(e){e?($("#top #menu .account").css("opacity",1).css("pointer-events","none"),p?($("#top #menu .account .loading").css("opacity",1).removeClass("hidden"),$("#top #menu .account .avatar").stop(!0,!0).css({opacity:1}).animate({opacity:0},100,(()=>{$("#top #menu .account .avatar").addClass("hidden")}))):($("#top #menu .account .loading").stop(!0,!0).removeClass("hidden").css({opacity:0}).animate({opacity:1},100),$("#top #menu .account .user").stop(!0,!0).css({opacity:1}).animate({opacity:0},100,(()=>{$("#top #menu .account .user").addClass("hidden")})))):($("#top #menu .account").css("opacity",1).css("pointer-events","auto"),p?($("#top #menu .account .loading").css("opacity",1).addClass("hidden"),$("#top #menu .account .avatar").stop(!0,!0).removeClass("hidden").css({opacity:0}).animate({opacity:1},100)):($("#top #menu .account .loading").stop(!0,!0).css({opacity:1}).animate({opacity:0},100,(()=>{$("#top #menu .account .loading").addClass("hidden")})),$("#top #menu .account .user").stop(!0,!0).removeClass("hidden").css({opacity:0}).animate({opacity:1},100)))},t.update=function(e,t,o){return r(this,void 0,void 0,(function*(){if(null===u.Auth||void 0===u.Auth?void 0:u.Auth.currentUser){if(void 0!==e&&($("#top #menu .level").text(Math.floor(l.getLevel(e))),$("#top #menu .bar").css({width:l.getLevel(e)%1*100+"%"})),o&&t){const e=yield l.getDiscordAvatarUrl(t,o);e&&($("#top #menu .account .avatar").css("background-image",`url(${e})`),p=!0,$("#top #menu .account .user").addClass("hidden"),$("#top #menu .account .avatar").removeClass("hidden"))}else $("#top #menu .account .avatar").addClass("hidden"),$("#top #menu .account .user").removeClass("hidden");$("#menu .textButton.account").removeClass("hidden").css({opacity:0}).animate({opacity:1},125)}else $("#menu .textButton.account").css({opacity:1}).animate({opacity:0},125,(()=>{$("#menu .textButton.account").addClass("hidden")}))}))},t.updateXpBar=function(e,t,o){return r(this,void 0,void 0,(function*(){f=!1;const n=l.getLevel(e),i=l.getLevel(e+t),a=(0,s.getSnapshot)();if(!a)return;if(f)return $("#menu .level").text(Math.floor(l.getLevel(a.xp))),void $("#menu .xpBar").stop(!0,!0).css("opacity",1).animate({opacity:0},c.get()?0:250,(()=>{$("#menu .xpBar .xpGain").text("")}));const u=function(e,t){return r(this,void 0,void 0,(function*(){const o=t-e;$("#menu .xpBar").stop(!0,!0).css("opacity",0),yield l.promiseAnimation($("#menu .xpBar"),{opacity:"1"},c.get()?0:250,"linear");const n=$("#menu .xpBar .bar");if(n.css("width",e%1*100+"%"),t%1==0)yield l.promiseAnimation(n,{width:"100%"},c.get()?0:1e3,"easeOutExpo"),h(),n.css("width","0%");else if(Math.floor(e)===Math.floor(t))yield l.promiseAnimation(n,{width:t%1*100+"%"},c.get()?0:1e3,"easeOutExpo");else{const e=Math.min(1e3/o,200);let t=o,i=!1;for(;t>1;)t-1<1?(i&&(h(),n.css("width","0%")),yield l.promiseAnimation(n,{width:"100%"},c.get()?0:l.mapRange(t-1,0,.5,1e3,200),"easeOutQuad"),t--):(i&&(h(),n.css("width","0%")),yield l.promiseAnimation(n,{width:"100%"},c.get()?0:e,"linear"),t--),i=!0;h(),n.css("width","0%"),yield l.promiseAnimation(n,{width:t%1*100+"%"},c.get()?0:1e3,"easeOutExpo")}}))}(n,i),d=function(e,t){return r(this,void 0,void 0,(function*(){if(!t)return void $("#menu .xpBar .xpGain").text(`+${e}`);const o=1e3;let n=0;const i=$("#menu .xpBar .xpGain"),a=$("#menu .xpBar .xpBreakdown");function s(t){return r(this,void 0,void 0,(function*(){f&&(n=e,t=""),a.find(".next").removeClass("next").addClass("previous"),a.append(`<div class='text next' style="opacity: 0; margin-top: 1rem;">${t}</div>`);const o=a.find(".previous");o.animate({marginTop:"-1rem",opacity:0},c.get()?0:250,(()=>{o.remove()})),setTimeout((()=>{i.stop(!0,!0).text(`+${n}`).css({borderSpacing:100}).animate({borderSpacing:0},{step(e){i.css("transform",`scale(${1+e/300}) translateY(-50%)`)},duration:c.get()?0:250,easing:"swing"})}),125),yield l.promiseAnimation(a.find(".next"),{opacity:"1",marginTop:"0"},c.get()?0:250,"swing")}))}a.empty(),i.text("+0"),a.append(`<div class='text next'>time typing +${t.base}</div>`),n+=t.base,t["100%"]?(yield l.sleep(o),yield s(`perfect +${t["100%"]}`),n+=t["100%"]):t.corrected&&(yield l.sleep(o),yield s(`clean +${t.corrected}`),n+=t.corrected),f||(t.quote?(yield l.sleep(o),yield s(`quote +${t.quote}`),n+=t.quote):(t.punctuation&&(yield l.sleep(o),yield s(`punctuation +${t.punctuation}`),n+=t.punctuation),t.numbers&&(yield l.sleep(o),yield s(`numbers +${t.numbers}`),n+=t.numbers)),f||(t.funbox&&(yield l.sleep(o),yield s(`funbox +${t.funbox}`),n+=t.funbox),f||(t.streak&&(yield l.sleep(o),yield s(`streak +${t.streak}`),n+=t.streak),f||(t.accPenalty&&(yield l.sleep(o),yield s(`accuracy penalty -${t.accPenalty}`),n-=t.accPenalty),f||(t.incomplete&&(yield l.sleep(o),yield s(`incomplete tests +${t.incomplete}`),n+=t.incomplete),f||(t.configMultiplier&&(yield l.sleep(o),yield s(`global multiplier x${t.configMultiplier}`),n*=t.configMultiplier),f||(t.daily&&(yield l.sleep(o),yield s(`daily bonus +${t.daily}`),n+=t.daily),f||(yield l.sleep(o),yield s("")))))))))}))}(t,o);yield Promise.all([u,d]),yield l.sleep(2e3),$("#menu .level").text(Math.floor(l.getLevel(a.xp))),$("#menu .xpBar").stop(!0,!0).css("opacity",1).animate({opacity:0},c.get()?0:250,(()=>{$("#menu .xpBar .xpGain").text("")}))}))}},6001:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.setNotificationBubbleVisible=t.addPSA=t.show=t.hide=void 0;const u=s(o(1715)),l=s(o(7355)),d=o(6617),c=a(o(5344)),p=a(o(6350)),f=a(o(8766)),h=a(o(7401)),m=a(o(3368)),g=a(o(3285)),v=o(3388),y=a(o(590)),b="alertsPopupWrapper";let w=[],C=0,_=[],S=[];const P={notifications:[],psas:[]};function x(){if((0,v.isPopupVisible)(b)){let e;T(!1);const t=new Promise((t=>{e=t})),o=[];let n=0;(_.length>0||S.length>0)&&l.default.users.updateInbox({mailIdsToMarkRead:_.length>0?_:void 0,mailIdsToDelete:S.length>0?S:void 0}).then((t=>r(this,void 0,void 0,(function*(){const i=(yield t).status,a=(yield t).message;if(200===i){{const e=w.filter((e=>e.rewards.length>0&&_.includes(e.id))).map((e=>e.rewards)).reduce((function(e,t){return e.concat(t)}),[]);for(const t of e)if("xp"===t.type)n+=t.item;else if("badge"===t.type){const e=h.getById(t.item.id);o.push(e.name),p.addBadge(t.item)}}e()}else m.add(`Failed to update inbox: ${a}`,-1)})))),$("#alertsPopup").animate({marginRight:"-10rem"},100,"easeInCubic"),$("#alertsPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{t.then((()=>{var e,t;if(o.length>0&&m.add(`New badge${o.length>1?"s":""} unlocked: ${o.join(", ")}`,1,{duration:5,customTitle:"Reward",customIcon:"gift"}),n>0){const o=null!==(t=null===(e=p.getSnapshot())||void 0===e?void 0:e.xp)&&void 0!==t?t:0;c.updateXpBar(o,n),p.addXp(n)}})),$("#alertsPopupWrapper").addClass("hidden"),$("#alertsPopup .notificationHistory .list").empty(),$("#alertsPopup .psas .list").empty(),y.remove(b)}))}}function k(){return r(this,void 0,void 0,(function*(){y.append(b),(0,v.isPopupVisible)(b)||($("#alertsPopup").css("marginRight","-10rem").animate({marginRight:0},100,"easeOutCubic"),(null===d.Auth||void 0===d.Auth?void 0:d.Auth.currentUser)?($("#alertsPopup .accountAlerts").removeClass("hidden"),$("#alertsPopup .separator.accountSeparator").removeClass("hidden"),$("#alertsPopup .accountAlerts .list").html('\n        <div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>')):($("#alertsPopup .accountAlerts").addClass("hidden"),$("#alertsPopup .separator.accountSeparator").addClass("hidden")),w=[],S=[],_=[],function(){if(0===P.notifications.length)$("#alertsPopup .notificationHistory .list").html('<div class="nothing">Nothing to show</div>');else{$("#alertsPopup .notificationHistory .list").empty();for(const e of P.notifications){const{message:t,level:o,customTitle:n}=e;let i="Notice",a="sub";-1===o?(a="error",i="Error"):1===o&&(a="main",i="Success"),n&&(i=n),$("#alertsPopup .notificationHistory .list").prepend(`\n      <div class="item">\n      <div class="indicator ${a}"></div>\n      <div class="title">${i}</div>\n      <div class="body">\n        ${(0,v.escapeHTML)(t)}\n      </div>\n    </div>\n    `)}}}(),function(){if(0===P.psas.length)$("#alertsPopup .psas .list").html('<div class="nothing">Nothing to show</div>');else{$("#alertsPopup .psas .list").empty();for(const e of P.psas){const{message:t,level:o}=e;let n="";-1===o?n="error":1===o?n="main":0===o&&(n="sub"),$("#alertsPopup .psas .list").prepend(`\n        <div class="item">\n        <div class="indicator ${n}"></div>\n        <div class="body">\n          ${(0,v.escapeHTML)(t)}\n        </div>\n      </div>\n      `)}}}(),$("#alertsPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{(null===d.Auth||void 0===d.Auth?void 0:d.Auth.currentUser)&&function(){r(this,void 0,void 0,(function*(){if(!g.get())return void $("#alertsPopup .accountAlerts .list").html('\n    <div class="nothing">\n    You are offline\n    </div>\n    ');const e=yield l.default.users.getInbox();if(503===e.status)return void $("#alertsPopup .accountAlerts .list").html('\n    <div class="nothing">\n    Account inboxes are temporarily unavailable\n    </div>\n    ');if(200!==e.status)return void $("#alertsPopup .accountAlerts .list").html(`\n    <div class="nothing">\n    Error getting inbox: ${e.message} Please try again later\n    </div>\n    `);const t=e.data;if(w=t.inbox,j(),0!==w.length){C=t.maxMail,O(),$("#alertsPopup .accountAlerts .list").empty();for(const e of w){e.read||0!=e.rewards.length||_.push(e.id);let t="";e.rewards.length>0&&!1===e.read&&(t=`<div class="rewards">\n        <i class="fas fa-fw fa-gift"></i>\n        <span>${e.rewards.length}</span>\n      </div>`),$("#alertsPopup .accountAlerts .list").append(`\n    \n      <div class="item" data-id="${e.id}">\n        <div class="indicator ${e.read?"":"main"}"></div>\n        <div class="timestamp">${(0,u.default)(new Date(e.timestamp))} ago</div>\n        <div class="title">${e.subject}</div>\n        <div class="body">\n          ${e.body}\n\n${t}\n        </div>\n        <div class="buttons">\n          ${e.rewards.length>0&&!1===e.read?'<div class="markReadAlert textButton" aria-label="Claim" data-balloon-pos="left"><i class="fas fa-gift"></i></div>':""}\n          ${e.rewards.length>0&&!0===e.read||0==e.rewards.length?'<div class="deleteAlert textButton" aria-label="Delete" data-balloon-pos="left"><i class="fas fa-trash"></i></div>':""}\n        </div>\n      </div>\n    \n    `)}}else $("#alertsPopup .accountAlerts .list").html('\n    <div class="nothing">\n    Nothing to show\n    </div>\n    ')}))}()})))}))}function T(e){e?$("#top #menu .showAlerts .notificationBubble").removeClass("hidden"):$("#top #menu .showAlerts .notificationBubble").addClass("hidden")}function O(){$("#alertsPopup .accountAlerts .title .right").text(`${w.length}/${C}`)}function M(e){S.push(e),$(`#alertsPopup .accountAlerts .list .item[data-id="${e}"]`).remove(),0==$("#alertsPopup .accountAlerts .list .item").length&&$("#alertsPopup .accountAlerts .list").html('\n    <div class="nothing">\n    Nothing to show\n    </div>\n    '),j(),O()}function A(e){_.push(e);const t=$(`#alertsPopup .accountAlerts .list .item[data-id="${e}"]`);j(),t.find(".indicator").removeClass("main"),t.find(".buttons").empty(),t.find(".buttons").append('<div class="deleteAlert textButton" aria-label="Delete" data-balloon-pos="left"><i class="fas fa-trash"></i></div>'),t.find(".rewards").animate({opacity:0,height:0,marginTop:0},250,"easeOutCubic",(()=>{t.find(".rewards").remove()}))}function j(){const e=$("#alertsPopup .accountAlerts .claimAll"),t=$("#alertsPopup .accountAlerts .deleteAll");if(e.addClass("hidden"),t.addClass("hidden"),w.length>0){let o=0;for(const e of w)!1!==e.read||_.includes(e.id)||(o+=e.rewards.length);o>0?e.removeClass("hidden"):t.removeClass("hidden")}S.length===w.length&&t.addClass("hidden")}t.hide=x,t.show=k,t.addPSA=function(e,t){P.psas.push({message:e,level:t})},t.setNotificationBubbleVisible=T,$("#alertsPopupWrapper .accountAlerts").on("click",".claimAll",(()=>{for(const e of w)!1!==e.read||_.includes(e.id)||A(e.id)})),$("#alertsPopupWrapper .accountAlerts").on("click",".deleteAll",(()=>{for(const e of w)S.includes(e.id)||M(e.id)})),$("#top #menu .showAlerts").on("click",(()=>{k()})),$("#alertsPopupWrapper").on("mousedown",(e=>{"alertsPopupWrapper"===$(e.target).attr("id")&&x()})),$("#alertsPopupWrapper .mobileClose").on("click",(()=>{x()})),$("#alertsPopupWrapper .accountAlerts .list").on("click",".item .buttons .deleteAlert",(e=>{M($(e.currentTarget).closest(".item").attr("data-id"))})),$("#alertsPopupWrapper .accountAlerts .list").on("click",".item .buttons .markReadAlert",(e=>{A($(e.currentTarget).closest(".item").attr("data-id"))})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,v.isPopupVisible)(b)&&x()})),f.subscribe(((e,t,o)=>{P.notifications.push({message:e,level:t,customTitle:o}),P.notifications.length>25&&P.notifications.shift()})),y.save(b)},2183:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.loadConfig=t.apply=t.getCSS=void 0;const s=a(o(6705)),u=a(o(1446)),l=o(2189),d={blur:{value:0,default:0},brightness:{value:1,default:1},saturate:{value:1,default:1},opacity:{value:1,default:1}};function c(){let e="";return Object.keys(d).forEach((t=>{const o=t;d[o].value!=d[o].default&&(e+=`${t}(${d[o].value}${"blur"==t?"rem":""}) `)})),e}function p(){const e={filter:c(),width:`calc(100% + ${4*d.blur.value}rem)`,height:`calc(100% + ${4*d.blur.value}rem)`,left:`-${2*d.blur.value}rem`,top:`-${2*d.blur.value}rem`,position:"absolute"};$(".customBackground img").css(e)}function f(){$(".section.customBackgroundFilter .blur .value").html(d.blur.value.toFixed(1)),$(".section.customBackgroundFilter .brightness .value").html(d.brightness.value.toFixed(1)),$(".section.customBackgroundFilter .saturate .value").html(d.saturate.value.toFixed(1)),$(".section.customBackgroundFilter .opacity .value").html(d.opacity.value.toFixed(1))}function h(e){d.blur.value=e[0],d.brightness.value=e[1],d.saturate.value=e[2],d.opacity.value=e[3],f(),$(".section.customBackgroundFilter .blur input").val(d.blur.value),$(".section.customBackgroundFilter .brightness input").val(d.brightness.value),$(".section.customBackgroundFilter .saturate input").val(d.saturate.value),$(".section.customBackgroundFilter .opacity input").val(d.opacity.value)}t.getCSS=c,t.apply=p,t.loadConfig=h,$(".section.customBackgroundFilter .blur input").on("input",(()=>{d.blur.value=parseFloat($(".section.customBackgroundFilter .blur input").val()),f(),p()})),$(".section.customBackgroundFilter .brightness input").on("input",(()=>{d.brightness.value=parseFloat($(".section.customBackgroundFilter .brightness input").val()),f(),p()})),$(".section.customBackgroundFilter .saturate input").on("input",(()=>{d.saturate.value=parseFloat($(".section.customBackgroundFilter .saturate input").val()),f(),p()})),$(".section.customBackgroundFilter .opacity input").on("input",(()=>{d.opacity.value=parseFloat($(".section.customBackgroundFilter .opacity input").val()),f(),p()})),$(".section.customBackgroundFilter input").on("input",(()=>{m()}));const m=(0,l.debounce)(2e3,(()=>r(void 0,void 0,void 0,(function*(){const e=Object.keys(d).map((e=>d[e].value));s.setCustomBackgroundFilter(e,!1)}))));u.subscribe(((e,t)=>{"customBackgroundFilter"===e&&(h(t.map((e=>parseFloat(e)))),p())}))},2560:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getAverageFps=t.stop=t.start=void 0;const i=o(3388);let a,r,s=0,u=!0;const l=document.querySelector("#fpsCounter");function d(e){if(u)return;const t=e-r;if(s++,t>500){const o=(0,i.roundTo2)(1e3*s/t).toFixed(2);s=0,r=e,function(e){n(this,void 0,void 0,(function*(){l.innerHTML=`FPS ${e}`;const t=parseFloat(e);l.classList.remove("error"),l.classList.remove("main"),t<30?l.classList.add("error"):t>55&&l.classList.add("main")}))}(o)}window.requestAnimationFrame(d)}t.start=function(){u=!1,s=0,r=performance.now(),a=window.requestAnimationFrame(d),l.classList.remove("hidden")},t.stop=function(){cancelAnimationFrame(a),u=!0,l.classList.add("hidden")},t.getAverageFps=function(){return s/(performance.now()-r)}},5817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.InputIndicator=void 0,t.InputIndicator=class{constructor(e,t){var o,n;this.inputElement=e,$(this.inputElement).wrap('<div class="inputAndIndicator"></div>'),this.parentElement=$(this.inputElement).parent(".inputAndIndicator"),this.options=t,this.currentStatus=null;let i='<div class="statusIndicator">';for(const[e,a]of Object.entries(t))i+=`\n      <div\n        class="indicator level${a.level} hidden"\n        data-option-id="${e}"\n        \n        ${(null!==(n=null===(o=a.message)||void 0===o?void 0:o.length)&&void 0!==n?n:0)>27?'data-balloon-length="large"':""}\n        data-balloon-pos="up"\n        ${a.message?`aria-label="${a.message}"`:""}\n      >\n        <i class="fas fa-fw ${a.icon} ${a.spinIcon?"fa-spin":""}"></i>\n      </div>\n      `;i+="</div>",this.parentElement.append(i)}hide(){this.parentElement.find(".statusIndicator div").addClass("hidden"),this.currentStatus=null,$(this.inputElement).css("padding-right","0.5em")}show(e,t){this.hide(),this.currentStatus=e;const o=this.parentElement.find(`[data-option-id="${e}"]`);o.removeClass("hidden"),t&&(t.length>20?o.attr("data-balloon-length","large"):o.removeAttr("data-balloon-length"),o.attr("aria-label",t)),$(this.inputElement).css("padding-right","2.1em")}get(){return this.currentStatus}}},2148:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.refresh=t.show=t.hide=void 0;const u=s(o(6705)),l=a(o(4203)),d=a(o(210)),c=a(o(1446)),p=a(o(5368)),f=a(o(3388)),h=a(o(6943)),m=a(o(3368)),g=a(o(7346)),v=a(o(9470)),y={keymapShowTopRow:!0,type:"matrix",keys:{row1:[],row2:["sS","tT","pP","hH","**","fF","pP","lL","tT","dD"],row3:["sS","kK","wW","rR","**","rR","bB","gG","sS","zZ"],row4:["aA","oO","eE","uU"],row5:[]}};function b(e=u.default.layout){return r(this,void 0,void 0,(function*(){if("off"!==u.default.keymapMode&&"test"===g.get()&&e)try{let t;try{t=yield f.getLayoutsList()}catch(e){return void m.add(f.createErrorMessage(e,"Failed to refresh keymap"),-1)}let o=t[e],n=e;"overrideSync"===u.default.keymapLayout?"default"===u.default.layout?(o=t.qwerty,n="default"):(o=t[u.default.layout],n=u.default.layout):(o=t[u.default.keymapLayout],n=u.default.keymapLayout);const i=v.hasNumbers&&"next"===u.default.keymapMode||"always"===u.default.keymapShowTopRow||o.keymapShowTopRow&&"never"!==u.default.keymapShowTopRow,a="matrix"===u.default.keymapStyle||"split_matrix"===u.default.keymapStyle,r="steno"===u.default.keymapStyle||"steno_matrix"===u.default.keymapStyle;r&&(o=y);let s="";Object.keys(o.keys).forEach(((e,t)=>{let l=o.keys[e];"row1"!==e||!a&&"staggered"!==u.default.keymapStyle||(l=l.slice(1));let d="";if("row1"!==e||i&&!r){if("row2"!==e&&"row3"!==e&&"row4"!==e||a||r||(d+="<div></div>"),"row4"!==e||"iso"===o.type||a||r||(d+="<div></div>"),"row5"===e){if(r)return;const e=n.replace(/_/g," ");let t="";"blank"===u.default.keymapLegendStyle&&(t='style="display: none;"'),d+="<div></div>",d+=`<div class="keymapKey keySpace">\n          <div class="letter" ${t}>${e}</div>\n        </div>`,d+='<div class="keymapSplitSpacer"></div>',d+='<div class="keymapKey keySplitSpace">\n          <div class="letter"></div>\n        </div>'}else for(let t=0;t<l.length;t++){if("row2"===e&&12===t)continue;if(("matrix"===u.default.keymapStyle||"split_matrix"===u.default.keymapStyle)&&t>=10)continue;const n=l[t],i="row3"===e&&(3===t||6===t);let s=n[0],c="";"blank"===u.default.keymapLegendStyle?c='style="display: none;"':"uppercase"===u.default.keymapLegendStyle&&(s=s.toUpperCase());let p="";"row1"!==e||0!==t||a||"staggered"===u.default.keymapStyle||(p=" invisible");const f=`<div class="keymapKey${p}" data-key="${n.replace('"',"&quot;")}">\n              <span class="letter" ${c}>${s}</span>\n              ${i?"<div class='bump'></div>":""}\n          </div>`;let h="";("split"===u.default.keymapStyle||"split_matrix"===u.default.keymapStyle||"alice"===u.default.keymapStyle||r)&&("row4"!==e||!r||0!==t&&2!==t&&4!==t?"row4"!==e||"split"!==u.default.keymapStyle&&"alice"!==u.default.keymapStyle||"iso"!==o.type?"row1"!==e||"split"!==u.default.keymapStyle&&"alice"!==u.default.keymapStyle?5===t&&(h+='<div class="keymapSplitSpacer"></div>'):7===t&&(h+='<div class="keymapSplitSpacer"></div>'):6===t&&(h+='<div class="keymapSplitSpacer"></div>'):h+='<div class="keymapSplitSpacer"></div>'),"alice"===u.default.keymapStyle&&"row4"===e&&("iso"===o.type&&6===t||"iso"!==o.type&&5===t)&&(h+='<div class="extraKey"><span class="letter"></span></div>'),d+=h+f}s+=`<div class="row r${t+1}">${d}</div>`}})),$("#keymap").html(s),$("#keymap").removeClass("staggered"),$("#keymap").removeClass("matrix"),$("#keymap").removeClass("split"),$("#keymap").removeClass("split_matrix"),$("#keymap").removeClass("alice"),$("#keymap").removeClass("steno"),$("#keymap").removeClass("steno_matrix"),$("#keymap").addClass(u.default.keymapStyle)}catch(e){e instanceof Error&&console.log("something went wrong when changing layout, resettings: "+e.message)}}))}t.hide=function(){$("#keymap").addClass("hidden")},t.show=function(){$("#keymap").removeClass("hidden")},t.refresh=b,c.subscribe((e=>{"layout"===e&&"overrideSync"===u.default.keymapLayout&&b(u.default.keymapLayout),"keymapLayout"!==e&&"keymapStyle"!==e&&"keymapShowTopRow"!==e&&"keymapMode"!==e||b()})),p.subscribe(((e,t,o)=>{"highlight"===e&&function(e){if("zen"!==u.default.mode){""===e&&(e=" ");try{let t;null!=$(".activeKey")&&$(".activeKey").removeClass("activeKey"),u.default.language.startsWith("korean")&&(e=h.disassemble(e)[0]),t=" "==e?"#keymap .keySpace, #keymap .keySplitSpace":'"'==e?`#keymap .keymapKey[data-key*='${e}']`:`#keymap .keymapKey[data-key*="${e}"]`,$(t).addClass("activeKey")}catch(e){e instanceof Error&&console.log("could not update highlighted keymap key: "+e.message)}}}(t),"flash"===e&&function(e,t){r(this,void 0,void 0,(function*(){if(null==e)return;e=" "==e?"#keymap .keySpace, #keymap .keySplitSpace":'"'==e?`#keymap .keymapKey[data-key*='${e}']`:`#keymap .keymapKey[data-key*="${e}"]`;const o=yield l.getAll();try{let n={color:o.bg,backgroundColor:o.sub,borderColor:o.sub};n=t||u.default.blindMode?{color:o.bg,backgroundColor:o.main,borderColor:o.main}:{color:o.bg,backgroundColor:o.error,borderColor:o.error},$(e).stop(!0,!0).css(n).animate({color:o.sub,backgroundColor:"transparent",borderColor:o.sub},d.get()?0:500,"easeOutExpo")}catch(e){}}))}(t,o)}))},7274:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getAcc=t.getWPM=t.update=void 0;const u=a(o(6350)),l=a(o(3388)),d=s(o(6705)),c=a(o(9470));let p=0,f=0;t.update=function(){return r(this,void 0,void 0,(function*(){const e=l.getMode2(d.default,c.randomQuote),[t,o]=(yield u.getUserAverage10(d.default.mode,e,d.default.punctuation,d.default.language,d.default.difficulty,d.default.lazyMode)).map(l.roundTo2);p=d.default.alwaysShowDecimalPlaces?t:Math.round(t),f=d.default.alwaysShowDecimalPlaces?o:Math.floor(o)}))},t.getWPM=function(){return p},t.getAcc=function(){return f}},41:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const u=s(o(7355)),l=a(o(6350)),d=s(o(6705)),c=a(o(3388)),p=a(o(3368)),f=s(o(9546)),h=o(6617),m=s(o(1699)),g=o(7401),v=a(o(3285)),y=a(o(590)),b="leaderboardsWrapper";let w="allTime",C="english",_=!1,S={15:[],60:[]},P={15:{},60:{}};const x={15:!1,60:!1};let k;function T(e){"15"===e?$("#leaderboardsWrapper table.left tbody").empty():"60"===e&&$("#leaderboardsWrapper table.right tbody").empty()}function O(e){"15"===e?$("#leaderboardsWrapper table.left tfoot").empty():"60"===e&&$("#leaderboardsWrapper table.right tfoot").empty()}function M(){if("daily"===w){const e=new Date;e.setUTCHours(0,0,0,0),e.setDate(e.getDate()+1);const t=new Date;t.setUTCMilliseconds(0);const o=(0,m.default)(e,t);$("#leaderboards .subTitle").text("Next reset in: "+c.secondsToString(o,!0))}else{const e=new Date,t=60*(14-e.getMinutes()%15)+(60-e.getSeconds());$("#leaderboards .subTitle").text("Next update in: "+c.secondsToString(t,!0))}}function A(e){"15"===e?$("#leaderboardsWrapper .leftTableLoader").removeClass("hidden"):"60"===e&&$("#leaderboardsWrapper .rightTableLoader").removeClass("hidden")}function j(e){"15"===e?$("#leaderboardsWrapper .leftTableLoader").addClass("hidden"):"60"===e&&$("#leaderboardsWrapper .rightTableLoader").addClass("hidden")}function L(e,t){var o;return r(this,void 0,void 0,(function*(){if(!S[e])return;let n;n="15"===e?"left":"right",0===S[e].length&&$(`#leaderboardsWrapper table.${n} tbody`).html("<tr><td colspan='7'>No results found</td></tr>");const i=null===(o=l.getSnapshot())||void 0===o?void 0:o.name,a=l.getSnapshot(),s=S[e].map((e=>r(this,void 0,void 0,(function*(){const t=(null===h.Auth||void 0===h.Auth?void 0:h.Auth.currentUser)&&e.uid===(null===h.Auth||void 0===h.Auth?void 0:h.Auth.currentUser.uid)&&a&&a.discordAvatar&&a.discordId,o=e.discordAvatar&&e.discordId,n=t&&a||o&&e||{};return c.getDiscordAvatarUrl(n.discordId,n.discordAvatar)})))),u=(yield Promise.allSettled(s)).map((e=>"fulfilled"===e.status?e.value:null));let p=S[e].length-50,m=S[e].length;p<0&&(p=0),t&&(p=0,m=t);let v="";for(let t=p;t<m;t++){const o=S[e][t];if(!o)break;if(o.hidden)return;let n="";o.name==i&&(n=' class="me"');const a=new Date(o.timestamp);"daily"!==w||o.rank||(o.rank=t+1);let r='<div class="avatarPlaceholder"><i class="fas fa-user-circle"></i></div>';const s=u[t];null!==s&&(r=`<div class="avatar" style="background-image:url(${s})"></div>`),v+=`\n    <tr ${n}>\n    <td>${1===o.rank?'<i class="fas fa-fw fa-crown"></i>':o.rank}</td>\n    <td>\n    <div class="avatarNameBadge">${r}\n      <a href="${location.origin}/profile/${o.uid}?isUid" class="entryName" uid=${o.uid} router-link>${o.name}</a>\n      ${o.badgeId?(0,g.getHTMLById)(o.badgeId):""}\n    </div>\n    </td>\n    <td class="alignRight">${(d.default.alwaysShowCPM?5*o.wpm:o.wpm).toFixed(2)}<br><div class="sub">${o.acc.toFixed(2)}%</div></td>\n    <td class="alignRight">${(d.default.alwaysShowCPM?5*o.raw:o.raw).toFixed(2)}<br><div class="sub">${o.consistency&&"-"!==o.consistency?o.consistency.toFixed(2)+"%":"-"}</div></td>\n    <td class="alignRight">${(0,f.default)(a,"dd MMM yyyy")}<br>\n    <div class='sub'>${(0,f.default)(a,"HH:mm")}</div></td>\n  </tr>\n  `}t?$(`#leaderboardsWrapper table.${n} tbody`).prepend(v):$(`#leaderboardsWrapper table.${n} tbody`).append(v)}))}const W=$("#leaderboardsWrapper .showYesterdayButton"),B=$("#leaderboardsWrapper .showYesterdayButton .text");function I(){$("#leaderboardsWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{T("15"),T("60"),O("15"),O("60"),S={15:[],60:[]},P={15:{},60:{}},clearInterval(k),k=void 0,$("#leaderboards .subTitle").text("-"),_=!1,F(),$("#leaderboardsWrapper").addClass("hidden"),y.remove(b)}))}function E(){const e=$("#leaderboardsWrapper .mainTitle");let t=`${"daily"===w?"Daily":"All-Time"} ${C.charAt(0).toUpperCase()+C.slice(1)} Leaderboards`;_&&"allTime"!==w&&(t+=" (Yesterday)"),e.text(t)}function F(){W.addClass("hidden"),"daily"===w&&W.removeClass("hidden"),_?B.text("Show today"):B.text("Show yesterday")}function D(){const e="daily"===w;return{isDaily:e,daysBefore:e&&_?1:0}}function R(){return r(this,void 0,void 0,(function*(){N=!1,z=!1,A("15"),A("60");const e=["15","60"],t=e.map((e=>r(this,void 0,void 0,(function*(){return u.default.leaderboards.get(Object.assign({language:C,mode:"time",mode2:e},D()))}))));(null===h.Auth||void 0===h.Auth?void 0:h.Auth.currentUser)&&t.push(...e.map((e=>r(this,void 0,void 0,(function*(){return u.default.leaderboards.getRank(Object.assign({language:C,mode:"time",mode2:e},D()))})))));const o=yield Promise.all(t),n=o.find((e=>200!==e.status));if(n)return j("15"),j("60"),p.add("Failed to load leaderboards: "+n.message,-1);const[i,a,s,m]=o.map((e=>e.data));S[15]=i,S[60]=a,P[15]=s,P[60]=m,["15","60"].forEach((e=>{j(e),T(e),function(e){var t,o,n,i;let a,r;if(a="15"===e?"left":"right",null===h.Auth||void 0===h.Auth?void 0:h.Auth.currentUser)if(!c.isLocalhost()&&(null!==(n=null===(o=null===(t=l.getSnapshot())||void 0===t?void 0:t.typingStats)||void 0===o?void 0:o.timeTyping)&&void 0!==n?n:0)<7200)$(`#leaderboardsWrapper table.${a} tfoot`).html('\n    <tr>\n      <td colspan="6" style="text-align:center;">Your account must have 2 hours typed to be placed on the leaderboard.</>\n    </tr>\n    ');else if(!0!==(null===(i=l.getSnapshot())||void 0===i?void 0:i.lbOptOut)){if($(`#leaderboardsWrapper table.${a} tfoot`).html('\n    <tr>\n      <td colspan="6" style="text-align:center;">Not qualified</>\n    </tr>\n    '),"allTime"===w&&P[e]){const t=c.roundTo2(P[e].rank/P[e].count*100);r=1==P[e].rank?"GOAT":`Top ${t}%`,r=`<br><span class="sub">${r}</span>`}if(P[e]){const t=P[e],o=new Date(t.timestamp);$(`#leaderboardsWrapper table.${a} tfoot`).html(`\n    <tr>\n    <td>${t.rank}</td>\n    <td><span class="top">You</span>${r||""}</td>\n    <td class="alignRight">${(d.default.alwaysShowCPM?5*t.wpm:t.wpm).toFixed(2)}<br><div class="sub">${t.acc.toFixed(2)}%</div></td>\n    <td class="alignRight">${(d.default.alwaysShowCPM?5*t.raw:t.raw).toFixed(2)}<br><div class="sub">${t.consistency&&"-"!==t.consistency?t.consistency.toFixed(2)+"%":"-"}</div></td>\n    <td class="alignRight">${(0,f.default)(o,"dd MMM yyyy")}<br>\n    <div class='sub'>${(0,f.default)(o,"HH:mm")}</div></td>\n  </tr>\n  `)}}else $(`#leaderboardsWrapper table.${a} tfoot`).html('\n    <tr>\n      <td colspan="6" style="text-align:center;">You have opted out of the leaderboards</>\n    </tr>\n    ');else $(`#leaderboardsWrapper table.${a} tfoot`).html('\n    <tr>\n      <td colspan="6" style="text-align:center;"></>\n    </tr>\n    ')}(e),function(e){var t,o,n,i,a;if("daily"===w)return;let r;r="15"===e?"left":"right";const s=null!==(a=null===(i=null===(n=null===(o=null===(t=l.getSnapshot())||void 0===t?void 0:t.lbMemory)||void 0===o?void 0:o.time)||void 0===n?void 0:n[e])||void 0===i?void 0:i.english)&&void 0!==a?a:0;if(P[e]){const t=s-P[e].rank;t>0?(l.updateLbMemory("time",e,"english",P[e].rank,!0),0!==s&&$(`#leaderboardsWrapper table.${r} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-up"></i>${Math.abs(t)} since you last checked)`)):t<0?(l.updateLbMemory("time",e,"english",P[e].rank,!0),0!==s&&$(`#leaderboardsWrapper table.${r} tfoot tr td .top`).append(` (<i class="fas fa-fw fa-angle-down"></i>${Math.abs(t)} since you last checked)`)):0!==s&&$(`#leaderboardsWrapper table.${r} tfoot tr td .top`).append(" ( = since you last checked)")}}(e),L(e)})),$("#leaderboardsWrapper .leftTableWrapper").removeClass("invisible"),$("#leaderboardsWrapper .rightTableWrapper").removeClass("invisible"),E(),F(),$("#leaderboardsWrapper .buttons .button").removeClass("active"),$("#leaderboardsWrapper .buttonGroup.timeRange .button."+w).addClass("active"),$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scrollTop(0),$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scrollTop(0),N=!0,z=!0}))}function V(e,t=!1){return r(this,void 0,void 0,(function*(){if(t&&1===S[e][0].rank)return;if(x[e])return;x[e]=!0,A(e);let o,n=S[e][S[e].length-1].rank;t&&(n=S[e][0].rank-50),n<0&&(o=Math.abs(n)-1,n=0);const i=yield u.default.leaderboards.get(Object.assign({language:C,mode:"time",mode2:e,skip:n,limit:o},D())),a=i.data;200===i.status&&0!==a.length?(t?S[e].unshift(...a):S[e].push(...a),t&&!o&&(o=49),yield L(e,o),j(e),x[e]=!1):j(e)}))}function q(e,t){return r(this,void 0,void 0,(function*(){A(e);const o=yield u.default.leaderboards.get(Object.assign({language:C,mode:"time",mode2:e,skip:t},D())),n=o.data;503!==o.status?(T(e),S[e]=[],200===o.status&&0!==n.length?(S[e]=n,yield L(e),j(e)):j(e)):p.add("Leaderboards are currently updating - please try again later",-1)}))}function K(){v.get()?(y.append(b),c.isPopupVisible("leaderboardsWrapper")||((null===h.Auth||void 0===h.Auth?void 0:h.Auth.currentUser)?($("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").removeClass("disabled"),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").removeClass("disabled")):($("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").addClass("disabled"),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").addClass("disabled")),d.default.alwaysShowCPM?$("#leaderboards table thead tr td:nth-child(3)").html('cpm<br><div class="sub">accuracy</div>'):$("#leaderboards table thead tr td:nth-child(3)").html('wpm<br><div class="sub">accuracy</div>'),$("#leaderboardsWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{R(),M(),k=setInterval((()=>{M()}),1e3)})))):p.add("You can't view leaderboards while offline",0)}t.hide=I,t.show=K,$("#leaderboardsWrapper").on("click",(e=>{"leaderboardsWrapper"===$(e.target).attr("id")&&I()}));const H=$("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .languageSelect").select2({placeholder:"select a language",width:"100%",data:[{id:"english",text:"english",selected:!0},{id:"spanish",text:"spanish"},{id:"german",text:"german"},{id:"french",text:"french"},{id:"portuguese",text:"portuguese"},{id:"indonesian",text:"indonesian"},{id:"italian",text:"italian"},{id:"russian",text:"russian"}]});H.on("select2:select",(e=>{C=e.params.data.id,E(),R()}));let N=!0;$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scroll((e=>{if(!N)return;const t=$(e.currentTarget);Math.round(t.scrollTop())<=50&&V("15",!0)})),$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scroll((e=>{if(!N)return;const t=$(e.currentTarget);Math.round(t[0].scrollHeight-t.scrollTop())<=Math.round(t.outerHeight())+50&&V("15")}));let z=!0;$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scroll((e=>{if(!z)return;const t=$(e.currentTarget);Math.round(t.scrollTop())<=50&&V("60",!0)})),$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scroll((e=>{const t=$(e.currentTarget);Math.round(t[0].scrollHeight-t.scrollTop())<=Math.round(t.outerHeight()+50)&&V("60")})),$("#leaderboardsWrapper #leaderboards .leftTableJumpToTop").on("click",(()=>r(void 0,void 0,void 0,(function*(){N=!1,$("#leaderboardsWrapper #leaderboards .leftTableWrapper").scrollTop(0),yield q("15",0),N=!0})))),$("#leaderboardsWrapper #leaderboards .leftTableJumpToMe").on("click",(()=>r(void 0,void 0,void 0,(function*(){var e;if(!(null===(e=P[15])||void 0===e?void 0:e.rank))return;N=!1,yield q("15",P[15].rank-25);const t=$("#leaderboardsWrapper #leaderboards .leftTableWrapper table tbody td").outerHeight();$("#leaderboardsWrapper #leaderboards .leftTableWrapper").animate({scrollTop:t*Math.min(P[15].rank,25)-$("#leaderboardsWrapper #leaderboards .leftTableWrapper").outerHeight()/2.25},0,(()=>{N=!0}))})))),$("#leaderboardsWrapper #leaderboards .rightTableJumpToTop").on("click",(()=>r(void 0,void 0,void 0,(function*(){z=!1,$("#leaderboardsWrapper #leaderboards .rightTableWrapper").scrollTop(0),yield q("60",0),z=!0})))),$("#leaderboardsWrapper #leaderboards .rightTableJumpToMe").on("click",(()=>r(void 0,void 0,void 0,(function*(){var e;if(!(null===(e=P[60])||void 0===e?void 0:e.rank))return;N=!1,yield q("60",P[60].rank-25);const t=$("#leaderboardsWrapper #leaderboards .rightTableWrapper table tbody td").outerHeight();$("#leaderboardsWrapper #leaderboards .rightTableWrapper").animate({scrollTop:t*Math.min(P[60].rank,25)-$("#leaderboardsWrapper #leaderboards .rightTableWrapper").outerHeight()/2.25},0,(()=>{N=!0}))})))),$("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .allTime").on("click",(()=>{w="allTime",C="english",H.prop("disabled",!0),H.val("english"),H.trigger("change"),R()})),$("#leaderboardsWrapper #leaderboards .leaderboardsTop .buttonGroup.timeRange .daily").on("click",(()=>{w="daily",F(),H.prop("disabled",!1),R()})),$("#leaderboardsWrapper .showYesterdayButton").on("click",(()=>{_=!_,R()})),$(document).on("keydown",(e=>{"Escape"===e.key&&c.isPopupVisible("leaderboardsWrapper")&&(I(),e.preventDefault())})),$("#top #menu").on("click",".textButton",(e=>{$(e.currentTarget).hasClass("leaderboards")&&K()})),$(document).on("keypress","#top #menu .textButton",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")})),y.save(b)},9817:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0,t.show=function(){$("#backgroundLoader").stop(!0,!0).fadeIn(125)},t.hide=function(){$("#backgroundLoader").stop(!0,!0).fadeOut(125)}},2453:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const u=a(o(5886)),l=a(o(1322)),d=a(o(6350)),c=a(o(7274)),p=s(o(6705)),f=a(o(9470)),h=a(o(1446)),m=o(6617),g=a(o(7717));function v(){var e,t,o,n;return r(this,void 0,void 0,(function*(){let i=!1;""===$(".pageTest #testModesNotice").text()&&(i=!0),$(".pageTest #testModesNotice").empty(),l.isRepeated&&"quote"!==p.default.mode&&$(".pageTest #testModesNotice").append('<div class="textButton noInteraction" style="color:var(--error-color);"><i class="fas fa-sync-alt"></i>repeated</div>'),l.savingEnabled||$(".pageTest #testModesNotice").append('<div class="textButton" commands="resultSaving" style="color:var(--error-color);"><i class="fas fa-save"></i>saving disabled</div>'),f.hasTab&&("esc"===p.default.quickRestart?$(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-long-arrow-alt-right"></i>shift + tab to open commandline</div>'):$(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-long-arrow-alt-right"></i>shift + tab to restart</div>'));const a=g.getCustomTextName(),r=g.isCustomTextLong();if("custom"===p.default.mode&&""!==a&&r&&$(".pageTest #testModesNotice").append(`<div class="textButton noInteraction"><i class="fas fa-book"></i>${a} (shift + enter to save progress)</div>`),l.activeChallenge&&$(".pageTest #testModesNotice").append(`<div class="textButton noInteraction"><i class="fas fa-award"></i>${l.activeChallenge.display}</div>`),"zen"===p.default.mode&&$(".pageTest #testModesNotice").append('<div class="textButton noInteraction"><i class="fas fa-poll"></i>shift + enter to finish zen </div>'),"zen"!==p.default.mode&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="languages"><i class="fas fa-globe-americas"></i>${p.default.language.replace(/_/g," ")}</div>`),"expert"===p.default.difficulty?$(".pageTest #testModesNotice").append('<div class="textButton" commands="difficulty"><i class="fas fa-star-half-alt"></i>expert</div>'):"master"===p.default.difficulty&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="difficulty"><i class="fas fa-star"></i>master</div>'),p.default.blindMode&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="blindMode"><i class="fas fa-eye-slash"></i>blind</div>'),p.default.lazyMode&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="lazyMode"><i class="fas fa-couch"></i>lazy</div>'),"off"!==p.default.paceCaret||p.default.repeatedPace&&l.isPaceRepeat){let o="";try{o=` (${Math.round(null!==(t=null===(e=u.settings)||void 0===e?void 0:e.wpm)&&void 0!==t?t:0)} wpm)`}catch(e){}$(".pageTest #testModesNotice").append(`<div class="textButton" commands="paceCaretMode"><i class="fas fa-tachometer-alt"></i>${"average"===p.default.paceCaret?"average":"pb"===p.default.paceCaret?"pb":"last"===p.default.paceCaret?"last":"daily"===p.default.paceCaret?"daily":"custom"} pace${o}</div>`)}if("off"!==p.default.showAverage){let e=c.getWPM(),t=c.getAcc();if(p.default.alwaysShowDecimalPlaces||(e=Math.round(e),t=Math.round(t)),(null===m.Auth||void 0===m.Auth?void 0:m.Auth.currentUser)&&e>0){const o=`${["wpm","both"].includes(p.default.showAverage)?p.default.alwaysShowCPM?`${Math.round(5*e)} cpm`:`${e} wpm`:""} ${["acc","both"].includes(p.default.showAverage)?`${t}% acc`:""}`.trim();$(".pageTest #testModesNotice").append(`<div class="textButton" commands="showAverage"><i class="fas fa-chart-bar"></i>avg: ${o}</div>`)}}"off"!==p.default.minWpm&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="minWpm"><i class="fas fa-bomb"></i>min ${p.default.minWpmCustomSpeed} wpm</div>`),"off"!==p.default.minAcc&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="minAcc"><i class="fas fa-bomb"></i>min ${p.default.minAccCustom}% acc</div>`),"off"!==p.default.minBurst&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="minBurst"><i class="fas fa-bomb"></i>min ${p.default.minBurstCustomSpeed} burst ${"flex"===p.default.minBurst?"(flex)":""}</div>`),"none"!==p.default.funbox&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="funbox"><i class="fas fa-gamepad"></i>${p.default.funbox.replace(/_/g," ").replace(/#/g,", ")}</div>`),"on"===p.default.confidenceMode&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="confidenceMode"><i class="fas fa-backspace"></i>confidence</div>'),"max"===p.default.confidenceMode&&$(".pageTest #testModesNotice").append('<div class="textButton" commands="confidenceMode"><i class="fas fa-backspace"></i>max confidence</div>'),"off"!=p.default.stopOnError&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="stopOnError"><i class="fas fa-hand-paper"></i>stop on ${p.default.stopOnError}</div>`),"default"!==p.default.layout&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="layouts"><i class="fas fa-keyboard"></i>emulating ${p.default.layout.replace(/_/g," ")}</div>`),"off"!==p.default.oppositeShiftMode&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="oppositeShiftMode"><i class="fas fa-exchange-alt"></i>opposite shift${"keymap"===p.default.oppositeShiftMode?" (keymap)":""}</div>`);let s="";try{null===(n=null===(o=d.getSnapshot())||void 0===o?void 0:o.tags)||void 0===n||n.forEach((e=>{!0===e.active&&(s+=e.display+", ")})),""!==s&&$(".pageTest #testModesNotice").append(`<div class="textButton" commands="tags"><i class="fas fa-tag"></i>${s.substring(0,s.length-2)}</div>`)}catch(e){}i&&$(".pageTest #testModesNotice").css("transition","none").css("opacity",0).animate({opacity:1},125,(()=>{$(".pageTest #testModesNotice").css("transition",".125s")}))}))}h.subscribe((e=>{["difficulty","blindMode","stopOnError","paceCaret","minWpm","minAcc","minBurst","confidenceMode","layout","showAverage","alwaysShowCPM"].includes(e)&&v()})),t.update=v},6578:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.addPower=t.reset=t.init=void 0;const u=a(o(4203)),l=a(o(210)),d=s(o(6705)),c={particles:[],rendering:!1},p=1500,f=[6,3];function h(e,t,o){return{x:e,y:t,color:o,alpha:1,prev:{x:e,y:t},vel:{x:p-Math.random()*p*2,y:p-Math.random()*p*2}}}function m(e){c.canvas&&c.deltaTime&&(e.prev.x=e.x,e.prev.y=e.y,e.x+=e.vel.x*c.deltaTime,e.y+=e.vel.y*c.deltaTime,e.x>c.canvas.width?(e.vel.x*=-.3,e.x=c.canvas.width-.3*(e.x-c.canvas.width)):e.x<0&&(e.vel.x*=-.3,e.x*=-.3),e.y>c.canvas.height?(e.vel.y*=-.3,e.y=c.canvas.height-.3*(e.y-c.canvas.height)):e.y<0&&(e.vel.y*=-1,e.y*=-1),e.vel.y+=1e3*c.deltaTime,e.vel.x*=1-.05*c.deltaTime,e.alpha*=1-.6*c.deltaTime)}function g(){if(!c.lastFrame||!c.context2d||!c.canvas)return;c.rendering=!0;const e=Date.now();c.deltaTime=(e-c.lastFrame)/1e3,c.lastFrame=e,c.context2d.clearRect(0,0,c.canvas.width,c.canvas.height);const t=[];for(let e=0;e<c.particles.length;e++){const o=c.particles[e];o.alpha<.1||(m(o),c.context2d.globalAlpha=o.alpha,c.context2d.strokeStyle=o.color,c.context2d.lineWidth=4,c.context2d.beginPath(),c.context2d.moveTo(Math.round(o.prev.x),Math.round(o.prev.y)),c.context2d.lineTo(Math.round(o.x),Math.round(o.y)),c.context2d.stroke(),t.push(o))}c.particles=t,c.particles.length&&!l.get()?requestAnimationFrame(g):(c.context2d.clearRect(0,0,c.canvas.width,c.canvas.height),c.rendering=!1)}function v(e=!1){if(!c.resetTimeOut)return;delete c.resetTimeOut,clearTimeout(c.resetTimeOut);const t=$(document.body);t.css("transition","all .25s, transform 0.8s"),t.css("transform","translate(0,0)"),setTimeout((()=>{t.css("transition","all .25s, transform .05s"),$("html").css("overflow","inherit"),$("html").css("overflow-y","scroll")}),e?0:1e3)}t.init=function(){c.caret=$("#caret"),c.canvas=function(){const e=document.createElement("canvas");return e.style.cssText="position:fixed;top:0;left:0;pointer-events:none;z-index:999999",e.height=window.innerHeight,e.width=window.innerWidth,window.addEventListener("resize",(()=>{e.height=window.innerHeight,e.width=window.innerWidth})),document.body.appendChild(e),e}(),c.context2d=c.canvas.getContext("2d")},t.reset=v,t.addPower=function(e=!0,t=!1){var o,n,i,a,s;return r(this,void 0,void 0,(function*(){if("off"===d.default.monkeyPowerLevel||l.get())return;if(d.default.blindMode&&(e=!0),["3","4"].includes(d.default.monkeyPowerLevel)){$("html").css("overflow","hidden");const e=[Math.round(10-10*Math.random()),Math.round(10-10*Math.random())];$(document.body).css("transform",`translate(${e[0]}px, ${e[1]}px)`),c.resetTimeOut&&clearTimeout(c.resetTimeOut),c.resetTimeOut=setTimeout(v,2e3)}const r=null===(o=c.caret)||void 0===o?void 0:o.offset(),p=[null!==(n=null==r?void 0:r.left)&&void 0!==n?n:0,(null!==(i=null==r?void 0:r.top)&&void 0!==i?i:0)+(null!==(s=null===(a=c.caret)||void 0===a?void 0:a.height())&&void 0!==s?s:0)];for(let o=Math.round((f[0]+Math.random()*f[1])*(t?2:1));o>0;o--){const t=["2","4"].includes(d.default.monkeyPowerLevel)?`#${Math.floor(256*Math.random()).toString(16)}${Math.floor(256*Math.random()).toString(16)}${Math.floor(256*Math.random()).toString(16)}`:e?yield u.get("caret"):yield u.get("error");c.particles.push(h(...p,t))}c.rendering||(c.lastFrame=Date.now(),g())}))}},5185:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0});const n=o(6144);$("#nocss .requestedStylesheets").html("Requested stylesheets:<br>"+[...document.querySelectorAll("link[rel=stylesheet")].map((e=>e.href)).filter((e=>/\/css\/style/gi.test(e))).join("<br>")),$("#nocss .requestedJs").html("Requested Javascript files:<br>"+[...document.querySelectorAll("script")].map((e=>e.src)).filter((e=>/(\/js\/mon|\/js\/vendor)/gi.test(e))).join("<br>")+"<br><br>Client version:<br>"+n.CLIENT_VERSION),window.navigator.userAgent.toLowerCase().includes("mac")?$("#nocss .keys").html('\n    <span\n      style="\n        padding: 1rem;\n        display: inline-block;\n        border-radius: 1rem;\n        background: #2c2e31;\n        margin-top: 1rem;\n        margin-bottom: 1rem;\n      "\n    >\n      Cmd\n    </span>\n    +\n    <span\n      style="\n        padding: 1rem;\n        display: inline-block;\n        border-radius: 1rem;\n        background: #2c2e31;\n      "\n    >\n      Shift\n    </span>\n    +\n    <span\n      style="\n        padding: 1rem;\n        display: inline-block;\n        border-radius: 1rem;\n        background: #2c2e31;\n      "\n    >\n      R\n    </span>\n  '):$("#nocss .keys").html('\n    <span\n      style="\n        padding: 1rem;\n        display: inline-block;\n        border-radius: 1rem;\n        background: #2c2e31;\n        margin-bottom: 1rem;\n      "\n    >\n      Ctrl\n    </span>\n    +\n    <span\n      style="\n        padding: 1rem;\n        display: inline-block;\n        border-radius: 1rem;\n        background: #2c2e31;\n      "\n    >\n      Shift\n    </span>\n    +\n    <span\n      style="\n        padding: 1rem;\n        display: inline-block;\n        border-radius: 1rem;\n        background: #2c2e31;\n      "\n    >\n      R\n    </span>\n  ')},3368:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.clearAllNotifications=t.addBanner=t.add=void 0;const r=o(2189),s=a(o(3388)),u=a(o(6389)),l=a(o(8766));function d(){const e=$("#bannerCenter").height();$("#centerContent").css("padding-top",e+s.convertRemToPixels(2)+"px"),$("#notificationCenter").css("margin-top",e+"px")}let c=0;class p{constructor(e,t,o,n,i,a,r,u=(()=>{}),l){this.type=e,this.message=l?t:s.escapeHTML(t),this.level=o,this.important=n||!1,this.duration="banner"===e?i:null==i?-1===o?0:3e3:1e3*i,this.customTitle=a,this.customIcon=r,this.id=c++,this.closeCallback=u}show(){let e="notice",t='<i class="fas fa-fw fa-exclamation"></i>',o="Notice";if(1===this.level?(e="good",t='<i class="fas fa-fw fa-check"></i>',o="Success"):-1===this.level&&(e="bad",t='<i class="fas fa-fw fa-times"></i>',o="Error",console.error(this.message)),this.important&&(e+=" important"),null!=this.customTitle&&(o=this.customTitle),"banner"===this.type&&(t='<i class="fas fa-fw fa-bullhorn"></i>'),null!=this.customIcon&&(t=`<i class="fas fa-fw fa-${this.customIcon}"></i>`),"notification"===this.type){const n=$("#notificationCenter .history").height();$("#notificationCenter .history").prepend(`\n          \n          <div class="notif ${e}" id=${this.id}>\n              <div class="icon">${t}</div>\n              <div class="message"><div class="title">${o}</div>${this.message}</div>\n          </div>     \n\n          `);const i=$("#notificationCenter .history").height();$(`#notificationCenter .notif[id='${this.id}']`).remove(),$("#notificationCenter .history").css("margin-top",0).animate({marginTop:i-n},125,(()=>{$("#notificationCenter .history").css("margin-top",0),$("#notificationCenter .history").prepend(`\n          \n                  <div class="notif ${e}" id=${this.id}>\n                      <div class="icon">${t}</div>\n                      <div class="message"><div class="title">${o}</div>${this.message}</div>\n                  </div>     \n\n              `),$(`#notificationCenter .notif[id='${this.id}']`).css("opacity",0).animate({opacity:1},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).css("opacity","")})),$(`#notificationCenter .notif[id='${this.id}']`).on("click",(()=>{this.hide(),this.closeCallback()}))})),$(`#notificationCenter .notif[id='${this.id}']`).hover((()=>{$(`#notificationCenter .notif[id='${this.id}']`).toggleClass("hover")}))}else if("banner"===this.type){let o=`<div class="icon lefticon">${t}</div>`;/images\/.*/.test(this.customIcon)&&(o=`<div class="image" style="background-image: url(${this.customIcon})"></div>`),$("#bannerCenter").prepend(`\n        <div class="banner ${e}" id="${this.id}">\n        <div class="container">\n          ${o}\n          <div class="text">\n            ${this.message}\n          </div>\n          ${this.duration>=0?'\n          <div class="closeButton">\n            <i class="fas fa-fw fa-times"></i>\n          </div>\n          ':`<div class="righticon">${t}</div>`}\n        </div>\n      </div>\n      `),d(),u.dispatch(),this.duration>=0&&$(`#bannerCenter .banner[id='${this.id}'] .closeButton`).on("click",(()=>{this.hide(),this.closeCallback()})),this.message.includes("please refresh")&&($(`#bannerCenter .banner[id='${this.id}']`).css("cursor","pointer"),$(`#bannerCenter .banner[id='${this.id}']`).on("click",(()=>{window.location.reload()})))}this.duration>0&&setTimeout((()=>{this.hide()}),this.duration+250)}hide(){"notification"===this.type?$(`#notificationCenter .notif[id='${this.id}']`).css("opacity",1).animate({opacity:0},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).animate({height:0},125,(()=>{$(`#notificationCenter .notif[id='${this.id}']`).remove()}))})):"banner"===this.type&&$(`#bannerCenter .banner[id='${this.id}']`).css("opacity",1).animate({opacity:0},125,(()=>{$(`#bannerCenter .banner[id='${this.id}']`).remove(),d(),u.dispatch()}))}}t.add=function(e,t=0,o={}){l.dispatch(e,t,o.customTitle),new p("notification",e,t,o.important,o.duration,o.customTitle,o.customIcon,o.closeCallback,o.allowHTML).show()},t.addBanner=function(e,t=-1,o="bullhorn",n=!1,i,a){const r=new p("banner",e,t,!1,n?-1:0,void 0,o,i,a);return r.show(),r.id},t.clearAllNotifications=function(){$("#notificationCenter .notif").remove()};const f=(0,r.debounce)(100,d);$(window).on("resize",(()=>{f()}))},7686:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateNameFontSize=t.update=void 0;const u=a(o(6350)),l=s(o(9546)),d=s(o(4673)),c=a(o(3388)),p=o(7401),f=o(2189),h=a(o(8281)),m=a(o(7346)),g=s(o(1715));function v(e,t){var o,n,i,a,s,f,h,m,v,b,w,C,_,S,P,x,k,T,O,M,A,j,L,W,B,I,E,F,D,R,V;return r(this,void 0,void 0,(function*(){const r=e.charAt(0).toUpperCase()+e.slice(1),q=$(`.page${r} .profile`),K=$(`.page${r} .profile .details`);q.attr("uid",null!==(o=t.uid)&&void 0!==o?o:""),q.attr("name",null!==(n=t.name)&&void 0!==n?n:"");const H=!0===t.banned,N=!0===t.lbOptOut;if(!(K&&t&&t.name&&t.addedAt))return;if(K.find(".placeholderAvatar").removeClass("hidden"),t.discordAvatar&&t.discordId&&!H){const e=yield c.getDiscordAvatarUrl(t.discordId,t.discordAvatar,256);e&&(K.find(".placeholderAvatar").addClass("hidden"),K.find(".avatar").css("background-image",`url(${e})`))}else K.find(".avatar").removeAttr("style");if((null===(i=t.inventory)||void 0===i?void 0:i.badges)&&!H){let e="",o="";for(const n of t.inventory.badges)!0===n.selected?e=(0,p.getHTMLById)(n.id):o+=(0,p.getHTMLById)(n.id,!0);K.find(".badges").empty().append(e),K.find(".allBadges").empty().append(o)}K.find(".name").text(t.name),H&&K.find(".name").append('<div class="bannedIcon" aria-label="This account is banned" data-balloon-pos="up"><i class="fas fa-gavel"></i></div>'),N&&K.find(".name").append('<div class="bannedIcon" aria-label="This account has opted out of leaderboards" data-balloon-pos="up"><i class="fas fa-crown"></i></div>'),y(e);const z="Joined "+(0,l.default)(null!==(a=t.addedAt)&&void 0!==a?a:0,"dd MMM yyyy"),U=new Date(t.addedAt),Q=(0,d.default)(new Date,U),G=`${Q} day${1!=Q?"s":""} ago`;K.find(".joined").text(z).attr("aria-label",G);let J="";if(t.streak&&(null==t?void 0:t.streak)>1?(K.find(".streak").text(`Current streak: ${t.streak} ${1===t.streak?"day":"days"}`),J=`Longest streak: ${t.maxStreak} ${1===t.maxStreak?"day":"days"}`):(K.find(".streak").text(""),J=""),"account"===e){const e=null===(s=u.getSnapshot())||void 0===s?void 0:s.results,o=null==e?void 0:e[0],n=864e5,i=36e5*(null!==(f=t.streakHourOffset)&&void 0!==f?f:0),a=(0,g.default)(c.getCurrentDayTimestamp()+n+i);if(o){const e=c.isToday(o.timestamp),n=t.streakHourOffset?`(${t.streakHourOffset>0?"+":""}${t.streakHourOffset} offset)`:"";e?(J+="\nClaimed today: yes",J+=`\nCome back in: ${a} ${n}`):(J+="\nClaimed today: no",J+=`\nStreak lost in: ${a} ${n}`),void 0===t.streakHourOffset&&(J+="\n\nIf the streak reset time doesn't line up with your timezone, you can change it in Settings > Danger zone > Update streak hour offset.")}}K.find(".streak").attr("aria-label",J).attr("data-balloon-break","");const Y=K.find(".typingStats");Y.find(".started .value").text(null!==(m=null===(h=t.typingStats)||void 0===h?void 0:h.startedTests)&&void 0!==m?m:0),Y.find(".completed .value").text(null!==(b=null===(v=t.typingStats)||void 0===v?void 0:v.completedTests)&&void 0!==b?b:0),Y.find(".timeTyping .value").text(c.secondsToString(Math.round(null!==(C=null===(w=t.typingStats)||void 0===w?void 0:w.timeTyping)&&void 0!==C?C:0),!0,!0));let Z=!1,X=!1,ee=!1;if(!H&&(Z=!!(null===(_=t.details)||void 0===_?void 0:_.bio),K.find(".bio .value").text(null!==(P=null===(S=t.details)||void 0===S?void 0:S.bio)&&void 0!==P?P:""),X=!!(null===(x=t.details)||void 0===x?void 0:x.keyboard),K.find(".keyboard .value").text(null!==(T=null===(k=t.details)||void 0===k?void 0:k.keyboard)&&void 0!==T?T:""),(null===(O=t.details)||void 0===O?void 0:O.socialProfiles.github)||(null===(M=t.details)||void 0===M?void 0:M.socialProfiles.twitter)||(null===(A=t.details)||void 0===A?void 0:A.socialProfiles.website))){ee=!0;const e=K.find(".socials .value");e.empty();const o=null===(j=t.details)||void 0===j?void 0:j.socialProfiles.github;o&&e.append(`<a href='https://github.com/${c.escapeHTML(o)}/' target="_blank" rel="nofollow me" aria-label="${c.escapeHTML(o)}" data-balloon-pos="up"><i class="fab fa-fw fa-github"></i></a>`);const n=null===(L=t.details)||void 0===L?void 0:L.socialProfiles.twitter;n&&e.append(`<a href='https://twitter.com/${c.escapeHTML(n)}' target="_blank" rel="nofollow me" aria-label="${c.escapeHTML(n)}" data-balloon-pos="up"><i class="fab fa-fw fa-twitter"></i></a>`);const i=null===(W=t.details)||void 0===W?void 0:W.socialProfiles.website,a=/^https?:\/\/(?:www\.)?([^/]+)/,r=null!==(I=null===(B=null==i?void 0:i.match(a))||void 0===B?void 0:B[1])&&void 0!==I?I:i;i&&e.append(`<a href='${c.escapeHTML(i)}' target="_blank" rel="nofollow me" aria-label="${c.escapeHTML(null!=r?r:"")}" data-balloon-pos="up"><i class="fas fa-fw fa-globe"></i></a>`)}const te=null!==(E=t.xp)&&void 0!==E?E:0,oe=c.getLevel(te),ne=Math.floor(oe),ie=c.getXpForLevel(ne),ae=Math.round(ie*(oe%1));if(K.find(".level").text(ne).attr("aria-label",`${c.abbreviateNumber(te)} total xp`),K.find(".xp").text(`${c.abbreviateNumber(ae)}/${c.abbreviateNumber(ie)}`),K.find(".xpBar .bar").css("width",ae/ie*100+"%"),K.find(".xp").attr("aria-label",`${c.abbreviateNumber(ie-ae)} xp until next level`),H)q.find(".leaderboardsPositions").addClass("hidden");else{q.find(".leaderboardsPositions").removeClass("hidden");const o="profile"===e?t.allTimeLbs:t.lbMemory,n=null===(D=null===(F=null==o?void 0:o.time)||void 0===F?void 0:F[15])||void 0===D?void 0:D.english,i=null===(V=null===(R=null==o?void 0:o.time)||void 0===R?void 0:R[60])||void 0===V?void 0:V.english;if(n||i){const e=n?c.getPositionString(n):"-";q.find(".leaderboardsPositions .group.t15 .pos").text(e);const t=i?c.getPositionString(i):"-";q.find(".leaderboardsPositions .group.t60 .pos").text(t)}else q.find(".leaderboardsPositions").addClass("hidden")}const re=Z||X;Z?K.find(".bio").removeClass("hidden"):K.find(".bio").addClass("hidden"),X?K.find(".keyboard").removeClass("hidden"):K.find(".keyboard").addClass("hidden"),re?(K.find(".bioAndKeyboard").removeClass("hidden"),K.find(".sep2").removeClass("hidden")):(K.find(".bioAndKeyboard").addClass("hidden"),K.find(".sep2").addClass("hidden")),ee?(K.find(".socials").removeClass("hidden"),K.find(".sep3").removeClass("hidden")):(K.find(".socials").addClass("hidden"),K.find(".sep3").addClass("hidden")),K.removeClass("none"),K.removeClass("bioAndKey"),K.removeClass("soc"),K.removeClass("both"),ee||re?ee&&!re?K.addClass("soc"):!ee&&re?K.addClass("bioAndKey"):ee&&re&&K.addClass("both"):K.addClass("none")}))}function y(e){if(/^((?!chrome|android).)*safari/i.test(navigator.userAgent))return;let t;if("account"===e?t=$(".pageAccount .profile .details"):"profile"===e&&(t=$(".pageProfile .profile .details")),!t)return;const o=t.find(".name"),n=o.parent()[0],i=o[0],a=c.convertRemToPixels(2);i.style.fontSize="10px";const r=n.clientWidth/i.clientWidth*10,s=Math.min(Math.max(r,10),a);i.style.fontSize=`${s}px`}t.update=v,t.updateNameFontSize=y,$(".details .editProfileButton").on("click",(()=>{const e=u.getSnapshot();e&&h.show((()=>{v("account",e)}))}));const b=(0,f.throttle)(1e3,(()=>{const e=m.get();e&&["account","profile"].includes(e)&&y(e)}));$(window).on("resize",(()=>{b()}))},2709:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=s(o(7355)),l=o(3388),d=a(o(3368)),c=s(o(9546)),p=a(o(6001));function f(){var e,t;return null!==(t=JSON.parse(null!==(e=window.localStorage.getItem("confirmedPSAs"))&&void 0!==e?e:"[]"))&&void 0!==t?t:[]}t.show=function(){return r(this,void 0,void 0,(function*(){const e=yield function(){return r(this,void 0,void 0,(function*(){const e=yield u.default.psas.get();return 500===e.status?((0,l.isLocalhost)()?d.addBanner("Dev Info: Backend server not running",0,"exclamation-triangle",!1):d.addBanner("Looks like the server is experiencing maintenance or some unexpected down time.<br>Check the <a target= '_blank' href='https://monkeytype.instatus.com/'>status page</a> or <a target= '_blank' href='https://twitter.com/monkeytypegame'>Twitter</a> for more information.",-1,"exclamation-triangle",!1,void 0,!0),null):503===e.status?(d.addBanner("Server is currently under maintenance. <a target= '_blank' href='https://monkeytype.instatus.com/'>Check the status page</a> for more info.",-1,"bullhorn",!0,void 0,!0),null):200!==e.status?null:e.data}))}();if(null===e)return;if(0==e.length)return void window.localStorage.setItem("confirmedPSAs",JSON.stringify([]));const t=f();e.forEach((e=>{var o,n;if(e.date){const t=new Date(e.date),o=e.date-Date.now(),n=(0,l.secondsToString)(o/1e3,!1,!1,"text",!1,!0);e.message=e.message.replace("{dateDifference}",n),e.message=e.message.replace("{dateNoTime}",(0,c.default)(t,"dd MMM yyyy")),e.message=e.message.replace("{date}",(0,c.default)(t,"dd MMM yyyy HH:mm"))}p.addPSA(e.message,null!==(o=e.level)&&void 0!==o?o:-1),t.includes(e._id)&&!1===(null!==(n=e.sticky)&&void 0!==n&&n)||d.addBanner(e.message,e.level,"bullhorn",e.sticky,(()=>{!function(e){const t=f();t.push(e),window.localStorage.setItem("confirmedPSAs",JSON.stringify(t))}(e._id)}),!0)}))}))}},9406:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=a(o(7346));let s=!1;$(document).on("click",".scrollToTopButton",(()=>{window.scrollTo({top:0,behavior:"smooth"})})),$(window).scroll((()=>{const e=r.get();if("test"!=e&&("about"==e||"settings"==e||"account"==e)){const e=window.scrollY;!s&&e>100?($(".scrollToTopButton").removeClass("invisible"),s=!0):s&&e<100&&($(".scrollToTopButton").addClass("invisible"),s=!1)}}))},4203:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.reset=t.getAll=t.get=void 0;let n={bg:"#323437",main:"#e2b714",caret:"#e2b714",sub:"#646669",subAlt:"#2c2e31",text:"#d1d0c5",error:"#ca4754",errorExtra:"#7e2a33",colorfulError:"#ca4754",colorfulErrorExtra:"#7e2a33"};function i(){const e=getComputedStyle(document.body);n.bg=e.getPropertyValue("--bg-color").replace(" ",""),n.main=e.getPropertyValue("--main-color").replace(" ",""),n.caret=e.getPropertyValue("--caret-color").replace(" ",""),n.sub=e.getPropertyValue("--sub-color").replace(" ",""),n.subAlt=e.getPropertyValue("--sub-alt-color").replace(" ",""),n.text=e.getPropertyValue("--text-color").replace(" ",""),n.error=e.getPropertyValue("--error-color").replace(" ",""),n.errorExtra=e.getPropertyValue("--error-extra-color").replace(" ",""),n.colorfulError=e.getPropertyValue("--colorful-error-color").replace(" ",""),n.colorfulErrorExtra=e.getPropertyValue("--colorful-error-extra-color").replace(" ","")}t.get=function(e){return o(this,void 0,void 0,(function*(){return n[e]||i(),n[e]}))},t.getAll=function(){return o(this,void 0,void 0,(function*(){return n.bg||i(),n}))},t.reset=function(){n={bg:"",main:"",caret:"",sub:"",subAlt:"",text:"",error:"",errorExtra:"",colorfulError:"",colorfulErrorExtra:""}},t.update=i},8980:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};function n(e){window.localStorage.setItem("lastSeenVersion",e)}Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0,t.show=function(e){return o(this,void 0,void 0,(function*(){const t=yield null!==(o=window.localStorage.getItem("lastSeenVersion"))&&void 0!==o?o:"";var o;""!==t?t!==e&&(caches.keys().then((function(e){for(const t of e)caches.delete(t)})),$("#newVersionIndicator").removeClass("hidden"),n(e)):n(e)}))}},9294:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),o(9835),o(6617);const s=a(o(1072)),u=a(o(6350));o(5209),o(1493);const l=r(o(6705)),d=a(o(2474)),c=a(o(4626)),p=a(o(6084)),f=a(o(3448)),h=a(o(4897));o(4674);const m=o(9029);o(4173),o(4660),o(5153),o(2666),o(2845),o(2994),o(9360),o(8553),o(8325),o(7193),o(5331),o(6327),o(9406),o(4611),o(7841),o(5764),o(3875);const g=a(o(7520));o(41),o(4487),o(5185);const v=o(2864);o(3285),o(6857),o(2560);const y=o.g;y.snapshot=u.getSnapshot,y.config=l.default,y.toggleFilterDebug=g.toggleFilterDebug,y.glarsesMode=m.enable,y.stats=d.getStats,y.replay=c.getReplayExport,y.enableTimerDebug=p.enableTimerDebug,y.getTimerStats=p.getTimerStats,y.toggleUnsmoothedRaw=f.toggleUnsmoothedRaw,y.enableSpacingDebug=h.enableSpacingDebug,y.egVideoListener=v.egVideoListener,y.wpmCalculationDebug=d.wpmCalculationDebug,y.toggleDebugLogs=s.toggleDebugLogs},6389:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(){o.forEach((e=>{try{e()}catch(e){console.error("Banner event subscriber threw an error"),console.error(e)}}))}},1446:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t,n,i,a){o.forEach((o=>{try{o(e,t,n,i,a)}catch(e){console.error("Config event subscriber threw an error"),console.error(e)}}))}},5928:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=void 0;const o=[];function n(e){o.forEach((t=>{try{t(e)}catch(e){console.error("Connection event subscriber threw an error"),console.error(e)}}))}t.subscribe=function(e){o.push(e)},window.addEventListener("load",(()=>{window.addEventListener("online",(()=>{n(!0)})),window.addEventListener("offline",(()=>{n(!1)}))}))},5701:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t){o.forEach((o=>{try{o(e,t)}catch(e){console.error("Google Sign Up event subscriber threw an error"),console.error(e)}}))}},5368:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.highlight=t.flash=t.subscribe=void 0;const n=[];t.subscribe=function(e){n.push(e)},t.flash=function(e,t){return o(this,void 0,void 0,(function*(){n.forEach((o=>{try{o("flash",e,t)}catch(e){console.error("Keymap flash event subscriber threw an error"),console.error(e)}}))}))},t.highlight=function(e){return o(this,void 0,void 0,(function*(){n.forEach((t=>{try{t("highlight",e)}catch(e){console.error("Keymap highlight event subscriber threw an error"),console.error(e)}}))}))}},2428:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.navigate=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.navigate=function(e,t){o.forEach((o=>{try{o(e,t)}catch(e){console.error("Navigate event subscriber threw an error"),console.error(e)}}))}},8766:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t,n){o.forEach((o=>{try{o(e,t,n)}catch(e){console.error("Notification event subscriber threw an error"),console.error(e)}}))}},6507:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const o=[];t.subscribe=function(e){o.push(e)},t.dispatch=function(e,t,n){o.forEach((o=>{try{o(e,t,n)}catch(e){console.error("Timer event subscriber threw an error"),console.error(e)}}))}},5012:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.dispatch=t.subscribe=void 0;const n=[];t.subscribe=function(e){n.push(e)},t.dispatch=function(e){return o(this,void 0,void 0,(function*(){n.forEach((t=>{try{t(e)}catch(e){console.error("TTS event subscriber threw an error"),console.error(e)}}))}))}},5973:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const u=s(o(3361)),l=a(o(590));t.page=new u.default("404",$(".page.page404"),"/404",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){l.remove("page404")}))),(()=>r(void 0,void 0,void 0,(function*(){l.append("page404","middle")}))),(()=>r(void 0,void 0,void 0,(function*(){})))),l.save("page404")},5331:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const u=a(o(3388)),l=s(o(3361)),d=s(o(7355)),c=a(o(3368)),p=a(o(1833)),f=a(o(3285)),h=s(o(4834)),m=a(o(590));let g,v;function y(){return r(this,void 0,void 0,(function*(){let e,t;try{e=yield u.getSupportersList()}catch(t){c.add(u.createErrorMessage(t,"Failed to get supporters"),-1),e=[]}try{t=yield u.getContributorsList()}catch(e){c.add(u.createErrorMessage(e,"Failed to get contributors"),-1),t=[]}(function(){return r(this,void 0,void 0,(function*(){if(g&&v)return;if(!f.get())return void c.add("Cannot update all time stats - offline",0);const e=yield d.default.publicStats.getSpeedHistogram({language:"english",mode:"time",mode2:"60"});e.status>=200&&e.status<300?g=e.data:c.add(`Failed to get global speed stats for histogram: ${e.message}`,-1);const t=yield d.default.publicStats.getTypingStats();t.status>=200&&t.status<300?v=t.data:c.add(`Failed to get global typing stats: ${e.message}`,-1)}))})().then((()=>{!function(){var e,t;if(!g&&!v)return;p.globalSpeedHistogram.updateColors();const o=function(e){const t=[],o=[],n=Object.keys(e).sort(((e,t)=>parseInt(e,10)-parseInt(t,10)));for(let i=0;i<n.length;i++){const a=parseInt(n[i],10);if(t.push({x:a,y:e[a]}),o.push(`${a} - ${a+9}`),a+10!=parseInt(n[i+1],10))for(let e=a+10;e<parseInt(n[i+1],10);e+=10)t.push({x:e,y:0}),o.push(`${e} - ${e+9}`)}return{data:t,labels:o}}(g);p.globalSpeedHistogram.data.labels=o.labels,p.globalSpeedHistogram.data.datasets[0].data=o.data;const n=Math.round(v.timeTyping),i=(0,h.default)({start:0,end:1e3*n});$(".pageAbout #totalTimeTypingStat .val").text(null!==(t=null===(e=i.years)||void 0===e?void 0:e.toString())&&void 0!==t?t:""),$(".pageAbout #totalTimeTypingStat .valSmall").text("years"),$(".pageAbout #totalTimeTypingStat").attr("aria-label",Math.round(n/3600)+" hours"),$(".pageAbout #totalStartedTestsStat .val").text(Math.round(v.testsStarted/1e6)),$(".pageAbout #totalStartedTestsStat .valSmall").text("million"),$(".pageAbout #totalStartedTestsStat").attr("aria-label",v.testsStarted+" tests"),$(".pageAbout #totalCompletedTestsStat .val").text(Math.round(v.testsCompleted/1e6)),$(".pageAbout #totalCompletedTestsStat .valSmall").text("million"),$(".pageAbout #totalCompletedTestsStat").attr("aria-label",v.testsCompleted+" tests")}()}));const o=document.querySelector(".pageAbout .supporters");let n="";for(const t of e)n+=`<div>${t}</div>`;o&&(o.innerHTML=n);const i=document.querySelector(".pageAbout .contributors");let a="";for(const e of t)a+=`<div>${e}</div>`;i&&(i.innerHTML=a)}))}t.page=new l.default("about",$(".page.pageAbout"),"/about",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){$(".pageAbout .contributors").empty(),$(".pageAbout .supporters").empty(),p.globalSpeedHistogram.data.datasets[0].data=[],p.globalSpeedHistogram.updateColors(),m.remove("pageAbout")}))),(()=>r(void 0,void 0,void 0,(function*(){m.append("pageAbout","middle"),y()}))),(()=>r(void 0,void 0,void 0,(function*(){})))),m.save("pageAbout")},7520:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.update=t.downloadResults=t.reset=t.toggleFilterDebug=void 0;const u=a(o(6350)),l=a(o(1329)),d=a(o(4203)),c=a(o(1833)),p=a(o(6705)),f=p,h=a(o(6472)),m=a(o(2681)),g=a(o(140)),v=a(o(4335)),y=a(o(8911)),b=a(o(2026)),w=a(o(3368)),C=s(o(3361)),_=a(o(3388)),S=a(o(7686)),P=s(o(9546)),x=a(o(3285)),k=a(o(590)),T=o(6617);let O=!1;t.toggleFilterDebug=function(){O=!O,O&&console.log("filterDebug is on")};let M=[],A=0;function j(e){var t,o;if(!M||0==M.length)return;let n;n=e&&e>A?10*Math.ceil(e/10):A+10;for(let e=A;e<n;e++){const n=M[e];if(!n)continue;let i,a=n.difficulty;null==a&&(a="normal");try{i=p.default.alwaysShowCPM?(5*n.rawWpm).toFixed(2):n.rawWpm.toFixed(2),null==i&&(i="-")}catch(e){i="-"}let r=`<span aria-label="${null===(t=n.language)||void 0===t?void 0:t.replace("_"," ")}" data-balloon-pos="up"><i class="fas fa-fw fa-globe-americas"></i></span>`;"normal"===a?r+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="far fa-fw fa-star"></i></span>`:"expert"===a?r+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star-half-alt"></i></span>`:"master"===a&&(r+=`<span aria-label="${n.difficulty}" data-balloon-pos="up"><i class="fas fa-fw fa-star"></i></span>`),n.punctuation&&(r+='<span aria-label="punctuation" data-balloon-pos="up"><i class="fas fa-fw fa-at"></i></span>'),n.numbers&&(r+='<span aria-label="numbers" data-balloon-pos="up"><i class="fas fa-fw fa-hashtag"></i></span>'),n.blindMode&&(r+='<span aria-label="blind mode" data-balloon-pos="up"><i class="fas fa-fw fa-eye-slash"></i></span>'),n.lazyMode&&(r+='<span aria-label="lazy mode" data-balloon-pos="up"><i class="fas fa-fw fa-couch"></i></span>'),"none"!==n.funbox&&void 0!==n.funbox&&(r+=`<span aria-label="${n.funbox.replace(/_/g," ").replace(/#/g,", ")}" data-balloon-pos="up"><i class="fas fa-gamepad"></i></span>`),void 0===n.chartData?r+='<span class="miniResultChartButton" aria-label="No chart data found" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':"toolong"===n.chartData?r+='<span class="miniResultChartButton" aria-label="Chart history is not available for long tests" data-balloon-pos="up"><i class="fas fa-chart-line"></i></span>':r+=`<span class="miniResultChartButton" aria-label="View graph" data-balloon-pos="up" filteredResultsId="${e}" style="opacity: 1"><i class="fas fa-chart-line"></i></span>`;let s,l="";void 0!==n.tags&&n.tags.length>0&&(n.tags.forEach((e=>{var t,o;null===(o=null===(t=u.getSnapshot())||void 0===t?void 0:t.tags)||void 0===o||o.forEach((t=>{e===t._id&&(l+=t.display+", ")}))})),l=l.substring(0,l.length-2)),s=void 0===n.tags?"[]":JSON.stringify(n.tags);let d=`<span id="resultEditTags" resultId="${n._id}" tags='${s}' aria-label="no tags" data-balloon-pos="up" style="opacity: .25"><i class="fas fa-fw fa-tag"></i></span>`;""!==l&&(d=void 0!==n.tags&&n.tags.length>1?`<span id="resultEditTags" resultId="${n._id}" tags='${s}' aria-label="${l}" data-balloon-pos="up"><i class="fas fa-fw fa-tags"></i></span>`:`<span id="resultEditTags" resultId="${n._id}" tags='${s}' aria-label="${l}" data-balloon-pos="up"><i class="fas fa-fw fa-tag"></i></span>`);let c="-";n.consistency&&(c=n.consistency.toFixed(2)+"%");let f=null===(o=n.isPb)||void 0===o?void 0:o.toString();f=f?'<i class="fas fa-fw fa-crown"></i>':"";let h="-";h=n.charStats?n.charStats.join("/"):n.correctChars+"/"+n.incorrectChars+"/-/-";const m=new Date(n.timestamp);$(".pageAccount .history table tbody").append(`\n    <tr class="resultRow" id="result-${e}">\n    <td>${f}</td>\n    <td>${(p.default.alwaysShowCPM?5*n.wpm:n.wpm).toFixed(2)}</td>\n    <td>${i}</td>\n    <td>${n.acc.toFixed(2)}%</td>\n    <td>${c}</td>\n    <td>${h}</td>\n    <td>${n.mode} ${n.mode2}</td>\n    <td class="infoIcons">${r}</td>\n    <td>${d}</td>\n    <td>${(0,P.default)(m,"dd MMM yyyy")}<br>\n    ${(0,P.default)(m,"HH:mm")}\n    </td>\n    </tr>`)}A=n,A>=M.length?$(".pageAccount .loadMoreButton").addClass("hidden"):$(".pageAccount .loadMoreButton").removeClass("hidden")}function L(){$(".pageAccount .history table tbody").empty(),c.accountHistogram.data.datasets[0].data=[],c.accountActivity.data.datasets[0].data=[],c.accountActivity.data.datasets[1].data=[],c.accountHistory.data.datasets[0].data=[],c.accountHistory.data.datasets[1].data=[],c.accountHistory.data.datasets[2].data=[],c.accountHistory.data.datasets[3].data=[],c.accountHistory.data.datasets[4].data=[],c.accountHistory.data.datasets[5].data=[],c.accountHistory.data.datasets[6].data=[]}t.reset=L;let W=0,B=[],I=[];function E(){var e;return r(this,void 0,void 0,(function*(){if(void 0!==(null===(e=u.getSnapshot())||void 0===e?void 0:e.results))return;const t=yield u.getUserResults();!1!==t||x.get()?(b.addAllFromToday(),t&&l.updateActive()):w.add("Could not get results - you are offline",-1,{duration:5})}))}function F(){return r(this,void 0,void 0,(function*(){if(v.updateBar(0,!0),null===u.getSnapshot())w.add("Missing account data. Please refresh.",-1),$(".pageAccount .preloader").html("Missing account data. Please refresh.");else{v.updateBar(90),yield E();try{yield _.sleep(0),yield function(){var e,t;return r(this,void 0,void 0,(function*(){v.updateText("Displaying stats..."),v.updateBar(100),console.log("updating account page"),d.update(),m.update();const o=u.getSnapshot();if(!o)return;g.update(o.personalBests),S.update("account",o),B=[],I=[];const n=[];A=0;let i=0,a="",s=0,f=0,h=0,b=0,C=0,P=0,x=0,k=0;const T={total:0,count:0,last10Total:0,last10Count:0,max:0};let L=0;W=0;let E=0,D=0,R=0,V=0;const q={},K={};M=[],$(".pageAccount .history table tbody").empty(),null===(t=null===(e=u.getSnapshot())||void 0===e?void 0:e.results)||void 0===t||t.forEach((e=>{var t,o,r,d,c,m,g,v,y;try{if(!l.getFilter("pb",!0===e.isPb?"yes":"no"))return void(O&&console.log("skipping result due to pb filter",e));let n=e.difficulty;if(null==n&&(n="normal"),!l.getFilter("difficulty",n))return void(O&&console.log("skipping result due to difficulty filter",e));if(!l.getFilter("mode",e.mode))return void(O&&console.log("skipping result due to mode filter",e));if("time"==e.mode){let t="custom";if(["15","30","60","120"].includes(`${e.mode2}`)&&(t=`${e.mode2}`),!l.getFilter("time",t))return void(O&&console.log("skipping result due to time filter",e))}else if("words"==e.mode){let t="custom";if(["10","25","50","100","200"].includes(`${e.mode2}`)&&(t=`${e.mode2}`),!l.getFilter("words",t))return void(O&&console.log("skipping result due to word filter",e))}if(null!=e.quoteLength){let t;if(0===e.quoteLength?t="short":1===e.quoteLength?t="medium":2===e.quoteLength?t="long":3===e.quoteLength&&(t="thicc"),void 0!==t&&!l.getFilter("quoteLength",t))return void(O&&console.log("skipping result due to quoteLength filter",e))}let i=l.getFilter("language",null!==(t=e.language)&&void 0!==t?t:"english");if("english_expanded"===e.language&&l.getFilter("language","english_1k")&&(i=!0),!i)return void(O&&console.log("skipping result due to language filter",e));let a="off";if(e.punctuation&&(a="on"),!l.getFilter("punctuation",a))return void(O&&console.log("skipping result due to punctuation filter",e));let s="off";if(e.numbers&&(s="on"),!l.getFilter("numbers",s))return void(O&&console.log("skipping result due to numbers filter",e));if("none"===e.funbox||void 0===e.funbox){if(!l.getFilter("funbox","none"))return void(O&&console.log("skipping result due to funbox filter",e))}else{let t=0;for(const o of e.funbox.split("#"))if(l.getFilter("funbox",o)){t++;break}if(0==t)return void(O&&console.log("skipping result due to funbox filter",e))}let p=!0;if(void 0===e.tags||0===e.tags.length)(null!==(d=null===(r=null===(o=u.getSnapshot())||void 0===o?void 0:o.tags)||void 0===r?void 0:r.length)&&void 0!==d?d:0)>0?l.getFilter("tags","none")&&(p=!1):p=!1;else{const t=null===(m=null===(c=u.getSnapshot())||void 0===c?void 0:c.tags)||void 0===m?void 0:m.map((e=>e._id));if(void 0===t)return;e.tags.forEach((e=>{p&&((null==t?void 0:t.includes(e))?l.getFilter("tags",e)&&(p=!1):l.getFilter("tags","none")&&(p=!1))}))}if(p)return void(O&&console.log("skipping result due to tag filter",e));const f=Math.abs(e.timestamp-Date.now())/1e3;let h=!0;if((l.getFilter("date","all")||l.getFilter("date","last_day")&&f<=86400||l.getFilter("date","last_week")&&f<=604800||l.getFilter("date","last_month")&&f<=2592e3||l.getFilter("date","last_3months")&&f<=7776e3)&&(h=!1),h)return void(O&&console.log("skipping result due to date filter",e));M.push(e)}catch(t){w.add("Something went wrong when filtering. Resetting filters.",0),console.log(e),console.error(t),l.reset(),l.updateActive(),F()}L+=Math.round(e.wpm/60*e.testDuration);const $=new Date(e.timestamp);$.setSeconds(0),$.setMinutes(0),$.setHours(0),$.setMilliseconds(0);const S=$.getTime();Object.keys(q).includes(String(S))?(q[S].amount++,q[S].time+=e.testDuration+e.incompleteTestSeconds-(null!==(g=e.afkDuration)&&void 0!==g?g:0),q[S].totalWpm+=e.wpm):q[S]={amount:1,time:e.testDuration+e.incompleteTestSeconds-(null!==(v=e.afkDuration)&&void 0!==v?v:0),totalWpm:e.wpm};const A=10*Math.floor(Math.round(e.wpm)/10);Object.keys(K).includes(String(A))?K[A]++:K[A]=1;let j=0;if(null==e.testDuration&&"custom"!==e.mode2&&"zen"!==e.mode2?"time"==e.mode?j=parseInt(e.mode2):"words"==e.mode&&(j=parseInt(e.mode2)/e.wpm*60):j=parseFloat(e.testDuration),null!=e.incompleteTestSeconds?j+=e.incompleteTestSeconds:null!=e.restartCount&&e.restartCount>0&&(j+=j/4*e.restartCount),W+=j,b<10&&(b++,C+=e.wpm,k+=e.acc,void 0!==e.consistency&&(R+=e.consistency)),h++,void 0!==e.consistency&&(V++,D+=e.consistency,e.consistency>E&&(E=e.consistency)),null!=e.rawWpm&&(T.last10Count<10&&(T.last10Count++,T.last10Total+=e.rawWpm),T.total+=e.rawWpm,T.count++,e.rawWpm>T.max&&(T.max=e.rawWpm)),e.acc>P&&(P=e.acc),x+=e.acc,null!=e.restartCount&&(s+=e.restartCount),B.push({x:M.length,y:p.default.alwaysShowCPM?_.roundTo2(5*e.wpm):e.wpm,wpm:p.default.alwaysShowCPM?_.roundTo2(5*e.wpm):e.wpm,acc:e.acc,mode:e.mode,mode2:e.mode2,punctuation:e.punctuation,language:e.language,timestamp:e.timestamp,difficulty:e.difficulty,raw:p.default.alwaysShowCPM?_.roundTo2(5*e.rawWpm):e.rawWpm,isPb:null!==(y=e.isPb)&&void 0!==y&&y}),n.push(e.wpm),I.push({x:M.length,y:e.acc,errorRate:100-e.acc}),e.wpm>i){const t=e.punctuation?",<br>with punctuation":"",o=e.numbers?",<br> "+(e.punctuation?"&":"")+"with numbers":"";i=e.wpm,a="custom"==e.mode?e.mode:e.mode+" "+e.mode2+t+o}f+=e.wpm})),p.default.alwaysShowCPM?$(".pageAccount .group.history table thead tr td:nth-child(2)").text("cpm"):$(".pageAccount .group.history table thead tr td:nth-child(2)").text("wpm"),yield _.sleep(0),j();const H=[],N=[],z=[];Object.keys(q).forEach((e=>{const t=parseInt(e);H.push({x:t,y:q[t].amount}),N.push({x:t,y:_.roundTo2(q[t].time),amount:q[t].amount}),z.push({x:t,y:_.roundTo2((p.default.alwaysShowCPM?5*q[t].totalWpm:q[t].totalWpm)/q[t].amount)})}));const U=c.accountActivity.options.scales;p.default.alwaysShowCPM?U.avgWpm.title.text="Average Cpm":U.avgWpm.title.text="Average Wpm",c.accountActivity.data.datasets[0].data=N,c.accountActivity.data.datasets[1].data=z;const Q=[],G=[],J=Object.keys(K);for(let e=0;e<J.length;e++){const t=parseInt(J[e]);if(G.push(`${t} - ${t+9}`),Q.push({x:t,y:K[t]}),t+10!=parseInt(J[e+1]))for(let o=t+10;o<parseInt(J[e+1]);o+=10)Q.push({x:o,y:0}),G.push(`${o} - ${o+9}`)}c.accountHistogram.data.labels=G,c.accountHistogram.data.datasets[0].data=Q;const Y=c.accountHistory.options.scales;if(p.default.alwaysShowCPM?Y.wpm.title.text="Characters per Minute":Y.wpm.title.text="Words per Minute",B.length>0){let e=0;const t=[];for(let o=B.length-1;o>=0;o--){const n=B[o];n.y>e&&(e=n.y,t.push(n))}t.push({x:1,y:t[t.length-1].y});const o=[],n=[],i=[],a=[];for(let e=0;e<B.length;e++){const t=B.slice(e,e+10),r=I.slice(e,e+10),s=t.reduce(((e,{y:t})=>e+t),0)/t.length,u=r.reduce(((e,{y:t})=>e+t),0)/r.length;o.push({x:e+1,y:s}),n.push({x:e+1,y:u});const l=B.slice(e,e+100),d=I.slice(e,e+100),c=l.reduce(((e,{y:t})=>e+t),0)/l.length,p=d.reduce(((e,{y:t})=>e+t),0)/d.length;i.push({x:e+1,y:c}),a.push({x:e+1,y:p})}c.accountHistory.data.datasets[0].data=B,c.accountHistory.data.datasets[1].data=t,c.accountHistory.data.datasets[2].data=I,c.accountHistory.data.datasets[3].data=o,c.accountHistory.data.datasets[4].data=n,c.accountHistory.data.datasets[5].data=i,c.accountHistory.data.datasets[6].data=a,Y.x.max=B.length+1}const Z=B.map((e=>e.y)),X=Math.min(...Z),ee=Math.max(...Z);if(Y.wpm.max=Math.floor(ee)+(10-Math.floor(ee)%10),Y.pb.max=Math.floor(ee)+(10-Math.floor(ee)%10),Y.wpmAvgTen.max=Math.floor(ee)+(10-Math.floor(ee)%10),Y.wpmAvgHundred.max=Math.floor(ee)+(10-Math.floor(ee)%10),p.default.startGraphsAtZero)Y.wpm.min=0,Y.pb.min=0,Y.wpmAvgTen.min=0,Y.wpmAvgHundred.min=0;else{const e=Math.floor(X);Y.wpm.min=e,Y.pb.min=e,Y.wpmAvgTen.min=e,Y.wpmAvgHundred.min=e}B&&0!=B.length?($(".pageAccount .group.noDataError").addClass("hidden"),$(".pageAccount .group.chart").removeClass("hidden"),$(".pageAccount .group.dailyActivityChart").removeClass("hidden"),$(".pageAccount .group.histogramChart").removeClass("hidden"),$(".pageAccount .group.aboveHistory").removeClass("hidden"),$(".pageAccount .group.history").removeClass("hidden"),$(".pageAccount .triplegroup.stats").removeClass("hidden"),$(".pageAccount .group.estimatedWordsTyped").removeClass("hidden")):($(".pageAccount .group.noDataError").removeClass("hidden"),$(".pageAccount .group.chart").addClass("hidden"),$(".pageAccount .group.dailyActivityChart").addClass("hidden"),$(".pageAccount .group.histogramChart").addClass("hidden"),$(".pageAccount .group.aboveHistory").addClass("hidden"),$(".pageAccount .group.history").addClass("hidden"),$(".pageAccount .triplegroup.stats").addClass("hidden"),$(".pageAccount .group.estimatedWordsTyped").addClass("hidden")),$(".pageAccount .timeTotalFiltered .val").text(_.secondsToString(Math.round(W),!0,!0));let te=i;p.default.alwaysShowCPM&&(te=5*i),te=p.default.alwaysShowDecimalPlaces?_.roundTo2(te).toFixed(2):Math.round(te);const oe=p.default.alwaysShowCPM?"cpm":"wpm";$(".pageAccount .highestWpm .title").text(`highest ${oe}`),$(".pageAccount .highestWpm .val").text(te);let ne=f;p.default.alwaysShowCPM&&(ne=5*f),ne=p.default.alwaysShowDecimalPlaces?_.roundTo2(ne/h).toFixed(2):Math.round(ne/h),$(".pageAccount .averageWpm .title").text(`average ${oe}`),$(".pageAccount .averageWpm .val").text(ne);let ie=C;p.default.alwaysShowCPM&&(ie=5*C),ie=p.default.alwaysShowDecimalPlaces?_.roundTo2(ie/b).toFixed(2):Math.round(ie/b),$(".pageAccount .averageWpm10 .title").text(`average ${oe} (last 10 tests)`),$(".pageAccount .averageWpm10 .val").text(ie);let ae=T.max;p.default.alwaysShowCPM&&(ae=5*T.max),ae=p.default.alwaysShowDecimalPlaces?_.roundTo2(ae).toFixed(2):Math.round(ae),$(".pageAccount .highestRaw .title").text(`highest raw ${oe}`),$(".pageAccount .highestRaw .val").text(ae);let re=T.total;p.default.alwaysShowCPM&&(re=5*T.total),re=p.default.alwaysShowDecimalPlaces?_.roundTo2(re/T.count).toFixed(2):Math.round(re/T.count),$(".pageAccount .averageRaw .title").text(`average raw ${oe}`),$(".pageAccount .averageRaw .val").text(re);let se=T.last10Total;p.default.alwaysShowCPM&&(se=5*T.last10Total),se=p.default.alwaysShowDecimalPlaces?_.roundTo2(se/T.last10Count).toFixed(2):Math.round(se/T.last10Count),$(".pageAccount .averageRaw10 .title").text(`average raw ${oe} (last 10 tests)`),$(".pageAccount .averageRaw10 .val").text(se),$(".pageAccount .highestWpm .mode").html(a),$(".pageAccount .testsTaken .val").text(h);let ue=P;ue=p.default.alwaysShowDecimalPlaces?_.roundTo2(ue).toFixed(2):Math.floor(ue),$(".pageAccount .highestAcc .val").text(ue+"%");let le=x;le=p.default.alwaysShowDecimalPlaces?_.roundTo2(le/h):Math.floor(le/h),$(".pageAccount .avgAcc .val").text(le+"%");let de=k;if(de=p.default.alwaysShowDecimalPlaces?_.roundTo2(de/b):Math.floor(de/b),$(".pageAccount .avgAcc10 .val").text(de+"%"),0==D||null==D)$(".pageAccount .avgCons .val").text("-"),$(".pageAccount .avgCons10 .val").text("-");else{let e=E;e=p.default.alwaysShowDecimalPlaces?_.roundTo2(e).toFixed(2):Math.round(e),$(".pageAccount .highestCons .val").text(e+"%");let t=D;t=p.default.alwaysShowDecimalPlaces?_.roundTo2(t/V).toFixed(2):Math.round(t/V),$(".pageAccount .avgCons .val").text(t+"%");let o=R;o=p.default.alwaysShowDecimalPlaces?_.roundTo2(o/Math.min(b,V)).toFixed(2):Math.round(o/Math.min(b,V)),$(".pageAccount .avgCons10 .val").text(o+"%")}$(".pageAccount .testsStarted .val").text(`${h+s}`),$(".pageAccount .testsCompleted .val").text(`${h}(${Math.floor(h/(h+s)*100)}%)`),$(".pageAccount .testsCompleted .avgres").text(`\n    ${(s/h).toFixed(1)} restarts per completed test\n  `);const ce=M.map((e=>e.wpm)).reverse(),pe=_.findLineByLeastSquares(ce),fe=(pe[1][1]-pe[0][1])*(3600/W),he=fe>0?"+":"";$(".pageAccount .group.chart .below .text").text(`Speed change per hour spent typing: ${he+_.roundTo2(p.default.alwaysShowCPM?5*fe:fe)} ${p.default.alwaysShowCPM?"cpm":"wpm"}`),$(".pageAccount .estimatedWordsTyped .val").text(L),(B.length||I.length)&&(c.updateAccountChartButtons(),c.accountHistory.options.animation=!1,c.accountHistory.update(),delete c.accountHistory.options.animation),yield _.sleep(0),c.accountActivity.update(),c.accountHistogram.update(),v.updateBar(100,!0),y.set(!1),_.swapElements($(".pageAccount .preloader"),$(".pageAccount .content"),250,(()=>r(this,void 0,void 0,(function*(){$(".page.pageAccount").css("height","unset")}))),(()=>r(this,void 0,void 0,(function*(){setTimeout((()=>{S.updateNameFontSize("account")}),10)}))))}))}()}catch(e){console.error(e),w.add(`Something went wrong: ${e}`,-1)}}}))}function D(e,t,o=null){if($("td").removeClass("headerSorted"),$("td").children("i").remove(),$(t).addClass("headerSorted"),M.length<2)return;const n=e;let i=!0;null!==o?1==o?$(t).append('<i class="fas fa-sort-down" aria-hidden="true"></i>'):(i=!1,$(t).append('<i class="fas fa-sort-up" aria-hidden="true"></i>')):parseInt(M[0][n])<=parseInt(M[M.length-1][n])?(i=!0,$(t).append('<i class="fas fa-sort-down" aria-hidden="true"></i>')):(i=!1,$(t).append('<i class="fas fa-sort-up", aria-hidden="true"></i>'));const a=[],r=[];for(;a.length<M.length;){let e=Number.MAX_VALUE,t=-1,o=-1;for(let a=0;a<M.length;a++)i?M[a][n]>=t&&!r.includes(a)&&(t=M[a][n],o=a):M[a][n]<=e&&!r.includes(a)&&(e=M[a][n],o=a);a.push(M[o]),r.push(o)}M=a,$(".pageAccount .history table tbody").empty(),A=0,j()}t.downloadResults=E,t.update=F,$(".pageAccount .toggleAccuracyOnChart").on("click",(()=>{f.setAccountChartAccuracy(!("on"==p.default.accountChart[0]))})),$(".pageAccount .toggleAverage10OnChart").on("click",(()=>{f.setAccountChartAvg10(!("on"==p.default.accountChart[1]))})),$(".pageAccount .toggleAverage100OnChart").on("click",(()=>{f.setAccountChartAvg100(!("on"==p.default.accountChart[2]))})),$(".pageAccount .loadMoreButton").on("click",(()=>{j()})),$(".pageAccount #accountHistoryChart").on("click",(()=>{var e,t,o;const n=c.accountHistoryActiveIndex;if(j(n),!window)return;const i=null!==(e=$(window).height())&&void 0!==e?e:0,a=(null!==(o=null===(t=$(`#result-${n}`).offset())||void 0===t?void 0:t.top)&&void 0!==o?o:0)-i/2;$([document.documentElement,document.body]).animate({scrollTop:a},500),$(".resultRow").removeClass("active"),$(`#result-${n}`).addClass("active")})),$(".pageAccount").on("click",".miniResultChartButton",(e=>{var t;console.log("updating");const o=$(e.currentTarget).attr("filteredResultsId");void 0!==o&&(h.updateData(M[parseInt(o)].chartData),h.show(),h.updatePosition(e.pageX-(null!==(t=$(".pageAccount .miniResultChartWrapper").outerWidth())&&void 0!==t?t:0),e.pageY+30))})),$(".pageAccount .group.history").on("click",".history-wpm-header",(()=>{D("wpm",".history-wpm-header")})),$(".pageAccount .group.history").on("click",".history-raw-header",(()=>{D("rawWpm",".history-raw-header")})),$(".pageAccount .group.history").on("click",".history-acc-header",(()=>{D("acc",".history-acc-header")})),$(".pageAccount .group.history").on("click",".history-correct-chars-header",(()=>{D("correctChars",".history-correct-chars-header")})),$(".pageAccount .group.history").on("click",".history-incorrect-chars-header",(()=>{D("incorrectChars",".history-incorrect-chars-header")})),$(".pageAccount .group.history").on("click",".history-consistency-header",(()=>{D("consistency",".history-consistency-header")})),$(".pageAccount .group.history").on("click",".history-date-header",(()=>{D("timestamp",".history-date-header")})),$(".pageAccount .group.history").on("click",".buttonsAndTitle .buttons .button",(()=>{D("timestamp",".history-date-header",!0)})),$(".pageAccount .group.topFilters, .pageAccount .filterButtons").on("click",".button",(()=>{setTimeout((()=>{F()}),0)})),$(".pageAccount .group.presetFilterButtons").on("click",".filterBtns .filterPresets .select-filter-preset",(e=>{l.setFilterPreset($(e.target).data("id")),F()})),$(".pageAccount .content .group.aboveHistory .exportCSV").on("click",(()=>{_.downloadResultsCSV(M)})),$(".pageAccount .profile").on("click",".details .copyLink",(()=>{const e=u.getSnapshot();if(!e)return;const{name:t}=e,o=`${location.origin}/profile/${t}`;navigator.clipboard.writeText(o).then((function(){w.add("URL Copied to clipboard",0)}),(function(){alert("Failed to copy using the Clipboard API. Here's the link: "+o)}))})),t.page=new C.default("account",$(".page.pageAccount"),"/account",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){L(),l.removeButtons(),k.remove("pageAccount")}))),(()=>r(void 0,void 0,void 0,(function*(){var e,t;k.append("pageAccount","middle"),yield l.appendButtons(),l.updateActive(),yield _.sleep(0),null==(null===(e=u.getSnapshot())||void 0===e?void 0:e.results)&&($(".pageLoading .fill, .pageAccount .fill").css("width","0%"),$(".pageAccount .content").addClass("hidden"),$(".pageAccount .preloader").removeClass("hidden")),yield F(),yield _.sleep(0),function(){r(this,void 0,void 0,(function*(){c.accountHistory.updateColors(),yield _.sleep(0),c.accountActivity.updateColors(),yield _.sleep(0),c.accountHistogram.updateColors(),yield _.sleep(0)}))}(),$(".pageAccount .content p.accountVerificatinNotice").remove(),!1===(null===(t=null===T.Auth||void 0===T.Auth?void 0:T.Auth.currentUser)||void 0===t?void 0:t.emailVerified)&&$(".pageAccount .content").prepend('<p class="accountVerificatinNotice" style="text-align:center">Your account is not verified. <a class="sendVerificationEmail">Send the verification email again</a>.')}))),(()=>r(void 0,void 0,void 0,(function*(){})))),$((()=>{k.save("pageAccount")}))},4335:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.showBar=t.updateText=t.updateBar=void 0;const u=a(o(3388)),l=s(o(3361)),d=a(o(590));t.updateBar=function(e,t=!1){const o=t?100:1e3;$(".pageLoading .fill, .pageAccount .fill").stop(!0,t).animate({width:e+"%"},o)},t.updateText=function(e){$(".pageLoading .text, .pageAccount .preloader .text").text(e)},t.showBar=function(){return r(this,void 0,void 0,(function*(){return new Promise((e=>{u.swapElements($(".pageLoading .preloader .icon"),$(".pageLoading .preloader .barWrapper"),125,(()=>r(this,void 0,void 0,(function*(){e()})))),u.swapElements($(".pageAccount .preloader .icon"),$(".pageAccount .preloader .barWrapper"),125,(()=>r(this,void 0,void 0,(function*(){e()}))))}))}))},t.page=new l.default("loading",$(".page.pageLoading"),"/",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){d.remove("pageLoading")}))),(()=>r(void 0,void 0,void 0,(function*(){d.append("pageLoading")}))),(()=>r(void 0,void 0,void 0,(function*(){}))))},2588:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.updateSignupButton=t.hidePreloader=t.showPreloader=t.disableInputs=t.enableInputs=t.disableSignInButton=t.enableSignInButton=t.disableSignUpButton=t.enableSignUpButton=void 0;const u=o(2189),l=s(o(7355)),d=s(o(3361)),c=a(o(3368)),p=o(5817),f=a(o(590)),h=a(o(3388));function m(){$(".page.pageLogin .register.side .button").removeClass("disabled")}function g(){$(".page.pageLogin .register.side .button").addClass("disabled")}t.enableSignUpButton=m,t.disableSignUpButton=g,t.enableSignInButton=function(){$(".page.pageLogin .login.side .button").removeClass("disabled")},t.disableSignInButton=function(){$(".page.pageLogin .login.side .button").addClass("disabled")},t.enableInputs=function(){$(".pageLogin input").prop("disabled",!1)},t.disableInputs=function(){$(".pageLogin input").prop("disabled",!0)},t.showPreloader=function(){$(".pageLogin .preloader").removeClass("hidden")},t.hidePreloader=function(){$(".pageLogin .preloader").addClass("hidden")},t.updateSignupButton=()=>{"available"!==C.get()||"valid"!==_.get()||"match"!==S.get()||"good"!==P.get()||"match"!==x.get()?g():m()};const v=(0,u.debounce)(1e3,(()=>r(void 0,void 0,void 0,(function*(){const e=$(".page.pageLogin .register.side .usernameInput").val();if(!e)return void(0,t.updateSignupButton)();const o=yield l.default.users.getNameAvailability(e);200===o.status?C.show("available",o.message):422===o.status?C.show("unavailable",o.message):409===o.status?C.show("taken",o.message):(C.show("unavailable",o.message),c.add("Failed to check name availability: "+o.message,-1)),(0,t.updateSignupButton)()})))),y=()=>{$(".page.pageLogin .register.side .emailInput").val()===$(".page.pageLogin .register.side .verifyEmailInput").val()?S.show("match"):S.show("mismatch"),(0,t.updateSignupButton)()},b=()=>{const e=$(".page.pageLogin .register.side .passwordInput").val();h.isLocalhost()||h.isPasswordStrong(e)?P.show("good","Password is good"):e.length<8?P.show("short","Password must be at least 8 characters"):e.length>64?P.show("long","Password must be at most 64 characters"):P.show("weak","Password must contain at least one capital letter, number, and special character"),(0,t.updateSignupButton)()},w=()=>{$(".page.pageLogin .register.side .passwordInput").val()===$(".page.pageLogin .register.side .verifyPasswordInput").val()?x.show("match"):x.show("mismatch"),(0,t.updateSignupButton)()},C=new p.InputIndicator($(".page.pageLogin .register.side input.usernameInput"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},taken:{icon:"fa-times",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:0}}),_=new p.InputIndicator($(".page.pageLogin .register.side input.emailInput"),{valid:{icon:"fa-check",level:1},invalid:{icon:"fa-times",level:-1}}),S=new p.InputIndicator($(".page.pageLogin .register.side input.verifyEmailInput"),{match:{icon:"fa-check",level:1},mismatch:{icon:"fa-times",level:-1}}),P=new p.InputIndicator($(".page.pageLogin .register.side input.passwordInput"),{good:{icon:"fa-check",level:1},short:{icon:"fa-times",level:-1},long:{icon:"fa-times",level:-1},weak:{icon:"fa-times",level:-1}}),x=new p.InputIndicator($(".page.pageLogin .register.side input.verifyPasswordInput"),{match:{icon:"fa-check",level:1},mismatch:{icon:"fa-times",level:-1}});$(".page.pageLogin .register.side .usernameInput").on("input",(()=>{setTimeout((()=>{if(""===$(".page.pageLogin .register.side .usernameInput").val())return C.hide();C.show("checking"),v()}),1)})),$(".page.pageLogin .register.side .emailInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .emailInput").val()&&!$(".page.pageLogin .register.side .verifyEmailInput").val())return _.hide(),void S.hide();(()=>{const e=$(".page.pageLogin .register.side .emailInput").val();/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?_.show("valid"):_.show("invalid"),(0,t.updateSignupButton)()})(),y()})),$(".page.pageLogin .register.side .verifyEmailInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .emailInput").val()&&!$(".page.pageLogin .register.side .verifyEmailInput").val())return _.hide(),void S.hide();y()})),$(".page.pageLogin .register.side .passwordInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .passwordInput").val()&&!$(".page.pageLogin .register.side .verifyPasswordInput").val())return P.hide(),void x.hide();b(),w()})),$(".page.pageLogin .register.side .verifyPasswordInput").on("input",(()=>{if(!$(".page.pageLogin .register.side .passwordInput").val()&&!$(".page.pageLogin .register.side .verifyPasswordInput").val())return P.hide(),void x.hide();b(),w()})),t.page=new d.default("login",$(".page.pageLogin"),"/login",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){f.remove("pageLogin")}))),(()=>r(void 0,void 0,void 0,(function*(){f.append("pageLogin","middle"),$(".pageLogin .button").removeClass("disabled"),$(".pageLogin input").prop("disabled",!1)}))),(()=>r(void 0,void 0,void 0,(function*(){})))),$((()=>{f.save("pageLogin")}))},3361:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=class{constructor(e,t,o,n,i,a,r){this.name=e,this.element=t,this.pathname=o,this.beforeHide=n,this.afterHide=i,this.beforeShow=a,this.afterShow=r}}},8949:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const u=s(o(3361)),l=o(5817),d=o(3388),c=s(o(7355)),p=o(2428),f=a(o(590)),h=new l.InputIndicator($(".page.pageProfileSearch .search input"),{notFound:{icon:"fa-user-slash",level:-1},error:{icon:"fa-times",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:1}});function m(){return void 0!==$(".page.pageProfileSearch .search input").attr("disabled")}function g(){return r(this,void 0,void 0,(function*(){h.hide();const e=$(".page.pageProfileSearch .search input").val();if(""===e)return;h.show("checking"),$(".page.pageProfileSearch .search .button").addClass("disabled"),$(".page.pageProfileSearch .search input").attr("disabled","disabled"),yield(0,d.sleep)(500);const t=yield c.default.users.getProfileByName(e);$(".page.pageProfileSearch .search .button").removeClass("disabled"),$(".page.pageProfileSearch .search input").removeAttr("disabled"),404!==t.status?200===t.status?(0,p.navigate)(`/profile/${e}`,{data:t.data}):h.show("error",`Error: ${t.message}`):h.show("notFound","User not found")}))}$(".page.pageProfileSearch .search input").on("keyup",(e=>{"Enter"!==e.key||m()||g()})),$(".page.pageProfileSearch .search .button").on("click",(()=>{m()||g()})),t.page=new u.default("profileSearch",$(".page.pageProfileSearch"),"/profile",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){f.remove("pageProfileSearch")}))),(()=>r(void 0,void 0,void 0,(function*(){f.append("pageProfileSearch","middle"),$(".page.pageProfileSearch input").val(""),h.hide()}))),(()=>r(void 0,void 0,void 0,(function*(){$(".page.pageProfileSearch input").focus()})))),f.save("pageProfileSearch")},4471:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const u=s(o(7355)),l=s(o(3361)),d=a(o(7686)),c=a(o(140)),p=a(o(3368)),f=o(3388),h=a(o(1673)),m=a(o(590));function g(){$(".page.pageProfile .preloader").removeClass("hidden"),$(".page.pageProfile .profile").html('\n      <div class="details none">\n        <div class="avatarAndName">\n          <div class="avatars">\n            <div class="placeholderAvatar">\n              <i class="fas fa-user-circle"></i>\n            </div>\n            <div class="avatar"></div>\n          </div>\n          <div>\n            <div class="name">-</div>\n            <div class="badges"></div>\n            <div class="allBadges"></div>\n            <div class="joined" data-balloon-pos="up">-</div>\n\t          <div class="streak" data-balloon-pos="up">-</div>\n          </div>\n          <div class="levelAndBar">\n            <div class="level">-</div>\n            <div class="xpBar">\n              <div class="bar" style="width: 0%;"></div>\n            </div>\n            <div class="xp" data-balloon-pos="up">-/-</div>\n          </div>\n        </div>\n        <div class="separator sep1"></div>\n        <div class="typingStats vertical">\n          <div class="started">\n            <div class="title">tests started</div>\n            <div class="value">-</div>\n          </div>\n          <div class="completed">\n            <div class="title">tests completed</div>\n            <div class="value">-</div>\n          </div>\n          <div class="timeTyping">\n            <div class="title">time typing</div>\n            <div class="value">-</div>\n          </div>\n        </div>\n        <div class="separator sep2 hidden"></div>\n\n        <div class="bioAndKeyboard vertical hidden">\n          <div class="bio">\n            <div class="title">bio</div>\n            <div class="value">-</div>\n          </div>\n          <div class="keyboard hidden">\n            <div class="title">keyboard</div>\n            <div class="value">-</div>\n          </div>\n        </div>\n        <div class="separator sep3 hidden"></div>\n\n        <div class="socials big hidden">\n          <div class="title">socials</div>\n          <div class="value">-</div>\n        </div>\n        <div class="buttonGroup">\n          <div\n            class="userReportButton button"\n            data-balloon-pos="left"\n            aria-label="Report user"\n          >\n            <i class="fas fa-flag"></i>\n          </div>\n        </div>\n      </div>\n      <div class="leaderboardsPositions">\n        <div class="title">All-Time English Leaderboards</div>\n        <div class="group t15">\n          <div class="testType">15 seconds</div>\n          <div class="pos">-</div>\n        </div>\n        <div class="group t60">\n          <div class="testType">60 seconds</div>\n          <div class="pos">-</div>\n        </div>\n      </div>\n      <div class="pbsWords">\n        <div class="group">\n          <div class="quick">\n            <div class="test">10 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">25 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">50 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">100 words</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n      </div>\n      <div class="pbsTime">\n        <div class="group">\n          <div class="quick">\n            <div class="test">15 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">30 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">60 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n        <div class="group">\n          <div class="quick">\n            <div class="test">120 seconds</div>\n            <div class="wpm">-</div>\n            <div class="acc">-</div>\n          </div>\n        </div>\n      </div>')}$(".page.pageProfile").on("click",".profile .userReportButton",(()=>{var e,t;const o=null!==(e=$(".page.pageProfile .profile").attr("uid"))&&void 0!==e?e:"",n=null!==(t=$(".page.pageProfile .profile").attr("name"))&&void 0!==t?t:"";h.show({uid:o,name:n})})),t.page=new l.default("profile",$(".page.pageProfile"),"/profile",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){m.remove("pageProfile"),g()}))),(e=>r(void 0,void 0,void 0,(function*(){var t;m.append("pageProfile","middle");const o=null===(t=null==e?void 0:e.params)||void 0===t?void 0:t.uidOrName;o?($(".page.pageProfile .preloader").removeClass("hidden"),$(".page.pageProfile .search").addClass("hidden"),$(".page.pageProfile .content").removeClass("hidden"),g(),function(e){r(this,void 0,void 0,(function*(){const t=(0,f.checkIfGetParameterExists)("isUid");if(e.data)$(".page.pageProfile .preloader").addClass("hidden"),d.update("profile",e.data),c.update(e.data.personalBests,!0);else if(e.uidOrName){const o=!0===t?yield u.default.users.getProfileByUid(e.uidOrName):yield u.default.users.getProfileByName(e.uidOrName);if($(".page.pageProfile .preloader").addClass("hidden"),404===o.status){const o=!0===t?"User not found":`User ${e.uidOrName} not found`;$(".page.pageProfile .preloader").addClass("hidden"),$(".page.pageProfile .error").removeClass("hidden"),$(".page.pageProfile .error .message").text(o)}else{if(200!==o.status)return p.add("Failed to load profile: "+o.message,-1);window.history.replaceState(null,"",`/profile/${o.data.name}`)}d.update("profile",o.data),c.update(o.data.personalBests,!0)}else p.add("Missing update parameter!",-1)}))}({uidOrName:o,data:null==e?void 0:e.data})):($(".page.pageProfile .preloader").addClass("hidden"),$(".page.pageProfile .search").removeClass("hidden"),$(".page.pageProfile .content").addClass("hidden"))}))),(()=>r(void 0,void 0,void 0,(function*(){})))),m.save("pageProfile")},8835:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=t.setEventDisabled=t.update=t.showAccountSection=t.updateAuthSections=t.updateDiscordSection=t.hideAccountSection=t.fillSettingsPage=t.reset=t.groups=void 0;const u=s(o(8427)),l=a(o(6705)),d=l,c=a(o(5929)),p=a(o(3388)),f=a(o(6350)),h=o(2591),m=a(o(9343)),g=a(o(4984)),v=a(o(4216)),y=a(o(3368)),b=a(o(9516)),w=a(o(1446)),C=a(o(7346)),_=a(o(6126)),S=a(o(4044)),P=s(o(3361)),x=o(6617),k=s(o(7355)),T=o(8789),O=a(o(590));function M(){$(".pageSettings .section.themes .favThemes.buttons").empty(),$(".pageSettings .section.themes .allThemes.buttons").empty(),$(".pageSettings .section.themes .allCustomThemes.buttons").empty(),$(".pageSettings .section.languageGroups .buttons").empty(),$(".pageSettings select").empty().select2("destroy"),$(".pageSettings .section.funbox .buttons").empty(),$(".pageSettings .section.fontFamily .buttons").empty()}t.groups={},t.reset=M;let A=!1;function j(){return r(this,void 0,void 0,(function*(){l.default.showKeyTips?$(".pageSettings .tip").removeClass("hidden"):$(".pageSettings .tip").addClass("hidden");const e=document.querySelector(".pageSettings .section.language select");e.innerHTML="";let o,n="";try{o=yield p.getLanguageGroups()}catch(e){console.error(p.createErrorMessage(e,"Failed to initialize settings language picker"))}if(o){for(const e of o){let t=`<optgroup label="${e.name}">`;e.languages.forEach((e=>{t+=`<option value="${e}">\n        ${e.replace(/_/g," ")}\n      </option>`})),t+="</optgroup>",n+=t}e.innerHTML=n}$(e).select2({width:"100%"}),yield p.sleep(0);const i=document.querySelector(".pageSettings .section.layout select");i.innerHTML="<option value='default'>off</option>";let a="";const s=document.querySelector(".pageSettings .section.keymapLayout select");s.innerHTML="<option value='overrideSync'>emulator sync</option>";let f,h="";try{f=yield p.getLayoutsList()}catch(e){console.error(p.createErrorMessage(e,"Failed to refresh keymap"))}if(f){for(const e of Object.keys(f))"korean"!==e.toString()&&(a+=`<option value='${e}'>${e.replace(/_/g," ")}</option>`),"default"!=e.toString()&&(h+=`<option value='${e}'>${e.replace(/_/g," ")}</option>`);i.innerHTML+=a,s.innerHTML+=h}$(i).select2({width:"100%"}),$(s).select2({width:"100%"}),yield p.sleep(0);const m=document.querySelector(".pageSettings .section.autoSwitchThemeInputs select.light");m.innerHTML="";let g="";const y=document.querySelector(".pageSettings .section.autoSwitchThemeInputs select.dark");y.innerHTML="";let b,w="";try{b=yield p.getThemesList()}catch(e){console.error(p.createErrorMessage(e,"Failed to load themes into dropdown boxes"))}if(b){for(const e of b)g+=`<option value='${e.name}'>${e.name.replace(/_/g," ")}</option>`,w+=`<option value='${e.name}'>${e.name.replace(/_/g," ")}</option>`;m.innerHTML=g,y.innerHTML=w}$(m).select2({width:"100%"}),$(y).select2({width:"100%"}),yield p.sleep(0),$(".pageSettings .section.autoSwitchThemeInputs select.light").val(l.default.themeLight).trigger("change.select2"),$(".pageSettings .section.autoSwitchThemeInputs select.dark").val(l.default.themeDark).trigger("change.select2");const C=document.querySelector(".pageSettings .section.funbox .buttons");C.innerHTML="<div class=\"funbox button\" funbox='none'>none</div>";let _,S="";try{_=yield p.getFunboxList()}catch(e){console.error(p.createErrorMessage(e,"Failed to get funbox list"))}if(_){for(const e of _)"mirror"===e.name?S+=`<div class="funbox button" funbox='${e.name}' aria-label="${e.info}" data-balloon-pos="up" data-balloon-length="fit" style="transform:scaleX(-1);">${e.name.replace(/_/g," ")}</div>`:"upside_down"===e.name?S+=`<div class="funbox button" funbox='${e.name}' aria-label="${e.info}" data-balloon-pos="up" data-balloon-length="fit" style="transform:scaleX(-1) scaleY(-1);">${e.name.replace(/_/g," ")}</div>`:S+=`<div class="funbox button" funbox='${e.name}' aria-label="${e.info}" data-balloon-pos="up" data-balloon-length="fit">${e.name.replace(/_/g," ")}</div>`;C.innerHTML=S}yield p.sleep(0);let P=!0;const x=document.querySelector(".pageSettings .section.fontFamily .buttons");x.innerHTML="";let k,T="";try{k=yield p.getFontsList()}catch(e){console.error(p.createErrorMessage(e,"Failed to update fonts settings buttons"))}if(k){for(const e of k)l.default.fontFamily===e.name&&(P=!1),T+=`<div class="button${l.default.fontFamily===e.name?" active":""}" style="font-family:${void 0!==e.display?e.display:e.name}" fontFamily="${e.name.replace(/ /g,"_")}" tabindex="0"\n        onclick="this.blur();">${void 0!==e.display?e.display:e.name}</div>`;T+=P?`<div class="button no-auto-handle custom active" onclick="this.blur();">Custom (${l.default.fontFamily.replace(/_/g," ")})</div>`:'<div class="button no-auto-handle custom" onclick="this.blur();">Custom</div>',x.innerHTML=T}if($(".pageSettings .section.customBackgroundSize input").val(l.default.customBackground),$(".pageSettings .section.fontSize input").val(l.default.fontSize),$(".pageSettings .section.customLayoutfluid input").val(l.default.customLayoutfluid.replace(/#/g," ")),yield p.sleep(0),K(!0),A)for(const e of Object.keys(t.groups))t.groups[e].updateInput();else yield function(){return r(this,void 0,void 0,(function*(){yield d.loadPromise,t.groups.smoothCaret=new u.default("smoothCaret",d.setSmoothCaret,"button"),t.groups.difficulty=new u.default("difficulty",d.setDifficulty,"button"),t.groups.quickRestart=new u.default("quickRestart",d.setQuickRestartMode,"button"),t.groups.showLiveWpm=new u.default("showLiveWpm",d.setShowLiveWpm,"button",(()=>{t.groups.keymapMode.updateInput()})),t.groups.showLiveAcc=new u.default("showLiveAcc",d.setShowLiveAcc,"button"),t.groups.showLiveBurst=new u.default("showLiveBurst",d.setShowLiveBurst,"button"),t.groups.showTimerProgress=new u.default("showTimerProgress",d.setShowTimerProgress,"button"),t.groups.showAverage=new u.default("showAverage",d.setShowAverage,"button"),t.groups.keymapMode=new u.default("keymapMode",d.setKeymapMode,"button",(()=>{t.groups.showLiveWpm.updateInput()}),(()=>{"off"===l.default.keymapMode?($(".pageSettings .section.keymapStyle").addClass("hidden"),$(".pageSettings .section.keymapLayout").addClass("hidden"),$(".pageSettings .section.keymapLegendStyle").addClass("hidden"),$(".pageSettings .section.keymapShowTopRow").addClass("hidden")):($(".pageSettings .section.keymapStyle").removeClass("hidden"),$(".pageSettings .section.keymapLayout").removeClass("hidden"),$(".pageSettings .section.keymapLegendStyle").removeClass("hidden"),$(".pageSettings .section.keymapShowTopRow").removeClass("hidden"))})),t.groups.keymapMatrix=new u.default("keymapStyle",d.setKeymapStyle,"button"),t.groups.keymapLayout=new u.default("keymapLayout",d.setKeymapLayout,"select"),t.groups.keymapLegendStyle=new u.default("keymapLegendStyle",d.setKeymapLegendStyle,"button"),t.groups.keymapShowTopRow=new u.default("keymapShowTopRow",d.setKeymapShowTopRow,"button"),t.groups.showKeyTips=new u.default("showKeyTips",d.setKeyTips,"button",void 0,(()=>{l.default.showKeyTips?$(".pageSettings .tip").removeClass("hidden"):$(".pageSettings .tip").addClass("hidden")})),t.groups.freedomMode=new u.default("freedomMode",d.setFreedomMode,"button",(()=>{t.groups.confidenceMode.updateInput()})),t.groups.strictSpace=new u.default("strictSpace",d.setStrictSpace,"button"),t.groups.oppositeShiftMode=new u.default("oppositeShiftMode",d.setOppositeShiftMode,"button"),t.groups.confidenceMode=new u.default("confidenceMode",d.setConfidenceMode,"button",(()=>{t.groups.freedomMode.updateInput(),t.groups.stopOnError.updateInput()})),t.groups.indicateTypos=new u.default("indicateTypos",d.setIndicateTypos,"button"),t.groups.hideExtraLetters=new u.default("hideExtraLetters",d.setHideExtraLetters,"button"),t.groups.blindMode=new u.default("blindMode",d.setBlindMode,"button"),t.groups.quickEnd=new u.default("quickEnd",d.setQuickEnd,"button"),t.groups.repeatQuotes=new u.default("repeatQuotes",d.setRepeatQuotes,"button"),t.groups.ads=new u.default("ads",d.setAds,"button"),t.groups.alwaysShowWordsHistory=new u.default("alwaysShowWordsHistory",d.setAlwaysShowWordsHistory,"button"),t.groups.britishEnglish=new u.default("britishEnglish",d.setBritishEnglish,"button"),t.groups.singleListCommandLine=new u.default("singleListCommandLine",d.setSingleListCommandLine,"button"),t.groups.capsLockWarning=new u.default("capsLockWarning",d.setCapsLockWarning,"button"),t.groups.flipTestColors=new u.default("flipTestColors",d.setFlipTestColors,"button"),t.groups.showOutOfFocusWarning=new u.default("showOutOfFocusWarning",d.setShowOutOfFocusWarning,"button"),t.groups.colorfulMode=new u.default("colorfulMode",d.setColorfulMode,"button"),t.groups.startGraphsAtZero=new u.default("startGraphsAtZero",d.setStartGraphsAtZero,"button"),t.groups.autoSwitchTheme=new u.default("autoSwitchTheme",d.setAutoSwitchTheme,"button"),t.groups.randomTheme=new u.default("randomTheme",d.setRandomTheme,"button"),t.groups.stopOnError=new u.default("stopOnError",d.setStopOnError,"button",(()=>{t.groups.confidenceMode.updateInput()})),t.groups.soundVolume=new u.default("soundVolume",d.setSoundVolume,"button"),t.groups.playSoundOnError=new u.default("playSoundOnError",d.setPlaySoundOnError,"button",(()=>{l.default.playSoundOnError&&c.playError()})),t.groups.playSoundOnClick=new u.default("playSoundOnClick",d.setPlaySoundOnClick,"button",(()=>{"off"!==l.default.playSoundOnClick&&c.playClick("KeyQ")})),t.groups.showAllLines=new u.default("showAllLines",d.setShowAllLines,"button"),t.groups.paceCaret=new u.default("paceCaret",d.setPaceCaret,"button"),t.groups.repeatedPace=new u.default("repeatedPace",d.setRepeatedPace,"button"),t.groups.minWpm=new u.default("minWpm",d.setMinWpm,"button"),t.groups.minAcc=new u.default("minAcc",d.setMinAcc,"button"),t.groups.minBurst=new u.default("minBurst",d.setMinBurst,"button"),t.groups.smoothLineScroll=new u.default("smoothLineScroll",d.setSmoothLineScroll,"button"),t.groups.lazyMode=new u.default("lazyMode",d.setLazyMode,"button"),t.groups.layout=new u.default("layout",d.setLayout,"select"),t.groups.language=new u.default("language",d.setLanguage,"select"),t.groups.fontSize=new u.default("fontSize",d.setFontSize,"button"),t.groups.pageWidth=new u.default("pageWidth",d.setPageWidth,"button"),t.groups.caretStyle=new u.default("caretStyle",d.setCaretStyle,"button"),t.groups.paceCaretStyle=new u.default("paceCaretStyle",d.setPaceCaretStyle,"button"),t.groups.timerStyle=new u.default("timerStyle",d.setTimerStyle,"button"),t.groups.highlightMode=new u.default("highlightMode",d.setHighlightMode,"button"),t.groups.tapeMode=new u.default("tapeMode",d.setTapeMode,"button"),t.groups.timerOpacity=new u.default("timerOpacity",d.setTimerOpacity,"button"),t.groups.timerColor=new u.default("timerColor",d.setTimerColor,"button"),t.groups.fontFamily=new u.default("fontFamily",d.setFontFamily,"button",void 0,(()=>{const e=$(".pageSettings .section.fontFamily .buttons .custom");0===$(".pageSettings .section.fontFamily .buttons .active").length?(e.addClass("active"),e.text(`Custom (${l.default.fontFamily.replace(/_/g," ")})`)):e.text("Custom")})),t.groups.alwaysShowDecimalPlaces=new u.default("alwaysShowDecimalPlaces",d.setAlwaysShowDecimalPlaces,"button"),t.groups.alwaysShowCPM=new u.default("alwaysShowCPM",d.setAlwaysShowCPM,"button"),t.groups.customBackgroundSize=new u.default("customBackgroundSize",d.setCustomBackgroundSize,"button")}))}(),A=!0;K(!1),yield p.sleep(0),yield v.refreshButtons(),yield d.loadPromise}))}function L(){$(".sectionGroupTitle[group='account']").addClass("hidden"),$(".settingsGroup.account").addClass("hidden"),$(".pageSettings .section.needsAccount").addClass("hidden")}function W(){var e;if(null==(null===x.Auth||void 0===x.Auth?void 0:x.Auth.currentUser))$(".pageSettings .section.discordIntegration").addClass("hidden");else{if(!f.getSnapshot())return;$(".pageSettings .section.discordIntegration").removeClass("hidden"),null==(null===(e=f.getSnapshot())||void 0===e?void 0:e.discordId)?($(".pageSettings .section.discordIntegration .buttons").removeClass("hidden"),$(".pageSettings .section.discordIntegration .info").addClass("hidden")):($(".pageSettings .section.discordIntegration .buttons").addClass("hidden"),$(".pageSettings .section.discordIntegration .info").removeClass("hidden"))}}function B(){$(".pageSettings .section.passwordAuthSettings .button").addClass("hidden"),$(".pageSettings .section.googleAuthSettings .button").addClass("hidden");const e=null===x.Auth||void 0===x.Auth?void 0:x.Auth.currentUser;if(!e)return;const t=e.providerData.find((e=>"password"===e.providerId)),o=e.providerData.find((e=>"google.com"===e.providerId));t?($(".pageSettings .section.passwordAuthSettings #emailPasswordAuth").removeClass("hidden"),$(".pageSettings .section.passwordAuthSettings #passPasswordAuth").removeClass("hidden")):$(".pageSettings .section.passwordAuthSettings #addPasswordAuth").removeClass("hidden"),o?($(".pageSettings .section.googleAuthSettings #removeGoogleAuth").removeClass("hidden"),t?$(".pageSettings .section.googleAuthSettings #removeGoogleAuth").removeClass("disabled"):$(".pageSettings .section.googleAuthSettings #removeGoogleAuth").addClass("disabled")):$(".pageSettings .section.googleAuthSettings #addGoogleAuth").removeClass("hidden")}function I(){$(".pageSettings .section.funbox .button").removeClass("active"),$(".pageSettings .section.funbox .button").removeClass("disabled"),p.getFunboxList().then((e=>{e.forEach((e=>{(0,T.areFunboxesCompatible)(l.default.funbox,e.name)||l.default.funbox.split("#").includes(e.name)||$(`.pageSettings .section.funbox .button[funbox='${e.name}']`).addClass("disabled")}))})),l.default.funbox.split("#").forEach((e=>{$(`.pageSettings .section.funbox .button[funbox='${e}']`).addClass("active")}))}function E(){var e,t;if((null===x.Auth||void 0===x.Auth?void 0:x.Auth.currentUser)&&null!==f.getSnapshot()){const o=$(".pageSettings .section.tags .tagsList").empty();null===(t=null===(e=f.getSnapshot())||void 0===e?void 0:e.tags)||void 0===t||t.forEach((e=>{o.append(`\n\n      <div class="buttons tag" id="${e._id}">\n        <div class="button tagButton ${e.active?"active":""}" active="${e.active}">\n          <div class="title">${e.display}</div>\n        </div>\n        <div class="clearPbButton button">\n          <i class="fas fa-crown fa-fw"></i>\n        </div>\n        <div class="editButton button">\n          <i class="fas fa-pen fa-fw"></i>\n        </div>\n        <div class="removeButton button">\n          <i class="fas fa-trash fa-fw"></i>\n        </div>\n      </div>\n\n      `)})),$(".pageSettings .section.tags").removeClass("hidden")}else $(".pageSettings .section.tags").addClass("hidden")}function F(){var e,t;if((null===x.Auth||void 0===x.Auth?void 0:x.Auth.currentUser)&&null!==f.getSnapshot()){const o=$(".pageSettings .section.presets .presetsList").empty();null===(t=null===(e=f.getSnapshot())||void 0===e?void 0:e.presets)||void 0===t||t.forEach((e=>{o.append(`\n      <div class="buttons preset" id="${e._id}">\n        <div class="button presetButton">\n          <div class="title">${e.display}</div>\n        </div>\n        <div class="editButton button">\n          <i class="fas fa-pen fa-fw"></i>\n        </div>\n        <div class="removeButton button">\n          <i class="fas fa-trash fa-fw"></i>\n        </div>\n      </div>\n      \n      `)})),$(".pageSettings .section.presets").removeClass("hidden")}else $(".pageSettings .section.presets").addClass("hidden")}function D(){var e;$(".sectionGroupTitle[group='account']").removeClass("hidden"),$(".settingsGroup.account").removeClass("hidden"),$(".pageSettings .section.needsAccount").removeClass("hidden"),E(),F(),W(),!0===(null===(e=f.getSnapshot())||void 0===e?void 0:e.lbOptOut)&&$(".pageSettings .section.optOutOfLeaderboards").remove()}function R(e=!0){return r(this,void 0,void 0,(function*(){if(e)for(const e of Object.keys(t.groups))t.groups[e].updateInput();E(),F(),I(),W(),B(),yield p.sleep(0),v.updateActiveTab(!0),v.setCustomInputs(!0),$(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val(l.default.paceCaretCustomSpeed),$(".pageSettings .section.minWpm input.customMinWpmSpeed").val(l.default.minWpmCustomSpeed),$(".pageSettings .section.minAcc input.customMinAcc").val(l.default.minAccCustom),$(".pageSettings .section.minBurst input.customMinBurst").val(l.default.minBurstCustomSpeed),l.default.autoSwitchTheme?$(".pageSettings .section.autoSwitchThemeInputs").removeClass("hidden"):$(".pageSettings .section.autoSwitchThemeInputs").addClass("hidden"),""!==l.default.customBackground?$(".pageSettings .section.customBackgroundFilter").removeClass("hidden"):$(".pageSettings .section.customBackgroundFilter").addClass("hidden"),(null===x.Auth||void 0===x.Auth?void 0:x.Auth.currentUser)?D():L();const o=window.navigator.userAgent.toLowerCase().includes("mac")?"cmd":"ctrl";"esc"===l.default.quickRestart?$(".pageSettings .tip").html(`\n    tip: You can also change all these settings quickly using the\n    command line (<key>${o}</key>+<key>shift</key>+<key>p</key>)`):$(".pageSettings .tip").html(`\n    tip: You can also change all these settings quickly using the\n    command line (<key>esc</key> or <key>${o}</key>+<key>shift</key>+<key>p</key>)`)}))}function V(e){$(`.pageSettings .settingsGroup.${e}`).stop(!0,!0).slideToggle(250).toggleClass("slideup"),$(`.pageSettings .settingsGroup.${e}`).hasClass("slideup")?$(`.pageSettings .sectionGroupTitle[group=${e}] .fas`).stop(!0,!0).animate({deg:-90},{duration:250,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}}):$(`.pageSettings .sectionGroupTitle[group=${e}] .fas`).stop(!0,!0).animate({deg:0},{duration:250,step:function(e){$(this).css({transform:"rotate("+e+"deg)"})}})}t.fillSettingsPage=j,t.hideAccountSection=L,t.updateDiscordSection=W,t.updateAuthSections=B,t.showAccountSection=D,t.update=R,$(".pageSettings .section.paceCaret").on("focusout","input.customPaceCaretSpeed",(()=>{d.setPaceCaretCustomSpeed(parseInt($(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val()))})),$(".pageSettings .section.paceCaret").on("click",".button.save",(()=>{d.setPaceCaretCustomSpeed(parseInt($(".pageSettings .section.paceCaret input.customPaceCaretSpeed").val()))})),$(".pageSettings .section.minWpm").on("focusout","input.customMinWpmSpeed",(()=>{d.setMinWpmCustomSpeed(parseInt($(".pageSettings .section.minWpm input.customMinWpmSpeed").val()))})),$(".pageSettings .section.minWpm").on("click",".button.save",(()=>{d.setMinWpmCustomSpeed(parseInt($(".pageSettings .section.minWpm input.customMinWpmSpeed").val()))})),$(".pageSettings .section.minAcc").on("focusout","input.customMinAcc",(()=>{d.setMinAccCustom(parseInt($(".pageSettings .section.minAcc input.customMinAcc").val()))})),$(".pageSettings .section.minAcc").on("click",".button.save",(()=>{d.setMinAccCustom(parseInt($(".pageSettings .section.minAcc input.customMinAcc").val()))})),$(".pageSettings .section.minBurst").on("focusout","input.customMinBurst",(()=>{d.setMinBurstCustomSpeed(parseInt($(".pageSettings .section.minBurst input.customMinBurst").val()))})),$(".pageSettings .section.minBurst").on("click",".button.save",(()=>{d.setMinBurstCustomSpeed(parseInt($(".pageSettings .section.minBurst input.customMinBurst").val()))})),$(".pageSettings .section.funbox").on("click",".button",(e=>{const t=$(e.currentTarget).attr("funbox");(0,h.toggleFunbox)(t),I()})),$(".pageSettings .section.tags").on("click",".tagsList .tag .tagButton",(e=>{const t=e.currentTarget,o=$(t).parent(".tag").attr("id");m.toggle(o),$(t).toggleClass("active")})),$(".pageSettings .section.presets").on("click",".presetsList .preset .presetButton",(e=>{const t=e.currentTarget,o=$(t).parent(".preset").attr("id");console.log("Applying Preset"),q=!0,g.apply(o),q=!1,R()})),$("#importSettingsButton").on("click",(()=>{b.show("import")})),$("#exportSettingsButton").on("click",(()=>{const e=JSON.stringify(l.default);navigator.clipboard.writeText(e).then((function(){y.add("JSON Copied to clipboard",0)}),(function(){b.show("export")}))})),$(".pageSettings .sectionGroupTitle").on("click",(e=>{V($(e.currentTarget).attr("group"))})),$(".pageSettings .section.apeKeys #showApeKeysPopup").on("click",(()=>{_.show()})),$(".pageSettings .section.customBackgroundSize .inputAndButton .save").on("click",(()=>{d.setCustomBackground($(".pageSettings .section.customBackgroundSize .inputAndButton input").val())})),$(".pageSettings .section.customBackgroundSize .inputAndButton input").keypress((e=>{"Enter"===e.key&&d.setCustomBackground($(".pageSettings .section.customBackgroundSize .inputAndButton input").val())})),$(".pageSettings .section.fontSize .inputAndButton .save").on("click",(()=>{d.setFontSize(parseFloat($(".pageSettings .section.fontSize .inputAndButton input").val()))&&y.add("Saved",1,{duration:1})})),$(".pageSettings .section.fontSize .inputAndButton input").keypress((e=>{"Enter"===e.key&&!0===d.setFontSize(parseFloat($(".pageSettings .section.fontSize .inputAndButton input").val()))&&y.add("Saved",1,{duration:1})})),$(".pageSettings .section.customLayoutfluid .inputAndButton .save").on("click",(()=>{d.setCustomLayoutfluid($(".pageSettings .section.customLayoutfluid .inputAndButton input").val()).then((e=>{e&&y.add("Custom layoutfluid saved",1)}))})),$(".pageSettings .section.customLayoutfluid .inputAndButton .input").keypress((e=>{"Enter"===e.key&&d.setCustomLayoutfluid($(".pageSettings .section.customLayoutfluid .inputAndButton input").val()).then((e=>{e&&y.add("Custom layoutfluid saved",1)}))})),$(".pageSettings .quickNav .links a").on("click",(e=>{const t=e.target.innerText;$(`.pageSettings .settingsGroup.${t}`).hasClass("slideup")&&V(t)})),$(".pageSettings .section.updateCookiePreferences .button").on("click",(()=>{S.show(),S.showSettings()})),$(".pageSettings .section.autoSwitchThemeInputs").on("change","select.light",(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||d.setThemeLight(t.val())})),$(".pageSettings .section.autoSwitchThemeInputs").on("change","select.dark",(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||d.setThemeDark(t.val())})),$(".pageSettings .section.discordIntegration .getLinkAndGoToOauth").on("click",(()=>{k.default.users.getOauthLink().then((e=>{window.open(e.data.url,"_self")}))}));let q=!1;function K(e){q=e}t.setEventDisabled=K,w.subscribe((e=>{"fullConfigChange"===e&&K(!0),"fullConfigChangeFinished"===e&&K(!1),q||"saveToLocalStorage"===e||"settings"===C.get()&&"theme"!==e&&R()})),t.page=new P.default("settings",$(".page.pageSettings"),"/settings",(()=>r(void 0,void 0,void 0,(function*(){}))),(()=>r(void 0,void 0,void 0,(function*(){O.remove("pageSettings"),M()}))),(()=>r(void 0,void 0,void 0,(function*(){O.append("pageSettings","middle"),yield j(),yield R(!1)}))),(()=>r(void 0,void 0,void 0,(function*(){})))),$((()=>{O.save("pageSettings")}))},9011:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.page=void 0;const u=a(o(2474)),l=a(o(8673)),d=a(o(2203)),c=a(o(3013)),p=a(o(2591)),f=s(o(3361)),h=o(1493),m=a(o(2453)),g=a(o(2148));t.page=new f.default("test",$(".page.pageTest"),"/",(()=>r(void 0,void 0,void 0,(function*(){d.set(),c.restart(),p.clear(),m.update(),$("#wordsInput").focusout()}))),(()=>r(void 0,void 0,void 0,(function*(){(0,h.updateTestPageAds)(!0)}))),(()=>r(void 0,void 0,void 0,(function*(){(0,h.updateTestPageAds)(!1),u.resetIncomplete(),d.set(),c.restart({noAnim:!0}),p.activate(),g.refresh()}))),(()=>r(void 0,void 0,void 0,(function*(){l.focusWords()}))))},6126:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const u=s(o(7355)),l=a(o(9817)),d=a(o(3368)),c=s(o(9546)),p=a(o(3285)),f=a(o(590)),h=o(3388);let m={};const g="apeKeysPopupWrapper";function v(){const e=m;if(!e)return;const t=$("#apeKeysPopupWrapper table tbody");t.empty();const o=Object.keys(e);0!==o.length?o.forEach((o=>{const n=e[o];t.append(`\n      <tr keyId="${o}">\n        <td>\n          <div class="textButton">\n            ${n.enabled?'<i class="fas fa-fw fa-check-square"></i>':'<i class="far fa-fw fa-square"></i>'}\n          </div>\n        </td>\n        <td>${n.name}</td>\n        <td>${(0,c.default)(new Date(n.createdOn),"dd MMM yyyy HH:mm")}</td>\n        <td>${(0,c.default)(new Date(n.modifiedOn),"dd MMM yyyy HH:mm")}</td>\n        <td>${-1===n.lastUsedOn?"-":(0,c.default)(new Date(n.lastUsedOn),"dd MMM yyyy HH:mm")}</td>\n        <td>\n          <div class="keyButtons">\n            <div class="button edit">\n              <i class="fas fa-fw fa-pen"></i>\n            </div>\n            <div class="button delete">\n              <i class="fas fa-fw fa-trash-alt"></i>\n            </div>\n          </div>\n        </td>\n      </tr>\n    `)})):t.append("<tr><td colspan='6' style='text-align: center;'>No keys found</td></tr>")}function y(){(0,h.isPopupVisible)(g)&&$("#apeKeysPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#apeKeysPopupWrapper").addClass("hidden"),f.remove(g)}))}t.hide=y,t.show=function(){return r(this,void 0,void 0,(function*(){p.get()?(f.append(g),(0,h.isPopupVisible)(g)||(yield function(){return r(this,void 0,void 0,(function*(){l.show();const e=yield u.default.apeKeys.get();l.hide(),200===e.status?m=e.data:d.add("Error getting ape keys: "+e.message,-1)}))}(),v(),$("#apeKeysPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#apeKeysPopup textarea").trigger("focus").trigger("select")})))):d.add("You are offline",0,{duration:2})}))},$("#apeKeysPopupWrapper").on("mousedown",(e=>{"apeKeysPopupWrapper"===$(e.target).attr("id")&&y()})),$("#apeKeysPopup .generateApeKey").on("click",(()=>{y()})),$("#popups").on("click","#apeKeysPopup table .keyButtons .button",(()=>{y()})),$("#popups").on("click","#apeKeysPopup table .textButton",(e=>r(void 0,void 0,void 0,(function*(){const t=$(e.target).closest("tr").attr("keyId"),o=null==m?void 0:m[t];if(!o||!m)return;l.show();const n=yield u.default.apeKeys.update(t,{enabled:!o.enabled});if(l.hide(),200!==n.status)return d.add("Failed to update key: "+n.message,-1);m[t].enabled=!o.enabled,v(),o.enabled?d.add("Key active",1):d.add("Key inactive",1)})))),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,h.isPopupVisible)(g)&&(y(),e.preventDefault())})),f.save(g)},5153:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(3388),s=a(o(590)),u="contactPopupWrapper";function l(){(0,r.isPopupVisible)(u)&&$("#contactPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#contactPopupWrapper").addClass("hidden"),s.remove(u)}))}$(document.body).on("click","#contactPopupButton, #contactPopupButton2",(()=>{s.append(u),(0,r.isPopupVisible)(u)||$("#contactPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125)})),$(document.body).on("click","#contactPopupWrapper",(e=>{"contactPopupWrapper"===$(e.target).attr("id")&&l()})),$(document.body).on("keypress","#contactPopupButton, #contactPopupButton2",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,r.isPopupVisible)(u)&&l()})),s.save(u)},4044:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.showSettings=t.hide=t.show=t.check=void 0;const s=o(3326),u=o(8673),l=a(o(3368)),d=a(o(590)),c=o(3388),p=a(o(1493)),f="cookiePopupWrapper";let h=!1;function m(e){localStorage.setItem("acceptedCookies",JSON.stringify(e))}function g(){if(d.append(f),$("#cookiePopupWrapper").removeClass("hidden"),void 0===$("#cookiePopupWrapper")[0]||!1===$("#cookiePopupWrapper").is(":visible")||0===$("#cookiePopupWrapper").outerHeight(!0))return $("#cookiePopupWrapper").addClass("hidden"),h=!1,void d.remove(f);(0,c.isPopupVisible)(f)||$("#cookiePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{h=!1!==$("#cookiePopupWrapper").is(":visible")&&0!==$("#cookiePopupWrapper").outerHeight(!0)}))}function v(){return r(this,void 0,void 0,(function*(){(0,c.isPopupVisible)(f)&&((0,u.focusWords)(),$("#cookiePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#cookiePopupWrapper").addClass("hidden"),h=!1,d.remove(f)})))}))}function y(){$("#cookiePopup .main").addClass("hidden"),$("#cookiePopup .settings").removeClass("hidden")}t.check=function(){null===function(){const e=localStorage.getItem("acceptedCookies");return e?JSON.parse(e):null}()&&g()},t.show=g,t.hide=v,t.showSettings=y,$("#cookiePopup .acceptAll").on("click",(()=>{m({security:!0,analytics:!0}),(0,s.activateAnalytics)(),v()})),$("#cookiePopup .rejectAll").on("click",(()=>{m({security:!0,analytics:!1}),v()})),$("#cookiePopup .acceptSelected").on("click",(()=>{const e=$("#cookiePopup .cookie.analytics input").prop("checked");m({security:!0,analytics:e}),v(),!0===e&&(0,s.activateAnalytics)()})),$("#cookiePopup .openSettings").on("click",(()=>{y()})),$(document).on("keypress",(e=>{h&&(void 0!==$("#cookiePopupWrapper")[0]&&!1!==$("#cookiePopupWrapper").is(":visible")&&0!==$("#cookiePopupWrapper").outerHeight(!0)||(h=!1)),h&&e.preventDefault()})),$("#cookiePopup .cookie.ads .textButton").on("click",(()=>{try{p.showConsentPopup()}catch(e){console.error("Failed to open ad consent UI"),l.add("Failed to open Ad consent popup. Do you have an ad or cookie popup blocker enabled?",-1)}})),d.save(f)},3603:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const r=a(o(6705)),s=a(o(2203)),u=a(o(3013)),l=a(o(3368)),d=a(o(590)),c=o(3388),p="customTestDurationPopupWrapper";function f(e){const t=[...e.toLowerCase().matchAll(/((-\s*)?\d+(\.\d+)?\s*[hms]?)/g)].map((e=>{const t=e[0],o=parseFloat(t.replace(/\s+/g,""));return t.includes("h")?3600*o:t.includes("m")?60*o:o})).reduce(((e,t)=>e+t),0);return Math.floor(t)}function h(){const e=f($("#customTestDurationPopup input").val());let t="";t=e<0?"NEGATIVE TIME":0==e?"Infinite test":"Total time: "+function(e){const t=Math.floor(e/3600),o=Math.floor(e%3600/60),n=e%3600%60,i=[];return t>0&&i.push(`${t} hour${1===t?"":"s"}`),o>0&&i.push(`${o} minute${1===o?"":"s"}`),n>0&&i.push(`${n} second${1===n?"":"s"}`),3===i.length?`${i[0]}, ${i[1]} and ${i[2]}`:2===i.length?`${i[0]} and ${i[1]}`:`${i[0]}`}(e),$("#customTestDurationPopup .preview").text(t)}function m(){d.append(p),(0,c.isPopupVisible)(p)||$("#customTestDurationPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#customTestDurationPopup input").trigger("focus").trigger("select")})),h()}function g(){(0,c.isPopupVisible)(p)&&$("#customTestDurationPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#customTestDurationPopupWrapper").addClass("hidden"),d.remove(p)}))}function v(){const e=f($("#customTestDurationPopup input").val());null!==e&&!isNaN(e)&&e>=0&&isFinite(e)?(r.setTimeConfig(e),s.set(),u.restart(),e>=1800?l.add("Stay safe and take breaks!",0):0==e&&l.add("Infinite time! Make sure to use Bail Out from the command line to save your result.",0,{duration:7})):l.add("Custom time must be at least 1",0),g()}t.show=m,t.hide=g,$("#customTestDurationPopupWrapper").on("click",(e=>{"customTestDurationPopupWrapper"===$(e.target).attr("id")&&g()})),$("#customTestDurationPopupWrapper input").keyup((e=>{h(),"Enter"===e.key&&v()})),$("#customTestDurationPopupWrapper .button").on("click",(()=>{v()})),$("#testConfig").on("click",".time .textButton",(e=>{"custom"==$(e.currentTarget).attr("timeConfig")&&m()})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,c.isPopupVisible)(p)&&(g(),e.preventDefault())})),d.save(p)},2786:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.updateLongTextWarning=void 0;const r=a(o(8248)),s=a(o(7717)),u=a(o(2203)),l=a(o(3013)),d=a(o(7567)),c=a(o(6705)),p=c,f=a(o(3388)),h=a(o(9231)),m=a(o(3368)),g=a(o(5177)),v=a(o(2828)),y=a(o(590)),b="customTextPopupWrapper",w="#customTextPopupWrapper",C="#customTextPopup";function _(){!0===s.isCustomTextLong()?($(`${C} .longCustomTextWarning`).removeClass("hidden"),$(`${C} .randomWordsCheckbox input`).prop("checked",!1),$(`${C} .delimiterCheck input`).prop("checked",!1),$(`${C} .typographyCheck`).prop("checked",!0),$(`${C} .replaceNewlineWithSpace input`).prop("checked",!1),$(`${C} .inputs`).addClass("disabled")):($(`${C} .longCustomTextWarning`).addClass("hidden"),$(`${C} .inputs`).removeClass("disabled"))}function S(e=!1){y.append(b),f.isElementVisible(w)||(_(),r.isSectionRandom||r.isTimeRandom||r.isWordRandom?$(`${C} .randomWordsCheckbox input`).prop("checked",!0):$(`${C} .randomWordsCheckbox input`).prop("checked",!1),"|"===r.delimiter?$(`${C} .delimiterCheck input`).prop("checked",!0):$(`${C} .delimiterCheck input`).prop("checked",!1),$(`${C} .randomWordsCheckbox input`).prop("checked")?$(`${C} .inputs .randomInputFields`).removeClass("disabled"):$(`${C} .inputs .randomInputFields`).addClass("disabled"),$(`${C} .replaceNewlineWithSpace input`).prop("checked")?$(`${C} .inputs .replaceNewLinesButtons`).removeClass("disabled"):$(`${C} .inputs .replaceNewLinesButtons`).addClass("disabled"),$(`${C} textarea`).val(r.popupTextareaState),$(w).stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},e?0:125,(()=>{$(`${C} .wordcount input`).val(-1===r.word?"":r.word),$(`${C} .time input`).val(-1===r.time?"":r.time),$(`${C} textarea`).trigger("focus")}))),setTimeout((()=>{s.isCustomTextLong()||$(`${C} textarea`).trigger("focus")}),e?10:150)}function P(e={}){void 0===e.noAnim&&(e.noAnim=!1),void 0===e.resetState&&(e.resetState=!0),f.isElementVisible(w)&&$(w).stop(!0,!0).css("opacity",1).animate({opacity:0},e.noAnim?0:125,(()=>{if(e.resetState){const e=r.text.map((e=>("|"==e[e.length-1]&&(e=e.slice(0,-1)),e)));r.setPopupTextareaState(e.join(r.delimiter))}$(w).addClass("hidden"),y.remove(b)}))}t.updateLongTextWarning=_,t.show=S,$(`${C} .delimiterCheck input`).on("change",(()=>{let e;if($(`${C} .delimiterCheck input`).prop("checked")?(e="|",$(`${C} .randomInputFields .sectioncount `).removeClass("hidden"),$(`${C} .randomInputFields .wordcount input `).val(""),$(`${C} .randomInputFields .wordcount `).addClass("hidden")):(e=" ",$(`${C} .randomInputFields .sectioncount input `).val(""),$(`${C} .randomInputFields .sectioncount `).addClass("hidden"),$(`${C} .randomInputFields .wordcount `).removeClass("hidden")),$(`${C} textarea`).val()!=r.text.join(r.delimiter)){let t=$(`${C} textarea`).val().split(r.delimiter).join(e);t=t.replace(/\n /g,"\n"),$(`${C} textarea`).val(t)}else{let t=r.text.join(e);t=t.replace(/\n /g,"\n"),$(`${C} textarea`).val(t)}r.setDelimiter(e)})),t.hide=P,$(w).on("mousedown",(e=>{"customTextPopupWrapper"===$(e.target).attr("id")&&P()})),$(`${C} .inputs .randomWordsCheckbox input`).on("change",(()=>{$(`${C} .randomWordsCheckbox input`).prop("checked")?$(`${C} .inputs .randomInputFields`).removeClass("disabled"):$(`${C} .inputs .randomInputFields`).addClass("disabled")})),$(`${C} .replaceNewlineWithSpace input`).on("change",(()=>{$(`${C} .replaceNewlineWithSpace input`).prop("checked")?$(`${C} .inputs .replaceNewLinesButtons`).removeClass("disabled"):$(`${C} .inputs .replaceNewLinesButtons`).addClass("disabled")})),$(`${C} .inputs .replaceNewLinesButtons .button`).on("click",(e=>{$(`${C} .inputs .replaceNewLinesButtons .button`).removeClass("active"),$(e.target).addClass("active")})),$(`${C} textarea`).on("input",(()=>{r.setPopupTextareaState($(`${C} textarea`).val())})),$(`${C} textarea`).on("keypress",(e=>{f.isElementVisible("#customTextPopup .longCustomTextWarning")?e.preventDefault():("Enter"===e.code&&e.ctrlKey&&$(`${C} .button.apply`).trigger("click"),s.isCustomTextLong()&&""!==s.getCustomTextName()&&(s.setCustomTextName("",void 0),m.add("Disabled long custom text progress tracking",0,{duration:5}),_()))})),$(`${C} .randomInputFields .wordcount input`).on("keypress",(()=>{$(`${C} .randomInputFields .time input`).val(""),$(`${C} .randomInputFields .sectioncount input`).val("")})),$(`${C} .randomInputFields .time input`).on("keypress",(()=>{$(`${C} .randomInputFields .wordcount input`).val(""),$(`${C} .randomInputFields .sectioncount input`).val("")})),$(`${C} .randomInputFields .sectioncount input`).on("keypress",(()=>{$(`${C} .randomInputFields .time input`).val(""),$(`${C} .randomInputFields .wordcount input`).val("")})),$("#popups").on("click",`${C} .button.apply`,(()=>{!function(){let e=$(`${C} textarea`).val().normalize();if(e=e.trim(),e=e.replace(/\\\\t/gm,"\t"),e=e.replace(/\\\\n/gm,"\n"),e=e.replace(/\\t/gm,"\t"),e=e.replace(/\\n/gm,"\n"),e=e.replace(/ +/gm," "),e=e.replace(/( *(\r\n|\r|\n) *)/g,"\n "),$(`${C} .typographyCheck input`).prop("checked")&&(e=f.cleanTypographySymbols(e)),$(`${C} .replaceNewlineWithSpace input`).prop("checked")){let t=!0;$($(`${C} .replaceNewLinesButtons .button`)[0]).hasClass("active")&&(t=!1),t?(e=e.replace(/\n/gm,". "),e=e.replace(/\.\. /gm,". "),e=e.replace(/ +/gm," ")):(e=e.replace(/\n/gm," "),e=e.replace(/ +/gm," "))}e=e.replace(/[\u2060]/g,""),r.setText(e.split(r.delimiter)),r.setWord(parseInt($(`${C} .wordcount input`).val()||"-1")),r.setTime(parseInt($(`${C} .time input`).val()||"-1")),r.setSection(parseInt($(`${C} .sectioncount input`).val()||"-1")),r.setIsWordRandom($(`${C} .randomWordsCheckbox input`).prop("checked")&&r.word>-1),r.setIsTimeRandom($(`${C} .randomWordsCheckbox input`).prop("checked")&&r.time>-1),r.setIsSectionRandom($(`${C} .randomWordsCheckbox input`).prop("checked")&&r.section>-1),!$(`${C} .randomWordsCheckbox input`).prop("checked")||r.isTimeRandom||r.isWordRandom||r.isSectionRandom?$(`${C} .randomWordsCheckbox input`).prop("checked")&&r.isTimeRandom&&r.isWordRandom?m.add("You need to pick between word count or time in seconds to start a random custom test",0,{duration:5}):((r.isWordRandom&&0===r.word||r.isTimeRandom&&0===r.time)&&m.add("Infinite words! Make sure to use Bail Out from the command line to save your result.",0,{duration:7}),d.clearActive(),u.set(),"custom"!==c.default.mode&&p.setMode("custom"),l.restart(),P()):m.add("You need to specify word count or time in seconds to start a random custom test",0,{duration:5})}()})),$(".pageTest").on("click","#testConfig .customText .textButton",(()=>{S()})),$(document).on("keydown",(e=>{"Escape"===e.key&&f.isElementVisible("#customTextPopupWrapper")&&(P(),e.preventDefault())})),$("#popups").on("click",`${C} .wordfilter`,(()=>{P({noAnim:!0}),h.show(!0,(()=>{S(!0)}))})),$(`${C} .buttonsTop .showSavedTexts`).on("click",(()=>{P({noAnim:!0}),g.show(!0,(()=>{S(!0)}))})),$("#customTextPopupWrapper .buttonsTop .saveCustomText").on("click",(()=>{P({noAnim:!0,resetState:!1}),v.show(!0,(()=>{S(!0)}))})),$("#customTextPopupWrapper .longCustomTextWarning .button").on("click",(()=>{$("#customTextPopup .longCustomTextWarning").addClass("hidden")})),y.save(b)},8628:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=o(3388),s=a(o(590)),u="customThemeShareWrapper";function l(){(0,r.isPopupVisible)(u)&&($("#customThemeShareWrapper input").val(""),$("#customThemeShareWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#customThemeShareWrapper").addClass("hidden"),s.remove(u)})))}t.show=function(e){s.append(u),(0,r.isPopupVisible)(u)||($("#customThemeShareWrapper input").val(e),$("#customThemeShareWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#customThemeShare input").trigger("focus"),$("#customThemeShare input").trigger("select"),$("#customThemeShare input").trigger("focus")})))},$("#customThemeShareWrapper").on("click",(e=>{"customThemeShareWrapper"===$(e.target).attr("id")&&l()})),$("#customThemeShare .button").on("click",(()=>{l()})),s.save(u)},6021:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const r=a(o(6705)),s=a(o(2203)),u=a(o(3013)),l=a(o(3368)),d=a(o(590)),c=o(3388),p="customWordAmountPopupWrapper";function f(){d.append(p),(0,c.isPopupVisible)(p)||$("#customWordAmountPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#customWordAmountPopup input").trigger("focus").trigger("select")}))}function h(){(0,c.isPopupVisible)(p)&&$("#customWordAmountPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#customWordAmountPopupWrapper").addClass("hidden"),d.remove(p)}))}function m(){const e=parseInt($("#customWordAmountPopup input").val());null!==e&&!isNaN(e)&&e>=0&&isFinite(e)?r.setWordCount(e)&&(s.set(),u.restart(),e>2e3?l.add("Stay safe and take breaks!",0):0==e&&l.add("Infinite words! Make sure to use Bail Out from the command line to save your result.",0,{duration:7})):l.add("Custom word amount must be at least 1",0),h()}t.show=f,t.hide=h,$("#customWordAmountPopupWrapper").on("click",(e=>{"customWordAmountPopupWrapper"===$(e.target).attr("id")&&h()})),$("#customWordAmountPopupWrapper input").on("keypress",(e=>{"Enter"===e.key&&m()})),$("#customWordAmountPopupWrapper .button").on("click",(()=>{m()})),$("#testConfig").on("click",".wordCount .textButton",(e=>{"custom"==$(e.currentTarget).attr("wordCount")&&f()})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,c.isPopupVisible)(p)&&(h(),e.preventDefault())})),d.save(p)},2845:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=s(o(7355)),l=a(o(6350)),d=a(o(6705)),c=a(o(9817)),p=a(o(8835)),f=a(o(3368)),h=a(o(3285)),m=a(o(590)),g=o(3388),v="presetWrapper";function y(e,t,o){h.get()?(m.append(v),"add"===e?($("#presetWrapper #presetEdit").attr("action","add"),$("#presetWrapper #presetEdit .title").html("Add new preset"),$("#presetWrapper #presetEdit .button").html("add"),$("#presetWrapper #presetEdit input.text").val(""),$("#presetWrapper #presetEdit input.text").removeClass("hidden"),$("#presetWrapper #presetEdit label").addClass("hidden")):"edit"===e&&t&&o?($("#presetWrapper #presetEdit").attr("action","edit"),$("#presetWrapper #presetEdit").attr("presetid",t),$("#presetWrapper #presetEdit .title").html("Edit preset"),$("#presetWrapper #presetEdit .button").html("save"),$("#presetWrapper #presetEdit input.text").val(o),$("#presetWrapper #presetEdit input.text").removeClass("hidden"),$("#presetWrapper #presetEdit label input").prop("checked",!1),$("#presetWrapper #presetEdit label").removeClass("hidden")):"remove"===e&&t&&($("#presetWrapper #presetEdit").attr("action","remove"),$("#presetWrapper #presetEdit").attr("presetid",t),$("#presetWrapper #presetEdit .title").html("Delete preset "+o),$("#presetWrapper #presetEdit .button").html("Delete"),$("#presetWrapper #presetEdit input.text").addClass("hidden"),$("#presetWrapper #presetEdit label").addClass("hidden")),(0,g.isPopupVisible)(v)||$("#presetWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#presetWrapper #presetEdit input").trigger("focus")}))):f.add("You are offline",0,{duration:2})}function b(){(0,g.isPopupVisible)(v)&&($("#presetWrapper #presetEdit").attr("action",""),$("#presetWrapper #presetEdit").attr("tagid",""),$("#presetWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#presetWrapper").addClass("hidden"),m.remove(v)})))}function w(){var e,t,o,n;return r(this,void 0,void 0,(function*(){const i=$("#presetWrapper #presetEdit").attr("action"),a=$("#presetWrapper #presetEdit input").val(),r=a.replaceAll(" ","_"),s=$("#presetWrapper #presetEdit").attr("presetId"),h=$("#presetWrapper #presetEdit label input").prop("checked");let m={};if(h&&"edit"===i||"add"===i){m=d.getConfigChanges();const o=(null!==(t=null===(e=l.getSnapshot())||void 0===e?void 0:e.tags)&&void 0!==t?t:[]).filter((e=>e.active)).map((e=>e._id));m.tags=o}const g=null!==(n=null===(o=l.getSnapshot())||void 0===o?void 0:o.presets)&&void 0!==n?n:[];if(b(),c.show(),"add"===i){const e=yield u.default.presets.add(r,m);200!==e.status?f.add("Failed to add preset: "+e.message.replace(r,a),-1):(f.add("Preset added",1,{duration:2}),g.push({name:r,config:m,display:a,_id:e.data.presetId}))}else if("edit"===i){const e=yield u.default.presets.edit(s,r,m);if(200!==e.status)f.add("Failed to edit preset: "+e.message,-1);else{f.add("Preset updated",1);const e=g.filter((e=>e._id===s))[0];e.name=r,e.display=r.replace(/_/g," "),h&&(e.config=m)}}else if("remove"===i){const e=yield u.default.presets.delete(s);200!==e.status?f.add("Failed to remove preset: "+e.message,-1):(f.add("Preset removed",1),g.forEach(((e,t)=>{e._id===s&&g.splice(t,1)})))}p.update(),c.hide()}))}t.show=y,$("#presetWrapper").on("click",(e=>{"presetWrapper"===$(e.target).attr("id")&&b()})),$("#presetWrapper #presetEdit .button").on("click",(()=>{w()})),$("#presetWrapper #presetEdit input").on("keypress",(e=>{"Enter"===e.key&&w()})),$(".pageSettings .section.presets").on("click",".addPresetButton",(()=>{y("add")})),$(".pageSettings .section.presets").on("click",".editButton",(e=>{y("edit",$(e.currentTarget).parent(".preset").attr("id"),$(e.currentTarget).siblings(".button").children(".title").text())})),$(".pageSettings .section.presets").on("click",".removeButton",(e=>{y("remove",$(e.currentTarget).parent(".preset").attr("id"),$(e.currentTarget).siblings(".button").children(".title").text())})),m.save(v)},8281:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=s(o(7355)),l=o(7401),d=a(o(6350)),c=a(o(9817)),p=a(o(3368)),f=a(o(3285)),h=o(3388),m=a(o(590)),g="editProfilePopupWrapper";let v=null;function y(){(0,h.isPopupVisible)(g)&&(v&&v(),$("#editProfilePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#editProfilePopupWrapper").addClass("hidden"),m.remove(g)})))}t.show=function(e){f.get()?(m.append(g),(0,h.isPopupVisible)(g)||(v=e,$("#editProfilePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{!function(){var e,t,o,n,i,a;const r=d.getSnapshot();if(!r)return;const s=null!==(t=null===(e=r.inventory)||void 0===e?void 0:e.badges)&&void 0!==t?t:[],{bio:u,keyboard:c,socialProfiles:p}=null!==(o=r.details)&&void 0!==o?o:{};x=-1,b.val(null!=u?u:""),w.val(null!=c?c:""),C.val(null!==(n=null==p?void 0:p.twitter)&&void 0!==n?n:""),_.val(null!==(i=null==p?void 0:p.github)&&void 0!==i?i:""),S.val(null!==(a=null==p?void 0:p.website)&&void 0!==a?a:""),P.html(""),null==s||s.forEach((e=>{e.selected&&(x=e.id);const t=(0,l.getHTMLById)(e.id,!1,!0),o=`<div class="badgeSelectionItem ${e.selected?"selected":""}" selection-id=${e.id}>${t}</div>`;P.append(o)})),P.prepend(`<div class="badgeSelectionItem ${-1===x?"selected":""}" selection-id=-1>\n      <div class="badge">\n        <i class="fas fa-frown-open"></i>\n        <div class="text">none</div>\n      </div>\n    </div>`),$(".badgeSelectionItem").on("click",(({currentTarget:e})=>{const t=$(e).attr("selection-id");x=parseInt(t,10),P.find(".badgeSelectionItem").removeClass("selected"),$(e).addClass("selected")}))}()})))):p.add("You are offline",0,{duration:2})},t.hide=y;const b=$("#editProfilePopup .bio"),w=$("#editProfilePopup .keyboard"),C=$("#editProfilePopup .twitter"),_=$("#editProfilePopup .github"),S=$("#editProfilePopup .website"),P=$("#editProfilePopup .badgeSelectionContainer");let x=-1;$("#editProfilePopupWrapper").on("mousedown",(e=>{"editProfilePopupWrapper"===$(e.target).attr("id")&&y()})),$("#editProfilePopupWrapper .edit-profile-submit").on("click",(()=>r(void 0,void 0,void 0,(function*(){yield function(){var e;return r(this,void 0,void 0,(function*(){const t=d.getSnapshot();if(!t)return;const o=function(){var e,t,o,n,i;return{bio:null!==(e=b.val())&&void 0!==e?e:"",keyboard:null!==(t=w.val())&&void 0!==t?t:"",socialProfiles:{twitter:null!==(o=C.val())&&void 0!==o?o:"",github:null!==(n=_.val())&&void 0!==n?n:"",website:null!==(i=S.val())&&void 0!==i?i:""}}}();c.show();const n=yield u.default.users.updateProfile(o,x);c.hide(),200===n.status?(t.details=o,null===(e=t.inventory)||void 0===e||e.badges.forEach((e=>{e.id===x?e.selected=!0:delete e.selected})),p.add("Profile updated",1),y()):p.add("Failed to update profile: "+n.message,-1)}))}()})))),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,h.isPopupVisible)(g)&&(y(),e.preventDefault())})),m.save(g)},7841:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=s(o(7355)),l=a(o(6350)),d=a(o(3368)),c=a(o(9817)),p=a(o(8835)),f=a(o(3285)),h=a(o(590)),m=o(3388),g="tagsWrapper";function v(e,t,o){f.get()?(h.append(g),"add"===e?($("#tagsWrapper #tagsEdit").attr("action","add"),$("#tagsWrapper #tagsEdit .title").html("Add new tag"),$("#tagsWrapper #tagsEdit .button").html("add"),$("#tagsWrapper #tagsEdit input").val(""),$("#tagsWrapper #tagsEdit input").removeClass("hidden")):"edit"===e&&t&&o?($("#tagsWrapper #tagsEdit").attr("action","edit"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Edit tag name"),$("#tagsWrapper #tagsEdit .button").html("save"),$("#tagsWrapper #tagsEdit input").val(o),$("#tagsWrapper #tagsEdit input").removeClass("hidden")):"remove"===e&&t&&o?($("#tagsWrapper #tagsEdit").attr("action","remove"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Delete tag "+o),$("#tagsWrapper #tagsEdit .button").html("delete"),$("#tagsWrapper #tagsEdit input").addClass("hidden")):"clearPb"===e&&t&&o&&($("#tagsWrapper #tagsEdit").attr("action","clearPb"),$("#tagsWrapper #tagsEdit").attr("tagid",t),$("#tagsWrapper #tagsEdit .title").html("Clear PB for tag "+o),$("#tagsWrapper #tagsEdit .button").html("clear"),$("#tagsWrapper #tagsEdit input").addClass("hidden")),(0,m.isPopupVisible)(g)||$("#tagsWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{console.log("focusing"),$("#tagsWrapper #tagsEdit input").trigger("focus")}))):d.add("You are offline",0,{duration:2})}function y(){(0,m.isPopupVisible)(g)&&($("#tagsWrapper #tagsEdit").attr("action",""),$("#tagsWrapper #tagsEdit").attr("tagid",""),$("#tagsWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#tagsWrapper").addClass("hidden"),h.remove(g)})))}function b(){var e,t,o,n,i,a,s,f;return r(this,void 0,void 0,(function*(){const r=$("#tagsWrapper #tagsEdit").attr("action"),h=$("#tagsWrapper #tagsEdit input").val(),m=h.replaceAll(" ","_"),g=$("#tagsWrapper #tagsEdit").attr("tagid");if(y(),c.show(),"add"===r){const o=yield u.default.users.createTag(m);200!==o.status?d.add("Failed to add tag: "+o.message.replace(m,h),-1):(d.add("Tag added",1),null===(t=null===(e=l.getSnapshot())||void 0===e?void 0:e.tags)||void 0===t||t.push({display:h,name:o.data.name,_id:o.data._id,personalBests:{time:{},words:{},quote:{},zen:{},custom:{}}}),p.update())}else if("edit"===r){const e=yield u.default.users.editTag(g,m);200!==e.status?d.add("Failed to edit tag: "+e.message,-1):(d.add("Tag updated",1),null===(n=null===(o=l.getSnapshot())||void 0===o?void 0:o.tags)||void 0===n||n.forEach((e=>{e._id===g&&(e.name=m,e.display=h)})),p.update())}else if("remove"===r){const e=yield u.default.users.deleteTag(g);200!==e.status?d.add("Failed to remove tag: "+e.message,-1):(d.add("Tag removed",1),null===(a=null===(i=l.getSnapshot())||void 0===i?void 0:i.tags)||void 0===a||a.forEach(((e,t)=>{var o,n;e._id===g&&(null===(n=null===(o=l.getSnapshot())||void 0===o?void 0:o.tags)||void 0===n||n.splice(t,1))})),p.update())}else if("clearPb"===r){const e=yield u.default.users.deleteTagPersonalBest(g);200!==e.status?d.add("Failed to clear tag pb: "+e.message,-1):(d.add("Tag PB cleared",1),null===(f=null===(s=l.getSnapshot())||void 0===s?void 0:s.tags)||void 0===f||f.forEach((e=>{e._id===g&&(e.personalBests={time:{},words:{},quote:{},zen:{},custom:{}})})),p.update())}c.hide()}))}t.show=v,$("#tagsWrapper").on("click",(e=>{"tagsWrapper"===$(e.target).attr("id")&&y()})),$("#tagsWrapper #tagsEdit .button").on("click",(()=>{b()})),$("#tagsWrapper #tagsEdit input").on("keypress",(e=>{"Enter"===e.key&&b()})),$(".pageSettings .section.tags").on("click",".addTagButton",(()=>{v("add")})),$(".pageSettings .section.tags").on("click",".tagsList .tag .editButton",(e=>{v("edit",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())})),$(".pageSettings .section.tags").on("click",".tagsList .tag .clearPbButton",(e=>{v("clearPb",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())})),$(".pageSettings .section.tags").on("click",".tagsList .tag .removeButton",(e=>{v("remove",$(e.currentTarget).parent(".tag").attr("id"),$(e.currentTarget).siblings(".tagButton").children(".title").text())})),h.save(g)},5764:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=a(o(3368)),l=o(2189),d=o(522),c=s(o(7355)),p=o(3388),f=a(o(2588)),h=a(o(2681)),m=a(o(4674)),g=a(o(3013)),v=a(o(6953)),y=a(o(6350)),b=a(o(9817)),w=o(5701),C=o(5817),_=a(o(590)),S="googleSignUpPopupWrapper";let P;function x(e){_.append(S),(0,p.isPopupVisible)(S)||(v.reset("googleSignUpPopup"),v.render($("#googleSignUpPopupWrapper .captcha")[0],"googleSignUpPopup"),$("#googleSignUpPopup input").prop("disabled",!1),O(),P=e,$("#googleSignUpPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#googleSignUpPopup input").trigger("focus").trigger("select")})))}function k(){var e;return r(this,void 0,void 0,(function*(){(0,p.isPopupVisible)(S)&&(void 0!==P&&(u.add("Sign up process canceled",0,{duration:5}),f.hidePreloader(),f.enableInputs(),P&&(null===(e=(0,d.getAdditionalUserInfo)(P))||void 0===e?void 0:e.isNewUser)&&(c.default.users.delete(),P.user.delete()),m.signOut(),P=void 0),$("#googleSignUpPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#googleSignUpPopupWrapper").addClass("hidden"),_.remove(S)})))}))}function T(){var e;return r(this,void 0,void 0,(function*(){if($("#googleSignUpPopup .button").hasClass("disabled"))return;if(!P)return u.add("Missing user credential. Please close the popup and try again.",-1);const t=v.getResponse("googleSignUpPopup");if(!t)return u.add("Please complete the captcha",-1);$("#googleSignUpPopup input").prop("disabled",!0),O(),b.show();const o=$("#googleSignUpPopup input").val();try{if(0===o.length)throw new Error("Name cannot be empty");const e=yield c.default.users.create(o,t);if(200!==e.status)throw e;if(200===e.status){if(yield(0,d.updateProfile)(P.user,{displayName:o}),yield(0,d.sendEmailVerification)(P.user),h.clear(),u.add("Account created",1),$("#menu .textButton.account .text").text(o),f.enableInputs(),f.hidePreloader(),yield m.loadUser(P.user),null!==g.notSignedInLastResult&&(g.setNotSignedInUid(P.user.uid),200===(yield c.default.results.save(g.notSignedInLastResult)).status)){const e=g.notSignedInLastResult;y.saveLocalResult(e),y.updateLocalStats(1,e.testDuration+e.incompleteTestSeconds-e.afkDuration)}P=void 0,b.hide(),k()}}catch(t){console.log(t);const o=(0,p.createErrorMessage)(t,"Failed to sign in with Google");return u.add(o,-1),f.hidePreloader(),f.enableInputs(),f.enableSignInButton(),f.enableSignUpButton(),P&&(null===(e=(0,d.getAdditionalUserInfo)(P))||void 0===e?void 0:e.isNewUser)&&(yield c.default.users.delete(),yield P.user.delete()),m.signOut(),P=void 0,k(),void b.hide()}}))}function O(){$("#googleSignUpPopup .button").addClass("disabled")}t.show=x,t.hide=k,$("#googleSignUpPopupWrapper").on("mousedown",(e=>{"googleSignUpPopupWrapper"===$(e.target).attr("id")&&k()}));const M=new C.InputIndicator($("#googleSignUpPopup input"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},taken:{icon:"fa-times",level:-1},checking:{icon:"fa-circle-notch",spinIcon:!0,level:0}}),A=(0,l.debounce)(1e3,(()=>r(void 0,void 0,void 0,(function*(){const e=$("#googleSignUpPopup input").val();if(!e)return;const t=yield c.default.users.getNameAvailability(e);if(200===t.status)return M.show("available",t.message),void $("#googleSignUpPopup .button").removeClass("disabled");if(422!=t.status){if(409!=t.status)return 200!==t.status?(M.show("unavailable"),u.add("Failed to check name availability: "+t.message,-1)):void 0;M.show("taken",t.message)}else M.show("unavailable",t.message)}))));$("#googleSignUpPopupWrapper input").on("input",(()=>{setTimeout((()=>{if(O(),""===$("#googleSignUpPopup input").val())return M.hide();M.show("checking"),A()}),1)})),$("#googleSignUpPopupWrapper input").on("keypress",(e=>{"Enter"===e.key&&T()})),$("#googleSignUpPopupWrapper .button").on("click",(()=>{T()})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,p.isPopupVisible)(S)&&(k(),e.preventDefault())})),(0,w.subscribe)(((e,t)=>{e&&t&&x(e)})),_.save(S)},9516:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const r=a(o(6705)),s=a(o(3368)),u=o(3388),l=a(o(590)),d="settingsImportWrapper";function c(){if((0,u.isPopupVisible)(d)){if(""!==$("#settingsImportWrapper input").val()){try{r.apply(JSON.parse($("#settingsImportWrapper input").val()))}catch(e){s.add("Failed to import settings: "+e,-1)}r.saveFullConfigToLocalStorage()}$("#settingsImportWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#settingsImportWrapper").addClass("hidden"),l.remove(d)}))}}t.show=function(e,t){l.append(d),(0,u.isPopupVisible)(d)||($("#settingsImportWrapper").attr("mode",e),"export"===e?($("#settingsImportWrapper .button").addClass("hidden"),$("#settingsImportWrapper input").val(null!=t?t:"")):"import"===e&&$("#settingsImportWrapper .button").removeClass("hidden"),$("#settingsImportWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#settingsImportWrapper input").trigger("focus"),$("#settingsImportWrapper input").trigger("select"),$("#settingsImportWrapper input").trigger("focus")})))},$("#settingsImportWrapper .button").on("click",(()=>{c()})),$("#settingsImportWrapper").on("click",(e=>{"settingsImportWrapper"===$(e.target).attr("id")&&c()})),l.save(d)},4611:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=void 0;const r=a(o(3013)),s=a(o(6705)),u=s,l=a(o(2203)),d=a(o(6021)),c=a(o(3603)),p=a(o(2338)),f=a(o(2786)),h=a(o(1446)),m=a(o(590)),g=o(3388),v="mobileTestConfigPopupWrapper",y=$("#mobileTestConfigPopup");function b(){y.find(".button").removeClass("active"),y.find(`.modeGroup .button[mode='${s.default.mode}']`).addClass("active"),y.find(".timeGroup").addClass("hidden"),y.find(".wordsGroup").addClass("hidden"),y.find(".quoteGroup").addClass("hidden"),y.find(".customGroup").addClass("hidden"),y.find(`.${s.default.mode}Group`).removeClass("hidden"),s.default.punctuation?y.find(".punctuation").addClass("active"):y.find(".punctuation").removeClass("active"),s.default.numbers?y.find(".numbers").addClass("active"):y.find(".numbers").removeClass("active"),"time"===s.default.mode?(y.find(`.timeGroup .button[time='${s.default.time}']`).addClass("active"),y.find(".punctuation").removeClass("disabled"),y.find(".numbers").removeClass("disabled")):"words"===s.default.mode?(y.find(`.wordsGroup .button[words='${s.default.words}']`).addClass("active"),y.find(".punctuation").removeClass("disabled"),y.find(".numbers").removeClass("disabled")):"quote"===s.default.mode?(y.find(`.quoteGroup .button[quote='${s.default.quoteLength}']`).addClass("active"),y.find(".punctuation").addClass("disabled"),y.find(".numbers").addClass("disabled")):"zen"===s.default.mode?(y.find(".punctuation").addClass("disabled"),y.find(".numbers").addClass("disabled")):"custom"===s.default.mode&&(y.find(".punctuation").removeClass("disabled"),y.find(".numbers").removeClass("disabled"))}function w(){(0,g.isPopupVisible)(v)&&$("#mobileTestConfigPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#mobileTestConfigPopupWrapper").addClass("hidden"),m.remove(v)}))}t.update=b,$("#mobileTestConfigPopupWrapper").on("click",(e=>{"mobileTestConfigPopupWrapper"===$(e.target).attr("id")&&w()})),$("#mobileTestConfig").on("click",(()=>{m.append(v),(0,g.isPopupVisible)(v)||(b(),$("#mobileTestConfigPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125))})),y.find(".wordsGroup .button").on("click",(e=>{const t=$(e.currentTarget).attr("words");if("custom"==t)w(),d.show();else if(void 0!==t){const e=parseInt(t);u.setWordCount(e),l.set(),r.restart()}})),y.find(".timeGroup .button").on("click",(e=>{const t=$(e.currentTarget).attr("time");if("custom"==t)w(),c.show();else if(void 0!==t){const e=parseInt(t);u.setTimeConfig(e),l.set(),r.restart()}})),y.find(".quoteGroup .button").on("click",(e=>{var t;let o=null!==(t=parseInt($(e.currentTarget).attr("quote"),10))&&void 0!==t?t:0;-2==o?(w(),p.show()):(-1==o&&(o=[0,1,2,3]),u.setQuoteLength(o,!1,e.shiftKey),l.set(),r.restart())})),y.find(".customChange").on("click",(()=>{w(),f.show()})),y.find(".punctuation").on("click",(()=>{u.setPunctuation(!s.default.punctuation),l.set(),r.restart()})),y.find(".numbers").on("click",(()=>{u.setNumbers(!s.default.numbers),l.set(),r.restart()})),y.find(".modeGroup .button").on("click",(e=>{if($(e.currentTarget).hasClass("active"))return;const t=$(e.currentTarget).attr("mode");u.setMode(t),l.set(),r.restart()})),$("#mobileTestConfigPopupWrapper .button").on("click",(()=>{b()})),h.subscribe((e=>{"mode"===e&&b()})),m.save(v)},2710:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.showNewResultFilterPresetPopup=t.hide=t.show=void 0;const r=o(3388),s=a(o(590)),u="newResultFilterPresetPopupWrapper";let l=null;function d(){s.append(u),(0,r.isPopupVisible)(u)||$("#newResultFilterPresetPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#newResultFilterPresetPopup input").trigger("focus").trigger("select")}))}function c(){(0,r.isPopupVisible)(u)&&$("#newResultFilterPresetPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#newResultFilterPresetPopupWrapper").addClass("hidden"),s.remove(u)}))}function p(){const e=$("#newResultFilterPresetPopup input").val();l&&l(e),c()}t.show=d,t.hide=c,$("#newResultFilterPresetPopupWrapper").on("click",(e=>{"newResultFilterPresetPopupWrapper"===$(e.target).attr("id")&&c()})),$("#newResultFilterPresetPopupWrapper input").on("keypress",(e=>{"Enter"===e.key&&p()})),$("#newResultFilterPresetPopupWrapper .button").on("click",(()=>{p()})),t.showNewResultFilterPresetPopup=function(e){l=e,d()},$(document).on("keydown",(e=>{"Escape"===e.key&&(0,r.isPopupVisible)(u)&&(c(),e.preventDefault())})),s.save(u)},6327:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(o(6350)),u=r(o(9546)),l=a(o(590)),d=o(3388),c="pbTablesPopupWrapper";function p(e){l.append(c),(0,d.isPopupVisible)(c)||(function(e){var t;$("#pbTablesPopup table tbody").empty(),$($("#pbTablesPopup table thead tr td")[0]).text(e);const o=s.getSnapshot();if(!o)return;const n=null===(t=o.personalBests)||void 0===t?void 0:t[e];if(void 0===n)return;const i=[];let a;Object.keys(n).forEach((function(e){let t=n[e];t=t.sort((function(e,t){return t.wpm-e.wpm})),t.forEach((function(t){t.mode2=e,i.push(t)}))})),i.forEach((e=>{let t='-<br><span class="sub">-</span>';const o=new Date(e.timestamp);e.timestamp&&(t=(0,u.default)(o,"dd MMM yyyy")+"<br><div class='sub'>"+(0,u.default)(o,"HH:mm")+"</div>"),$("#pbTablesPopup table tbody").append(`\n      <tr>\n        <td>${a===e.mode2?"":e.mode2}</td>\n        <td>\n          ${e.wpm.toFixed(2)}\n          <br />\n          <span class="sub">${e.acc?e.acc+"%":"-"}</span>\n        </td>\n        <td>\n          ${e.raw?e.raw:"-"}\n          <br />\n          <span class="sub">${e.consistency?e.consistency+"%":"-"}</span>\n        </td>\n        <td>${e.difficulty}</td>\n        <td>${e.language?e.language.replace(/_/g," "):"-"}</td>\n        <td>${e.punctuation?'<i class="fas fa-check"></i>':""}</td>\n        <td>${e.lazyMode?'<i class="fas fa-check"></i>':""}</td>\n        <td>${t}</td>\n      </tr>\n    `),a=e.mode2}))}(e),$("#pbTablesPopup .title").text(`All ${e} personal bests`),$("#pbTablesPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125))}function f(){(0,d.isPopupVisible)(c)&&$("#pbTablesPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#pbTablesPopupWrapper").addClass("hidden"),$("#pbTablesPopup table tbody").empty(),l.remove(c)}))}$("#pbTablesPopupWrapper").on("click",(e=>{"pbTablesPopupWrapper"===$(e.target).attr("id")&&f()})),$(".pageAccount .profile").on("click",".pbsTime .showAllButton",(()=>{p("time")})),$(".pageAccount .profile").on("click",".pbsWords .showAllButton",(()=>{p("words")})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,d.isPopupVisible)(c)&&(f(),e.preventDefault())})),l.save(c)},4571:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=s(o(7355)),l=a(o(9817)),d=a(o(3368)),c=s(o(9546)),p=a(o(590)),f=o(3388),h="quoteApprovePopupWrapper";let m=[];function g(){$("#quoteApprovePopupWrapper .quotes").empty(),m.forEach(((e,t)=>{const o=$(`\n      <div class="quote" id="${t}" dbid="${e._id}">\n        <textarea class="text">${e.text}</textarea>\n        <input type="text" class="source" placeholder="Source" value="${e.source}">\n        <div class="buttons">\n          <div class="textButton disabled undo" aria-label="Undo changes" data-balloon-pos="left"><i class="fas fa-fw fa-undo-alt"></i></div>\n          <div class="textButton refuse" aria-label="Refuse quote" data-balloon-pos="left"><i class="fas fa-fw fa-times"></i></div>\n          <div class="textButton approve" aria-label="Approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-check"></i></div>\n          <div class="textButton edit hidden" aria-label="Edit and approve quote" data-balloon-pos="left"><i class="fas fa-fw fa-pen"></i></div>\n        </div>\n        <div class="bottom">\n          <div class="length ${e.text.length<60?"red":""}">Quote length: ${e.text.length}</div>\n          <div class="language">Language: ${e.language}</div>\n          <div class="timestamp">Submitted on: ${(0,c.default)(new Date(e.timestamp),"dd MMM yyyy HH:mm")}</div>\n        </div>\n      </div>\n    `);$("#quoteApprovePopupWrapper .quotes").append(o)}))}function v(e){var t;const o=null===(t=$(`#quoteApprovePopup .quote[id=${e}] .text`).val())||void 0===t?void 0:t.length;$(`#quoteApprovePopup .quote[id=${e}] .length`).text("Quote length: "+o),o<60?$(`#quoteApprovePopup .quote[id=${e}] .length`).addClass("red"):$(`#quoteApprovePopup .quote[id=${e}] .length`).removeClass("red")}function y(){return r(this,void 0,void 0,(function*(){l.show();const e=yield u.default.quotes.get();if(l.hide(),200!==e.status)return d.add("Failed to get new quotes: "+e.message,-1);m=e.data,g()}))}function b(){(0,f.isPopupVisible)(h)&&$("#quoteApprovePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#quoteApprovePopupWrapper").addClass("hidden"),$("#quoteApprovePopupWrapper .quotes").empty(),p.remove(h)}))}function w(e){$(e).closest(".quote").find(".textButton").removeClass("disabled"),$(e).closest(".quote").find(".edit").hasClass("hidden")&&$(e).closest(".quote").find(".undo").addClass("disabled")}t.show=function(e=!1){return r(this,void 0,void 0,(function*(){p.append(h),(0,f.isPopupVisible)(h)||(m=[],y(),$("#quoteApprovePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},e?0:125))}))},t.hide=b,$("#quoteApprovePopupWrapper").on("mousedown",(e=>{"quoteApprovePopupWrapper"===$(e.target).attr("id")&&b()})),$("#quoteApprovePopupWrapper .button.refreshList").on("click",(()=>{$("#quoteApprovePopupWrapper .quotes").empty(),y()})),$("#popups").on("click","#quoteApprovePopup .quote .undo",(e=>r(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .text`).val(m[t].text),$(`#quoteApprovePopup .quote[id=${t}] .source`).val(m[t].source),$(`#quoteApprovePopup .quote[id=${t}] .undo`).addClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).removeClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).addClass("hidden"),v(t)})))),$("#popups").on("click","#quoteApprovePopup .quote .approve",(e=>r(void 0,void 0,void 0,(function*(){var t;if(!confirm("Are you sure?"))return;const o=parseInt($(e.target).closest(".quote").attr("id")),n=$(e.target).closest(".quote").attr("dbid"),i=e.target;$(i).closest(".quote").find(".textButton").addClass("disabled"),$(i).closest(".quote").find("textarea, input").prop("disabled",!0),l.show();const a=yield u.default.quotes.approveSubmission(n);if(l.hide(),200!==a.status)return w(i),$(i).closest(".quote").find("textarea, input").prop("disabled",!1),d.add("Failed to approve quote: "+a.message,-1);d.add(null!==(t="Quote approved. "+a.message)&&void 0!==t?t:"",1),m.splice(o,1),g()})))),$("#popups").on("click","#quoteApprovePopup .quote .refuse",(e=>r(void 0,void 0,void 0,(function*(){if(!confirm("Are you sure?"))return;const t=parseInt($(e.target).closest(".quote").attr("id")),o=$(e.target).closest(".quote").attr("dbid"),n=e.target;$(n).closest(".quote").find(".textButton").addClass("disabled"),$(n).closest(".quote").find("textarea, input").prop("disabled",!0),l.show();const i=yield u.default.quotes.rejectSubmission(o);if(l.hide(),200!==i.status)return w(n),$(n).closest(".quote").find("textarea, input").prop("disabled",!1),d.add("Failed to refuse quote: "+i.message,-1);d.add("Quote refused.",1),m.splice(t,1),g()})))),$("#popups").on("click","#quoteApprovePopup .quote .edit",(e=>r(void 0,void 0,void 0,(function*(){var t;if(!confirm("Are you sure?"))return;const o=parseInt($(e.target).closest(".quote").attr("id")),n=$(e.target).closest(".quote").attr("dbid"),i=$(`#quoteApprovePopup .quote[id=${o}] .text`).val(),a=$(`#quoteApprovePopup .quote[id=${o}] .source`).val(),r=e.target;$(r).closest(".quote").find(".textButton").addClass("disabled"),$(r).closest(".quote").find("textarea, input").prop("disabled",!0),l.show();const s=yield u.default.quotes.approveSubmission(n,i,a);if(l.hide(),200!==s.status)return w(r),$(r).closest(".quote").find("textarea, input").prop("disabled",!1),d.add("Failed to approve quote: "+s.message,-1);d.add(null!==(t="Quote edited and approved. "+s.message)&&void 0!==t?t:"",1),m.splice(o,1),g()})))),$(document).on("input","#quoteApprovePopup .quote .text",(e=>r(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .undo`).removeClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).addClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).removeClass("hidden"),v(t)})))),$(document).on("input","#quoteApprovePopup .quote .source",(e=>r(void 0,void 0,void 0,(function*(){const t=parseInt($(e.target).closest(".quote").attr("id"));$(`#quoteApprovePopup .quote[id=${t}] .undo`).removeClass("disabled"),$(`#quoteApprovePopup .quote[id=${t}] .approve`).addClass("hidden"),$(`#quoteApprovePopup .quote[id=${t}] .edit`).removeClass("hidden")})))),p.save(h)},8182:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.clearQuoteStats=t.show=t.getQuoteStats=void 0;const u=s(o(7355)),l=a(o(6350)),d=a(o(9470)),c=a(o(9817)),p=a(o(3368)),f=a(o(590)),h=o(3388),m="quoteRatePopupWrapper";let g=0,v=null,y=null;function b(e){return e.totalRating&&e.ratings?Math.round(e.totalRating/e.ratings*10)/10:0}function w(e){return r(this,void 0,void 0,(function*(){if(!e)return;y=e;const t=yield u.default.quotes.getRating(y);if(c.hide(),200===t.status)return t.data?(v=t.data,v&&!v.average&&(v.average=b(v)),v):{};p.add("Failed to get quote ratings: "+t.message,-1)}))}function C(e){const t=e||g;$("#quoteRatePopup .star").removeClass("active");for(let e=1;e<=t;e++)$(`#quoteRatePopup .star[rating=${e}]`).addClass("active")}function _(e,t=!0){var o,n;if(f.append(m),!(0,h.isPopupVisible)(m)){t&&($("#quoteRatePopup .quote .text").text("-"),$("#quoteRatePopup .quote .source .val").text("-"),$("#quoteRatePopup .quote .id .val").text("-"),$("#quoteRatePopup .quote .length .val").text("-"),$("#quoteRatePopup .ratingCount .val").text("-"),$("#quoteRatePopup .ratingAverage .val").text("-")),y=e,g=0;const i=l.getSnapshot(),a=null===(n=null===(o=null==i?void 0:i.quoteRatings)||void 0===o?void 0:o[y.language])||void 0===n?void 0:n[y.id];a&&(g=a),C(),function(){if(!y)return;let e;0==y.group?e="short":1==y.group?e="medium":2==y.group?e="long":3==y.group&&(e="thicc"),$("#quoteRatePopup .quote .text").text(y.text),$("#quoteRatePopup .quote .source .val").text(y.source),$("#quoteRatePopup .quote .id .val").text(y.id),$("#quoteRatePopup .quote .length .val").text(e),function(){var e,t,o;r(this,void 0,void 0,(function*(){v||(yield w()),$("#quoteRatePopup .ratingCount .val").text(null!==(e=null==v?void 0:v.ratings)&&void 0!==e?e:"0"),$("#quoteRatePopup .ratingAverage .val").text(null!==(o=null===(t=null==v?void 0:v.average)||void 0===t?void 0:t.toFixed(1))&&void 0!==o?o:"-")}))}()}(),$("#quoteRatePopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125)}}function S(){(0,h.isPopupVisible)(m)&&$("#quoteRatePopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#quoteRatePopupWrapper").addClass("hidden"),f.remove(m)}))}t.getQuoteStats=w,t.show=_,t.clearQuoteStats=function(){v=null},$("#quoteRatePopupWrapper").on("click",(e=>{"quoteRatePopupWrapper"===$(e.target).attr("id")&&S()})),$("#quoteRatePopupWrapper .stars .star").hover((e=>{C(parseInt($(e.currentTarget).attr("rating")))})),$("#quoteRatePopupWrapper .stars .star").on("click",(e=>{const t=parseInt($(e.currentTarget).attr("rating"));g=t})),$("#quoteRatePopupWrapper .stars .star").mouseout((()=>{$("#quoteRatePopup .star").removeClass("active"),C()})),$("#quoteRatePopupWrapper .submitButton").on("click",(()=>{!function(){var e,t,o;r(this,void 0,void 0,(function*(){if(0===g)return p.add("Please select a rating");if(!y)return;S();const n=yield u.default.quotes.addRating(y,g);if(c.hide(),200!==n.status)return p.add("Failed to submit quote rating: "+n.message,-1);const i=l.getSnapshot();if(!i)return;const a=null!==(e=i.quoteRatings)&&void 0!==e?e:{};if(null===(t=null==a?void 0:a[y.language])||void 0===t?void 0:t[y.id]){const e=a[y.language][y.id],t=g-e;a[y.language][y.id]=g,v={ratings:null==v?void 0:v.ratings,totalRating:isNaN(null==v?void 0:v.totalRating)?0:(null==v?void 0:v.totalRating)+t,quoteId:y.id,language:y.language},p.add("Rating updated",1)}else a[y.language]||(a[y.language]={}),a[y.language][y.id]=g,(null==v?void 0:v.ratings)&&v.totalRating?(v.ratings++,v.totalRating+=g):v={ratings:1,totalRating:g,quoteId:y.id,language:y.language},p.add("Rating submitted",1);i.quoteRatings=a,l.setSnapshot(i),v.average=b(v),$(".pageTest #result #rateQuoteButton .rating").text(null===(o=v.average)||void 0===o?void 0:o.toFixed(1)),$(".pageTest #result #rateQuoteButton .icon").removeClass("far"),$(".pageTest #result #rateQuoteButton .icon").addClass("fas")}))}()})),$(".pageTest #rateQuoteButton").on("click",(()=>r(void 0,void 0,void 0,(function*(){_(d.randomQuote)})))),f.save(m)},5898:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=s(o(7355)),l=s(o(6705)),d=a(o(9470)),c=a(o(9817)),p=a(o(3368)),f=s(o(6750)),h=a(o(6953)),m=a(o(590)),g=o(3388),v="quoteReportPopupWrapper",y={previousPopupShowCallback:void 0,quoteToReport:void 0},b={quoteId:-1,previousPopupShowCallback:()=>{},noAnim:!1};function w(e=b){var t;return r(this,void 0,void 0,(function*(){if(m.append(v),!(0,g.isPopupVisible)(v)){h.render(document.querySelector("#quoteReportPopup .g-recaptcha"),"quoteReportPopup");const{quoteId:o,previousPopupShowCallback:n,noAnim:i}=e;y.previousPopupShowCallback=n;const a="swiss_german"===l.default.language?"german":l.default.language,{quotes:r}=yield f.default.getQuotes(a);y.quoteToReport=r.find((e=>e.id===o)),$("#quoteReportPopup .quote").text(null===(t=y.quoteToReport)||void 0===t?void 0:t.text),$("#quoteReportPopup .reason").val("Grammatical error"),$("#quoteReportPopup .comment").val(""),$("#quoteReportPopup .characterCount").text("-"),$("#quoteReportPopup .reason").select2({minimumResultsForSearch:1/0}),$("#quoteReportPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},i?0:125,(()=>{$("#quoteReportPopup textarea").trigger("focus").trigger("select")}))}}))}function C(){return r(this,void 0,void 0,(function*(){if((0,g.isPopupVisible)(v)){const e=!!y.previousPopupShowCallback;$("#quoteReportPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:125,(()=>{h.reset("quoteReportPopup"),$("#quoteReportPopupWrapper").addClass("hidden"),y.previousPopupShowCallback&&y.previousPopupShowCallback(),m.remove(v)}))}}))}t.show=w,t.hide=C,$("#quoteReportPopupWrapper").on("mousedown",(e=>{"quoteReportPopupWrapper"===$(e.target).attr("id")&&C()})),$("#quoteReportPopupWrapper .comment").on("input",(()=>{setTimeout((()=>{const e=$("#quoteReportPopup .comment").val().length;$("#quoteReportPopup .characterCount").text(e),e>250?$("#quoteReportPopup .characterCount").addClass("red"):$("#quoteReportPopup .characterCount").removeClass("red")}),1)})),$("#quoteReportPopupWrapper .submit").on("click",(()=>r(void 0,void 0,void 0,(function*(){yield function(){var e;return r(this,void 0,void 0,(function*(){const t=h.getResponse("quoteReportPopup");if(!t)return p.add("Please complete the captcha");const o=null===(e=y.quoteToReport)||void 0===e?void 0:e.id.toString(),n=l.default.language.replace(/_\d*k$/g,""),i=$("#quoteReportPopup .reason").val(),a=$("#quoteReportPopup .comment").val(),r=t;if(!o)return p.add("Please select a quote");if(!i)return p.add("Please select a valid report reason");if(!a)return p.add("Please provide a comment");const s=a.length-250;if(s>0)return p.add(`Report comment is ${s} character(s) too long`);c.show();const d=yield u.default.quotes.report(o,n,i,a,r);if(c.hide(),200!==d.status)return p.add("Failed to report quote: "+d.message,-1);p.add("Report submitted. Thank you!",1),C()}))}()})))),$(".pageTest #reportQuoteButton").on("click",(()=>r(void 0,void 0,void 0,(function*(){var e;w({quoteId:null===(e=d.randomQuote)||void 0===e?void 0:e.id,noAnim:!1})})))),m.save(v)},2338:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.apply=t.hide=t.show=t.setSelectedId=t.selectedId=void 0;const u=a(o(8673)),l=a(o(6705)),d=l,c=a(o(6350)),p=a(o(2203)),f=a(o(3368)),h=a(o(9753)),m=a(o(4571)),g=a(o(5898)),v=o(6690),y=o(6037),b=s(o(6750)),w=o(6617),C=o(2189),_=s(o(7355)),S=a(o(9817)),P=a(o(590)),x=o(3388),k="quoteSearchPopupWrapper";t.selectedId=1,t.setSelectedId=function(e){t.selectedId=e};const T={};function O(e,t){return 0===t.length?e:(0,y.splitByAndKeep)(e,'.,"/#!$%^&*;:{}=-_`~() '.split("")).map((e=>t.find((t=>e.startsWith(t)))?`<span class="highlight">${e}</span>`:e)).join("")}function M(e){return r(this,void 0,void 0,(function*(){const{quotes:t}=yield b.default.getQuotes(l.default.language),o=function(e,t,o){if(e in T)return T[e];const n=(0,v.buildSearchService)(t,(e=>`${e.text} ${e.id} ${e.source}`));return T[e]=n,n}(l.default.language,t),{results:n,matchedQueryTerms:i}=o.query(e),a=function(e){const t=$("#quoteSearchPopup .quoteLengthFilter").val();if(0===t.length)return e;const o=t.map((e=>parseInt(e,10)));return e.filter((e=>o.includes(e.group)))}(function(e){const t=document.querySelector("#toggleShowFavorites").classList.contains("active");return e.filter((e=>!t||b.default.isQuoteFavorite(e)))}(""===e?t:n)),r=$("#quoteSearchResults");r.empty(),a.slice(0,100).forEach((e=>{const t=function(e,t){let o;o=e.length<101?"short":e.length<301?"medium":e.length<601?"long":"thicc";const n=!(null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser),i=!n&&b.default.isQuoteFavorite(e);return`\n  <div class="searchResult" id="${e.id}">\n\n    <div class="text">\n      ${O(e.text,t)}\n    </div>\n\n    <div class="id">\n      <div class="sub">id</div>\n      <span class="quote-id">\n        ${O(e.id.toString(),t)}\n      </span>\n    </div>\n\n    <div class="length">\n      <div class="sub">length</div>\n      ${o}\n    </div>\n\n    <div class="source">\n      <div class="sub">source</div>\n      ${O(e.source,t)}\n    </div>\n\n    <div class="textButton report ${n&&"hidden"}" aria-label="Report quote" data-balloon-pos="left">\n      <i class="fas fa-flag report"></i>\n    </div>\n\n    <div class="textButton favorite ${n&&"hidden"}" aria-label="Favorite quote" data-balloon-pos="left">\n      <i class="${i?"fas":"far"} fa-heart favorite"></i>\n    </div>\n\n  </div>\n  `}(e,i);r.append(t)}));const s=a.length>100?"<span style='opacity: 0.5'>(only showing 100)</span>":"";$("#extraResults").html(`${a.length} result(s) ${s}`)}))}function A(e=!0){var t;return r(this,void 0,void 0,(function*(){if(P.append(k),!(0,x.isPopupVisible)(k)){e&&$("#quoteSearchPopup input").val("");const o=$("#quoteSearchPopup input").val();(null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser)?($("#quoteSearchPopup #gotoSubmitQuoteButton").removeClass("hidden"),$("#quoteSearchPopup #toggleShowFavorites").removeClass("hidden")):($("#quoteSearchPopup #gotoSubmitQuoteButton").addClass("hidden"),$("#quoteSearchPopup #toggleShowFavorites").addClass("hidden")),(null===(t=c.getSnapshot())||void 0===t?void 0:t.quoteMod)?$("#quoteSearchPopup #goToApproveQuotes").removeClass("hidden"):$("#quoteSearchPopup #goToApproveQuotes").addClass("hidden"),$("#quoteSearchPopup .quoteLengthFilter").select2({placeholder:"Filter by length",maximumSelectionLength:1/0,multiple:!0,width:"100%",data:[{id:0,text:"short",selected:!1},{id:1,text:"medium",selected:!1},{id:2,text:"long",selected:!1},{id:3,text:"thicc",selected:!1}]}),$("#quoteSearchPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{e&&$("#quoteSearchPopup input").trigger("focus").trigger("select"),M(o)}))}}))}function j(e=!1,t=!0){(0,x.isPopupVisible)(k)&&$("#quoteSearchPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:125,(()=>{$("#quoteSearchPopupWrapper").addClass("hidden"),t&&(u.focusWords(),$("#quoteSearchPopup .quoteLengthFilter").val([]),$("#quoteSearchPopup .quoteLengthFilter").trigger("change"),P.remove(k))}))}t.show=A,t.hide=j,t.apply=function(e){let o;return isNaN(e)&&(e=parseInt(document.getElementById("searchBox").value)),null!==e&&!isNaN(e)&&e>=0?(d.setQuoteLength(-2,!1),t.selectedId=e,p.set(),o=!0):(f.add("Quote ID must be at least 1",0),o=!1),j(),o};const L=(0,C.debounce)(250,(()=>{M(document.getElementById("searchBox").value)}));$("#quoteSearchPopupWrapper .searchBox").on("keyup",(e=>{"Escape"!==e.code&&L()})),$("#quoteSearchPopupWrapper .quoteLengthFilter").on("change",L),$("#quoteSearchPopupWrapper").on("mousedown",(e=>{"quoteSearchPopupWrapper"===$(e.target).attr("id")&&j()})),$("#popups").on("click","#quoteSearchPopup #gotoSubmitQuoteButton",(()=>{j(!0),h.show(!0)})),$("#popups").on("click","#quoteSearchPopup #goToApproveQuotes",(()=>{j(!0),m.show(!0)})),$("#popups").on("click","#quoteSearchPopup .report",(e=>r(void 0,void 0,void 0,(function*(){const t=e.target.closest(".searchResult").id,o=parseInt(t);j(!0,!1),g.show({quoteId:o,noAnim:!0,previousPopupShowCallback:()=>{A(!1)}})})))),$("#popups").on("click","#quoteSearchPopup .textButton.favorite",(e=>r(void 0,void 0,void 0,(function*(){var t,o,n;const i=l.default.language,a=e.target.closest(".searchResult").id;if(""===i||""===a)return void f.add("Could not get quote stats!",-1);const r=$(`#quoteSearchPopup .searchResult[id=${a}] .textButton.favorite i`),s=c.getSnapshot();if(s){if(r.hasClass("fas")){S.show();const e=yield _.default.users.removeQuoteFromFavorites(i,a);if(S.hide(),f.add(e.message,200===e.status?1:-1),200===e.status){r.removeClass("fas").addClass("far");const e=null===(t=s.favoriteQuotes[i])||void 0===t?void 0:t.indexOf(a);null===(o=s.favoriteQuotes[i])||void 0===o||o.splice(e,1)}}else{S.show();const e=yield _.default.users.addQuoteToFavorites(i,a);S.hide(),f.add(e.message,200===e.status?1:-1),200===e.status&&(r.removeClass("far").addClass("fas"),s.favoriteQuotes[i]||(s.favoriteQuotes[i]=[]),null===(n=s.favoriteQuotes[i])||void 0===n||n.push(a))}e.preventDefault()}})))),$("#popups").on("click","#quoteSearchPopup #toggleShowFavorites",(e=>{(null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser)&&($(e.target).toggleClass("active"),L())})),$(".pageTest").on("click","#testConfig .quoteLength .textButton",(e=>{var t;-2==(null!==(t=$(e.currentTarget).attr("quoteLength"))&&void 0!==t?t:0)&&A()})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,x.isPopupVisible)(k)&&(j(),e.preventDefault())})),P.save(k)},9753:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=s(o(7355)),l=a(o(9817)),d=a(o(3368)),c=a(o(6953)),p=a(o(3388)),f=a(o(590)),h="quoteSubmitPopupWrapper";function m(){return r(this,void 0,void 0,(function*(){const e=$("#quoteSubmitPopup #submitQuoteText").val(),t=$("#quoteSubmitPopup #submitQuoteSource").val(),o=$("#quoteSubmitPopup #submitQuoteLanguage").val(),n=c.getResponse("submitQuote");if(!e||!t||!o)return d.add("Please fill in all fields",0);l.show();const i=yield u.default.quotes.submit(e,t,o,n);if(l.hide(),200!==i.status)return d.add("Failed to submit quote: "+i.message,-1);d.add("Quote submitted.",1),$("#quoteSubmitPopup #submitQuoteText").val(""),$("#quoteSubmitPopup #submitQuoteSource").val(""),$("#quoteSubmitPopup .characterCount").removeClass("red"),$("#quoteSubmitPopup .characterCount").text("-"),c.reset("submitQuote")}))}function g(){p.isPopupVisible(h)&&$("#quoteSubmitPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#quoteSubmitPopupWrapper").addClass("hidden"),c.reset("submitQuote"),f.remove(h)}))}t.show=function(e=!1){return r(this,void 0,void 0,(function*(){d.add("Quote submission is disabled temporarily due to a large submission queue.",0,{duration:5})}))},t.hide=g,$("#quoteSubmitPopupWrapper").on("mousedown",(e=>{"quoteSubmitPopupWrapper"===$(e.target).attr("id")&&g()})),$("#popups").on("click","#quoteSubmitPopup #submitQuoteButton",(()=>{m()})),$("#quoteSubmitPopupWrapper textarea").on("input",(()=>{setTimeout((()=>{var e;const t=null===(e=$("#quoteSubmitPopup textarea").val())||void 0===e?void 0:e.length;$("#quoteSubmitPopup .characterCount").text(t),t<60?$("#quoteSubmitPopup .characterCount").addClass("red"):$("#quoteSubmitPopup .characterCount").removeClass("red")}),1)})),$("#quoteSubmitPopupWrapper input").on("keydown",(e=>{"Enter"===e.key&&m()})),f.save(h)},7058:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.promise=void 0;const r=a(o(6953)),s=o(3388),u=a(o(590)),l="registerCaptchaPopupWrapper";let d;function c(e=!1){(0,s.isPopupVisible)(l)&&(e&&d(),$("#registerCaptchaPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#registerCaptchaPopupWrapper").addClass("hidden"),u.remove(l)})))}t.promise=new Promise((e=>{d=e})),t.show=function(){u.append(l),(0,s.isPopupVisible)(l)||(t.promise=new Promise((e=>{d=e})),r.reset("register"),r.render($("#registerCaptchaPopup .g-recaptcha")[0],"register",(e=>{d(e),c()})),$("#registerCaptchaPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125))},t.hide=c,$("#registerCaptchaPopupWrapper").on("click",(e=>{"registerCaptchaPopupWrapper"===$(e.target).attr("id")&&c(!0)})),u.save(l)},3875:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const u=s(o(7355)),l=a(o(6350)),d=a(o(9817)),c=a(o(3368)),p=a(o(3285)),f=o(3388),h=a(o(590)),m="resultEditTagsPanelWrapper",g={resultId:void 0,tags:void 0,source:void 0};function v(){var e,t;p.get()?(h.append(m),$("#resultEditTagsPanel .buttons").empty(),null===(t=null===(e=l.getSnapshot())||void 0===e?void 0:e.tags)||void 0===t||t.forEach((e=>{$("#resultEditTagsPanel .buttons").append(`<div class="button tag" tagid="${e._id}">${e.display}</div>`)})),(0,f.isPopupVisible)(m)||$("#resultEditTagsPanelWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125)):c.add("You are offline",0,{duration:2})}function y(){(0,f.isPopupVisible)(m)&&$("#resultEditTagsPanelWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#resultEditTagsPanelWrapper").addClass("hidden"),h.remove(m)}))}function b(e){0!==e.length&&$.each($("#resultEditTagsPanel .buttons .button"),((t,o)=>{var n;const i=null!==(n=$(o).attr("tagid"))&&void 0!==n?n:"";e.includes(i)?$(o).addClass("active"):$(o).removeClass("active")}))}$(".pageAccount").on("click",".group.history #resultEditTags",(e=>{var t,o,n;if((null!==(n=null===(o=null===(t=l.getSnapshot())||void 0===t?void 0:t.tags)||void 0===o?void 0:o.length)&&void 0!==n?n:0)>0){const t=$(e.target).parents("span").attr("resultid"),o=$(e.target).parents("span").attr("tags");g.resultId=t,g.tags=o,g.source="accountPage",b(JSON.parse(o)),v()}else c.add("You haven't created any tags. You can do it in the settings page",0,{duration:4})})),$(".pageTest").on("click",".tags .editTagsButton",(()=>{var e,t,o;if(null!==(o=null===(t=null===(e=l.getSnapshot())||void 0===e?void 0:e.tags)||void 0===t?void 0:t.length)&&void 0!==o&&o){const e=$(".pageTest .tags .editTagsButton").attr("result-id"),t=$(".pageTest .tags .editTagsButton").attr("active-tag-ids"),o=""==t?[]:t.split(",");g.resultId=e,g.tags=JSON.stringify(o),g.source="resultPage",v(),b(o)}})),$("#popups").on("click","#resultEditTagsPanelWrapper .button.tag",(e=>{$(e.target).toggleClass("active")})),$("#resultEditTagsPanelWrapper").on("click",(e=>{"resultEditTagsPanelWrapper"===$(e.target).attr("id")&&y()})),$("#resultEditTagsPanelWrapper .confirmButton").on("click",(()=>r(void 0,void 0,void 0,(function*(){var e,t;const o=g.resultId,n=[];$.each($("#resultEditTagsPanel .buttons .button"),((e,t)=>{var o;const i=null!==(o=$(t).attr("tagid"))&&void 0!==o?o:"";$(t).hasClass("active")&&n.push(i)}));const i=JSON.parse(g.tags);if((0,f.areUnsortedArraysEqual)(i,n))return void y();d.show(),y();const a=yield u.default.results.updateTags(o,n);if(d.hide(),200!==a.status)return c.add("Failed to update result tags: "+a.message,-1);const r=a.data.tagPbs;c.add("Tags updated",1,{duration:2}),null===(t=null===(e=l.getSnapshot())||void 0===e?void 0:e.results)||void 0===t||t.forEach((e=>{e._id===o&&(e.tags=n)}));const s=[];let p;n.length>0&&n.forEach((e=>{var t,o;null===(o=null===(t=l.getSnapshot())||void 0===t?void 0:t.tags)||void 0===o||o.forEach((t=>{e===t._id&&s.push(t.display)}))})),p=void 0===n?"[]":JSON.stringify(n),$(`.pageAccount #resultEditTags[resultid='${o}']`).attr("tags",p);const h=g.source;if("accountPage"===h)n.length>0?($(`.pageAccount #resultEditTags[resultid='${o}']`).css("opacity",1),$(`.pageAccount #resultEditTags[resultid='${o}']`).attr("aria-label",s.join(", "))):($(`.pageAccount #resultEditTags[resultid='${o}']`).css("opacity",.25),$(`.pageAccount #resultEditTags[resultid='${o}']`).attr("aria-label","no tags"));else if("resultPage"===h)if(0==n.length)$(".pageTest #result .tags .bottom").html("<div class='noTags'>no tags</div>");else{$(".pageTest #result .tags .bottom div.noTags").remove();const e=$(".pageTest #result .tags .bottom div[tagid]"),t=[];e.each(((e,o)=>{const i=$(o).attr("tagid");n.includes(i)?t.push(i):$(o).remove()}));let o="";n.forEach(((e,n)=>{t.includes(e)||(r.includes(e)?o+=`<div tagid="${e}" data-balloon-pos="up">${s[n]}<i class="fas fa-crown"></i></div>`:o+=`<div tagid="${e}">${s[n]}</div>`)})),$(".pageTest #result .tags .bottom").append(o),$(".pageTest #result .tags .top .editTagsButton").attr("active-tag-ids",n.join(","))}})))),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,f.isPopupVisible)(m)&&(y(),e.preventDefault())})),h.save(m)},2828:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const s=a(o(8248)),u=a(o(3368)),l=a(o(7717)),d=o(5817),c=o(2189),p=a(o(590)),f=o(3388),h="saveCustomTextPopupWrapper",m=new d.InputIndicator($("#saveCustomTextPopup .textName"),{available:{icon:"fa-check",level:1},unavailable:{icon:"fa-times",level:-1},loading:{icon:"fa-circle-notch",spinIcon:!0,level:0}});let g;function v(e=!1){(0,f.isPopupVisible)(h)&&$("#saveCustomTextPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:125,(()=>{$("#saveCustomTextPopupWrapper").addClass("hidden"),p.remove(h),g&&g()}))}t.show=function(e=!1,t){return r(this,void 0,void 0,(function*(){p.append(h),(0,f.isPopupVisible)(h)||(g=t,$("#saveCustomTextPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},e?0:125,(()=>{$("#saveCustomTextPopupWrapper .textName").val(""),$("#saveCustomTextPopupWrapper .isLongText").prop("checked",!1),$("#saveCustomTextPopupWrapper .button.save").addClass("disabled")})))}))},$("#popups").on("click","#saveCustomTextPopupWrapper .button.save",(()=>{!0===function(){const e=$("#saveCustomTextPopupWrapper .textName").val(),t=$("#saveCustomTextPopupWrapper .isLongText").prop("checked");let o=s.popupTextareaState.normalize();return e?(o=o.replace(/( *(\r\n|\r|\n) *)/g,"\n "),s.setCustomText(e,o,t),l.setCustomTextName(e,t),u.add("Custom text saved",1),!0):(u.add("Custom text needs a name",0),!1)}()&&v(!0)})),$("#saveCustomTextPopupWrapper").on("mousedown",(e=>{"saveCustomTextPopupWrapper"===$(e.target).attr("id")&&v(!0)}));const y=(0,c.debounce)(500,(function(){const e=$("#saveCustomTextPopup .textName").val(),t=$("#saveCustomTextPopupWrapper .isLongText").prop("checked");e?s.getCustomTextNames(t).includes(e)?(m.show("unavailable"),$("#saveCustomTextPopupWrapper .button.save").addClass("disabled")):(m.show("available"),$("#saveCustomTextPopupWrapper .button.save").removeClass("disabled")):(m.hide(),$("#saveCustomTextPopupWrapper .button.save").addClass("disabled"))}));$("#saveCustomTextPopup .textName").on("input",(()=>{$("#saveCustomTextPopup .textName").val().length>0&&(m.show("loading"),y())})),$("#saveCustomTextPopupWrapper .isLongText").on("change",(()=>{$("#saveCustomTextPopup .textName").val().length>0&&(m.show("loading"),y())})),p.save(h)},5177:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const s=a(o(8248)),u=a(o(7717)),l=a(o(590)),d=o(3388),c="savedTextsPopupWrapper";let p;function f(e=!1,t=!1){(0,d.isPopupVisible)(c)&&$("#savedTextsPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:125,(()=>{$("#savedTextsPopupWrapper").addClass("hidden"),l.remove(c),p&&!t&&p()}))}function h(e,t){let o=s.getCustomText(e,t);t&&(o=o.slice(s.getCustomTextLongProgress(e))),s.setPopupTextareaState(o.join(s.delimiter))}t.show=function(e=!1,t){return r(this,void 0,void 0,(function*(){l.append(c),(0,d.isPopupVisible)(c)||(p=t,function(){const e=s.getCustomTextNames(),t=$("#savedTextsPopup .list").empty();let o="";if(0===e.length)o+="<div>No saved custom texts found</div>";else for(const t of e)o+=`<div class="savedText">\n      <div class="button name">${(0,d.escapeHTML)(t)}</div>\n      <div class="button delete">\n      <i class="fas fa-fw fa-trash"></i>\n      </div>\n      </div>`;t.html(o);const n=s.getCustomTextNames(!0),i=$("#savedTextsPopup .listLong").empty();let a="";if(0===n.length)a+="<div>No saved long custom texts found</div>";else for(const e of n)a+=`<div class="savedText">\n      <div class="button name">${(0,d.escapeHTML)(e)}</div>\n      <div class="button ${s.getCustomTextLongProgress(e)<=0?"disabled":""} resetProgress">reset</div>\n      <div class="button delete">\n      <i class="fas fa-fw fa-trash"></i>\n      </div>\n      </div>`;i.html(a)}(),$("#savedTextsPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},e?0:125))}))},$("#popups").on("click","#savedTextsPopupWrapper .list .savedText .button.name",(e=>{const t=$(e.target).text();u.setCustomTextName(t,!1),h(t,!1),f(!0)})),$("#popups").on("click","#savedTextsPopupWrapper .list .savedText .button.delete",(()=>{f(!0,!0)})),$("#popups").on("click","#savedTextsPopupWrapper .listLong .savedText .button.name",(e=>{const t=$(e.target).text();u.setCustomTextName(t,!0),h(t,!0),f(!0)})),$("#popups").on("click","#savedTextsPopupWrapper .listLong .savedText .button.resetProgress",(()=>{f(!0,!0)})),$("#popups").on("click","#savedTextsPopupWrapper .listLong .savedText .button.delete",(()=>{f(!0,!0)})),$("#savedTextsPopupWrapper").on("mousedown",(e=>{"savedTextsPopupWrapper"===$(e.target).attr("id")&&f(!0)})),l.save(c)},2994:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=s(o(7355)),l=a(o(3368)),d=a(o(9817)),c=a(o(3285)),p=a(o(590)),f=o(3388),h=o(6350),m="streakHourOffsetPopupWrapper";function g(){var e;c.get()?(p.append(m),(0,f.isPopupVisible)(m)||(void 0!==(null===(e=(0,h.getSnapshot)())||void 0===e?void 0:e.streakHourOffset)?($(`#${m} .text`).html("You have already set your streak hour offset."),$(`#${m} input`).remove(),$(`#${m} .preview`).remove(),$(`#${m} .button`).remove()):v(),$(`#${m}`).stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$(`#${m} input`).trigger("focus")})))):l.add("You are offline",0,{duration:2})}function v(){const e=$(`#${m} input`).val(),t=$(`#${m} .preview`),o=new Date;o.setUTCHours(0),o.setUTCMinutes(0),o.setUTCSeconds(0),o.setUTCMilliseconds(0);const n=new Date;n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n.setHours(n.getHours()- -1*e),t.html(`\n  \n  Current local reset time: ${o.toLocaleTimeString()}<br>\n  New local reset time: ${n.toLocaleTimeString()}\n\n  `)}function y(){(0,f.isPopupVisible)(m)&&$(`#${m}`).stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$(`#${m}`).addClass("hidden"),p.remove(m)}))}function b(){return r(this,void 0,void 0,(function*(){const e=parseInt($(`#${m} input`).val());if(isNaN(e))return void l.add("Streak hour offset must be a number",0);if(e<-11||e>12)return void l.add("Streak hour offset must be between -11 and 12",0);d.show();const t=yield u.default.users.setStreakHourOffset(e);if(d.hide(),200!==t.status)l.add("Failed to set streak hour offset: "+t.message,-1);else{l.add("Streak hour offset set",1);const t=(0,h.getSnapshot)();t.streakHourOffset=e,(0,h.setSnapshot)(t),y()}}))}t.show=g,$(`#${m}`).on("mousedown",(e=>{$(e.target).attr("id")===m&&y()})),$(`#${m} .button`).on("click",(()=>{b()})),$(`#${m} input`).on("keypress",(e=>{"Enter"===e.key&&b()})),$(".pageSettings .section.setStreakHourOffset").on("click","#setStreakHourOffset",(()=>{g()})),$(`#${m} input`).on("input",(()=>{v()})),p.save(m)},6192:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const u=a(o(743)),l=s(o(6705)),d=a(o(3368)),c=a(o(8628)),p=a(o(590)),f=o(3388),h="shareCustomThemeWrapper";function m(){p.append(h),(0,f.isPopupVisible)(h)||$(`#${h}`).stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$(`#${h} #shareCustomThemeEdit .url`).trigger("focus")}))}function g(){(0,f.isPopupVisible)(h)&&$(`#${h}`).stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$(`#${h}`).addClass("hidden"),p.remove(h)}))}t.show=m,$("#shareCustomThemeWrapper").on("click",(e=>{"shareCustomThemeWrapper"===$(e.target).attr("id")&&g()})),$("#shareCustomThemeWrapper #shareCustomThemeEdit .copy-button").on("click",(()=>r(void 0,void 0,void 0,(function*(){const e=yield function(){return r(this,void 0,void 0,(function*(){const e={c:u.colorVars.map((e=>$(`.pageSettings .customTheme .customThemeEdit #${e}[type='color']`).attr("value")))};return $("#shareCustomThemeWrapper #shareCustomThemeEdit #includeBackground").is(":checked")&&(e.i=l.default.customBackground,e.s=l.default.customBackgroundSize,e.f=l.default.customBackgroundFilter),"https://monkeytype.com?customTheme="+btoa(JSON.stringify(e))}))}();navigator.clipboard.writeText(e).then((function(){d.add("URL Copied to clipboard",1),g()}),(function(t){d.add((0,f.createErrorMessage)(t,"Failed to copy to clipboard"),-1),d.add("Looks like we couldn't copy the link straight to your clipboard. Please copy it manually.",0,{duration:5}),g(),c.show(e)}))})))),$("#shareCustomThemeButton").on("click",(()=>{m()})),$(document).on("keypress",(function(e){"Enter"===e.key&&(0,f.isPopupVisible)(h)&&$("#shareCustomThemeWrapper #shareCustomThemeEdit .copy-button").trigger("click")})),p.save(h)},4924:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=s(o(6705)),l=o(9470),d=o(3388),c=a(o(8248)),p=o(6965),f=a(o(590)),h="shareTestSettingsPopupWrapper";function m(e){return $(`#shareTestSettingsPopupWrapper label.${e} input`).prop("checked")}function g(){const e=location.origin+"?testSettings=",t=[null,null,null,null,null,null,null,null];m("mode")&&(t[0]=u.default.mode),m("mode2")&&(t[1]=(0,d.getMode2)(u.default,l.randomQuote)),m("customText")&&(t[2]={text:c.text,isWordRandom:c.isWordRandom,isTimeRandom:c.isTimeRandom,word:c.word,time:c.time,delimiter:c.delimiter}),m("punctuation")&&(t[3]=u.default.punctuation),m("numbers")&&(t[4]=u.default.numbers),m("language")&&(t[5]=u.default.language),m("difficulty")&&(t[6]=u.default.difficulty),m("funbox")&&(t[7]=u.default.funbox);const o=e+(0,p.compressToURI)(JSON.stringify(t));$("#shareTestSettingsPopupWrapper textarea.url").val(o),o.length>2e3?$("#shareTestSettingsPopupWrapper .tooLongWarning").removeClass("hidden"):$("#shareTestSettingsPopupWrapper .tooLongWarning").addClass("hidden")}function v(){m("mode")?$("#shareTestSettingsPopupWrapper .subgroup").removeClass("hidden"):$("#shareTestSettingsPopupWrapper .subgroup").addClass("hidden")}function y(){return r(this,void 0,void 0,(function*(){(0,d.isPopupVisible)(h)&&$("#shareTestSettingsPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#shareTestSettingsPopupWrapper").addClass("hidden"),f.remove(h)}))}))}t.show=function(){f.append(h),(0,d.isPopupVisible)(h)||(g(),v(),$("#shareTestSettingsPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125))},t.hide=y,$("#shareTestSettingsPopupWrapper label input").on("change",(()=>{g(),v()})),$("#shareTestSettingsPopupWrapper").on("mousedown",(e=>{"shareTestSettingsPopupWrapper"===$(e.target).attr("id")&&y()})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,d.isPopupVisible)(h)&&(y(),e.preventDefault())})),f.save(h)},9360:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.list=void 0;const u=s(o(7355)),l=a(o(4674)),d=a(o(6350)),c=a(o(6705)),p=a(o(9817)),f=a(o(3368)),h=a(o(8835)),m=a(o(6126)),g=a(o(4216)),v=a(o(8248)),y=a(o(5177)),b=a(o(5344)),w=o(6617),C=a(o(3285)),_=o(522),S=o(3388),P=a(o(7717)),x=a(o(590)),k=a(o(743)),T="simplePopupWrapper";let O=null;t.list={};class M{constructor(e,t,o,n=[],i="",a="Confirm",r,s,u){this.parameters=[],this.id=e,this.type=t,this.execFn=(e,...t)=>r(e,...t),this.title=o,this.inputs=n,this.text=i,this.wrapper=$("#simplePopupWrapper"),this.element=$("#simplePopup"),this.buttonText=a,this.beforeInitFn=e=>s(e),this.beforeShowFn=e=>u(e),this.canClose=!0,this.noAnimation=!1}reset(){this.element.html('\n    <div class="title"></div>\n    <div class="inputs"></div>\n    <div class="text"></div>\n    <div class="button"></div>')}init(){const e=this.element;e.find("input").val(""),this.reset(),e.attr("popupId",this.id),e.find(".title").text(this.title),e.find(".text").text(this.text),this.initInputs(),""===this.buttonText?e.find(".button").remove():e.find(".button").text(this.buttonText),""===this.text?e.find(".text").addClass("hidden"):e.find(".text").removeClass("hidden")}initInputs(){const e=this.element;this.inputs.length>0?("number"===this.type?this.inputs.forEach((t=>{e.find(".inputs").append(`\n            <input\n              type="number"\n              min="1"\n              value="${t.initVal}"\n              placeholder="${t.placeholder}"\n              class="${t.hidden?"hidden":""}"\n              ${t.hidden?"":"required"}\n              autocomplete="off"\n            >\n          `)})):"text"===this.type&&this.inputs.forEach((t=>{t.type?"textarea"===t.type?e.find(".inputs").append(`\n                <textarea\n                  placeholder="${t.placeholder}"\n                  class="${t.hidden?"hidden":""}"\n                  ${t.hidden?"":"required"}\n                  ${t.disabled?"disabled":""}\n                  autocomplete="off"\n                >${t.initVal}</textarea>\n              `):"checkbox"===t.type?e.find(".inputs").append(`\n                <label class="checkbox">\n                  <input type="checkbox">\n                  <div class="customTextCheckbox">\n                    <div class="check">\n                      <i class="fas fa-fw fa-check"></i>\n                    </div>\n                  </div>\n                  ${t.label}\n                </label>\n              `):e.find(".inputs").append(`\n              <input\n              type="${t.type}"\n              value="${t.initVal}"\n              placeholder="${t.placeholder}"\n              class="${t.hidden?"hidden":""}"\n              ${t.hidden?"":"required"}\n              ${t.disabled?"disabled":""}\n              autocomplete="off"\n              >\n              `):e.find(".inputs").append(`\n              <input\n                type="text"\n                value="${t.initVal}"\n                placeholder="${t.placeholder}"\n                class="${t.hidden?"hidden":""}"\n                ${t.hidden?"":"required"}\n                ${t.disabled?"disabled":""}\n                autocomplete="off"\n              >\n            `)})),e.find(".inputs").removeClass("hidden")):e.find(".inputs").addClass("hidden")}exec(){if(!this.canClose)return;const e=[];$.each($("#simplePopup input"),((t,o)=>{$(o).is(":checkbox")?e.push($(o).is(":checked")?"true":"false"):e.push($(o).val())})),this.execFn(this,...e),this.hide()}show(e=[],t=!1){x.append(T),O=this,this.noAnimation=t,this.parameters=e,this.beforeInitFn(this),this.init(),this.beforeShowFn(this),this.wrapper.stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},t?0:125,(()=>{$($("#simplePopup").find("input")[0]).trigger("focus")}))}hide(){this.canClose&&(O=null,this.wrapper.stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},this.noAnimation?0:125,(()=>{this.wrapper.addClass("hidden"),x.remove(T)})))}}function A(){if(O)return O.hide();$("#simplePopupWrapper").stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{$("#simplePopupWrapper").addClass("hidden")}))}t.hide=A,$("#simplePopupWrapper").on("mousedown",(e=>{if("simplePopupWrapper"===$(e.target).attr("id")){if(O)return O.hide();$("#simplePopupWrapper").stop(!0,!0).css("opacity",1).removeClass("hidden").animate({opacity:0},125,(()=>{$("#simplePopupWrapper").addClass("hidden")}))}})),$("#popups").on("click","#simplePopupWrapper .button",(()=>{var e;const o=null!==(e=$("#simplePopup").attr("popupId"))&&void 0!==e?e:"";t.list[o].exec()})),$("#popups").on("keyup","#simplePopupWrapper input",(e=>{var o;if("Enter"===e.key){e.preventDefault();const n=null!==(o=$("#simplePopup").attr("popupId"))&&void 0!==o?o:"";t.list[n].exec()}})),t.list.updateEmail=new M("updateEmail","text","Update Email",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New email",initVal:""},{placeholder:"Confirm new email",initVal:""}],"","Update",((e,t,o,n)=>r(void 0,void 0,void 0,(function*(){try{const e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;if(!e)return;if(o!==n)return void f.add("Emails don't match",0);if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=_.EmailAuthProvider.credential(e.email,t);yield(0,_.reauthenticateWithCredential)(e,o)}p.show();const i=yield u.default.users.updateEmail(o,e.email);if(p.hide(),200!==i.status)return f.add("Failed to update email: "+i.message,-1);f.add("Email updated",1),setTimeout((()=>{window.location.reload()}),3e3)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.removeGoogleAuth=new M("removeGoogleAuth","text","Remove Google Authentication",[{placeholder:"Password",type:"password",initVal:""}],"","Remove",((e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;if(!e)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=_.EmailAuthProvider.credential(e.email,t);yield(0,_.reauthenticateWithCredential)(e,o)}p.show(),(0,_.unlink)(e,"google.com").then((()=>{p.hide(),f.add("Google authentication removed",1),h.updateAuthSections()})).catch((e=>{p.hide(),f.add("Something went wrong: "+e.message,-1)})),setTimeout((()=>{window.location.reload()}),3e3)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.updateName=new M("updateName","text","Update Name",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New name",type:"text",initVal:""}],"","Update",((e,t,o)=>r(void 0,void 0,void 0,(function*(){try{const e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser,n=d.getSnapshot();if(!e||!n)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=_.EmailAuthProvider.credential(e.email,t);yield(0,_.reauthenticateWithCredential)(e,o)}else yield(0,_.reauthenticateWithPopup)(e,l.gmailProvider);p.show();const i=yield u.default.users.getNameAvailability(o);if(200!==i.status)return p.hide(),f.add("Failed to check name: "+i.message,-1);const a=yield u.default.users.updateName(o);if(200!==a.status)return p.hide(),f.add("Failed to update name: "+a.message,-1);f.add("Name updated",1),n.name=o,$("#menu .textButton.account .text").text(o),n.needsToChangeName&&setTimeout((()=>{location.reload()}),3e3)}catch(e){"auth/wrong-password"===e.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}p.hide()}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser,o=d.getSnapshot();t&&o&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs[0].hidden=!0,e.buttonText="Reauthenticate to update"),!0===o.needsToChangeName&&(e.text="We've recently identified several issues that allowed users to register with names that were already taken. Accounts which signed up earliest get to keep the duplicated name, and others are forced to change. Unique names are essential for smooth operation of upcoming features like public profiles, multiplayer, and more. Sorry for the inconvenience."))}),(e=>{})),t.list.updatePassword=new M("updatePassword","text","Update Password",[{placeholder:"Password",type:"password",initVal:""},{placeholder:"New password",type:"password",initVal:""},{placeholder:"Confirm new password",type:"password",initVal:""}],"","Update",((e,t,o,n)=>r(void 0,void 0,void 0,(function*(){try{const e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;if(!e)return;const i=_.EmailAuthProvider.credential(e.email,t);if(o!==n)return void f.add("New passwords don't match",0);if(!(0,S.isLocalhost)()&&!(0,S.isPasswordStrong)(o))return void f.add("New password must contain at least one capital letter, number, a special character and must be between 8 and 64 characters long",0,{duration:4});p.show(),yield(0,_.reauthenticateWithCredential)(e,i),yield(0,_.updatePassword)(e,o),p.hide(),f.add("Password updated",1),setTimeout((()=>{window.location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="",e.text="Password authentication is not enabled"))}),(e=>{})),t.list.addPasswordAuth=new M("addPasswordAuth","text","Add Password Authentication",[{placeholder:"email",type:"email",initVal:""},{placeholder:"confirm email",type:"email",initVal:""},{placeholder:"new password",type:"password",initVal:""},{placeholder:"confirm new password",type:"password",initVal:""}],"","Add",((e,t,o,n,i)=>r(void 0,void 0,void 0,(function*(){t===o?n===i?yield l.addPasswordAuth(t,n):f.add("Passwords don't match",0):f.add("Emails don't match",0)}))),(()=>{}),(e=>{})),t.list.deleteAccount=new M("deleteAccount","text","Delete Account",[{placeholder:"Password",type:"password",initVal:""}],"This is the last time you can change your mind. After pressing the button everything is gone.","Delete",((e,t)=>r(void 0,void 0,void 0,(function*(){var e;try{const o=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;if(!o)return;if(o.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const e=_.EmailAuthProvider.credential(o.email,t);yield(0,_.reauthenticateWithCredential)(o,e)}else yield(0,_.reauthenticateWithPopup)(o,l.gmailProvider);p.show(),f.add("Deleting stats...",0);const n=yield u.default.users.delete();if(p.hide(),200!==n.status)return f.add("Failed to delete user stats: "+n.message,-1);p.show(),f.add("Deleting results...",0);const i=yield u.default.results.deleteAll();if(p.hide(),200!==i.status)return f.add("Failed to delete user results: "+i.message,-1);f.add("Deleting login information...",0),yield null===(e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser)||void 0===e?void 0:e.delete(),f.add("Goodbye",1,{duration:5}),setTimeout((()=>{location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="Reauthenticate to delete"))}),(e=>{})),t.list.resetAccount=new M("resetAccount","text","Reset Account",[{placeholder:"Password",type:"password",initVal:""}],"This is the last time you can change your mind. After pressing the button everything is gone.","Reset",((e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;if(!e)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=_.EmailAuthProvider.credential(e.email,t);yield(0,_.reauthenticateWithCredential)(e,o)}else yield(0,_.reauthenticateWithPopup)(e,l.gmailProvider);if(f.add("Resetting settings...",0),c.reset(),p.show(),f.add("Resetting account...",0),200!==(yield u.default.users.reset()).status)return p.hide(),f.add("There was an error resetting your account. Please try again.",-1);p.hide(),f.add("Reset complete",1),setTimeout((()=>{location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="Reauthenticate to reset"))}),(e=>{})),t.list.optOutOfLeaderboards=new M("optOutOfLeaderboards","text","Opt out of leaderboards",[{placeholder:"Password",type:"password",initVal:""}],"Are you sure you want to opt out of leaderboards?","Opt out",((e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;if(!e)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=_.EmailAuthProvider.credential(e.email,t);yield(0,_.reauthenticateWithCredential)(e,o)}else yield(0,_.reauthenticateWithPopup)(e,l.gmailProvider);p.show();const o=yield u.default.users.optOutOfLeaderboards();if(200!==o.status)return p.hide(),f.add(`Failed to opt out of leaderboards: ${o.message}`,-1);p.hide(),f.add("Leaderboard opt out successful",1),setTimeout((()=>{location.reload()}),3e3)}catch(e){const t=e;p.hide(),"auth/wrong-password"===t.code?f.add("Incorrect password",-1):f.add("Something went wrong: "+e,-1)}}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="Reauthenticate to reset"))}),(e=>{})),t.list.clearTagPb=new M("clearTagPb","text","Clear Tag PB",[],"Are you sure you want to clear this tags PB?","Clear",(e=>r(void 0,void 0,void 0,(function*(){var t,o;const n=e.parameters[0];p.show();const i=yield u.default.users.deleteTagPersonalBest(n);if(p.hide(),200!==i.status)return f.add("Failed to delete tag's PB: "+i.message);if(1===i.data.resultCode){const e=null===(o=null===(t=d.getSnapshot())||void 0===t?void 0:t.tags)||void 0===o?void 0:o.filter((e=>e._id===n))[0];if(void 0===e)return;e.personalBests={time:{},words:{},quote:{},zen:{},custom:{}},$(`.pageSettings .section.tags .tagsList .tag[id="${n}"] .clearPbButton`).attr("aria-label","No PB found"),f.add("Tag PB cleared.",0)}else f.add("Something went wrong: "+i.message,-1)}))),(e=>{e.text=`Are you sure you want to clear PB for tag ${e.parameters[1]}?`}),(e=>{})),t.list.applyCustomFont=new M("applyCustomFont","text","Custom font",[{placeholder:"Font name",initVal:""}],"Make sure you have the font installed on your computer before applying","Apply",((e,t)=>{var o;""!==t&&(null===(o=h.groups.fontFamily)||void 0===o||o.setValue(t.replace(/\s/g,"_")))}),(()=>{}),(e=>{})),t.list.resetPersonalBests=new M("resetPersonalBests","text","Reset Personal Bests",[{placeholder:"Password",type:"password",initVal:""}],"","Reset",((e,t)=>r(void 0,void 0,void 0,(function*(){try{const e=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser,o=d.getSnapshot();if(!e||!o)return;if(e.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))){const o=_.EmailAuthProvider.credential(e.email,t);yield(0,_.reauthenticateWithCredential)(e,o)}else yield(0,_.reauthenticateWithPopup)(e,l.gmailProvider);p.show();const n=yield u.default.users.deletePersonalBests();if(p.hide(),200!==n.status)return f.add("Failed to reset personal bests: "+n.message,-1);f.add("Personal bests have been reset",1),o.personalBests={time:{},words:{},quote:{},zen:{},custom:{}}}catch(e){p.hide(),f.add(e,-1)}}))),(e=>{const t=null===w.Auth||void 0===w.Auth?void 0:w.Auth.currentUser;t&&(t.providerData.find((e=>"password"===(null==e?void 0:e.providerId)))||(e.inputs=[],e.buttonText="Reauthenticate to reset"))}),(e=>{})),t.list.resetSettings=new M("resetSettings","text","Reset Settings",[],"Are you sure you want to reset all your settings?","Reset",(()=>{c.reset()}),(()=>{}),(e=>{})),t.list.unlinkDiscord=new M("unlinkDiscord","text","Unlink Discord",[],"Are you sure you want to unlink your Discord account?","Unlink",(()=>r(void 0,void 0,void 0,(function*(){const e=d.getSnapshot();if(!e)return;p.show();const t=yield u.default.users.unlinkDiscord();if(p.hide(),200!==t.status)return f.add("Failed to unlink Discord: "+t.message,-1);f.add("Accounts unlinked",1),e.discordAvatar=void 0,e.discordId=void 0,b.update(),d.setSnapshot(e),h.updateDiscordSection()}))),(()=>{}),(e=>{})),t.list.generateApeKey=new M("generateApeKey","text","Generate new key",[{placeholder:"Name",initVal:""}],"","Generate",((e,o)=>r(void 0,void 0,void 0,(function*(){p.show();const e=yield u.default.apeKeys.generate(o,!1);if(p.hide(),200!==e.status)return f.add("Failed to generate key: "+e.message,-1);{const o=e.data;t.list.viewApeKey.show([o.apeKey])}}))),(()=>{}),(e=>{})),t.list.viewApeKey=new M("viewApeKey","text","Ape Key",[{type:"textarea",disabled:!0,placeholder:"Key",initVal:""}],"This is your new Ape Key. Please keep it safe. You will only see it once!","Close",(e=>{m.show()}),(e=>{e.inputs[0].initVal=e.parameters[0]}),(e=>{e.canClose=!1,$("#simplePopup textarea").css("height","110px"),$("#simplePopup .button").addClass("hidden"),setTimeout((()=>{e.canClose=!0,$("#simplePopup .button").removeClass("hidden")}),3e3)})),t.list.deleteApeKey=new M("deleteApeKey","text","Delete Ape Key",[],"Are you sure?","Delete",(e=>r(void 0,void 0,void 0,(function*(){p.show();const t=yield u.default.apeKeys.delete(e.parameters[0]);if(p.hide(),200!==t.status)return f.add("Failed to delete key: "+t.message,-1);f.add("Key deleted",1),m.show()}))),(e=>{}),(e=>{})),t.list.editApeKey=new M("editApeKey","text","Edit Ape Key",[{placeholder:"Name",initVal:""}],"","Edit",((e,t)=>r(void 0,void 0,void 0,(function*(){p.show();const o=yield u.default.apeKeys.update(e.parameters[0],{name:t});if(p.hide(),200!==o.status)return f.add("Failed to update key: "+o.message,-1);f.add("Key updated",1),m.show()}))),(e=>{}),(e=>{})),t.list.deleteCustomText=new M("deleteCustomText","text","Delete custom text",[],"Are you sure?","Delete",(e=>{v.deleteCustomText(e.parameters[0]),f.add("Custom text deleted",1),P.setCustomTextName("",void 0),y.show(!0)}),(e=>{e.text=`Are you sure you want to delete custom text ${e.parameters[0]}?`}),(()=>{})),t.list.deleteCustomTextLong=new M("deleteCustomTextLong","text","Delete custom text",[],"Are you sure?","Delete",(e=>{v.deleteCustomText(e.parameters[0],!0),f.add("Custom text deleted",1),P.setCustomTextName("",void 0),y.show(!0)}),(e=>{e.text=`Are you sure you want to delete custom text ${e.parameters[0]}?`}),(()=>{})),t.list.resetProgressCustomTextLong=new M("resetProgressCustomTextLong","text","Reset progress for custom text",[],"Are you sure?","Reset",(e=>{v.setCustomTextLongProgress(e.parameters[0],0),f.add("Custom text progress reset",1),y.show(!0),v.setPopupTextareaState(v.getCustomText(e.parameters[0],!0).join(" "))}),(e=>{e.text=`Are you sure you want to reset your progress for custom text ${e.parameters[0]}?`}),(()=>{})),t.list.updateCustomTheme=new M("updateCustomTheme","text","Update Custom Theme",[{type:"text",placeholder:"Name",initVal:""},{type:"checkbox",initVal:"false",label:"Update custom theme to current colors"}],"","Update",((e,t,o)=>r(void 0,void 0,void 0,(function*(){const n=d.getSnapshot();if(!n)return;const i=n.customThemes.find((t=>t._id===e.parameters[0]));if(void 0===i)return void f.add("Custom theme does not exist",-1);let a=[];if("true"===o)for(const e of k.colorVars)a.push($(`.pageSettings .customTheme .customThemeEdit #${e}[type='color']`).attr("value"));else a=i.colors;const r={name:t.replaceAll(" ","_"),colors:a};p.show();const s=yield d.editCustomTheme(i._id,r);p.hide(),s&&(c.setCustomThemeColors(a),f.add("Custom theme updated",1),g.refreshButtons())}))),(e=>{const t=d.getSnapshot();if(!t)return;const o=t.customThemes.find((t=>t._id===e.parameters[0]));o&&(e.inputs[0].initVal=o.name)}),(e=>{})),t.list.deleteCustomTheme=new M("deleteCustomTheme","text","Delete Custom Theme",[],"Are you sure?","Delete",(e=>r(void 0,void 0,void 0,(function*(){p.show(),yield d.deleteCustomTheme(e.parameters[0]),p.hide(),f.add("Custom theme deleted",1),g.refreshButtons()}))),(e=>{}),(e=>{})),t.list.forgotPassword=new M("forgotPassword","text","Forgot Password",[{type:"text",placeholder:"Email",initVal:""}],"","Send",((e,t)=>r(void 0,void 0,void 0,(function*(){p.show();const e=yield u.default.users.forgotPasswordEmail(t);200!==e.status?(p.hide(),f.add("Failed to request password reset email: "+e.message,5e3)):(p.hide(),f.add("Password reset email sent",1))}))),(e=>{const t=$('.pageLogin .login input[name="current-email"]').val();t&&(e.inputs[0].initVal=t)}),(()=>{})),$(".pageLogin #forgotPasswordButton").on("click",(()=>{t.list.forgotPassword.show()})),$(".pageSettings .section.discordIntegration #unlinkDiscordButton").on("click",(()=>{C.get()?t.list.unlinkDiscord.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #removeGoogleAuth").on("click",(()=>{C.get()?t.list.removeGoogleAuth.show():f.add("You are offline",0,{duration:2})})),$("#resetSettingsButton").on("click",(()=>{C.get()?t.list.resetSettings.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #resetPersonalBestsButton").on("click",(()=>{C.get()?t.list.resetPersonalBests.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #updateAccountName").on("click",(()=>{C.get()?t.list.updateName.show():f.add("You are offline",0,{duration:2})})),$("#bannerCenter").on("click",".banner .text .openNameChange",(()=>{C.get()?t.list.updateName.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #addPasswordAuth").on("click",(()=>{C.get()?t.list.addPasswordAuth.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #emailPasswordAuth").on("click",(()=>{C.get()?t.list.updateEmail.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #passPasswordAuth").on("click",(()=>{C.get()?t.list.updatePassword.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #deleteAccount").on("click",(()=>{C.get()?t.list.deleteAccount.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #resetAccount").on("click",(()=>{C.get()?t.list.resetAccount.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings #optOutOfLeaderboardsButton").on("click",(()=>{C.get()?t.list.optOutOfLeaderboards.show():f.add("You are offline",0,{duration:2})})),$("#popups").on("click","#apeKeysPopup .generateApeKey",(()=>{C.get()?t.list.generateApeKey.show():f.add("You are offline",0,{duration:2})})),$(".pageSettings").on("click",".section.themes .customTheme .delButton",(e=>{if(!C.get())return void f.add("You are offline",0,{duration:2});const o=$(e.currentTarget).parent(".customTheme.button").attr("customThemeId");t.list.deleteCustomTheme.show([o])})),$(".pageSettings").on("click",".section.themes .customTheme .editButton",(e=>{if(!C.get())return void f.add("You are offline",0,{duration:2});const o=$(e.currentTarget).parent(".customTheme.button").attr("customThemeId");t.list.updateCustomTheme.show([o])})),$("#popups").on("click","#savedTextsPopupWrapper .list .savedText .button.delete",(e=>{const o=$(e.target).siblings(".button.name").text();t.list.deleteCustomText.show([o],!0)})),$("#popups").on("click","#savedTextsPopupWrapper .listLong .savedText .button.delete",(e=>{const o=$(e.target).siblings(".button.name").text();t.list.deleteCustomTextLong.show([o],!0)})),$("#popups").on("click","#savedTextsPopupWrapper .listLong .savedText .button.resetProgress",(e=>{const o=$(e.target).siblings(".button.name").text();t.list.resetProgressCustomTextLong.show([o],!0)})),$("#popups").on("click","#apeKeysPopup table tbody tr .button.delete",(e=>{if(!C.get())return void f.add("You are offline",0,{duration:2});const o=$(e.target).closest("tr").attr("keyId");t.list.deleteApeKey.show([o])})),$("#popups").on("click","#apeKeysPopup table tbody tr .button.edit",(e=>{if(!C.get())return void f.add("You are offline",0,{duration:2});const o=$(e.target).closest("tr").attr("keyId");t.list.editApeKey.show([o])})),$(".pageSettings").on("click",".section.fontFamily .button.custom",(()=>{t.list.applyCustomFont.show([])})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,S.isElementVisible)("#simplePopupWrapper")&&(A(),e.preventDefault())})),x.save(T)},590:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.append=t.remove=t.save=void 0;const o=document.getElementById("popups"),n=new Map;function i(e,t=!0){const o=document.getElementById(e);n.set(e,o),t&&a(e)}function a(e){const t=n.get(e);t?t.remove():i(e,!0)}t.save=i,t.remove=a,t.append=function(e,t=""){const i=n.get(e);t?document.getElementById(t).append(i):o.append(i)}},4660:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0});const r=o(3388),s=a(o(590)),u="supportMeWrapper";function l(){s.append(u),$("#supportMeWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125)}function d(){$("#supportMeWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#supportMeWrapper").addClass("hidden"),s.remove(u)}))}$("#supportMeButton").on("click",(()=>{l()})),$("#middle").on("click",".pageAbout #supportMeAboutButton",(()=>{l()})),$("#popups").on("click","#supportMeWrapper",(()=>{d()})),$("#popups").on("click","#supportMeWrapper .button.ads",(()=>{d()})),$("#popups").on("click","#supportMeWrapper a.button",(()=>{d()})),$(document).on("keypress","#supportMeButton, #supportMeAboutButton",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,r.isPopupVisible)(u)&&d()})),s.save(u)},1673:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=void 0;const u=s(o(7355)),l=a(o(9817)),d=a(o(3368)),c=a(o(6953)),p=a(o(590)),f=o(3388),h="userReportPopupWrapper",m={userUid:void 0};function g(){return r(this,void 0,void 0,(function*(){(0,f.isPopupVisible)(h)&&$("#userReportPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{c.reset("userReportPopup"),$("#userReportPopupWrapper").addClass("hidden"),p.remove(h)}))}))}t.show=function(e){return r(this,void 0,void 0,(function*(){if(p.append(h),!(0,f.isPopupVisible)(h)){c.render(document.querySelector("#userReportPopup .g-recaptcha"),"userReportPopup");const{name:t}=e;m.userUid=e.uid,$("#userReportPopup .user").text(t),$("#userReportPopup .reason").val("Inappropriate name"),$("#userReportPopup .comment").val(""),$("#userReportPopup .characterCount").text("-"),$("#userReportPopup .reason").select2({minimumResultsForSearch:1/0}),$("#userReportPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{$("#userReportPopup textarea").trigger("focus").trigger("select")}))}}))},t.hide=g,$("#userReportPopupWrapper").on("mousedown",(e=>{"userReportPopupWrapper"===$(e.target).attr("id")&&g()})),$("#userReportPopupWrapper .comment").on("input",(()=>{setTimeout((()=>{const e=$("#userReportPopup .comment").val().length;$("#userReportPopup .characterCount").text(e),e>250?$("#userReportPopup .characterCount").addClass("red"):$("#userReportPopup .characterCount").removeClass("red")}),1)})),$("#userReportPopupWrapper .submit").on("click",(()=>r(void 0,void 0,void 0,(function*(){yield function(){return r(this,void 0,void 0,(function*(){const e=c.getResponse("userReportPopup");if(!e)return d.add("Please complete the captcha");const t=$("#userReportPopup .reason").val(),o=$("#userReportPopup .comment").val(),n=e;if(!t)return d.add("Please select a valid report reason");if(!o)return d.add("Please provide a comment");const i=o.length-250;if(i>0)return d.add(`Report comment is ${i} character(s) too long`);l.show();const a=yield u.default.users.report(m.userUid,t,o,n);if(l.hide(),200!==a.status)return d.add("Failed to report user: "+a.message,-1);d.add("Report submitted. Thank you!",1),g()}))}()})))),p.save(h)},2666:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const s=r(o(9546)),u=o(3388),l=a(o(590)),d="versionHistoryWrapper";function c(){l.append(d),$("#versionHistory").html('\n    <div class="preloader">\n      <i class="fas fa-fw fa-spin fa-circle-notch"></i>\n    </div\n  '),(0,u.getReleasesFromGitHub)().then((e=>{$("#versionHistory").html('<div class="releases"></div'),e.forEach((e=>{e.draft||e.prerelease||$("#versionHistory .releases").append(`\n        <div class="release">\n          <div class="title">${e.name}</div>\n          <div class="date">${(0,s.default)(new Date(e.published_at),"dd MMM yyyy")}</div>\n          <div class="body">${e.body.replace(/\r\n/g,"<br>")}</div>\n        </div>\n      `)}))})),$("#versionHistoryWrapper").css("opacity",0).removeClass("hidden").animate({opacity:1},125),$("#newVersionIndicator").addClass("hidden")}function p(){$("#versionHistoryWrapper").css("opacity",1).animate({opacity:0},125,(()=>{$("#versionHistoryWrapper").addClass("hidden"),$("#versionHistory").html(""),l.remove(d)}))}t.show=c,$("#bottom").on("click","#newVersionIndicator",(()=>{$("#newVersionIndicator").addClass("hidden")})),$("#bottom").on("click",".version",(e=>{e.shiftKey||c()})),$("#popups").on("click","#versionHistoryWrapper",(e=>{"versionHistoryWrapper"===$(e.target).attr("id")&&p()})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,u.isPopupVisible)(d)&&(p(),e.preventDefault())})),l.save(d)},2864:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.egVideoListener=t.show=void 0;const s=a(o(3368)),u=a(o(1493)),l=a(o(590)),d=o(3388),c="videoAdPopupWrapper";function p(){return r(this,void 0,void 0,(function*(){l.append(c),yield u.checkAdblock(),u.adBlock?s.add("Looks like you're using an adblocker. Video ads will not work until you disable it.",0,{duration:6}):(yield u.checkCookieblocker(),u.cookieBlocker?s.add("Looks like you're using a cookie popup blocker. Video ads will not work without giving your consent through the popup.",0,{duration:7}):(0,d.isPopupVisible)(c)||$("#videoAdPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},125,(()=>{window.dataLayer.push({event:"EG_Video"})})))}))}function f(){(0,d.isPopupVisible)(c)&&$("#videoAdPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},125,(()=>{$("#videoAdPopupWrapper").addClass("hidden"),l.remove(c)}))}t.show=p,t.egVideoListener=function(e){const t=e.event;"started"===t||("finished"===t?f():"empty"===t&&(s.add("Failed to load video ad. Please try again later",-1,{duration:3}),f()))},$(".pageTest #watchVideoAdButton").on("click",(()=>{p()})),l.save(c)},9231:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.show=void 0;const s=a(o(3388)),u=a(o(8248)),l=a(o(3368)),d=a(o(590)),c="wordFilterPopupWrapper";let p=!1;const f={homeKeys:{display:"home keys",getIncludeString:e=>[...e.keys.row3.slice(0,4),...e.keys.row3.slice(6,10)],getExcludeString:e=>{const t=e.keys.row2,o=e.keys.row4,n=e.keys.row3.slice(10);return[...t,...e.keys.row3.slice(4,6),...n,...o]}},leftHand:{display:"left hand",getIncludeString:e=>[...e.keys.row2.slice(0,5),...e.keys.row3.slice(0,5),...e.keys.row4.slice(0,5)],getExcludeString:e=>[...e.keys.row2.slice(5),...e.keys.row3.slice(5),...e.keys.row4.slice(5)]},rightHand:{display:"right hand",getIncludeString:e=>[...e.keys.row2.slice(5),...e.keys.row3.slice(5),...e.keys.row4.slice(4)],getExcludeString:e=>[...e.keys.row2.slice(0,5),...e.keys.row3.slice(0,5),...e.keys.row4.slice(0,4)]},homeRow:{display:"home row",getIncludeString:e=>e.keys.row3,getExcludeString:e=>[...e.keys.row2,...e.keys.row4]},topRow:{display:"top row",getIncludeString:e=>e.keys.row2,getExcludeString:e=>[...e.keys.row3,...e.keys.row4]},bottomRow:{display:"bottom row",getIncludeString:e=>e.keys.row4,getExcludeString:e=>[...e.keys.row2,...e.keys.row3]}};let h;function m(e=!1){s.isPopupVisible(c)&&$("#wordFilterPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},e?0:125,(()=>{$("#wordFilterPopupWrapper").addClass("hidden"),d.remove(c),h&&h()}))}function g(e){return r(this,void 0,void 0,(function*(){const t=$("#wordFilterPopup .languageInput").val(),o=yield function(e){return r(this,void 0,void 0,(function*(){let t=$("#wordFilterPopup .wordIncludeInput").val();t=s.escapeRegExp(null==t?void 0:t.trim()),t=t.replace(/\s+/gi,"|");const o=new RegExp(t,"i");let n=$("#wordFilterPopup .wordExcludeInput").val();n=s.escapeRegExp(n.trim()),n=n.replace(/\s+/gi,"|");const i=new RegExp(n,"i"),a=[];let r;try{r=yield s.getLanguage(e)}catch(e){return l.add(s.createErrorMessage(e,"Failed to filter language words"),-1),[]}const u=$("#wordFilterPopup .wordMaxInput").val(),d=$("#wordFilterPopup .wordMinInput").val();let c,p;c=""==u?999:parseInt(u),p=""==d?1:parseInt(d);for(let e=0;e<r.words.length;e++){const t=r.words[e],s=o.test(t),u=i.test(t);(s&&!u||s&&""==n)&&t.length<=c&&t.length>=p&&a.push(t)}return a}))}(t),n=o.join(u.delimiter);u.setPopupTextareaState((e?"":u.popupTextareaState+" ")+n),m(!0)}))}t.show=function(e=!1,t){return r(this,void 0,void 0,(function*(){d.append(c),s.isPopupVisible(c)||(yield function(){return r(this,void 0,void 0,(function*(){if(!p){let e,t;$("#wordFilterPopup .languageInput").empty(),$("#wordFilterPopup .layoutInput").empty(),$("wordFilterPopup .presetInput").empty();try{e=yield s.getLanguageList()}catch(e){return void console.error(s.createErrorMessage(e,"Failed to initialise word filter popup language list"))}e.forEach((e=>{let t=e;t=t.replace("_"," "),$("#wordFilterPopup .languageInput").append(`\n        <option value=${e}>${t}</option>\n      `)}));try{t=yield s.getLayoutsList()}catch(e){return void console.error(s.createErrorMessage(e,"Failed to initialise word filter popup preset list"))}for(const e in t)$("#wordFilterPopup .layoutInput").append(`\n      <option value=${e}>${e}</option>\n    `);for(const[e,t]of Object.entries(f))$("#wordFilterPopup .presetInput").append(`<option value=${e}>${t.display}</option>`);p=!0}}))}(),h=t,$("#wordFilterPopup .languageInput").select2({width:"100%"}),$("#wordFilterPopup .layoutInput").select2({width:"100%"}),$("#wordFilterPopup .presetInput").select2({width:"100%"}),$("#wordFilterPopupWrapper .loadingIndicator").addClass("hidden"),$("#wordFilterPopupWrapper .button").removeClass("hidden"),$("#wordFilterPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},e?0:125,(()=>{})))}))},$("#wordFilterPopupWrapper").on("mousedown",(e=>{"wordFilterPopupWrapper"===$(e.target).attr("id")&&m(!0)})),$("#wordFilterPopup .languageInput").one("select2:open",(function(){$("input.select2-search__field").prop("placeholder","search")})),$("#wordFilterPopupWrapper .button.addButton").on("mousedown",(()=>{$("#wordFilterPopupWrapper .loadingIndicator").removeClass("hidden"),$("#wordFilterPopupWrapper .button").addClass("hidden"),g(!1)})),$("#wordFilterPopupWrapper .button.setButton").on("mousedown",(()=>{$("#wordFilterPopupWrapper .loadingIndicator").removeClass("hidden"),$("#wordFilterPopupWrapper .button").addClass("hidden"),g(!0)})),$("#wordFilterPopup .button.generateButton").on("click",(()=>r(void 0,void 0,void 0,(function*(){const e=$("#wordFilterPopup .presetInput").val(),t=$("#wordFilterPopup .layoutInput").val(),o=f[e],n=yield s.getLayout(t);$("#wordIncludeInput").val(o.getIncludeString(n).map((e=>e[0])).join(" ")),$("#wordExcludeInput").val(o.getExcludeString(n).map((e=>e[0])).join(" "))})))),d.save(c)},8325:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const s=a(o(2203)),u=a(o(6705)),l=u,d=a(o(3388)),c=a(o(6578)),p=a(o(8980)),f=a(o(3368)),h=a(o(8911)),m=a(o(4044)),g=a(o(2709)),v=a(o(3285)),y=o(5131),b=r(o(4166));s.set(),l.loadFromLocalStorage(),d.isLocalhost()?($("head title").text("localhost"),$("#bottom .version .text").text("localhost"),$("#bottom #versionGroup").removeClass("hidden"),$("body").prepend("<a class='button configureAPI' href='http://localhost:5005/configure/' target='_blank' aria-label=\"Configure API\" data-balloon-pos=\"right\"><i class=\"fas fa-fw fa-server\"></i></a>")):d.getLatestReleaseFromGitHub().then((e=>{$("#bottom .version .text").text(e),$("#bottom #versionGroup").removeClass("hidden"),p.show(e)})),h.set(!0,!0),$(document).ready((()=>{d.loadCSS("/./css/select2.min.css",!0),d.loadCSS("/./css/balloon.min.css",!0),d.loadCSS("/./css/fa.min.css",!0),m.check(),$("body").css("transition","all .25s, transform .05s"),"tab"!==u.default.quickRestart&&"esc"!==u.default.quickRestart||$("#restartTestButton").addClass("hidden"),window.localStorage.getItem("merchbannerclosed")||f.addBanner('Check out our merchandise, available at <a target="_blank" rel="noopener" href="https://monkeytype.store/">monkeytype.store</a>',1,"./images/merch2.png",!1,(()=>{window.localStorage.setItem("merchbannerclosed","true")}),!0),$("#centerContent").css("opacity","0").removeClass("hidden").stop(!0,!0).animate({opacity:1},250),v.get()&&g.show(),c.init(),new b.default("https://keymash.io/")})),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{if(d.isLocalhost())navigator.serviceWorker.getRegistrations().then((function(e){for(const t of e)t.unregister()}));else{const e=new y.Workbox("/service-worker.js");e.addEventListener("waiting",(t=>{e.addEventListener("controlling",(e=>{t.isUpdate||e.isUpdate})),e.messageSkipWaiting()})),e.register().then((t=>{console.log("Service worker registration succeeded:",t),setInterval((()=>{e.update()}),9e5)})).catch((e=>{console.log("Service worker registration failed:",e)}))}}))},8427:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});const i=n(o(6705));t.default=class{constructor(e,t,o,n,a){this.configName=e,this.configValue=i.default[e],this.mode=o,this.configFunction=t,this.setCallback=n,this.updateCallback=a,this.updateInput(),"select"===this.mode?$(".pageSettings").on("change",`.section.${this.configName} select`,(e=>{const t=$(e.currentTarget);t.hasClass("disabled")||t.hasClass("no-auto-handle")||this.setValue(t.val())})):"button"===this.mode&&$(".pageSettings").on("click",`.section.${this.configName} .button`,(t=>{const o=$(t.currentTarget);if(o.hasClass("disabled")||o.hasClass("no-auto-handle"))return;let n=o.attr(e);const i=o.attr("params");(n||i)&&("true"===n&&(n=!0),"false"===n&&(n=!1),this.setValue(n,i))}))}setValue(e,t){void 0===t?this.configFunction(e):this.configFunction(e,...t),this.updateInput(),this.setCallback&&this.setCallback()}updateInput(){this.configValue=i.default[this.configName],$(`.pageSettings .section.${this.configName} .button`).removeClass("active"),"select"===this.mode?$(`.pageSettings .section.${this.configName} select`).val(this.configValue).trigger("change.select2"):"button"===this.mode&&$(`.pageSettings .section.${this.configName} .button[${this.configName}='${this.configValue}']`).addClass("active"),this.updateCallback&&this.updateCallback()}}},4216:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.updateActiveTab=t.saveCustomThemeColors=t.setCustomInputs=t.refreshButtons=t.updateActiveButton=void 0;const s=a(o(6705)),u=s,l=a(o(743)),d=a(o(3388)),c=a(o(3368)),p=a(o(4203)),f=a(o(1833)),h=a(o(6192)),m=a(o(9817)),g=a(o(6350)),v=a(o(1446)),y=o(6617),b=a(o(7346));function w(){var e;let t=s.default.theme;"off"!==s.default.randomTheme&&"custom"!==s.default.randomTheme&&null!==l.randomTheme&&(t=l.randomTheme),document.querySelectorAll(".pageSettings .section.themes .theme").forEach((e=>{e.classList.remove("active")})),null===(e=document.querySelector(`.pageSettings .section.themes .theme[theme='${t}']`))||void 0===e||e.classList.add("active")}function C(e,t,o=!1,n=!1){if(o){const o=e.find("input.color").attr("id");void 0===o&&console.error("Could not find color ID!"),n||void 0===o||document.documentElement.style.setProperty(o,t);const i=e.find("label");return i.val(t),i.attr("value",t),"--bg-color"!==i.attr("for")&&i.css("background-color",t),e.find("input.input").val(t),void e.find("input.color").attr("value",t)}const i=[{rule:/\b[0-9]{1,3},\s?[0-9]{1,3},\s?[0-9]{1,3}\s*\b/,start:"rgb(",end:")"},{rule:/\b[A-Z, a-z, 0-9]{6}\b/,start:"#",end:""},{rule:/\b[0-9]{1,3},\s?[0-9]{1,3}%,\s?[0-9]{1,3}%?\s*\b/,start:"hsl(",end:")"}];t=t.replace("","");for(const e of i)if(t.match(e.rule)){t=e.start+t+e.end;break}$(".colorConverter").css("color",t);const a=d.convertRGBtoHEX($(".colorConverter").css("color"));if(void 0===a)return;t=a;const r=e.find("input.color").attr("id");void 0===r&&console.error("Could not find color ID!"),n||void 0===r||document.documentElement.style.setProperty(r,t);const s=e.find("label");s.val(t),s.attr("value",t),"--bg-color"!==s.attr("for")&&s.css("background-color",t),e.find("input.input").val(t),e.find("input.color").attr("value",t)}function _(){var e,t;return r(this,void 0,void 0,(function*(){if(s.default.customTheme){const o=$(".pageSettings .section.themes .allCustomThemes.buttons").empty(),n=$(".pageSettings .section.themes .addCustomThemeButton");if(!(null===y.Auth||void 0===y.Auth?void 0:y.Auth.currentUser))return void $(".pageSettings .section.themes .customThemeEdit .saveCustomThemeButton").text("save");$(".pageSettings .section.themes .customThemeEdit .saveCustomThemeButton").text("save as new"),n.removeClass("hidden"),(null!==(t=null===(e=g.getSnapshot())||void 0===e?void 0:e.customThemes)&&void 0!==t?t:[]).forEach((e=>{const t=e.colors[0],n=e.colors[1];o.append(`<div class="customTheme button" customThemeId='${e._id}' \n        style="color:${n};background:${t}">\n        <div class="editButton"><i class="fas fa-pen"></i></div>\n        <div class="text">${e.name.replace(/_/g," ")}</div>\n        <div class="delButton"><i class="fas fa-trash fa-fw"></i></div>\n        </div>`)}))}else{const e=document.querySelector(".pageSettings .section.themes .favThemes.buttons");e.innerHTML="";let t="";const o=document.querySelector(".pageSettings .section.themes .allThemes.buttons");o.innerHTML="";let n,i="",a=s.default.theme;"off"!==s.default.randomTheme&&"custom"!==s.default.randomTheme&&null!==l.randomTheme&&(a=l.randomTheme);try{n=yield d.getSortedThemesList()}catch(e){return void c.add(d.createErrorMessage(e,"Failed to refresh theme buttons"),-1)}if(s.default.favThemes.length>0){e.style.marginBottom="1rem",e.style.marginTop="1rem";for(const e of n)s.default.favThemes.includes(e.name)&&(t+=`<div class="theme button ${a===e.name?"active":""}" theme='${e.name}' style="background: ${e.bgColor}; color: ${e.mainColor};outline: 0 solid ${e.mainColor};">\n            <div class="favButton active"><i class="fas fa-star"></i></div>\n            <div class="text">${e.name.replace(/_/g," ")}</div>\n            <div class="themeBubbles" style="background: ${e.bgColor};outline: 0.25rem solid ${e.bgColor};">\n              <div class="themeBubble" style="background: ${e.mainColor}"></div>\n              <div class="themeBubble" style="background: ${e.subColor}"></div>\n              <div class="themeBubble" style="background: ${e.textColor}"></div>\n            </div>\n            </div>\n            `);e.innerHTML=t}else e.style.marginBottom="0",e.style.marginTop="0";for(const e of n)s.default.favThemes.includes(e.name)||(i+=`<div class="theme button ${a===e.name?"active":""}" theme='${e.name}' style="background: ${e.bgColor}; color: ${e.mainColor};outline: 0 solid ${e.mainColor};">\n        <div class="favButton"><i class="far fa-star"></i></div>\n        <div class="text">${e.name.replace(/_/g," ")}</div>\n        <div class="themeBubbles" style="background: ${e.bgColor};outline: 0.25rem solid ${e.bgColor};">\n          <div class="themeBubble" style="background: ${e.mainColor}"></div>\n          <div class="themeBubble" style="background: ${e.subColor}"></div>\n          <div class="themeBubble" style="background: ${e.textColor}"></div>\n        </div>\n        </div>\n        `);o.innerHTML=i}}))}function S(){const e=[];for(const t of l.colorVars)e.push($(`.pageSettings .customTheme .customThemeEdit #${t}[type='color']`).attr("value"));u.setCustomThemeColors(e),c.add("Custom theme saved",1)}function P(e=!1){const t=$(".pageSettings .section.themes .tabs .button[tab='preset']"),o=$(".pageSettings .section.themes .tabs .button[tab='custom']");s.default.customTheme?(t.removeClass("active"),o.hasClass("active")&&!e||(o.addClass("active"),_()),d.swapElements($('.pageSettings [tabContent="preset"]'),$('.pageSettings [tabContent="custom"]'),250)):(o.removeClass("active"),t.hasClass("active")&&!e||(t.addClass("active"),_()),d.swapElements($('.pageSettings [tabContent="custom"]'),$('.pageSettings [tabContent="preset"]'),250))}t.updateActiveButton=w,t.refreshButtons=_,t.setCustomInputs=function(e=!1){$(".pageSettings .section.themes .tabContainer .customTheme .colorPicker").each(((t,o)=>{const n=s.default.customThemeColors[l.colorVars.indexOf($(o).find("input.color").attr("id"))];C($(o),n,!1,e)}))},t.saveCustomThemeColors=S,t.updateActiveTab=P,$(".pageSettings .section.themes .tabs .button").on("click",(e=>{$(".pageSettings .section.themes .tabs .button").removeClass("active");const t=$(e.currentTarget);t.addClass("active"),"preset"==t.attr("tab")?u.setCustomTheme(!1):u.setCustomTheme(!0)})),$(".pageSettings").on("click"," .section.themes .customTheme.button",(e=>{var t;if($(e.target).hasClass("delButton"))return;if($(e.target).hasClass("editButton"))return;const o=null!==(t=$(e.currentTarget).attr("customThemeId"))&&void 0!==t?t:"";l.set(o,!0)})),$(".pageSettings").on("click",".section.themes .theme .favButton",(e=>{const t=$(e.currentTarget).parents(".theme.button").attr("theme");void 0!==t?function(e){if(s.default.favThemes.includes(e))u.setFavThemes(s.default.favThemes.filter((t=>t!==e)));else{const t=s.default.favThemes;t.push(e),u.setFavThemes(t)}u.saveFullConfigToLocalStorage()}(t):console.error("Could not find the theme attribute attached to the button clicked!")})),$(".pageSettings").on("click",".section.themes .theme.button",(e=>{const t=$(e.currentTarget).attr("theme");$(e.target).hasClass("favButton")||void 0===t||u.setTheme(t)})),$(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("input",(e=>{const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();C($(".colorPicker #"+t).parent(),o,!0)})),$(".pageSettings .section.themes .tabContainer .customTheme input[type=color]").on("change",(e=>{const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();C($(".colorPicker #"+t).parent(),o)})),$(".pageSettings .section.themes .tabContainer .customTheme input.input").on("blur",(e=>{if("name"===e.target.id)return;const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();C($(".colorPicker #"+t).parent(),o)})).on("keypress",(function(e){if("name"!==e.target.id&&"Enter"===e.code){$(this).attr("disabled","disabled");const t=$(e.currentTarget).attr("id"),o=$(e.currentTarget).val();C($(".colorPicker #"+t).parent(),o),$(this).removeAttr("disabled")}})),$(".pageSettings #loadCustomColorsFromPreset").on("click",(()=>r(void 0,void 0,void 0,(function*(){yield l.loadStyle(s.default.theme),l.colorVars.forEach((e=>{document.documentElement.style.setProperty(e,"")})),f.updateAllChartColors();const e=yield p.getAll();l.colorVars.forEach((t=>{let o;"--bg-color"===t?o=e.bg:"--main-color"===t?o=e.main:"--sub-color"===t?o=e.sub:"--sub-alt-color"===t?o=e.subAlt:"--caret-color"===t?o=e.caret:"--text-color"===t?o=e.text:"--error-color"===t?o=e.error:"--error-extra-color"===t?o=e.errorExtra:"--colorful-error-color"===t?o=e.colorfulError:"--colorful-error-extra-color"===t&&(o=e.colorfulErrorExtra),C($(".colorPicker #"+t).parent(),o)}))})))),$("#shareCustomThemeButton").on("click",(()=>{h.show()})),$(".pageSettings .saveCustomThemeButton").on("click",(()=>r(void 0,void 0,void 0,(function*(){if(S(),null===y.Auth||void 0===y.Auth?void 0:y.Auth.currentUser){const e={name:"custom",colors:s.default.customThemeColors};m.show();const t=yield g.addCustomTheme(e);m.hide(),t&&P(!0)}else P(!0)})))),v.subscribe((e=>{"customThemeId"===e&&_(),"theme"===e&&"settings"===b.get()&&w()}))},7346:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.set=t.get=void 0;let o="loading";t.get=function(){return o},t.set=function(e){o=e}},8526:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setStartPos=t.setComposing=t.getStartPos=t.getComposing=t.get=void 0;const o={composing:!1,startPos:-1};t.get=function(){return o},t.getComposing=function(){return o.composing},t.getStartPos=function(){return o.startPos},t.setComposing=function(e){o.composing=e},t.setStartPos=function(e){o.startPos=e}},3285:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.showOfflineBanner=t.get=void 0;const r=a(o(3368)),s=a(o(5928)),u=a(o(1322));let l,d=navigator.onLine;t.get=function(){return d};let c=!1;function p(){c||null==l&&(l=r.addBanner("No internet connection",0,"exclamation-triangle",!1,(()=>{c=!0,l=void 0})))}t.showOfflineBanner=p,s.subscribe((e=>{d=e,d?(r.add("You're back online",1,{customTitle:"Connection"}),null!=l&&$(`#bannerCenter .banner[id="${l}"] .closeButton`).trigger("click"),c=!1):u.isActive||p()})),window.addEventListener("load",(()=>{d=navigator.onLine,d||p()}))},7717:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setCustomTextName=t.isCustomTextLong=t.getCustomTextName=void 0;let o="",n=!1;t.getCustomTextName=function(){return o},t.isCustomTextLong=function(){return n},t.setCustomTextName=function(e,t){o=e,n=t}},9029:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.enable=t.get=void 0;let o=!1;t.get=function(){return o},t.enable=function(){o=!0,console.log("Glarses Mode On - test result will be hidden. You can check the stats in the console (here)"),console.log("To disable Glarses Mode refresh the page.")}},5705:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.set=void 0;let o=!0;t.set=function(e){o=e},t.get=function(){return o}},210:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.clear=t.set=void 0;let o=!1;t.set=function(){o||(o=!0,console.error("Slow timer, disabling animations"))},t.clear=function(){o=!1},t.get=function(){return o}},195:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.increment=t.set=t.get=void 0;let o=0;t.get=function(){return o},t.set=function(e){o=e},t.increment=function(){o++}},262:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.replace=t.getList=void 0;const i=o(3388);let a=[];function r(){return n(this,void 0,void 0,(function*(){return 0===a.length?$.getJSON("languages/britishenglish.json",(function(e){return a=e,a})):a}))}t.getList=r,t.replace=function(e){return n(this,void 0,void 0,(function*(){const t=(yield r()).find((t=>e.match(RegExp(`^([\\W]*${t[0]}[\\W]*)$`,"gi"))));return t?e.replace(RegExp(`^(?:([\\W]*)(${t[0]})([\\W]*))$`,"gi"),((e,o,n,a)=>o+(n.charAt(0)===n.charAt(0).toUpperCase()?n===n.toUpperCase()?t[1].toUpperCase():(0,i.capitalizeFirstLetterOfEachWord)(t[1]):t[1])+a)):e}))}},4173:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.capsState=void 0;const i=n(o(6705)),a=document.querySelector("#capsWarning");t.capsState=!1;let r=!1;function s(){r||(null==a||a.classList.remove("hidden"),r=!0)}function u(){r&&(null==a||a.classList.add("hidden"),r=!1)}$(document).on("keydown",(function(e){var o,n;(null===(o=null==e?void 0:e.originalEvent)||void 0===o?void 0:o.getModifierState)&&(null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.getModifierState("CapsLock"))?t.capsState=!0:t.capsState=!1;try{i.default.capsLockWarning&&t.capsState?s():u()}catch(e){}})),$(document).on("keyup",(function(e){setTimeout((()=>{var o,n;(null===(o=null==e?void 0:e.originalEvent)||void 0===o?void 0:o.getModifierState)&&(null===(n=null==e?void 0:e.originalEvent)||void 0===n?void 0:n.getModifierState("CapsLock"))?t.capsState=!0:t.capsState=!1;try{i.default.capsLockWarning&&t.capsState?s():u()}catch(e){}}),1)}))},4292:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.updatePosition=t.hide=t.startAnimation=t.stopAnimation=t.caretAnimating=void 0;const u=a(o(3388)),l=s(o(6705)),d=a(o(4897)),c=a(o(210)),p=a(o(1322));t.caretAnimating=!0;const f=$("#caret");function h(){!1===t.caretAnimating&&("off"===l.default.smoothCaret||c.get()?f.css("animation-name","caretFlashHard"):f.css("animation-name","caretFlashSmooth"),t.caretAnimating=!0)}function m(){var e,t,o,n,i;return r(this,void 0,void 0,(function*(){const a=Math.round(null!==(t=null===(e=document.querySelector("#caret"))||void 0===e?void 0:e.getBoundingClientRect().width)&&void 0!==t?t:0),r=["block","outline","underline"].includes(l.default.caretStyle),s=d.input.current.length,h=s,m=0==$("#words .active").children().length;m&&$("#words .active").append('<letter style="opacity: 0;">_</letter>');const g=null===(o=null===document||void 0===document?void 0:document.querySelector("#words .active"))||void 0===o?void 0:o.querySelectorAll("letter");if(!g)return;const v=g[h],y=g[Math.min(h-1,g.length-1)],b=(yield u.getCurrentLanguage(l.default.language)).rightToLeft,w=(v?v.offsetLeft:y.offsetLeft+y.offsetWidth)+(b?v?v.offsetWidth:-y.offsetWidth:0),C=(v?v.offsetTop:y.offsetTop)-l.default.fontSize*u.convertRemToPixels(1)*.1;let _=w-(r?0:a/2);const S=null!==(n=$(document.querySelector("#wordsWrapper")).width())&&void 0!==n?n:0;if("letter"===l.default.tapeMode)_=S/2-(r?0:a/2);else if("word"===l.default.tapeMode)if(0==s)_=S/2-(r?0:a/2);else{let e=0;for(let t=0;t<s;t++)e+=$(g[t]).outerWidth(!0);_=S/2+e-(r?0:a/2)}const P=r?(null!==(i=v?v.offsetWidth:y.offsetWidth)&&void 0!==i?i:0)+"px":"";let x=$("#words .smoothScroller").height();void 0===x&&(x=0),f.css("display","block");const k={top:C-x,left:_};""!==P?k.width=P:f.css("width","");const T="off"==l.default.smoothCaret?0:"slow"==l.default.smoothCaret?150:"medium"==l.default.smoothCaret?100:"fast"==l.default.smoothCaret?85:0;if(f.stop(!0,!1).animate(k,c.get()?0:T),l.default.showAllLines){const e=window.innerHeight,t=e/2-f.outerHeight()/2,o=document.body.scrollHeight;if(C>=t&&o>e&&p.isActive){const e=C-t/2;window.scrollTo({left:0,top:e,behavior:"smooth"})}}m&&$("#words .active").children().remove()}))}t.stopAnimation=function(){!0===t.caretAnimating&&(f.css("animation-name","none"),f.css("opacity","1"),t.caretAnimating=!1)},t.startAnimation=h,t.hide=function(){f.addClass("hidden")},t.updatePosition=m,t.show=function(){$("#result").hasClass("hidden")&&(f.removeClass("hidden"),m(),h())}},8248:(e,t)=>{function o(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("customText"))&&void 0!==e?e:"{}")}function n(){var e;return JSON.parse(null!==(e=window.localStorage.getItem("customTextLong"))&&void 0!==e?e:"{}")}Object.defineProperty(t,"__esModule",{value:!0}),t.getCustomTextNames=t.setCustomTextLongProgress=t.getCustomTextLongProgress=t.deleteCustomText=t.setCustomText=t.getCustomText=t.setDelimiter=t.setSection=t.setWord=t.setTime=t.setIsSectionRandom=t.setIsTimeRandom=t.setIsWordRandom=t.getTextArray=t.getText=t.setText=t.setPopupTextareaState=t.popupTextareaState=t.delimiter=t.section=t.time=t.word=t.isSectionRandom=t.isTimeRandom=t.isWordRandom=t.text=void 0,t.text=["The","quick","brown","fox","jumps","over","the","lazy","dog"],t.isWordRandom=!1,t.isTimeRandom=!1,t.isSectionRandom=!1,t.word=-1,t.time=-1,t.section=-1,t.delimiter=" ",t.popupTextareaState="The quick brown fox jumps over the lazy dog",t.setPopupTextareaState=function(e){t.popupTextareaState=e},t.setText=function(e){t.text=e},t.getText=function(){return t.text.join(" ")},t.getTextArray=function(){return t.text},t.setIsWordRandom=function(e){t.isWordRandom=e},t.setIsTimeRandom=function(e){t.isTimeRandom=e},t.setIsSectionRandom=function(e){t.isSectionRandom=e},t.setTime=function(e){t.time=e},t.setWord=function(e){t.word=e},t.setSection=function(e){t.section=e},t.setDelimiter=function(e){t.delimiter=e},t.getCustomText=function(e,t=!1){return t?n()[e].text.split(/ +/):o()[e].split(/ +/)},t.setCustomText=function(e,t,i=!1){if(i){const o=n();o[e]={text:"",progress:0},o[e].text="string"==typeof t?t:t.join(" "),window.localStorage.setItem("customTextLong",JSON.stringify(o))}else{const n=o();n[e]="string"==typeof t?t:t.join(" "),window.localStorage.setItem("customText",JSON.stringify(n))}},t.deleteCustomText=function(e,t=!1){const i=t?n():o();i[e]&&delete i[e],t?window.localStorage.setItem("customTextLong",JSON.stringify(i)):window.localStorage.setItem("customText",JSON.stringify(i))},t.getCustomTextLongProgress=function(e){var t;return null!==(t=n()[e].progress)&&void 0!==t?t:0},t.setCustomTextLongProgress=function(e,t){const o=n();o[e].progress=t,window.localStorage.setItem("customTextLong",JSON.stringify(o))},t.getCustomTextNames=function(e=!1){return e?Object.keys(n()):Object.keys(o())}},476:function(e,t){var o=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.replace=t.check=t.getList=void 0;let n=[];function i(){return o(this,void 0,void 0,(function*(){return 0===n.length?$.getJSON("languages/english_punctuation.json",(function(e){return n=e,n})):n}))}t.getList=i,t.check=function(e){return o(this,void 0,void 0,(function*(){return void 0!==(yield i()).find((t=>e.match(RegExp(`^([\\W]*${t[0]}[\\W]*)$`,"gi"))))}))},t.replace=function(e){return o(this,void 0,void 0,(function*(){const t=(yield i()).find((t=>e.match(RegExp(`^([\\W]*${t[0]}[\\W]*)$`,"gi"))));return t?e.replace(RegExp(`^(?:([\\W]*)(${t[0]})([\\W]*))$`,"gi"),t[1]):e}))}},8911:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.set=void 0;const r=a(o(4292)),s=a(o(7346)),u=a(o(3261)),l=a(o(8700)),d=a(o(2331));let c=!1;function p(e,t=!1){e&&!c?(c=!0,r.stopAnimation(),$("#top").addClass("focus"),$("#bottom").addClass("focus"),t||$("body").css("cursor","none"),$("#middle").addClass("focus"),$("#testConfig").addClass("focus"),$("#mobileTestConfig").addClass("focus"),$("#bannerCenter").addClass("focus"),$("#notificationCenter").addClass("focus"),$("#capsWarning").addClass("focus"),$("#ad-vertical-right-wrapper").addClass("focus"),$("#ad-vertical-left-wrapper").addClass("focus"),$("#ad-footer-wrapper").addClass("focus"),$("#ad-footer-small-wrapper").addClass("focus"),u.show(),l.show(),d.show()):!e&&c&&(c=!1,r.startAnimation(),$("#top").removeClass("focus"),$("#bottom").removeClass("focus"),$("body").css("cursor","default"),$("#middle").removeClass("focus"),$("#testConfig").removeClass("focus"),$("#mobileTestConfig").removeClass("focus"),$("#bannerCenter").removeClass("focus"),$("#notificationCenter").removeClass("focus"),$("#capsWarning").removeClass("focus"),$("#app").removeClass("focus"),$("#ad-vertical-right-wrapper").removeClass("focus"),$("#ad-vertical-left-wrapper").removeClass("focus"),$("#ad-footer-wrapper").removeClass("focus"),$("#ad-footer-small-wrapper").removeClass("focus"),u.hide(),l.hide(),d.hide())}t.set=p,$(document).on("mousemove",(function(e){c&&"loading"!=s.get()&&("account"==s.get()&&1==c||e.originalEvent&&(e.originalEvent.movementX>3||e.originalEvent.movementY>3)&&p(!1))}))},732:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setFunboxFunctions=t.get=t.getAll=void 0;const o=[{name:"nausea",info:"I think I'm gonna be sick."},{name:"round_round_baby",info:"...right round, like a record baby. Right, round round round."},{name:"simon_says",info:"Type what simon says.",properties:["changesWordsVisibility","usesLayout"],forcedConfig:{highlightMode:["letter","off"]}},{name:"mirror",info:"Everything is mirrored!"},{name:"upside_down",info:"Everything is upside down!"},{name:"tts",info:"Listen closely.",properties:["changesWordsVisibility","speaks"],forcedConfig:{highlightMode:["letter","off"]}},{name:"choo_choo",info:"All the letters are spinning!",properties:["noLigatures","conflictsWithSymmetricChars"]},{name:"arrows",info:"Play it on a pad!",properties:["ignoresLanguage","ignoresLayout","nospace","noLetters","symmetricChars"],forcedConfig:{punctuation:[!1],numbers:[!1],highlightMode:["letter","off"]}},{name:"rAnDoMcAsE",info:"I kInDa LiKe HoW iNeFfIcIeNt QwErTy Is.",properties:["changesCapitalisation"]},{name:"capitals",info:"Capitalize Every Word.",properties:["changesCapitalisation"]},{name:"layoutfluid",info:"Switch between layouts specified below proportionately to the length of the test.",properties:["changesLayout","noInfiniteDuration"]},{name:"earthquake",info:"Everybody get down! The words are shaking!",properties:["noLigatures"]},{name:"space_balls",info:"In a galaxy far far away."},{name:"gibberish",info:"Anvbuefl dizzs eoos alsb?",properties:["ignoresLanguage","unspeakable"]},{name:"58008",alias:"numbers",info:"A special mode for accountants.",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1]}},{name:"ascii",info:"Where was the ampersand again?. Only ASCII characters.",properties:["ignoresLanguage","noLetters","unspeakable"],forcedConfig:{numbers:[!1]}},{name:"specials",info:"!@#$%^&*. Only special characters.",properties:["ignoresLanguage","noLetters","unspeakable"],forcedConfig:{punctuation:[!1],numbers:[!1]}},{name:"plus_one",info:"React quickly! Only one future word is visible.",properties:["changesWordsVisibility","toPush:2","noInfiniteDuration"]},{name:"plus_two",info:"Only two future words are visible.",properties:["changesWordsVisibility","toPush:3","noInfiniteDuration"]},{name:"plus_three",info:"Only three future words are visible.",properties:["changesWordsVisibility","toPush:4","noInfiniteDuration"]},{name:"read_ahead_easy",info:"Only the current word is invisible.",properties:["changesWordsVisibility"],forcedConfig:{highlightMode:["letter","off"]}},{name:"read_ahead",info:"Current and the next word are invisible!",properties:["changesWordsVisibility"],forcedConfig:{highlightMode:["letter","off"]}},{name:"read_ahead_hard",info:"Current and the next two words are invisible!",properties:["changesWordsVisibility"],forcedConfig:{highlightMode:["letter","off"]}},{name:"memory",info:"Test your memory. Remember the words and type them blind.",properties:["changesWordsVisibility","noInfiniteDuration"],forcedConfig:{mode:["words","quote","custom"]}},{name:"nospace",info:"Whoneedsspacesanyway?",properties:["nospace"],forcedConfig:{highlightMode:["letter","off"]}},{name:"poetry",info:"Practice typing some beautiful prose.",properties:["noInfiniteDuration","ignoresLanguage"],forcedConfig:{punctuation:[!1],numbers:[!1]}},{name:"wikipedia",info:"Practice typing wikipedia sections.",properties:["noInfiniteDuration","ignoresLanguage"],forcedConfig:{punctuation:[!1],numbers:[!1]}},{name:"weakspot",info:"Focus on slow and mistyped letters.",properties:["changesWordsFrequency"]},{name:"pseudolang",info:"Nonsense words that look like the current language.",properties:["unspeakable","ignoresLanguage"]},{name:"IPv4",alias:"network",info:"For sysadmins.",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1]}},{name:"IPv6",alias:"network",info:"For sysadmins with a long beard.",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1]}},{name:"binary",alias:"numbers",info:"01000010 01100101 01100101 01110000 00100000 01100010 01101111 01101111 01110000 00101110",properties:["ignoresLanguage","ignoresLayout","noLetters"],forcedConfig:{numbers:[!1],punctuation:[!1]}},{name:"zipf",alias:"frequency",info:"Words are generated according to Zipf's law. (not all languages will produce Zipfy results, use with caution)",properties:["changesWordsFrequency"]}];t.getAll=function(){return o},t.get=function(e){const t=[];for(const n of e.split("#")){const e=o.find((e=>e.name===n));e&&t.push(e)}return t},t.setFunboxFunctions=function(e,t){const n=o.find((t=>t.name===e));if(!n)throw new Error(`Funbox ${e} not found.`);n.functions=t}},6534:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.load=t.save=void 0;let o={};t.save=function(e,t,n){var i;null!==(i=o[e])&&void 0!==i||(o[e]={value:t,setFunction:n})},t.load=function(){Object.keys(o).forEach((e=>{o[e].setFunction(o[e].value,!0)})),o={}}},8789:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.areFunboxesCompatible=t.canSetFunboxWithConfig=t.canSetConfigWithCurrentFunboxes=t.checkFunboxForcedConfigs=void 0;const r=a(o(732)),s=a(o(3368)),u=a(o(3388));function l(e,t,o){if(0===r.get(o).length)return{result:!0};if("words"===e||"time"===e)return 0==t?("nospace"===o&&console.log("break"),r.get(o).filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("noInfiniteDuration")})).length>0?{result:!1,forcedConfigs:["words"===e?10:15]}:{result:!0}):{result:!0};{const n={};for(const e of r.get(o))if(e.forcedConfig)for(const t in e.forcedConfig)void 0===n[t]?n[t]=e.forcedConfig[t]:n[t]=u.intersect(n[t],e.forcedConfig[t],!0);if(void 0===n[e])return{result:!0};if(0===n[e].length)throw new Error("No intersection of forced configs");return{result:n[e].includes(t),forcedConfigs:n[e]}}}function d(e,t,o,n=!1){let i=0;if("mode"===e){let e=[];e=e.concat(r.get(o).filter((e=>{var o,n;return void 0!==(null===(o=e.forcedConfig)||void 0===o?void 0:o.mode)&&!(null===(n=e.forcedConfig)||void 0===n?void 0:n.mode.includes(t))}))),"zen"===t&&(e=e.concat(r.get(o).filter((e=>{var t,o,n,i,a,r,s,u,l,d,c;return(null===(t=e.functions)||void 0===t?void 0:t.getWord)||(null===(o=e.functions)||void 0===o?void 0:o.pullSection)||(null===(n=e.functions)||void 0===n?void 0:n.alterText)||(null===(i=e.functions)||void 0===i?void 0:i.withWords)||(null===(a=e.properties)||void 0===a?void 0:a.includes("changesCapitalisation"))||(null===(r=e.properties)||void 0===r?void 0:r.includes("nospace"))||(null===(s=e.properties)||void 0===s?void 0:s.find((e=>e.startsWith("toPush:"))))||(null===(u=e.properties)||void 0===u?void 0:u.includes("changesWordsVisibility"))||(null===(l=e.properties)||void 0===l?void 0:l.includes("speaks"))||(null===(d=e.properties)||void 0===d?void 0:d.includes("changesLayout"))||(null===(c=e.properties)||void 0===c?void 0:c.includes("changesWordsFrequency"))})))),"quote"!==t&&"custom"!=t||(e=e.concat(r.get(o).filter((e=>{var t,o,n,i;return(null===(t=e.functions)||void 0===t?void 0:t.getWord)||(null===(o=e.functions)||void 0===o?void 0:o.pullSection)||(null===(n=e.functions)||void 0===n?void 0:n.withWords)||(null===(i=e.properties)||void 0===i?void 0:i.includes("changesWordsFrequency"))})))),e.length>0&&(i+=1)}if("words"===e||"time"===e){if(!l(e,t,o).result){if(!n)return s.add("Active funboxes do not support infinite tests",0),!1;i+=1}}else l(e,t,o).result||(i+=1);return!(i>0&&(n||s.add(`You can't set ${u.camelCaseToWords(e)} to ${t} with currently active funboxes.`,0,{duration:5}),1))}t.checkFunboxForcedConfigs=l,t.canSetConfigWithCurrentFunboxes=d,t.canSetFunboxWithConfig=function(e,t){console.log("cansetfunboxwithconfig",e,t.mode);let o=t.funbox;"none"===o?o=e:o+="#"+e;let n=0;for(const[e,i]of Object.entries(t))d(e,i,o,!0)||(n+=1);return!(n>0&&(s.add(`You can't enable ${e.replace(/_/g," ")} with currently active config.`,0,{duration:5}),1))},t.areFunboxesCompatible=function(e,t){if("none"===t||"none"===e)return!0;let o=r.get(e);void 0!==t&&(o=o.concat(r.getAll().filter((e=>e.name==t))));const n=r.get(e).filter((t=>void 0!==e.split("#").find((e=>e==t.name)))).length==e.split("#").length,i=o.filter((e=>{var t,o,n;return(null===(t=e.functions)||void 0===t?void 0:t.getWord)||(null===(o=e.functions)||void 0===o?void 0:o.pullSection)||(null===(n=e.functions)||void 0===n?void 0:n.withWords)})).length<=1,a=0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"changesLayout"==e))})).length||0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"ignoresLayout"==e||"usesLayout"==e))})).length,s=o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"nospace"==e||e.startsWith("toPush")))})).length<=1,l=o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"changesWordsVisibility"==e))})).length<=1,d=o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"changesWordsFrequency"==e))})).length<=1,c=0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"changesWordsFrequency"==e))})).length||0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"ignoresLanguage"==e))})).length,p=0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"noLetters"==e))})).length||0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"changesCapitalisation"==e))})).length,f=0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"conflictsWithSymmetricChars"==e))})).length||0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"symmetricChars"==e))})).length,h=o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"speaks"==e||"unspeakable"==e))})).length<=1,m=0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"speaks"==e))})).length||0==o.filter((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>"ignoresLanguage"==e))})).length,g=o.filter((e=>{var t,o;return(null===(t=e.properties)||void 0===t?void 0:t.find((e=>e.startsWith("toPush:"))))||(null===(o=e.functions)||void 0===o?void 0:o.pullSection)})).length<=1,v=o.filter((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.applyCSS})).length<=1,y=o.filter((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.punctuateWord})).length<=1,b=o.filter((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.isCharCorrect})).length<=1,w=o.filter((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.getWordHtml})).length<=1,$={};let C=!0;for(const e of o)if(e.forcedConfig)for(const t in e.forcedConfig)if($[t]){if(0===u.intersect($[t],e.forcedConfig[t],!0).length){C=!1;break}}else $[t]=e.forcedConfig[t];return n&&i&&a&&s&&l&&d&&c&&p&&f&&h&&m&&g&&v&&y&&b&&w&&C}},2591:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.rememberSettings=t.activate=t.clear=t.toggleFunbox=t.setFunbox=t.toggleScript=void 0;const s=a(o(3368)),u=a(o(3388)),l=a(o(2203)),d=a(o(6705)),c=d,p=a(o(556)),f=a(o(6534)),h=a(o(732)),m=o(6534),g=a(o(5012)),v=a(o(5368)),y=a(o(9470)),b=a(o(4897)),w=a(o(5708)),C=o(3118),_=o(277),S=a(o(7095)),P=o(8789),x=o(4905);class k{constructor(){this.chars={},this.count=0}addChar(e){this.count++,e in this.chars?this.chars[e]++:this.chars[e]=1}randomChar(){const e=u.randomIntFromRange(0,this.count-1);let t=0;for(const[o,n]of Object.entries(this.chars))if(t+=n,t>e)return o;return Object.keys(this.chars)[0]}}class T extends x.Wordset{constructor(e){super(e),this.ngrams={},this.length=1/0;for(let t of e){t+=" ";let e="";for(const o of t)e in this.ngrams||(this.ngrams[e]=new k),this.ngrams[e].addChar(o),e=(e+o).substr(-2)}}randomWord(){let e="";for(;;){const t=e.substr(-2),o=this.ngrams[t];if(!o){e="";continue}const n=o.randomChar();if(" "==n)break;e+=n}return e}}function O(e){return f.load(),c.setFunbox(e,!1),!0}function M(){return r(this,void 0,void 0,(function*(){return $("#funBoxTheme").attr("href",""),$("#words").removeClass("nospace"),$("#words").removeClass("arrows"),$("#wordsWrapper").removeClass("hidden"),p.reset(),l.set(),!0}))}h.setFunboxFunctions("nausea",{applyCSS(){$("#funBoxTheme").attr("href","funbox/nausea.css")}}),h.setFunboxFunctions("round_round_baby",{applyCSS(){$("#funBoxTheme").attr("href","funbox/round_round_baby.css")}}),h.setFunboxFunctions("simon_says",{applyCSS(){$("#funBoxTheme").attr("href","funbox/simon_says.css")},applyConfig(){c.setKeymapMode("next",!0)},rememberSettings(){(0,m.save)("keymapMode",d.default.keymapMode,c.setKeymapMode)}}),h.setFunboxFunctions("mirror",{applyCSS(){$("#funBoxTheme").attr("href","funbox/mirror.css")}}),h.setFunboxFunctions("upside_down",{applyCSS(){$("#funBoxTheme").attr("href","funbox/upside_down.css")}}),h.setFunboxFunctions("tts",{applyCSS(){$("#funBoxTheme").attr("href","funbox/simon_says.css")},applyConfig(){c.setKeymapMode("off",!0)},rememberSettings(){(0,m.save)("keymapMode",d.default.keymapMode,c.setKeymapMode)},toggleScript(e){null!=window.speechSynthesis?g.dispatch(e[0]):s.add("Failed to load text-to-speech script",-1)}}),h.setFunboxFunctions("choo_choo",{applyCSS(){$("#funBoxTheme").attr("href","funbox/choo_choo.css")}}),h.setFunboxFunctions("arrows",{getWord:(e,t)=>u.chart2Word(0===t),applyConfig(){$("#words").addClass("arrows")},rememberSettings(){(0,m.save)("highlightMode",d.default.highlightMode,c.setHighlightMode)},handleChar:e=>"a"===e||"ArrowLeft"===e||"j"===e?"":"s"===e||"ArrowDown"===e||"k"===e?"":"w"===e||"ArrowUp"===e||"i"===e?"":"d"===e||"ArrowRight"===e||"l"===e?"":e,isCharCorrect:(e,t)=>("a"===e||"ArrowLeft"===e||"j"===e)&&""===t||("s"===e||"ArrowDown"===e||"k"===e)&&""===t||("w"===e||"ArrowUp"===e||"i"===e)&&""===t||("d"===e||"ArrowRight"===e||"l"===e)&&""===t,preventDefaultEvent(e){return r(this,void 0,void 0,(function*(){return["ArrowLeft","ArrowUp","ArrowRight","ArrowDown"].includes(e.key)}))},getWordHtml(e,t){let o="";return""===e&&(t&&(o+="<letter>"),o+='<i class="fas fa-arrow-up"></i>',t&&(o+="</letter>")),""===e&&(t&&(o+="<letter>"),o+='<i class="fas fa-arrow-down"></i>',t&&(o+="</letter>")),""===e&&(t&&(o+="<letter>"),o+='<i class="fas fa-arrow-left"></i>',t&&(o+="</letter>")),""===e&&(t&&(o+="<letter>"),o+='<i class="fas fa-arrow-right"></i>',t&&(o+="</letter>")),o}}),h.setFunboxFunctions("rAnDoMcAsE",{alterText(e){let t=e[0];for(let o=1;o<e.length;o++)t[o-1]==t[o-1].toUpperCase()?t+=e[o].toLowerCase():t+=e[o].toUpperCase();return t}}),h.setFunboxFunctions("capitals",{alterText:e=>u.capitalizeFirstLetterOfEachWord(e)}),h.setFunboxFunctions("layoutfluid",{applyConfig(){c.setLayout(d.default.customLayoutfluid.split("#")[0]?d.default.customLayoutfluid.split("#")[0]:"qwerty",!0),c.setKeymapLayout(d.default.customLayoutfluid.split("#")[0]?d.default.customLayoutfluid.split("#")[0]:"qwerty",!0)},rememberSettings(){(0,m.save)("keymapMode",d.default.keymapMode,c.setKeymapMode),(0,m.save)("layout",d.default.layout,c.setLayout),(0,m.save)("keymapLayout",d.default.keymapLayout,c.setKeymapLayout)},handleSpace(){if("time"!==d.default.mode){const e=d.default.customLayoutfluid?d.default.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"];let t=0;const o=y.words.length;t=Math.floor((b.input.history.length+1)/(o/e.length)),d.default.layout!==e[t]&&void 0!==e[t]&&s.add(`--- !!! ${e[t]} !!! ---`,0),e[t]&&(c.setLayout(e[t]),c.setKeymapLayout(e[t])),v.highlight(y.words.getCurrent().charAt(b.input.current.length).toString())}},getResultContent:()=>d.default.customLayoutfluid.replace(/#/g," "),restart(){this.applyConfig&&this.applyConfig(),v.highlight(y.words.getCurrent().substring(b.input.current.length,b.input.current.length+1).toString())}}),h.setFunboxFunctions("earthquake",{applyCSS(){$("#funBoxTheme").attr("href","funbox/earthquake.css")}}),h.setFunboxFunctions("space_balls",{applyCSS(){$("#funBoxTheme").attr("href","funbox/space_balls.css")}}),h.setFunboxFunctions("gibberish",{getWord:()=>u.getGibberish()}),h.setFunboxFunctions("58008",{getWord(){let e=u.getNumbers(7);return d.default.language.startsWith("kurdish")?e=u.convertNumberToArabic(e):d.default.language.startsWith("nepali")&&(e=u.convertNumberToNepali(e)),e},punctuateWord(e){if(e.length>3&&(Math.random()<.5&&(e=u.setCharAt(e,u.randomIntFromRange(1,e.length-2),".")),Math.random()<.75)){const t=u.randomIntFromRange(1,e.length-2);if("."!==e[t-1]&&"."!==e[t+1]&&"0"!==e[t+1]){const o=u.randomElementFromArray(["/","*","-","+"]);e=u.setCharAt(e,t,o)}}return e},rememberSettings(){(0,m.save)("numbers",d.default.numbers,c.setNumbers)},handleChar:e=>"\n"===e?" ":e}),h.setFunboxFunctions("ascii",{getWord:()=>u.getASCII(),punctuateWord:e=>e}),h.setFunboxFunctions("specials",{getWord:()=>u.getSpecials()}),h.setFunboxFunctions("read_ahead_easy",{applyCSS(){$("#funBoxTheme").attr("href","funbox/read_ahead_easy.css")},rememberSettings(){(0,m.save)("highlightMode",d.default.highlightMode,c.setHighlightMode)}}),h.setFunboxFunctions("read_ahead",{applyCSS(){$("#funBoxTheme").attr("href","funbox/read_ahead.css")},rememberSettings(){(0,m.save)("highlightMode",d.default.highlightMode,c.setHighlightMode)}}),h.setFunboxFunctions("read_ahead_hard",{applyCSS(){$("#funBoxTheme").attr("href","funbox/read_ahead_hard.css")},rememberSettings(){(0,m.save)("highlightMode",d.default.highlightMode,c.setHighlightMode)}}),h.setFunboxFunctions("memory",{applyConfig(){$("#wordsWrapper").addClass("hidden"),c.setShowAllLines(!0,!0),"next"===d.default.keymapMode&&c.setKeymapMode("react",!0)},rememberSettings(){(0,m.save)("mode",d.default.mode,c.setMode),(0,m.save)("showAllLines",d.default.showAllLines,c.setShowAllLines),"next"===d.default.keymapMode&&(0,m.save)("keymapMode",d.default.keymapMode,c.setKeymapMode)},start(){p.reset(),$("#wordsWrapper").addClass("hidden")},restart(){p.start(),"next"===d.default.keymapMode&&c.setKeymapMode("react")}}),h.setFunboxFunctions("nospace",{applyConfig(){$("#words").addClass("nospace")},rememberSettings(){(0,m.save)("highlightMode",d.default.highlightMode,c.setHighlightMode)}}),h.setFunboxFunctions("poetry",{pullSection(){return r(this,void 0,void 0,(function*(){return(0,C.getPoem)()}))}}),h.setFunboxFunctions("wikipedia",{pullSection(e){return r(this,void 0,void 0,(function*(){return(0,_.getSection)(e||"english")}))}}),h.setFunboxFunctions("weakspot",{getWord:e=>void 0!==e?w.getWord(e):""}),h.setFunboxFunctions("pseudolang",{withWords(e){return r(this,void 0,void 0,(function*(){return void 0!==e?new T(e):new x.Wordset([])}))}}),h.setFunboxFunctions("IPv4",{getWord:()=>S.getRandomIPv4address(),punctuateWord(e){let t=e;return Math.random()<.25&&(t=S.addressToCIDR(e)),t},rememberSettings(){(0,m.save)("numbers",d.default.numbers,c.setNumbers)}}),h.setFunboxFunctions("IPv6",{getWord:()=>S.getRandomIPv6address(),punctuateWord(e){let t=e;return Math.random()<.25&&(t=S.addressToCIDR(e)),t.includes(":")&&(t=t.replace(/\b(?:0+:){2,}/,"::").split(":").map((e=>e.replace(/\b0+/g,""))).join(":")),t},rememberSettings(){(0,m.save)("numbers",d.default.numbers,c.setNumbers)}}),h.setFunboxFunctions("binary",{getWord:()=>u.getBinary()}),h.setFunboxFunctions("zipf",{getWordsFrequencyMode:()=>"zipf"}),t.toggleScript=function(...e){h.get(d.default.funbox).forEach((t=>{var o;(null===(o=t.functions)||void 0===o?void 0:o.toggleScript)&&t.functions.toggleScript(e)}))},t.setFunbox=O,t.toggleFunbox=function(e){if("none"==e&&O("none"),!(0,P.areFunboxesCompatible)(d.default.funbox,e)&&!d.default.funbox.split("#").includes(e))return s.add(`${u.capitalizeFirstLetter(e.replace(/_/g," "))} funbox is not compatible with the current funbox selection`,0),!0;f.load();const t=c.toggleFunbox(e,!1);return!1!==t&&!0!==t},t.clear=M,t.activate=function(e){return r(this,void 0,void 0,(function*(){if(null==e?e=d.default.funbox:d.default.funbox!=e&&(d.default.funbox=e),!(0,P.areFunboxesCompatible)(d.default.funbox))return s.add(u.createErrorMessage(void 0,`Failed to activate funbox: funboxes ${d.default.funbox.replace(/_/g," ")} are not compatible`),-1),c.setFunbox("none",!0),yield M(),!1;let t;p.reset(),$("#wordsWrapper").removeClass("hidden"),$("#funBoxTheme").attr("href",""),$("#words").removeClass("nospace"),$("#words").removeClass("arrows");try{t=yield u.getCurrentLanguage(d.default.language)}catch(e){return s.add(u.createErrorMessage(e,"Failed to activate funbox"),-1),c.setFunbox("none",!0),yield M(),!1}if(t.ligatures&&h.get(d.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("noLigatures")})))return s.add("Current language does not support this funbox mode",0),c.setFunbox("none",!0),void(yield M());let o=!0;for(const[e,t]of Object.entries(d.default)){const n=(0,P.checkFunboxForcedConfigs)(e,t,d.default.funbox);if(!0!==n.result&&!1===n.result){if(!(n.forcedConfigs&&n.forcedConfigs.length>0)){o=!1;break}"mode"===e&&c.setMode(n.forcedConfigs[0]),"words"===e&&c.setWordCount(n.forcedConfigs[0]),"time"===e&&c.setTimeConfig(n.forcedConfigs[0]),"punctuation"===e&&c.setPunctuation(n.forcedConfigs[0]),"numbers"===e&&c.setNumbers(n.forcedConfigs[0]),"highlightMode"===e&&c.setHighlightMode(n.forcedConfigs[0])}}return o?(l.set(),h.get(d.default.funbox).forEach((e=>r(this,void 0,void 0,(function*(){var t,o;(null===(t=e.functions)||void 0===t?void 0:t.applyCSS)&&e.functions.applyCSS(),(null===(o=e.functions)||void 0===o?void 0:o.applyConfig)&&e.functions.applyConfig()})))),!0):(d.default.funbox.includes("#")?s.add(`Failed to activate funboxes ${d.default.funbox}: no intersecting forced configs. Disabling funbox`,-1):s.add(`Failed to activate funbox ${d.default.funbox}: no forced configs. Disabling funbox`,-1),c.setFunbox("none",!0),void(yield M()))}))},t.rememberSettings=function(){return r(this,void 0,void 0,(function*(){h.get(d.default.funbox).forEach((e=>r(this,void 0,void 0,(function*(){var t;(null===(t=e.functions)||void 0===t?void 0:t.rememberSettings)&&e.functions.rememberSettings()}))))}))}},6883:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.hide=t.show=void 0;const n=o(3388);t.show=function(){$("#typingTest #layoutfluidTimer").stop(!0,!0).animate({opacity:1},125)},t.hide=function(){$("#typingTest #layoutfluidTimer").stop(!0,!0).animate({opacity:0},125)},t.update=function(e,t){$("#typingTest #layoutfluidTimer").text(`${(0,n.capitalizeFirstLetter)(t)} in: ${e}s`)}},556:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.start=t.reset=t.hide=t.show=void 0;const r=a(o(9470));let s=null,u=null;function l(){$("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:1},125)}function d(){$("#typingTest #memoryTimer").stop(!0,!0).animate({opacity:0},125)}function c(){null!==u&&(clearInterval(u),u=null),s=null,d()}function p(e){$("#typingTest #memoryTimer").text(`Timer left to memorise all words: ${e}s`)}t.show=l,t.hide=d,t.reset=c,t.start=function(){c(),s=Math.round(Math.pow(r.words.length,1.2)),p(s),l(),u=setInterval((()=>{null!==s&&(s-=1,0==s?d():p(s),s<=0&&(c(),$("#wordsWrapper").addClass("hidden")))}),1e3)},t.update=p},7095:(e,t,o)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.addressToCIDR=t.getRandomIPv6address=t.getRandomIPv4address=void 0;const n=o(3388);function i(e,t,o,i,a){const r=[],s=Math.round(e/t);for(let e=0;e<t;e++){let e=(0,n.randomIntFromRange)(0,Math.pow(2,s)-1).toString(o);if(i){const t=Math.ceil(s/Math.ceil(Math.log2(o)));e="0".repeat(Math.max(0,t-e.length))+e}r.push(e)}return r.join(a)}function a(e,t,o,n,i,a){const r=i.split(n).map((e=>parseInt(e,o))),s=Math.round(e/t);let u=a;for(let e=0;e<t;e++)u-=s,u<0&&(-u<=s?r[e]&=Math.pow(2,s)-1^Math.pow(2,-u)-1:r[e]=0);return r.map((e=>e.toString(o))).join(n)+"/"+a.toString()}t.getRandomIPv4address=function(){return i(32,4,10,!1,".")},t.getRandomIPv6address=function(){return i(128,8,16,!0,":")},t.addressToCIDR=function(e){return e.includes(":")?a(128,8,16,":",e,4*(0,n.randomIntFromRange)(16,32)):a(32,4,10,".",e,(0,n.randomIntFromRange)(8,32))}},4583:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getCharFromEvent=void 0;const u=s(o(6705)),l=a(o(3388)),d=o(4173),c=a(o(3368));t.getCharFromEvent=function(e){return r(this,void 0,void 0,(function*(){let t;try{t=yield l.getLayout(u.default.layout)}catch(t){return c.add(l.createErrorMessage(t,"Failed to emulate event"),-1),e.key}let o=[];"ansi"===t.type?o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:"iso"===t.type?o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","Backslash","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]:"matrix"===t.type&&(o=["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space"]);const n=t.keys,i=n.row1.concat(n.row2).concat(n.row3).concat(n.row4).concat(n.row5);let a=null;for(let t=0;t<o.length;t++)e.code==o[t]&&(a=t);if(!a)return e.code.includes("Numpad")?e.key:null;const r=i[a][0],s=function(e,t){return d.capsState?l.isASCIILetter(t)!==e.shiftKey:e.shiftKey}(e,r)?1:0;return i[a][s]||e.key}))}},3439:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.replaceAccents=void 0;const o=[["","a"],["","e"],["","i"],["","o"],["","u"],["","n"],["","c"],["","r"],["","d"],["","t"],["","ae"],["","oe"],["","w"],["g","g"],["","h"],["","j"],["","n"],["","s"],["","ss"],["","z"],["","y"],["","l"],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]];t.replaceAccents=function(e,t){let n,i=e;if(!o&&!t)return i;const a=t||o;for(let e=0;e<a.length;e++)n=new RegExp(`[${a[e][0]}]`,"gi"),i=i.replace(n,a[e][1]);return i}},2331:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const s=r(o(6705)),u=a(o(1322)),l=a(o(1446));function d(){if(s.default.showLiveAcc&&u.isActive)if("mini"===s.default.timerStyle){if(!$("#miniTimerAndLiveWpm .acc").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .acc").stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:s.default.timerOpacity},125)}else{if(!$("#liveAcc").hasClass("hidden"))return;$("#liveAcc").stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:s.default.timerOpacity},125)}}function c(){$("#liveAcc").stop(!0,!1).animate({opacity:0},125,(()=>{$("#liveAcc").addClass("hidden")})),$("#miniTimerAndLiveWpm .acc").stop(!0,!1).animate({opacity:0},125,(()=>{$("#miniTimerAndLiveWpm .acc").addClass("hidden")}))}t.update=function(e){let t=Math.floor(e);s.default.blindMode&&(t=100),document.querySelector("#miniTimerAndLiveWpm .acc").innerHTML=t+"%",document.querySelector("#liveAcc").innerHTML=t+"%"},t.show=d,t.hide=c,l.subscribe(((e,t)=>{"showLiveAcc"===e&&(t?d():c())}))},8700:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const u=s(o(6705)),l=a(o(1322)),d=a(o(1446));function c(){if(u.default.showLiveBurst&&l.isActive)if("mini"===u.default.timerStyle){if(!$("#miniTimerAndLiveWpm .burst").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .burst").stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:u.default.timerOpacity},125)}else{if(!$("#liveBurst").hasClass("hidden"))return;$("#liveBurst").stop(!0,!1).removeClass("hidden").css("opacity",0).animate({opacity:u.default.timerOpacity},125)}}function p(){$("#liveBurst").stop(!0,!1).animate({opacity:0},125,(()=>{$("#liveBurst").addClass("hidden")})),$("#miniTimerAndLiveWpm .burst").stop(!0,!1).animate({opacity:0},125,(()=>{$("#miniTimerAndLiveWpm .burst").addClass("hidden")}))}t.update=function(e){return r(this,void 0,void 0,(function*(){u.default.showLiveBurst&&(document.querySelector("#miniTimerAndLiveWpm .burst").innerHTML=e.toString(),document.querySelector("#liveBurst").innerHTML=e.toString())}))},t.show=c,t.hide=p,d.subscribe(((e,t)=>{"showLiveBurst"===e&&(t?c():p())}))},3261:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.update=void 0;const s=r(o(6705)),u=a(o(1322)),l=a(o(1446)),d=document.querySelector("#liveWpm"),c=document.querySelector("#miniTimerAndLiveWpm .wpm");function p(){if(s.default.showLiveWpm&&u.isActive)if("mini"===s.default.timerStyle){if(!$("#miniTimerAndLiveWpm .wpm").hasClass("hidden"))return;$("#miniTimerAndLiveWpm .wpm").stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:s.default.timerOpacity},125)}else{if(!$("#liveWpm").hasClass("hidden"))return;$("#liveWpm").stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:s.default.timerOpacity},125)}}function f(){$("#liveWpm").stop(!0,!0).animate({opacity:0},125,(()=>{$("#liveWpm").addClass("hidden")})),$("#miniTimerAndLiveWpm .wpm").stop(!0,!0).animate({opacity:0},125,(()=>{$("#miniTimerAndLiveWpm .wpm").addClass("hidden")}))}t.update=function(e,t){let o=e;s.default.blindMode&&(o=t),s.default.alwaysShowCPM&&(o=Math.round(5*o)),c.innerHTML=o.toString(),d.innerHTML=o.toString()},t.show=p,t.hide=f,l.subscribe(((e,t)=>{"showLiveWpm"===e&&(t?p():f())}))},2203:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.get=t.reset=t.set=void 0;let o=!1;t.set=function(){o=!0},t.reset=function(){o=!1},t.get=function(){return o}},7353:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.hide=t.show=t.stop=t.type=t.updateFastOpacity=void 0;const s=o(3388),u=r(o(6705)),l=a(o(1446)),d=a(o(1322));l.subscribe((e=>{"monkey"===e&&d.isActive&&(u.default.monkey?$("#monkey").removeClass("hidden"):$("#monkey").addClass("hidden"))}));let c=!1,p=!1;const f={"00":document.querySelector("#monkey .up"),"01":document.querySelector("#monkey .right"),10:document.querySelector("#monkey .left"),11:document.querySelector("#monkey .both")},h={"00":document.querySelector("#monkey .fast .up"),"01":document.querySelector("#monkey .fast .right"),10:document.querySelector("#monkey .fast .left"),11:document.querySelector("#monkey .fast .both")};let m="right";function g(e){return e?"1":"0"}function v(){var e,t,o;if(u.default.monkey&&!(null===(e=document.querySelector("#monkey"))||void 0===e?void 0:e.classList.contains("hidden"))){Object.keys(f).forEach((e=>{var t;null===(t=f[e])||void 0===t||t.classList.add("hidden")})),Object.keys(h).forEach((e=>{var t;null===(t=h[e])||void 0===t||t.classList.add("hidden")}));const e=`${g(c)}${g(p)}`;null===(t=f[e])||void 0===t||t.classList.remove("hidden"),null===(o=h[e])||void 0===o||o.classList.remove("hidden")}}t.updateFastOpacity=function(e){if(!u.default.monkey)return;const t=(0,s.mapRange)(e,130,180,0,1);$("#monkey .fast").animate({opacity:t},1e3);let o=(0,s.mapRange)(e,130,180,.25,.01);.25==o&&(o=0),$("#monkey").css({animationDuration:o+"s"})},t.type=function(){u.default.monkey&&(c||"right"!=m?p||(p=!0,m="right"):(c=!0,m="left"),v())},t.stop=function(){u.default.monkey&&(c?c=!1:p&&(p=!1),v())},t.show=function(){u.default.monkey&&$("#monkey").css("opacity",0).removeClass("hidden").animate({opacity:1},125)},t.hide=function(){$("#monkey").css("opacity",1).animate({opacity:1},125,(()=>{$("#monkey").addClass("hidden")}))}},1333:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0;const r=a(o(3388)),s=[];t.hide=function(){$("#words, #koInputVisualContainer").css("transition","none").removeClass("blurred"),$(".outOfFocusWarning").addClass("hidden"),r.clearTimeouts(s)},t.show=function(){s.push(setTimeout((()=>{$("#words, #koInputVisualContainer").css("transition","0.25s").addClass("blurred"),$(".outOfFocusWarning").removeClass("hidden")}),1e3))}},5886:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.start=t.handleSpace=t.reset=t.update=t.init=t.settings=void 0;const u=a(o(2474)),l=a(o(9470)),d=a(o(8673)),c=s(o(6705)),p=a(o(6350)),f=a(o(210)),h=a(o(3388)),m=a(o(1322)),g=a(o(1446));function v(){return r(this,void 0,void 0,(function*(){$("#paceCaret").addClass("hidden");const e=h.getMode2(c.default,l.randomQuote);let o;if("pb"===c.default.paceCaret?o=yield p.getLocalPB(c.default.mode,e,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,c.default.funbox):"average"===c.default.paceCaret?([o]=yield p.getUserAverage10(c.default.mode,e,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode),o=Math.round(o)):"daily"===c.default.paceCaret?(o=yield p.getUserDailyBest(c.default.mode,e,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode),o=Math.round(o)):"custom"===c.default.paceCaret?o=c.default.paceCaretCustomSpeed:"last"!==c.default.paceCaret&&1!=m.isPaceRepeat||(o=u.lastTestWpm),void 0===o||o<1||Number.isNaN(o))return void(t.settings=null);const n=5*o,i=n/60,a=60/n;t.settings={wpm:o,cps:i,spc:a,correction:0,currentWordIndex:0,currentLetterIndex:-1,wordsStatus:{},timeout:null},function(){var e;if("off"===c.default.paceCaret&&!m.isPaceRepeat)return;if($("#paceCaret").hasClass("hidden")||$("#paceCaret").addClass("hidden"),"zen"===c.default.mode)return;const t=$("#paceCaret"),o=null===(e=null===document||void 0===document?void 0:document.querySelector("#words .word"))||void 0===e?void 0:e.querySelector("letter"),n=$(o).height();void 0!==o&&void 0!==n&&t.stop(!0,!0).animate({top:o.offsetTop-n/4,left:o.offsetLeft},0,"linear")}()}))}function y(e){if(null!==t.settings&&m.isActive&&!d.resultVisible){try{if(t.settings.currentLetterIndex++,t.settings.currentLetterIndex>=l.words.get(t.settings.currentWordIndex).length&&(t.settings.currentLetterIndex=-1,t.settings.currentWordIndex++),!c.default.blindMode)if(t.settings.correction<0)for(;t.settings.correction<0;)t.settings.currentLetterIndex--,t.settings.currentLetterIndex<=-2&&(t.settings.currentLetterIndex=l.words.get(t.settings.currentWordIndex-1).length-1,t.settings.currentWordIndex--),t.settings.correction++;else if(t.settings.correction>0)for(;t.settings.correction>0;)t.settings.currentLetterIndex++,t.settings.currentLetterIndex>=l.words.get(t.settings.currentWordIndex).length&&(t.settings.currentLetterIndex=-1,t.settings.currentWordIndex++),t.settings.correction--}catch(e){return t.settings=null,void $("#paceCaret").addClass("hidden")}try{const o=$("#paceCaret");let n,i,a;try{const e=t.settings.currentWordIndex-(l.words.currentIndex-d.currentWordElementIndex),r=document.querySelectorAll("#words .word")[e];n=-1===t.settings.currentLetterIndex?r.querySelectorAll("letter")[0]:r.querySelectorAll("letter")[t.settings.currentLetterIndex];const s=$(n).height(),u=$(n).width(),p=o.width();if(void 0===s||void 0===u||void 0===p)throw"";i=n.offsetTop-c.default.fontSize*h.convertRemToPixels(1)*.1,a=-1===t.settings.currentLetterIndex?n.offsetLeft:n.offsetLeft+u-p/2,o.removeClass("hidden")}catch(e){o.addClass("hidden")}const r=e-performance.now();if(void 0!==i){let e=$("#words .smoothScroller").height();void 0===e&&(e=0),$("#paceCaret").css({top:i-e}),"off"!==c.default.smoothCaret?o.stop(!0,!0).animate({left:a},f.get()?0:r,"linear"):o.stop(!0,!0).animate({left:a},0,"linear")}t.settings.timeout=setTimeout((()=>{var o;try{y(e+1e3*(null!==(o=null===t.settings||void 0===t.settings?void 0:t.settings.spc)&&void 0!==o?o:0))}catch(e){t.settings=null}}),r)}catch(e){console.error(e),$("#paceCaret").addClass("hidden")}}}t.settings=null,t.init=v,t.update=y,t.reset=function(){null!==t.settings&&null!==t.settings.timeout&&clearTimeout(t.settings.timeout),t.settings=null},t.handleSpace=function(e,o){e?null===t.settings||!0!==t.settings.wordsStatus[l.words.currentIndex]||c.default.blindMode||(t.settings.wordsStatus[l.words.currentIndex]=void 0,t.settings.correction-=o.length+1):null===t.settings||void 0!==t.settings.wordsStatus[l.words.currentIndex]||c.default.blindMode||(t.settings.wordsStatus[l.words.currentIndex]=!0,t.settings.correction+=o.length+1)},t.start=function(){var e;y(performance.now()+1e3*(null!==(e=null===t.settings||void 0===t.settings?void 0:t.settings.spc)&&void 0!==e?e:0))},g.subscribe((e=>{"paceCaret"===e&&v()}))},5486:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.show=t.hide=void 0,t.hide=function(){$("#result .stats .wpm .crown").css("opacity",0).addClass("hidden")},t.show=function(){$("#result .stats .wpm .crown").removeClass("hidden").css("opacity","0").animate({opacity:1},250,"easeOutCubic")}},3118:function(e,t,o){var n=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getPoem=t.Poem=void 0;const a=i(o(9669)),r=o(3388),s=["","_"," "];class u extends r.Section{constructor(e,t,o){super(e,t,o),this.title=e,this.author=t,this.words=o,this.cleanUpText()}cleanUpText(){let e=0;const t=[];for(let o=0;o<this.words.length;o++){let n="";for(let e=0;e<this.words[o].length;e++)s.includes(this.words[o][e])||(n+=this.words[o][e]);if(""!=n&&(t.push(n),e++,100==e))break}this.words=t}}t.Poem=u,t.getPoem=function(){return n(this,void 0,void 0,(function*(){console.log("Getting poem");try{const e=(yield a.default.get("https://poetrydb.org/random")).data[0],t=[];return e.lines.forEach((e=>{e.split(/ +/).forEach((e=>{t.push(e)}))})),new u(e.title,e.author,t)}catch(e){return console.log(e),!1}}))}},9196:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.hidePopup=t.showPopup=t.resetBefore=t.init=t.before=void 0;const r=a(o(9470)),s=a(o(3368)),u=a(o(6705)),l=u,d=a(o(8248)),c=a(o(4897)),p=a(o(1446)),f=o(7717),h=a(o(590)),m=o(3388),g="practiseWordsPopupWrapper";function v(){t.before.mode=null,t.before.punctuation=null,t.before.numbers=null,t.before.customText=null}function y(e=!1){"zen"!==u.default.mode?(h.append(g),(0,m.isPopupVisible)(g)||$("#practiseWordsPopupWrapper").stop(!0,!0).css("opacity",0).removeClass("hidden").animate({opacity:1},100,(()=>{e&&(console.log("focusing"),$("#practiseWordsPopup .missed").trigger("focus"))}))):s.add("Practice words is unsupported in zen mode",0)}function b(){(0,m.isPopupVisible)(g)&&$("#practiseWordsPopupWrapper").stop(!0,!0).css("opacity",1).animate({opacity:0},100,(()=>{$("#practiseWordsPopupWrapper").addClass("hidden"),h.remove(g)}))}t.before={mode:null,punctuation:null,numbers:null,customText:null},t.init=function(e,o){if("zen"===u.default.mode)return!1;let n;n=e&&!o||!e&&o?20:10;let i=[];if(e&&(Object.keys(c.missedWords).forEach((e=>{i.push([e,c.missedWords[e]])})),i.sort(((e,t)=>t[1]-e[1])),i=i.slice(0,n)),e&&!o&&0==i.length)return s.add("You haven't missed any words",0),!1;let a=[];if(o&&(a=r.words.get().map(((e,t)=>[e,c.burstHistory[t]])),a.sort(((e,t)=>e[1]-t[1])),a=a.slice(0,Math.min(n,Math.round(.2*r.words.length)))),0==i.length&&0==a.length)return s.add("Could not start a new custom test",0),!1;const p=[];i.forEach((e=>{for(let t=0;t<e[1];t++)p.push(e[0])})),a.forEach(((e,t)=>{for(let o=0;o<a.length-t;o++)p.push(e[0])}));const h=null===t.before.mode?u.default.mode:t.before.mode,m=null===t.before.punctuation?u.default.punctuation:t.before.punctuation,g=null===t.before.numbers?u.default.numbers:t.before.numbers;let v=null;return"custom"===u.default.mode&&(v={text:d.text,isWordRandom:d.isWordRandom,isTimeRandom:d.isTimeRandom,word:d.word,time:d.time}),l.setMode("custom",!0),d.setPopupTextareaState(p.join(d.delimiter)),d.setText(p),d.setIsWordRandom(!0),d.setIsTimeRandom(!1),d.setWord(5*(a.length+i.length)),d.setTime(-1),(0,f.setCustomTextName)("practise",void 0),t.before.mode=h,t.before.punctuation=m,t.before.numbers=g,t.before.customText=v,!0},t.resetBefore=v,t.showPopup=y,t.hidePopup=b,$("#practiseWordsPopupWrapper").on("click",(e=>{"practiseWordsPopupWrapper"===$(e.target).attr("id")&&b()})),$("#practiseWordsPopupWrapper .button").on("keypress",(e=>{"Enter"===e.key&&$(e.currentTarget).trigger("click")})),$("#practiseWordsPopupWrapper .button.both").on("focusout",(e=>{e.preventDefault(),$("#practiseWordsPopup .missed").trigger("focus")})),$(document).on("keydown",(e=>{"Escape"===e.key&&(0,m.isPopupVisible)(g)&&(b(),e.preventDefault())})),$(document).on("keypress","#practiseWordsButton",(e=>{"Enter"===e.key&&y(!0)})),$(".pageTest").on("click","#practiseWordsButton",(()=>{y()})),p.subscribe((e=>{"mode"===e&&v()})),h.save(g)},4626:function(e,t,o){var n,i=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),a=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&i(t,e,o);return a(t,e),t},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getReplayExport=t.replayGetWordsList=t.addReplayEvent=t.stopReplayRecording=t.startReplayRecording=t.pauseReplay=void 0;const u=s(o(6705)),l=r(o(5929));let d=[],c=[],p=0,f=!0,h=0,m=0,g=0,v=0,y=[],b=[];const w=null===(n=document.getElementById("playpauseReplayButton"))||void 0===n?void 0:n.children[0];function C(){const e=document.getElementById("replayWords");if(null===e)return;e.innerHTML="";let t=0;c.forEach((e=>{"backWord"===e.action?t--:"submitCorrectWord"!==e.action&&"submitErrorWord"!==e.action||t++})),d.forEach(((o,n)=>{if(n>t)return;const i=document.createElement("div");for(i.className="word",n=0;n<o.length;n++){const e=document.createElement("letter");e.innerHTML=o[n],i.appendChild(e)}e.appendChild(i)}))}function _(){var e;y.forEach((e=>{clearTimeout(e)})),y=[],b.forEach((e=>{clearTimeout(e)})),b=[],v=m,g=h,void 0!==w&&(w.className="fas fa-play",null===(e=w.parentNode)||void 0===e||e.setAttribute("aria-label","Resume replay"))}function S(e=!1){e&&u.default.playSoundOnError?l.playError():l.playClick()}function P(e,t=!1){var o,n,i,a;let r=null===(o=document.getElementById("replayWords"))||void 0===o?void 0:o.children[h];if(void 0!==r)if("correctLetter"===e.action)t||S(),null===(n=r.children[m])||void 0===n||n.classList.add("correct"),m++;else if("incorrectLetter"===e.action){let o;t||S(!0),m>=r.children.length&&(o=document.createElement("letter"),null==o||o.classList.add("extra"),o.innerHTML=null!==(a=null===(i=e.value)||void 0===i?void 0:i.toString())&&void 0!==a?a:"",r.appendChild(o)),o=r.children[m],null==o||o.classList.add("incorrect"),m++}else if("setLetterIndex"===e.action&&"number"==typeof e.value){t||S(),m=e.value;for(const e of[...r.children].slice(m))(null==e?void 0:e.classList.contains("extra"))?e.remove():e.className=""}else if("submitCorrectWord"===e.action)t||S(),h++,m=0;else if("submitErrorWord"===e.action)t||S(!0),null==r||r.classList.add("error"),h++,m=0;else if("backWord"===e.action){t||S(),h--;const e=document.getElementById("replayWords");for(null!==e&&(r=e.children[h]),m=r.children.length;""===r.children[m-1].className;)m--;null==r||r.classList.remove("error")}}function x(){let e=0;m=0,h=0,c.forEach(((t,o)=>{(h<g||h===g&&m<v)&&(P(t,!0),e=o+1)}));const t=Math.floor(c[e].time/1e3);return $("#replayStopwatch").text(t+"s"),e}function k(){var e;$("#resultReplay").stop(!0,!0).hasClass("hidden")?(C(),x(),$("#watchReplayButton").hasClass("loaded")||$("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),$("#resultReplay").removeClass("hidden").css("display","none").slideDown(250)):("Start replay"!=(null===(e=null==w?void 0:w.parentNode)||void 0===e?void 0:e.getAttribute("aria-label"))&&_(),$("#resultReplay").slideUp(250,(()=>{$("#resultReplay").addClass("hidden")})))}t.replayGetWordsList=function(e){d=e},t.pauseReplay=_,t.startReplayRecording=function(){$("#resultReplay").stop(!0,!0).hasClass("hidden")||k(),$("#replayStopwatch").text("0s"),c=[],p=performance.now(),f=!0,v=0,g=0},t.stopReplayRecording=function(){f=!1},t.addReplayEvent=function(e,t){if(!f)return;const o=performance.now()-p;c.push({action:e,value:t,time:o})},t.getReplayExport=function(){return JSON.stringify({replayData:c,wordsList:d})},$(".pageTest #playpauseReplayButton").on("click",(()=>{"fas fa-play"===(null==w?void 0:w.className)?function(){var e;if(m=0,h=0,void 0===w)return;w.className="fas fa-pause",null===(e=w.parentNode)||void 0===e||e.setAttribute("aria-label","Pause replay"),C();const t=x(),o=c[t].time;let n=Math.round(o/1e3);const i=Math.round(c[c.length-1].time/1e3);for(;n<=i;){const e=n;b.push(setTimeout((()=>{$("#replayStopwatch").text(e+"s")}),1e3*e-o)),n++}c.forEach(((e,n)=>{n<t||y.push(setTimeout((()=>{P(e)}),e.time-o))})),y.push(setTimeout((()=>{v=0,g=0,w.className="fas fa-play",w.parentNode.setAttribute("aria-label","Start replay")}),c[c.length-1].time-o))}():"fas fa-pause"===(null==w?void 0:w.className)&&_()})),$("#replayWords").on("click","letter",(e=>{var t;_();const o=document.querySelector("#replayWords"),n=[...null!==(t=null==o?void 0:o.children)&&void 0!==t?t:[]];g=n.indexOf(e.target.parentNode);const i=[...n[g].children];v=i.indexOf(e.target),C(),x()})),$(document).on("keypress","#watchReplayButton",(e=>{"Enter"===e.key&&k()})),$(".pageTest").on("click","#watchReplayButton",(()=>{k()}))},3448:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.update=t.updateRateQuote=t.updateCrown=t.hideCrown=t.showConfetti=t.showCrown=t.updateTodayTracker=t.updateGraphPBLine=t.toggleUnsmoothedRaw=void 0;const u=o(3328),l=s(o(6705)),d=a(o(1493)),c=a(o(1833)),p=s(o(6750)),f=a(o(6350)),h=a(o(2148)),m=a(o(9817)),g=a(o(3368)),v=a(o(4203)),y=o(6617),b=a(o(8182)),w=a(o(9029)),C=a(o(210)),_=a(o(3388)),S=a(o(732)),P=a(o(5486)),x=a(o(5513)),k=a(o(4897)),T=a(o(2474)),O=a(o(8673)),M=a(o(2026)),A=s(o(9883)),j=s(o(7355));let L,W,B=!1,I="",E="";t.toggleUnsmoothedRaw=function(){B=!B,g.add(B?"on":"off",1)};let F=[],D=c.result.options.scales;function R(){var e,t,o;return r(this,void 0,void 0,(function*(){const n=yield v.getAll(),i=yield f.getLocalPB(L.mode,L.mode2,null!==(e=L.punctuation)&&void 0!==e&&e,L.language,L.difficulty,null!==(t=L.lazyMode)&&void 0!==t&&t,null!==(o=L.funbox)&&void 0!==o?o:"none");if(0==i)return;const a=_.roundTo2(l.default.alwaysShowCPM?5*i:i).toFixed(2);F.push({display:!0,type:"line",id:"lpb",scaleID:"wpm",value:a,borderColor:n.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:n.sub,font:{family:l.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:u.Chart.defaults.font.weight,lineHeight:u.Chart.defaults.font.lineHeight},color:n.bg,padding:3,borderRadius:3,position:"center",enabled:!0,content:`PB: ${a}`}}),W>=parseFloat(a)-20&&W<=parseFloat(a)+20&&(W=parseFloat(a)+15),D.wpm.max=Math.round(W+5),D.raw.max=Math.round(W+5)}))}t.updateGraphPBLine=R,t.updateTodayTracker=function(){$("#result .stats .time .bottom .timeToday").text(M.getString())},t.showCrown=function(){P.show()},t.showConfetti=function(){if(C.get())return;const e=getComputedStyle(document.body),t=[e.getPropertyValue("--main-color"),e.getPropertyValue("--text-color"),e.getPropertyValue("--sub-color")],o=Date.now()+125;!function e(){(0,A.default)({particleCount:5,angle:60,spread:75,origin:{x:0},colors:t}),(0,A.default)({particleCount:5,angle:120,spread:75,origin:{x:1},colors:t}),Date.now()<o&&requestAnimationFrame(e)}()},t.hideCrown=function(){P.hide(),$("#result .stats .wpm .crown").attr("aria-label","")},t.updateCrown=function(){return r(this,void 0,void 0,(function*(){let e=0;const t=yield f.getLocalPB(l.default.mode,L.mode2,l.default.punctuation,l.default.language,l.default.difficulty,l.default.lazyMode,l.default.funbox);e=Math.abs(L.wpm-t),$("#result .stats .wpm .crown").attr("aria-label","+"+_.roundTo2(e))}))},t.updateRateQuote=function(e){var t,o,n;"quote"===l.default.mode&&((null===(n=null===(o=null===(t=f.getSnapshot())||void 0===t?void 0:t.quoteRatings)||void 0===o?void 0:o[e.language])||void 0===n?void 0:n[e.id])&&$(".pageTest #result #rateQuoteButton .icon").removeClass("far").addClass("fas"),b.getQuoteStats(e).then((e=>{var t,o;$(".pageTest #result #rateQuoteButton .rating").text(null!==(o=null===(t=null==e?void 0:e.average)||void 0===t?void 0:t.toFixed(1))&&void 0!==o?o:""),$(".pageTest #result #rateQuoteButton").css({opacity:0}).removeClass("hidden").css({opacity:1})})))},t.update=function(e,t,o,n,i,a,s,m){return r(this,void 0,void 0,(function*(){D=c.result.options.scales,F=[],L=Object.assign({},e),$("#result #resultWordsHistory").addClass("hidden"),$("#retrySavingResultButton").addClass("hidden"),$(".pageTest #result #rateQuoteButton .icon").removeClass("fas").addClass("far"),$(".pageTest #result #rateQuoteButton .rating").text(""),$(".pageTest #result #rateQuoteButton").addClass("hidden"),$("#testModesNotice").css("opacity",0),$("#words").removeClass("blurred"),$("#wordsInput").blur(),$("#result .stats .time .bottom .afk").text(""),(null===y.Auth||void 0===y.Auth?void 0:y.Auth.currentUser)?$("#result .loginTip").addClass("hidden"):$("#result .loginTip").removeClass("hidden"),"off"===l.default.ads||"result"===l.default.ads?$("#result #watchVideoAdButton").addClass("hidden"):$("#result #watchVideoAdButton").removeClass("hidden"),function(){let e=!1;if(L.wpm>=1e3&&(e=!0),l.default.alwaysShowDecimalPlaces){0==l.default.alwaysShowCPM?($("#result .stats .wpm .top .text").text("wpm"),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(_.roundTo2(L.wpm).toFixed(2)),$("#result .stats .raw .bottom").text(_.roundTo2(L.rawWpm).toFixed(2)),$("#result .stats .wpm .bottom").attr("aria-label",_.roundTo2(5*L.wpm).toFixed(2)+" cpm")):($("#result .stats .wpm .top .text").text("cpm"),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(_.roundTo2(5*L.wpm).toFixed(2)),$("#result .stats .raw .bottom").text(_.roundTo2(5*L.rawWpm).toFixed(2)),$("#result .stats .wpm .bottom").attr("aria-label",_.roundTo2(L.wpm).toFixed(2)+" wpm")),$("#result .stats .acc .bottom").text(100==L.acc?"100%":_.roundTo2(L.acc).toFixed(2)+"%");let t=_.roundTo2(L.testDuration).toFixed(2)+"s";L.testDuration>61&&(t=_.secondsToString(_.roundTo2(L.testDuration))),$("#result .stats .time .bottom .text").text(t),$("#result .stats .raw .bottom").removeAttr("aria-label"),$("#result .stats .acc .bottom").attr("aria-label",`${k.accuracy.incorrect} mistake${1==k.accuracy.incorrect?"":"s"}`)}else 0==l.default.alwaysShowCPM?($("#result .stats .wpm .top .text").text("wpm"),$("#result .stats .wpm .bottom").attr("aria-label",L.wpm+` (${_.roundTo2(5*L.wpm)} cpm)`),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(Math.round(L.wpm)),$("#result .stats .raw .bottom").text(Math.round(L.rawWpm)),$("#result .stats .raw .bottom").attr("aria-label",L.rawWpm)):($("#result .stats .wpm .top .text").text("cpm"),$("#result .stats .wpm .bottom").attr("aria-label",_.roundTo2(5*L.wpm)+` (${_.roundTo2(L.wpm)} wpm)`),e?$("#result .stats .wpm .bottom").text("Infinite"):$("#result .stats .wpm .bottom").text(Math.round(5*L.wpm)),$("#result .stats .raw .bottom").text(Math.round(5*L.rawWpm)),$("#result .stats .raw .bottom").attr("aria-label",5*L.rawWpm)),$("#result .stats .acc .bottom").text(Math.floor(L.acc)+"%"),$("#result .stats .acc .bottom").attr("aria-label",`${L.acc}% (${k.accuracy.incorrect} mistake${1==k.accuracy.incorrect?"":"s"})`)}(),l.default.alwaysShowDecimalPlaces?($("#result .stats .consistency .bottom").text(_.roundTo2(L.consistency).toFixed(2)+"%"),$("#result .stats .consistency .bottom").attr("aria-label",`${L.keyConsistency.toFixed(2)}% key`)):($("#result .stats .consistency .bottom").text(Math.round(L.consistency)+"%"),$("#result .stats .consistency .bottom").attr("aria-label",`${L.consistency}% (${L.keyConsistency}% key)`)),function(){const e=_.roundTo2(L.afkDuration/L.testDuration*100);if($("#result .stats .time .bottom .afk").text(""),e>0&&$("#result .stats .time .bottom .afk").text(e+"% afk"),$("#result .stats .time .bottom").attr("aria-label",`${L.afkDuration}s afk ${e}%`),l.default.alwaysShowDecimalPlaces){let e=_.roundTo2(L.testDuration).toFixed(2)+"s";L.testDuration>61&&(e=_.secondsToString(_.roundTo2(L.testDuration))),$("#result .stats .time .bottom .text").text(e)}else{let t=Math.round(L.testDuration)+"s";L.testDuration>61&&(t=_.secondsToString(Math.round(L.testDuration))),$("#result .stats .time .bottom .text").text(t),$("#result .stats .time .bottom").attr("aria-label",`${_.roundTo2(L.testDuration)}s (${L.afkDuration}s afk ${e}%)`)}}(),$("#result .stats .key .bottom").text(L.charStats[0]+"/"+L.charStats[1]+"/"+L.charStats[2]+"/"+L.charStats[3]),function(e){let t="";t+=l.default.mode,"time"===l.default.mode?t+=" "+l.default.time:"words"===l.default.mode?t+=" "+l.default.words:"quote"===l.default.mode&&void 0!==e.group&&(t+=" "+["short","medium","long","thicc"][e.group]);const o=void 0!==S.get(l.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("ignoresLanguage")}));"custom"==l.default.mode||o||(t+="<br>"+L.language.replace(/_/g," ")),l.default.punctuation&&(t+="<br>punctuation"),l.default.numbers&&(t+="<br>numbers"),l.default.blindMode&&(t+="<br>blind"),l.default.lazyMode&&(t+="<br>lazy"),"none"!==l.default.funbox&&(t+="<br>"+l.default.funbox.replace(/_/g," ").replace(/#/g,", ")),"expert"==l.default.difficulty?t+="<br>expert":"master"==l.default.difficulty&&(t+="<br>master"),"off"!==l.default.stopOnError&&(t+=`<br>stop on ${l.default.stopOnError}`),$("#result .stats .testType .bottom").html(t)}(s),function(e){"quote"===l.default.mode?($("#result .stats .source").removeClass("hidden"),$("#result .stats .source .bottom").html(e.source)):$("#result .stats .source").addClass("hidden")}(s),function(e){I="quote"===l.default.mode?e.language:"",E="quote"===l.default.mode?e.id.toString():"";const t=$(".pageTest #result #favoriteQuoteButton .icon");if("quote"===l.default.mode&&(null===y.Auth||void 0===y.Auth?void 0:y.Auth.currentUser)){const o=p.default.isQuoteFavorite(e);t.removeClass(o?"far":"fas").addClass(o?"fas":"far"),t.parent().removeClass("hidden")}else t.parent().addClass("hidden")}(s),yield function(){var e;return r(this,void 0,void 0,(function*(){const t=[];for(let e=1;e<=k.wpmHistory.length;e++)T.lastSecondNotRound&&e===k.wpmHistory.length?t.push(_.roundTo2(L.testDuration).toString()):t.push(e.toString());D.wpm.title.text=l.default.alwaysShowCPM?"Character per Minute":"Words per Minute";const o=[...l.default.alwaysShowCPM?k.wpmHistory.map((e=>5*e)):k.wpmHistory];if("toolong"===L.chartData)return;const n=[...l.default.alwaysShowCPM?L.chartData.raw.map((e=>5*e)):L.chartData.raw];"time"!==l.default.mode&&T.lastSecondNotRound&&L.testDuration%1<.5&&(t.pop(),o.pop(),n.pop());let i=n;if(B||(i=_.smooth(i,1),i=i.map((e=>Math.round(e)))),c.result.data.labels=t,c.result.data.datasets[0].data=o,c.result.data.datasets[1].data=i,c.result.data.datasets[0].label=l.default.alwaysShowCPM?"cpm":"wpm",W=Math.max(Math.max(...i),Math.max(...o)),l.default.startGraphsAtZero)D.wpm.min=0,D.raw.min=0;else{const e=Math.min(Math.min(...i),Math.min(...o));D.wpm.min=e,D.raw.min=e}c.result.data.datasets[2].data=L.chartData.err;const a=yield v.get("sub");if("none"!==l.default.funbox){let t="";for(const o of S.get(l.default.funbox))t+=o.name,(null===(e=o.functions)||void 0===e?void 0:e.getResultContent)&&(t+="("+o.functions.getResultContent()+")"),t+=" ";t=t.trimEnd(),F.push({display:!0,id:"funbox-label",type:"line",scaleID:"wpm",value:D.wpm.min,borderColor:"transparent",borderWidth:1,borderDash:[2,2],label:{backgroundColor:"transparent",font:{family:l.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:u.Chart.defaults.font.weight,lineHeight:u.Chart.defaults.font.lineHeight},color:a,padding:3,borderRadius:3,position:"start",enabled:!0,content:`${t}`}})}D.wpm.max=W,D.raw.max=W,D.error.max=Math.max(...L.chartData.err)}))}(),yield R(),yield function(e){var t,o,n,i,a,s,d;return r(this,void 0,void 0,(function*(){const c=[],p=null!==(n=null===(o=null===(t=f.getSnapshot())||void 0===t?void 0:t.tags)||void 0===o?void 0:o.length)&&void 0!==n?n:0;try{null===(a=null===(i=f.getSnapshot())||void 0===i?void 0:i.tags)||void 0===a||a.forEach((e=>{!0===e.active&&c.push(e)}))}catch(e){}0===p?$("#result .stats .tags").addClass("hidden"):$("#result .stats .tags").removeClass("hidden"),0===c.length?$("#result .stats .tags .bottom").html("<div class='noTags'>no tags</div>"):$("#result .stats .tags .bottom").text(""),$("#result .stats .tags .editTagsButton").attr("result-id",""),$("#result .stats .tags .editTagsButton").attr("active-tag-ids",c.map((e=>e._id)).join(",")),$("#result .stats .tags .editTagsButton").addClass("invisible");const h=null!==(d=null===(s=L.funbox)||void 0===s?void 0:s.split("#"))&&void 0!==d?d:[],m=(yield Promise.all(h.map((e=>r(this,void 0,void 0,(function*(){return _.getFunbox(e)})))))).every((e=>null==e?void 0:e.canGetPb));let g="start",y=15;c.forEach((t=>r(this,void 0,void 0,(function*(){const o=yield f.getLocalTagPB(t._id,l.default.mode,L.mode2,l.default.punctuation,l.default.language,l.default.difficulty,l.default.lazyMode);if($("#result .stats .tags .bottom").append(`\n      <div tagid="${t._id}" aria-label="PB: ${o}" data-balloon-pos="up">${t.display}<i class="fas fa-crown hidden"></i></div>\n    `),"quote"!=l.default.mode&&!e&&("none"===L.funbox||0===h.length||m))if(o<L.wpm)f.saveLocalTagPB(t._id,l.default.mode,L.mode2,l.default.punctuation,l.default.language,l.default.difficulty,l.default.lazyMode,L.wpm,L.acc,L.rawWpm,L.consistency),$(`#result .stats .tags .bottom div[tagid="${t._id}"] .fas`).removeClass("hidden"),$(`#result .stats .tags .bottom div[tagid="${t._id}"]`).attr("aria-label","+"+_.roundTo2(L.wpm-o));else{const e=yield v.getAll();F.push({display:!0,type:"line",id:"tpb",scaleID:"wpm",value:l.default.alwaysShowCPM?5*o:o,borderColor:e.sub,borderWidth:1,borderDash:[2,2],label:{backgroundColor:e.sub,font:{family:l.default.fontFamily.replace(/_/g," "),size:11,style:"normal",weight:u.Chart.defaults.font.weight,lineHeight:u.Chart.defaults.font.lineHeight},color:e.bg,padding:3,borderRadius:3,position:g,xAdjust:y,enabled:!0,content:`${t.display} PB: ${_.roundTo2(l.default.alwaysShowCPM?5*o:o).toFixed(2)}`}}),"start"===g?(g="end",y=-15):(g="start",y=15)}}))))}))}(m),function(e,t,o,n,i){let a="";if(e&&(a+=`<br>failed (${t})`),o&&(a+="<br>afk detected"),T.invalid){a+="<br>invalid";const e=[];(L.wpm<0||L.wpm>350&&"words"!=L.mode&&"10"!=L.mode2||L.wpm>420&&"words"==L.mode&&"10"==L.mode2)&&e.push("wpm"),(L.rawWpm<0||L.rawWpm>350&&"words"!=L.mode&&"10"!=L.mode2||L.rawWpm>420&&"words"==L.mode&&"10"==L.mode2)&&e.push("raw"),(L.acc<75||L.acc>100)&&e.push("accuracy"),e.length>0&&(a+=` (${e.join(",")})`)}n&&(a+="<br>repeated"),L.bailedOut&&(a+="<br>bailed out"),i&&(a+="<br>too short"),""==a?$("#result .stats .info").addClass("hidden"):($("#result .stats .info").removeClass("hidden"),a=a.substring(4),$("#result .stats .info .bottom").html(a))}(t,o,n,i,a),c.result.options.plugins.annotation.annotations=F,c.result.updateColors(),c.result.resize(),$("#result .stats .tags").hasClass("hidden")&&$("#result .stats .info").hasClass("hidden")?$("#result .stats .infoAndTags").addClass("hidden"):$("#result .stats .infoAndTags").removeClass("hidden"),w.get()?($("#middle #result .noStressMessage").remove(),$("#middle #result").prepend('\n\n      <div class=\'noStressMessage\' style="\n        text-align: center;\n        grid-column: 1/3;\n        font-size: 2rem;\n        padding-bottom: 2rem;\n      ">\n      <i class="fas fa-check"></i>\n      </div>\n\n    '),$("#middle #result .stats").addClass("hidden"),$("#middle #result .chart").addClass("hidden"),$("#middle #result #resultWordsHistory").addClass("hidden"),$("#middle #result #resultReplay").addClass("hidden"),$("#middle #result .loginTip").addClass("hidden"),$("#middle #result #showWordHistoryButton").addClass("hidden"),$("#middle #result #watchReplayButton").addClass("hidden"),$("#middle #result #saveScreenshotButton").addClass("hidden"),console.log(`Test Completed: ${L.wpm} wpm ${L.acc}% acc ${L.rawWpm} raw ${L.consistency}% consistency`)):($("#middle #result .stats").removeClass("hidden"),$("#middle #result .chart").removeClass("hidden"),(null===y.Auth||void 0===y.Auth?void 0:y.Auth.currentUser)||$("#middle #result .loginTip").removeClass("hidden"),$("#middle #result #showWordHistoryButton").removeClass("hidden"),$("#middle #result #watchReplayButton").removeClass("hidden"),$("#middle #result #saveScreenshotButton").removeClass("hidden")),window.scrollY>0&&$([document.documentElement,document.body]).stop().animate({scrollTop:0},250),x.hide(),_.swapElements($("#typingTest"),$("#result"),250,(()=>r(this,void 0,void 0,(function*(){d.renderResult(),O.setResultCalculating(!1),$("#words").empty(),c.result.resize(),$("#result").trigger("focus"),window.scrollTo({top:0}),$("#testModesNotice").addClass("hidden")}))),(()=>r(this,void 0,void 0,(function*(){$("#resultExtraButtons").removeClass("hidden").css("opacity",0).animate({opacity:1},125),l.default.alwaysShowWordsHistory&&!w.get()&&O.toggleResultWords(!0),h.hide(),d.updateTestPageAds(!0)}))))}))},$(".pageTest #favoriteQuoteButton").on("click",(()=>r(void 0,void 0,void 0,(function*(){var e,t,o;if(""===I||""===E)return void g.add("Could not get quote stats!",-1);const n=$(".pageTest #favoriteQuoteButton .icon"),i=f.getSnapshot();if(i)if(n.hasClass("fas")){m.show();const o=yield j.default.users.removeQuoteFromFavorites(I,E);if(m.hide(),g.add(o.message,200===o.status?1:-1),200===o.status){n.removeClass("fas").addClass("far");const o=null===(e=i.favoriteQuotes[I])||void 0===e?void 0:e.indexOf(E);null===(t=i.favoriteQuotes[I])||void 0===t||t.splice(o,1)}}else{m.show();const e=yield j.default.users.addQuoteToFavorites(I,E);m.hide(),g.add(e.message,200===e.status?1:-1),200===e.status&&(n.removeClass("far").addClass("fas"),i.favoriteQuotes[I]||(i.favoriteQuotes[I]=[]),null===(o=i.favoriteQuotes[I])||void 0===o||o.push(E))}}))))},5578:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.layoutKeyToKeycode=t.isUsingOppositeShift=t.reset=t.rightState=t.leftState=void 0;const u=s(o(6705)),l=a(o(3388)),d=o(4173),c=a(o(3368));t.leftState=!1,t.rightState=!1;const p=[["Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal"],["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash"],["KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote"],["KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash"],["Space"]],f=/^[^\p{L}\p{N}]{1}$/u,h=/Mac|iPod|iPhone|iPad/.test(navigator.platform);let m=[!1,!1];function g(){return r(this,void 0,void 0,(function*(){const e=function(){const e=t.leftState||t.rightState,o=h?e||d.capsState:e!==d.capsState,[n,i]=m;if(n!==o||i!==e)return m=[o,e]}();if(void 0===e)return;const o=[...document.getElementsByClassName("keymapKey")].filter((e=>{const t=e.classList.contains("keymapKey"),o=!e.classList.contains("keySpace")&&!e.classList.contains("keySplitSpace");return t&&o})),n=o.map((e=>e.dataset.key));if(n.includes(void 0))return;const i=o.map((e=>e.childNodes[1])),[a,r]=e,s="overrideSync"===u.default.keymapLayout?"default"===u.default.layout?"qwerty":u.default.layout:u.default.keymapLayout,p=yield l.getLayout(s).catch((()=>{}));if(void 0!==p)for(let e=0;e<n.length;e++){const t=n[e],o=i[e];if(void 0===o||void 0===t)continue;const s=t[0],u=[s,t[1]].some((e=>f.test(e))),l=w(s,p);if(void 0===l)return;const d=b(l),c=u?r:a,h=t[Number(d&&c)];o.textContent=h}else c.add("Failed to load keymap layout",-1)}))}$(document).on("keydown",(e=>{"ShiftLeft"===e.code?(t.leftState=!0,t.rightState=!1):"ShiftRight"===e.code&&(t.leftState=!1,t.rightState=!0),"dynamic"===u.default.keymapLegendStyle&&g()})),$(document).on("keyup",(e=>{"ShiftLeft"!==e.code&&"ShiftRight"!==e.code||(t.leftState=!1,t.rightState=!1),"dynamic"===u.default.keymapLegendStyle&&g()})),t.reset=function(){t.leftState=!1,t.rightState=!1};const v=["KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyA","KeyS","KeyD","KeyF","KeyG","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6"],y=["KeyY","KeyU","KeyI","KeyO","KeyP","KeyH","KeyJ","KeyK","KeyL","KeyB","KeyN","KeyM","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","Backslash","BracketLeft","BracketRight","Semicolon","Quote","Comma","Period","Slash"];function b(e){if(!t.leftState&&!t.rightState)return!0;if("off"===u.default.oppositeShiftMode)return!0;const o=y.includes(e),n=v.includes(e);return!o&&!n||!!(t.leftState&&o||t.rightState&&n)}function w(e,t){const o=Object.values(t.keys),n=o.findIndex((t=>t.find((t=>t.includes(e))))),i=o[n];if(void 0===i)return;const a=i.findIndex((t=>t.includes(e)));if(-1===a)return;let r=p[n][a];return"iso"===t.type&&(2===n&&11===a?r="Backslash":3===n&&0===a?r="IntlBackslash":3===n&&(r=p[3][a-1])),r}t.isUsingOppositeShift=b,t.layoutKeyToKeycode=w},5513:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.hideFavoriteQuoteLength=t.showFavoriteQuoteLength=t.updateExtras=t.update=t.hide=t.show=void 0;const s=a(o(1446));function u(e,t){var o,n,i,a;return r(this,void 0,void 0,(function*(){if(e===t)return;$("#testConfig .mode .textButton").removeClass("active"),$("#testConfig .mode .textButton[mode='"+t+"']").addClass("active");const r={time:"time",words:"wordCount",custom:"customText",quote:"quoteLength",zen:"zen"},s={time:!0,words:!0,custom:!0,quote:!1,zen:!1};0==s[e]&&1==s[t]?($("#testConfig .leftSpacer").removeClass("scrolled"),$("#testConfig .puncAndNum").css({opacity:0,maxWidth:0}).animate({opacity:1,maxWidth:"14rem"},250,"easeInOutSine")):1==s[e]&&0==s[t]&&($("#testConfig .leftSpacer").addClass("scrolled"),$("#testConfig .puncAndNum").css({opacity:1,maxWidth:"14rem"}).animate({opacity:0,maxWidth:"0"},250,"easeInOutSine")),"zen"==t?$("#testConfig .rightSpacer").addClass("scrolled"):$("#testConfig .rightSpacer").removeClass("scrolled");const u=Math.round(null!==(n=null===(o=document.querySelector(`#testConfig .${r[e]}`))||void 0===o?void 0:o.getBoundingClientRect().width)&&void 0!==n?n:0);$(`#testConfig .${r[e]}`).addClass("hidden"),$(`#testConfig .${r[t]}`).removeClass("hidden");const l=Math.round(null!==(a=null===(i=document.querySelector(`#testConfig .${r[t]}`))||void 0===i?void 0:i.getBoundingClientRect().width)&&void 0!==a?a:0);$(`#testConfig .${r[e]}`).removeClass("hidden"),$(`#testConfig .${r[t]}`).addClass("hidden");const d=(l-u)/2;$(`#testConfig .${r[e]}`).css({opacity:1,width:u}).animate({width:u+d,opacity:0},125,"easeInSine",(()=>{$(`#testConfig .${r[e]}`).css({opacity:1,width:"unset"}).addClass("hidden"),$(`#testConfig .${r[t]}`).css({opacity:0,width:u+d}).removeClass("hidden").animate({opacity:1,width:l},125,"easeOutSine",(()=>{$(`#testConfig .${r[t]}`).css("width","unset")}))}))}))}function l(e,t){if("time"==e){$("#testConfig .time .textButton").removeClass("active");const e=[15,30,60,120].includes(t)?t:"custom";$("#testConfig .time .textButton[timeConfig='"+e+"']").addClass("active")}else if("words"==e){$("#testConfig .wordCount .textButton").removeClass("active");const e=[10,25,50,100,200].includes(t)?t:"custom";$("#testConfig .wordCount .textButton[wordCount='"+e+"']").addClass("active")}else"quoteLength"==e?($("#testConfig .quoteLength .textButton").removeClass("active"),t.forEach((e=>{$("#testConfig .quoteLength .textButton[quoteLength='"+e+"']").addClass("active")}))):"numbers"==e?t?$("#testConfig .numbersMode.textButton").addClass("active"):$("#testConfig .numbersMode.textButton").removeClass("active"):"punctuation"==e&&(t?$("#testConfig .punctuationMode.textButton").addClass("active"):$("#testConfig .punctuationMode.textButton").removeClass("active"))}t.show=function(){$("#testConfig").removeClass("invisible"),$("#mobileTestConfig").removeClass("invisible")},t.hide=function(){$("#testConfig").addClass("invisible"),$("#mobileTestConfig").addClass("invisible")},t.update=u,t.updateExtras=l,t.showFavoriteQuoteLength=function(){$("#testConfig .quoteLength .favorite").removeClass("hidden")},t.hideFavoriteQuoteLength=function(){$("#testConfig .quoteLength .favorite").addClass("hidden")},s.subscribe(((e,t,o,n)=>{"mode"===e?u(n,t):["time","quoteLength","words","numbers","punctuation"].includes(e)&&l(e,t)}))},4897:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.restart=t.pushBurstToHistory=t.pushToRawHistory=t.pushToWpmHistory=t.pushMissedWord=t.resetKeypressTimings=t.recordKeydownTime=t.recordKeyupTime=t.forceKeyup=t.incrementAccuracy=t.pushKeypressesToHistory=t.setBurstStart=t.pushKeypressWord=t.incrementKeypressErrors=t.setKeypressNotAfk=t.incrementKeypressCount=t.updateLastKeypress=t.enableSpacingDebug=t.spacingDebug=t.setBailout=t.bailout=t.burstHistory=t.rawHistory=t.wpmHistory=t.keyOverlap=t.keypressTimings=t.accuracy=t.missedWords=t.currentBurstStart=t.lastKeypress=t.currentKeypress=t.keypressPerSecond=t.corrected=t.input=void 0;const r=a(o(9470)),s=o(3388),u=["NumpadMultiply","NumpadSubtract","NumpadAdd","NumpadDecimal","NumpadEqual","NumpadDivide","Numpad0","Numpad1","Numpad2","Numpad3","Numpad4","Numpad5","Numpad6","Numpad7","Numpad8","Numpad9","Backquote","Digit1","Digit2","Digit3","Digit4","Digit5","Digit6","Digit7","Digit8","Digit9","Digit0","Minus","Equal","KeyQ","KeyW","KeyE","KeyR","KeyT","KeyY","KeyU","KeyI","KeyO","KeyP","BracketLeft","BracketRight","Backslash","KeyA","KeyS","KeyD","KeyF","KeyG","KeyH","KeyJ","KeyK","KeyL","Semicolon","Quote","IntlBackslash","KeyZ","KeyX","KeyC","KeyV","KeyB","KeyN","KeyM","Comma","Period","Slash","Space","Enter","Tab","NoCode"];let l={};t.input=new class{constructor(){this.current="",this.history=[],this.historyLength=0,this.length=0,this.koreanStatus=!1}reset(){this.current="",this.history=[],this.length=0}resetHistory(){this.history=[],this.length=0}setCurrent(e){this.current=e,this.length=this.current.length}setKoreanStatus(e){this.koreanStatus=e}appendCurrent(e){this.current+=e,this.length=this.current.length}resetCurrent(){this.current=""}getCurrent(){return this.current}getKoreanStatus(){return this.koreanStatus}pushHistory(){this.history.push(this.current),this.historyLength=this.history.length,this.resetCurrent()}popHistory(){var e;const t=null!==(e=this.history.pop())&&void 0!==e?e:"";return this.historyLength=this.history.length,t}getHistory(e){return void 0===e?this.history:this.history[e]}getHistoryLast(){return this.history[this.history.length-1]}},t.corrected=new class{constructor(){this.current="",this.history=[]}setCurrent(e){this.current=e}appendCurrent(e){this.current+=e}resetCurrent(){this.current=""}resetHistory(){this.history=[]}reset(){this.resetCurrent(),this.resetHistory()}getHistory(e){return this.history[e]}popHistory(){var e;return null!==(e=this.history.pop())&&void 0!==e?e:""}pushHistory(){this.history.push(this.current),this.current=""}},t.keypressPerSecond=[],t.currentKeypress={count:0,errors:0,words:[],afk:!0},t.currentBurstStart=0,t.missedWords={},t.accuracy={correct:0,incorrect:0},t.keypressTimings={spacing:{first:-1,last:-1,array:[]},duration:{array:[]}},t.keyOverlap={total:0,lastStartTime:-1},t.wpmHistory=[],t.rawHistory=[],t.burstHistory=[],t.bailout=!1,t.setBailout=function(e){t.bailout=e},t.spacingDebug=!1,t.enableSpacingDebug=function(){t.spacingDebug=!0,console.clear()},t.updateLastKeypress=function(){t.lastKeypress=performance.now()},t.incrementKeypressCount=function(){t.currentKeypress.count++},t.setKeypressNotAfk=function(){t.currentKeypress.afk=!1},t.incrementKeypressErrors=function(){t.currentKeypress.errors++},t.pushKeypressWord=function(e){t.currentKeypress.words.push(e)},t.setBurstStart=function(e){t.currentBurstStart=e},t.pushKeypressesToHistory=function(){t.keypressPerSecond.push(t.currentKeypress),t.currentKeypress={count:0,errors:0,words:[],afk:!0}},t.incrementAccuracy=function(e){e?t.accuracy.correct++:t.accuracy.incorrect++},t.forceKeyup=function(e){const o=(0,s.roundTo2)((0,s.mean)(t.keypressTimings.duration.array)),n=Object.entries(l);n.sort(((e,t)=>e[1].timestamp-t[1].timestamp));for(let t=0;t<n.length-1;t++)c(e,n[t][0]);const i=n[n.length-1];void 0!==i&&(t.keypressTimings.duration.array[l[i[0]].index]=o)};let d=0;function c(e,o){if(!u.includes(o))return;if("NoCode"===o&&(d--,o="NoCode"+d),void 0===l[o])return;const n=Math.abs(l[o].timestamp-e);t.keypressTimings.duration.array[l[o].index]=n,t.spacingDebug&&console.log("spacing debug","recorded",o,"durating array",t.keypressTimings.duration.array.length,"val",(0,s.roundTo2)(n)),delete l[o],p(e)}function p(e){Object.keys(l).length>1?-1===t.keyOverlap.lastStartTime&&(t.keyOverlap.lastStartTime=e):-1!==t.keyOverlap.lastStartTime&&(t.keyOverlap.total+=e-t.keyOverlap.lastStartTime,t.keyOverlap.lastStartTime=-1)}t.recordKeyupTime=c,t.recordKeydownTime=function(e,o){if(u.includes(o))if("NoCode"===o&&(o="NoCode"+d,d++),void 0===l[o]){if(l[o]={timestamp:e,index:t.keypressTimings.duration.array.length},t.keypressTimings.duration.array.push(0),p(l[o].timestamp),-1!==t.keypressTimings.spacing.last){const n=Math.abs(e-t.keypressTimings.spacing.last);t.keypressTimings.spacing.array.push((0,s.roundTo2)(n)),t.spacingDebug&&console.log("spacing debug","recorded",o,"spacing array",t.keypressTimings.spacing.array.length,"val",(0,s.roundTo2)(n))}t.keypressTimings.spacing.last=e,-1===t.keypressTimings.spacing.first&&(t.keypressTimings.spacing.first=e,t.spacingDebug&&console.log("spacing debug","saved first",e))}else t.spacingDebug&&console.log("spacing debug","key already down",o,"spacing array",t.keypressTimings.spacing.array.length);else t.spacingDebug&&console.log("spacing debug","key not tracked",o,"spacing array",t.keypressTimings.spacing.array.length)},t.resetKeypressTimings=function(){t.keypressTimings={spacing:{first:-1,last:-1,array:[]},duration:{array:[]}},t.keyOverlap={total:0,lastStartTime:-1},l={},d=0,t.spacingDebug&&(console.clear(),t.spacingDebug&&console.log("spacing debug","reset keypress timings"))},t.pushMissedWord=function(e){Object.keys(t.missedWords).includes(e)?t.missedWords[e]++:t.missedWords[e]=1},t.pushToWpmHistory=function(e){t.wpmHistory.push(e)},t.pushToRawHistory=function(e){t.rawHistory.push(e)},t.pushBurstToHistory=function(e){void 0===t.burstHistory[r.words.currentIndex]?t.burstHistory.push(e):t.burstHistory[r.words.currentIndex]=e},t.restart=function(){t.wpmHistory=[],t.rawHistory=[],t.burstHistory=[],t.keypressPerSecond=[],t.currentKeypress={count:0,errors:0,words:[],afk:!0},t.currentBurstStart=0,t.missedWords={},t.accuracy={correct:0,incorrect:0},t.keypressTimings={spacing:{first:-1,last:-1,array:[]},duration:{array:[]}},t.spacingDebug&&console.log("spacing debug","restart")}},3013:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.fail=t.finish=t.retrySavingResult=t.addWord=t.init=t.restart=t.startTest=t.setNotSignedInUid=t.clearNotSignedInResult=t.notSignedInLastResult=void 0;const u=s(o(7355)),l=a(o(8673)),d=a(o(2203)),c=a(o(6705)),p=c,f=a(o(3388)),h=a(o(3368)),m=a(o(8248)),g=a(o(7717)),v=a(o(2474)),y=a(o(9196)),b=a(o(5578)),w=a(o(8911)),C=a(o(2591)),_=a(o(2148)),S=a(o(743)),P=a(o(5886)),x=a(o(4292)),k=a(o(3261)),T=a(o(2331)),O=a(o(8700)),M=a(o(8824)),A=a(o(2338)),j=a(o(5486)),L=a(o(6084)),W=a(o(1333)),B=a(o(5344)),I=a(o(6350)),E=a(o(4626)),F=a(o(2026)),D=a(o(7567)),R=a(o(8182)),V=a(o(3448)),q=a(o(6578)),K=a(o(7346)),H=a(o(4897)),N=a(o(9470)),z=a(o(9510)),U=a(o(1322)),Q=a(o(2453)),G=a(o(5705)),J=a(o(1446)),Y=a(o(6507)),Z=a(o(7274)),X=a(o(7353)),ee=s(o(705)),te=a(o(3326)),oe=o(6617),ne=a(o(1493)),ie=a(o(5513)),ae=a(o(3285)),re=a(o(732)),se=a(o(556)),ue=a(o(5368)),le=a(o(6883)),de=a(o(4905));let ce="";const pe=document.getElementById("koInputVisual");function fe(e={}){var t;if(e=Object.assign(Object.assign({},{withSameWordset:!1,practiseMissed:!1,noAnim:!1,nosave:!1}),e),l.testRestarting||l.resultCalculating)return void(null===event||void 0===event||event.preventDefault());if("test"==K.get()&&!l.resultVisible&&!d.get()&&("zen"!==c.default.mode&&(null===event||void 0===event||event.preventDefault()),!f.canQuickRestart(c.default.mode,c.default.words,c.default.time,m,null!==(t=g.isCustomTextLong())&&void 0!==t&&t))){let e="Use your mouse to confirm.";return"tab"===c.default.quickRestart?e="Press shift + tab or use your mouse to confirm.":"esc"===c.default.quickRestart&&(e="Press shift + escape or use your mouse to confirm."),void h.add(`Quick restart disabled in long tests. ${e}`,0,{duration:4,important:!0})}if(U.isActive&&("typing"===c.default.repeatQuotes&&"quote"===c.default.mode&&c.default.language.startsWith(N.randomQuote.language)&&(e.withSameWordset=!0),U.isRepeated&&(e.withSameWordset=!0),U.savingEnabled)){H.pushKeypressesToHistory();const e=v.calculateTestSeconds(performance.now()),t=v.calculateAfkSeconds(e);let o=f.roundTo2(e-t);o<0&&(o=0),v.incrementIncompleteSeconds(o),v.incrementRestartCount();const n=f.roundTo2(v.calculateAccuracy());v.pushIncompleteTest(n,o)}"zen"==c.default.mode&&$("#words").empty(),c.default.language.startsWith("korean")?(pe.innerText=" ","zen"!==c.default.mode?$("#koInputVisualContainer").show():$("#koInputVisualContainer").hide()):$("#koInputVisualContainer").hide(),null===y.before.mode||e.withSameWordset||e.practiseMissed||(h.add("Reverting to previous settings.",0),null!==y.before.punctuation&&p.setPunctuation(y.before.punctuation),null!==y.before.numbers&&p.setNumbers(y.before.numbers),y.before.customText&&(m.setText(y.before.customText.text),m.setIsTimeRandom(y.before.customText.isTimeRandom),m.setIsWordRandom(y.before.customText.isWordRandom),m.setWord(y.before.customText.word),m.setTime(y.before.customText.time),m.setPopupTextareaState(y.before.customText.text.join(m.delimiter))),p.setMode(y.before.mode),y.resetBefore());let o=!1;l.resultVisible&&c.default.repeatedPace&&e.withSameWordset&&(o=!0),$("#words").stop(!0,!0),$("#words .smoothScroller").stop(!0,!0).remove(),me=0,d.reset(),L.clear(),v.restart(),H.restart(),H.corrected.reset(),b.reset(),x.hide(),U.setActive(!1),E.stopReplayRecording(),k.hide(),T.hide(),O.hide(),M.hide(),E.pauseReplay(),H.setBailout(!1),P.reset(),X.hide(),H.input.setKoreanStatus(!1),le.hide(),$("#showWordHistoryButton").removeClass("loaded"),$("#restartTestButton").blur(),se.reset(),R.clearQuoteStats(),$("#wordsInput").val(" "),l.reset(),$("#timerNumber").css("opacity",0);let n=null;n=l.resultVisible?$("#result"):$("#typingTest"),l.resultVisible&&("off"===c.default.randomTheme||G.get()||S.randomizeTheme(),B.skipXpBreakdown()),ae.get()||ae.showOfflineBanner(),l.setResultVisible(!1),G.set(!0),l.setTestRestarting(!0),n.stop(!0,!0).animate({opacity:0},e.noAnim?0:125,(()=>r(this,void 0,void 0,(function*(){var t,n,i;"test"==K.get()&&(ne.updateTestPageAds(!1),w.set(!1)),ie.show(),l.focusWords(),$("#monkey .fast").stop(!0,!0).css("opacity",0),$("#monkey").stop(!0,!0).css({animationDuration:"0s"}),$("#typingTest").css("opacity",0).removeClass("hidden"),$("#wordsInput").val(" "),ne.destroyResult(),$("#resultWordsHistory .words").empty(),$("#resultReplay #replayWords").empty();let a=!1;if("quote"===c.default.mode&&"typing"===c.default.repeatQuotes&&""!==ce&&(a=!0),yield C.rememberSettings(),e.withSameWordset){const e=null===(n=null===(t=re.get(c.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>e.startsWith("toPush")))})))||void 0===t?void 0:t.properties)||void 0===n?void 0:n.find((e=>e.startsWith("toPush:")));if(e){const t=+e.split(":")[1],o=[];for(let e=0;e<t;e++)o.push(N.words.get(e));N.words.reset(),o.forEach(((e,t)=>N.words.push(e,t)))}}e.withSameWordset||a?(U.setRepeated(!0),U.setPaceRepeat(o),U.setActive(!1),E.stopReplayRecording(),N.words.resetCurrentIndex(),H.input.reset(),l.showWords(),"next"===c.default.keymapMode&&"zen"!==c.default.mode&&ue.highlight(N.words.getCurrent().substring(H.input.current.length,H.input.current.length+1).toString()),C.toggleScript(N.words.getCurrent()),yield P.init()):(U.setRepeated(!1),U.setPaceRepeat(o),yield ge(),yield P.init()),ce="","quote"===c.default.mode&&U.setRepeated(!1),"off"!==c.default.keymapMode?_.show():_.hide(),document.querySelector("#miniTimerAndLiveWpm .wpm").innerHTML="0",document.querySelector("#miniTimerAndLiveWpm .acc").innerHTML="100%",document.querySelector("#miniTimerAndLiveWpm .burst").innerHTML="0",document.querySelector("#liveWpm").innerHTML="0",document.querySelector("#liveAcc").innerHTML="100%",document.querySelector("#liveBurst").innerHTML="0";for(const e of re.get(c.default.funbox))(null===(i=e.functions)||void 0===i?void 0:i.restart)&&e.functions.restart();"off"!==c.default.showAverage&&Z.update().then((()=>{Q.update()}));const r=f.getMode2(c.default,N.randomQuote);let s="";"none"!==c.default.funbox&&(s=" "+c.default.funbox.split("#").join(" ")),$(".pageTest #premidTestMode").text(`${c.default.mode} ${r} ${c.default.language.replace(/_/g," ")}${s}`),$(".pageTest #premidSecondsLeft").text(c.default.time),$("#result").addClass("hidden"),$("#testModesNotice").removeClass("hidden").css({opacity:1}),Q.update(),d.reset(),$("#typingTest").css("opacity",0).removeClass("hidden").stop(!0,!0).animate({opacity:1},e.noAnim?0:125,(()=>{l.setTestRestarting(!1),j.hide(),L.clear(),f.isPopupVisible("commandLineWrapper")||l.focusWords(),G.set(!1)}))}))))}let he;t.notSignedInLastResult=null,t.clearNotSignedInResult=function(){t.notSignedInLastResult=null},t.setNotSignedInUid=function(e){null!==t.notSignedInLastResult&&(t.notSignedInLastResult.uid=e,delete t.notSignedInLastResult.hash,t.notSignedInLastResult.hash=(0,ee.default)(t.notSignedInLastResult))},t.startTest=function(e){var t;if(G.get())return!1;p.dbConfigLoaded||p.setChangedBeforeDb(!0),(null===oe.Auth||void 0===oe.Auth?void 0:oe.Auth.currentUser)?te.log("testStarted"):te.log("testStartedNoLogin"),U.setActive(!0),E.startReplayRecording(),E.replayGetWordsList(N.words.list),H.resetKeypressTimings(),M.restart(),M.show(),$("#liveWpm").text("0"),k.show(),T.show(),O.show(),M.update(),L.clear(),X.show();for(const e of re.get(c.default.funbox))(null===(t=e.functions)||void 0===t?void 0:t.start)&&e.functions.start();try{("off"!==c.default.paceCaret||c.default.repeatedPace&&U.isPaceRepeat)&&P.start()}catch(e){}return v.setStart(e),L.start(),!0},t.restart=fe;let me=0;function ge(){var e;return r(this,void 0,void 0,(function*(){if(console.debug("Initializing test"),me++,me>=5)return l.setTestRestarting(!1),void h.add("Too many test reinitialization attempts. Something is going very wrong. Please contact support.",-1,{important:!0});let t,o,n;U.setActive(!1),q.reset(),E.stopReplayRecording(),N.words.reset(),l.setCurrentWordElementIndex(0),H.input.resetHistory(),H.input.resetCurrent();try{t=yield f.getLanguage(c.default.language)}catch(e){h.add(f.createErrorMessage(e,"Failed to load language"),-1)}if(!t||t&&t.name!==c.default.language)return p.setLanguage("english"),void(yield ge());if("test"==K.get()&&(yield C.activate()),"quote"===c.default.mode){let e;c.default.quoteLength.includes(-3)&&!(null===oe.Auth||void 0===oe.Auth?void 0:oe.Auth.currentUser)&&p.setQuoteLength(-1);try{e=yield f.findCurrentGroup(c.default.language)}catch(e){return void console.error(f.createErrorMessage(e,"Failed to find current language group"))}e&&"code"!==e.name&&"other"!==e.name&&e.name!==c.default.language&&p.setLanguage(e.name)}"off"!==c.default.tapeMode&&!0===t.rightToLeft&&(h.add("This language does not support tape mode.",0,{important:!0}),p.setTapeMode("off")),!0===c.default.lazyMode&&t.noLazyMode?(he=!0,h.add("This language does not support lazy mode.",0,{important:!0}),p.setLazyMode(!1,!0)):!0!==he||t.noLazyMode||p.setLazyMode(!0,!0),!1!==c.default.lazyMode||t.noLazyMode||(he=!1);try{const e=yield z.generateWords(t);o=e.words,n=e.sectionIndexes}catch(e){return console.error(e),e instanceof z.WordGenError?h.add(e.message,0,{important:!0}):h.add(f.createErrorMessage(e,"Failed to generate words"),-1,{important:!0}),void(yield ge())}const i=!!N.hasNumbers;let a=!1,r=!1;for(const e of o)/\t/g.test(e)&&!a&&(a=!0),/\d/g.test(e)&&!r&&(r=!0);N.setHasTab(a),N.setHasNumbers(r),i!==r&&_.refresh();for(let e=0;e<o.length;e++)N.words.push(o[e],n[e]);"next"===c.default.keymapMode&&"zen"!==c.default.mode&&ue.highlight(f.nthElementFromArray([...N.words.getCurrent()],0)),C.toggleScript(N.words.getCurrent()),l.setRightToLeft(t.rightToLeft),l.setLigatures(null!==(e=t.ligatures)&&void 0!==e&&e),l.showWords(),console.debug("Test initialized with words",o),console.debug("Test initialized with section indexes",n)}))}t.init=ge,t.addWord=function(){var e,t,o,n,i;return r(this,void 0,void 0,(function*(){let a=100;const r=null===(t=null===(e=re.get(c.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>e.startsWith("toPush")))})))||void 0===e?void 0:e.properties)||void 0===t?void 0:t.find((e=>e.startsWith("toPush:"))),s=null==r?void 0:r.split(":")[1];if(s&&(a=+s-1),N.words.length-H.input.history.length>a||"words"===c.default.mode&&N.words.length>=c.default.words&&c.default.words>0||"custom"===c.default.mode&&m.isWordRandom&&N.words.length>=m.word&&0!=m.word||"custom"===c.default.mode&&!m.isWordRandom&&!m.isTimeRandom&&!m.isSectionRandom&&N.words.length>=m.text.length||"quote"===c.default.mode&&N.words.length>=(null!==(n=null===(o=N.randomQuote.textSplit)||void 0===o?void 0:o.length)&&void 0!==n?n:0)||"custom"===c.default.mode&&m.isSectionRandom&&z.sectionIndex>=m.section&&0===z.currentSection.length&&0!=m.section)return;const u=re.get(c.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.pullSection}));if((null===(i=null==u?void 0:u.functions)||void 0===i?void 0:i.pullSection)&&N.words.length-N.words.currentIndex<20){const e=yield u.functions.pullSection(c.default.language);if(!1===e)return h.add("Error while getting section. Please try again later",-1),p.toggleFunbox(u.name),void fe();if(void 0===e)return;let t=0;for(let o=0;o<e.words.length;o++){const n=e.words[o];if(t>=c.default.words&&"words"==c.default.mode)break;t++,N.words.push(n,o),l.addWord(n)}}const d="custom"!==c.default.mode?yield f.getCurrentLanguage(c.default.language):Object.assign(Object.assign({},yield f.getCurrentLanguage(c.default.language)),{words:m.text}),g=yield de.withWords(d.words),v=yield z.getNextWord(g,N.words.length,d,a,N.words.get(N.words.length-1),N.words.get(N.words.length-2));N.words.push(v.word,v.sectionIndex),l.addWord(v.word)}))};const ve={completedEvent:null,canRetry:!1};function ye(){return r(this,void 0,void 0,(function*(){const{completedEvent:e}=ve;null!==e?ve.canRetry&&(ve.canRetry=!1,$("#retrySavingResultButton").addClass("hidden"),B.loading(!0),h.add("Retrying to save..."),we(e,!0)):h.add("Could not retry saving the result as the result no longer exists.",0,{duration:5,important:!0})}))}function be(e=!1){var o;return r(this,void 0,void 0,(function*(){if(!U.isActive)return;l.setResultCalculating(!0);const n=performance.now();v.setEnd(n),yield f.sleep(1),0!=H.input.current.length&&(H.input.pushHistory(),H.corrected.pushHistory(),E.replayGetWordsList(H.input.history)),H.forceKeyup(n);const i=(n-H.keypressTimings.spacing.last)/1e3;if(("zen"==c.default.mode||H.bailout)&&i<7&&v.setEnd(H.keypressTimings.spacing.last),l.setResultVisible(!0),U.setActive(!1),E.stopReplayRecording(),w.set(!1),x.hide(),k.hide(),j.hide(),T.hide(),O.hide(),M.hide(),W.hide(),L.clear(),C.clear(),X.hide(),Q.update(),H.burstHistory.length!==H.input.getHistory().length){const e=v.calculateBurst();H.pushBurstToHistory(e)}("zen"==c.default.mode||H.bailout)&&v.removeAfkData();const a=function(e){var t,o,n,i;const a={wpm:void 0,rawWpm:void 0,charStats:void 0,charTotal:void 0,acc:void 0,mode:c.default.mode,mode2:void 0,quoteLength:-1,punctuation:c.default.punctuation,numbers:c.default.numbers,lazyMode:c.default.lazyMode,timestamp:Date.now(),language:c.default.language,restartCount:v.restartCount,incompleteTests:v.incompleteTests,incompleteTestSeconds:v.incompleteSeconds<0?0:f.roundTo2(v.incompleteSeconds),difficulty:c.default.difficulty,blindMode:c.default.blindMode,tags:void 0,keySpacing:H.keypressTimings.spacing.array,keyDuration:H.keypressTimings.duration.array,keyOverlap:f.roundTo2(H.keyOverlap.total),lastKeyToEnd:void 0,startToFirstKey:void 0,consistency:void 0,keyConsistency:void 0,funbox:c.default.funbox,bailedOut:H.bailout,chartData:{wpm:H.wpmHistory,raw:void 0,err:void 0},customText:void 0,testDuration:void 0,afkDuration:void 0},r=f.roundTo2(H.keypressTimings.spacing.first-v.start);a.startToFirstKey=r<0?0:r;const s=f.roundTo2(v.end-H.keypressTimings.spacing.last);s<0||"zen"===c.default.mode?a.lastKeyToEnd=0:a.lastKeyToEnd=s;const u=v.calculateStats();if(u.time%1!=0&&"time"!==c.default.mode&&v.setLastSecondNotRound(),v.setLastTestWpm(u.wpm),a.wpm=u.wpm,a.rawWpm=u.wpmRaw,a.charStats=[u.correctChars+u.correctSpaces,u.incorrectChars,u.extraChars,u.missedChars],a.charTotal=u.allChars,a.acc=u.acc,v.lastSecondNotRound&&!e){const e=v.calculateWpmAndRaw();H.pushToWpmHistory(e.wpm),H.pushToRawHistory(e.raw),H.pushKeypressesToHistory()}const l=H.keypressPerSecond.map((e=>Math.round(e.count/5*60)));if("time"!==c.default.mode&&v.lastSecondNotRound&&u.time%1>=.5){const e=1/(u.time%1);l[l.length-1]=Math.round(l[l.length-1]*e)}const d=f.stdDev(l),p=f.mean(l);let h=f.roundTo2(f.kogasa(d/p)),g=H.keypressTimings.spacing.array.slice();g.length>0&&(g=g.slice(0,g.length-1));let y=f.roundTo2(f.kogasa(f.stdDev(g)/f.mean(g)));h&&!isNaN(h)||(h=0),y&&!isNaN(y)||(y=0),a.keyConsistency=y,a.consistency=h,a.chartData.raw=l;const b=f.stdDev(null!==(t=a.chartData.wpm)&&void 0!==t?t:[]),w=f.mean(null!==(o=a.chartData.wpm)&&void 0!==o?o:[]),$=f.roundTo2(f.kogasa(b/w));a.wpmConsistency=isNaN($)?0:$,a.testDuration=parseFloat(u.time.toString()),a.afkDuration=v.calculateAfkSeconds(a.testDuration),a.chartData.err=[];for(let e=0;e<H.keypressPerSecond.length;e++)a.chartData.err.push(H.keypressPerSecond[e].errors);"quote"===c.default.mode?(a.quoteLength=N.randomQuote.group,a.language=c.default.language.replace(/_\d*k$/g,"")):delete a.quoteLength,a.mode2=f.getMode2(c.default,N.randomQuote),"custom"===c.default.mode?(a.customText={},a.customText.textLen=m.text.length,a.customText.isWordRandom=m.isWordRandom,a.customText.isTimeRandom=m.isTimeRandom,a.customText.word=m.word,a.customText.time=m.time):delete a.customText;const C=[];try{null===(i=null===(n=I.getSnapshot())||void 0===n?void 0:n.tags)||void 0===i||i.forEach((e=>{!0===e.active&&C.push(e._id)}))}catch(e){}return a.tags=C,"custom"!=a.mode&&delete a.customText,a}(e);let r=!1;(function e(t){return"number"==typeof t?isNaN(t)?1:0:void 0===t?1:"object"==typeof t&&null!==t?Object.values(t).reduce(((t,o)=>t+e(o)),0):0})(a)>0&&(console.log(a),h.add("Failed to build result object: One of the fields is undefined or NaN",-1),r=!0);const s=JSON.parse(JSON.stringify(a));let u=H.keypressPerSecond.slice(-5).every((e=>e.afk));H.bailout&&(u=!1);const d=parseInt(s.mode2);let p=!1;if(e?(h.add(`Test failed - ${ce}`,0,{duration:1}),r=!0):u?(h.add("Test invalid - AFK detected",0),r=!0):U.isRepeated?(h.add("Test invalid - repeated",0),r=!0):"time"===c.default.mode&&d<15&&d>0||"time"===c.default.mode&&0===d&&s.testDuration<15||"words"===c.default.mode&&d<10&&d>0||"words"===c.default.mode&&0===d&&s.testDuration<15||"custom"===c.default.mode&&!m.isWordRandom&&!m.isTimeRandom&&!m.isSectionRandom&&m.text.length<10||"custom"===c.default.mode&&m.isWordRandom&&!m.isTimeRandom&&!m.isSectionRandom&&m.word<10||"custom"===c.default.mode&&!m.isWordRandom&&!m.isSectionRandom&&m.isTimeRandom&&m.time<15||"custom"===c.default.mode&&!m.isWordRandom&&!m.isTimeRandom&&m.isSectionRandom&&N.words.length<10||"zen"===c.default.mode&&s.testDuration<15?(h.add("Test invalid - too short",0),p=!0,r=!0):s.wpm<0||s.wpm>350&&"words"!=s.mode&&"10"!=s.mode2||s.wpm>420&&"words"==s.mode&&"10"==s.mode2?(h.add("Test invalid - wpm",0),v.setInvalid(),r=!0):s.rawWpm<0||s.rawWpm>350&&"words"!=s.mode&&"10"!=s.mode2||s.rawWpm>420&&"words"==s.mode&&"10"==s.mode2?(h.add("Test invalid - raw",0),v.setInvalid(),r=!0):(s.acc<75||s.acc>100)&&(h.add("Test invalid - accuracy",0),v.setInvalid(),r=!0),U.isRepeated){const e=s.testDuration,t=s.afkDuration;let o=f.roundTo2(e-t);o<0&&(o=0);const n=s.acc;v.incrementIncompleteSeconds(o),v.pushIncompleteTest(n,o)}const y=g.getCustomTextName(),b=g.isCustomTextLong();if("custom"===c.default.mode&&""!==y&&b)if(H.bailout||H.input.history.length<N.words.length){const e=m.getCustomTextLongProgress(y)+H.input.getHistory().length;m.setCustomTextLongProgress(y,e),h.add("Long custom text progress saved",1,{duration:5,important:!0});let t=m.getCustomText(y,!0);t=t.slice(e),m.setPopupTextareaState(t.join(m.delimiter)),m.setText(t)}else{m.setCustomTextLongProgress(y,0);const e=m.getCustomText(y,!0);m.setPopupTextareaState(e.join(m.delimiter)),m.setText(e),h.add("Long custom text completed",1,{duration:5,important:!0})}r||(F.addSeconds(s.testDuration+(v.incompleteSeconds<0?0:f.roundTo2(v.incompleteSeconds))-s.afkDuration),V.updateTodayTracker()),(null===oe.Auth||void 0===oe.Auth?void 0:oe.Auth.currentUser)?$(".pageTest #result #reportQuoteButton").removeClass("hidden"):($(".pageTest #result #rateQuoteButton").addClass("hidden"),$(".pageTest #result #reportQuoteButton").addClass("hidden"),te.log("testCompletedNoLogin"),r||(t.notSignedInLastResult=s),r=!0),$("#result .stats .dailyLeaderboard").addClass("hidden"),v.setLastResult(JSON.parse(JSON.stringify(s))),ae.get()||ae.showOfflineBanner(),yield V.update(s,e,ce,u,U.isRepeated,p,N.randomQuote,r),"toolong"!==s.chartData&&delete s.chartData.unsmoothedRaw,s.testDuration>122&&(s.chartData="toolong",s.keySpacing="toolong",s.keyDuration="toolong"),r?te.log("testCompletedInvalid"):(v.resetIncomplete(),s.uid=null===(o=null===oe.Auth||void 0===oe.Auth?void 0:oe.Auth.currentUser)||void 0===o?void 0:o.uid,V.updateRateQuote(N.randomQuote),B.loading(!0),!0!==s.bailedOut&&(s.challenge=D.verify(s)),null===s.challenge&&(null==s||delete s.challenge),s.hash=(0,ee.default)(s),we(s,!1))}))}function we(e,t){var o,n,i,a,s,l,d,p,m,g,v;return r(this,void 0,void 0,(function*(){if(!U.savingEnabled)return h.add("Result not saved: disabled by user",-1,{duration:3,customTitle:"Notice",important:!0}),void B.loading(!1);if(!ae.get())return h.add("Result not saved: offline",-1,{duration:2,customTitle:"Notice",important:!0}),B.loading(!1),ve.canRetry=!0,$("#retrySavingResultButton").removeClass("hidden"),void(t||(ve.completedEvent=e));const r=yield u.default.results.save(e);if(B.loading(!1),V.hideCrown(),200!==r.status)return[460,461,463,464,465].includes(r.status)||(ve.canRetry=!0,$("#retrySavingResultButton").removeClass("hidden"),t||(ve.completedEvent=e)),console.log("Error saving result",e),"Old key data format"===r.message&&(r.message="Old key data format. Please refresh the page to download the new update. If the problem persists, please contact support."),h.add("Failed to save result: "+r.message,-1);if($("#result .stats .tags .editTagsButton").attr("result-id",r.data.insertedId),$("#result .stats .tags .editTagsButton").removeClass("invisible"),null===(o=null==r?void 0:r.data)||void 0===o?void 0:o.xp){const e=null!==(i=null===(n=I.getSnapshot())||void 0===n?void 0:n.xp)&&void 0!==i?i:0;B.updateXpBar(e,r.data.xp,r.data.xpBreakdown),I.addXp(r.data.xp)}(null===(a=null==r?void 0:r.data)||void 0===a?void 0:a.streak)&&I.setStreak(r.data.streak),(null===(s=null==r?void 0:r.data)||void 0===s?void 0:s.insertedId)&&(e._id=r.data.insertedId,(null===(l=null==r?void 0:r.data)||void 0===l?void 0:l.isPb)&&(e.isPb=!0),I.saveLocalResult(e),I.updateLocalStats(e.incompleteTests.length+1,e.testDuration+e.incompleteTestSeconds-e.afkDuration)),te.log("testCompleted"),(null===(d=null==r?void 0:r.data)||void 0===d?void 0:d.isPb)&&((null===(g=null===(m=null===(p=I.getSnapshot())||void 0===p?void 0:p.personalBests)||void 0===m?void 0:m[c.default.mode])||void 0===g?void 0:g[e.mode2])&&V.showConfetti(),V.showCrown(),yield V.updateCrown(),I.saveLocalPB(c.default.mode,e.mode2,c.default.punctuation,c.default.language,c.default.difficulty,c.default.lazyMode,e.wpm,e.acc,e.rawWpm,e.consistency)),(null===(v=null==r?void 0:r.data)||void 0===v?void 0:v.dailyLeaderboardRank)?($("#result .stats .dailyLeaderboard").css({maxWidth:"13rem",opacity:0}).removeClass("hidden").animate({opacity:1},500),$("#result .stats .dailyLeaderboard .bottom").html(f.getPositionString(r.data.dailyLeaderboardRank))):$("#result .stats .dailyLeaderboard").addClass("hidden"),$("#retrySavingResultButton").addClass("hidden"),t&&h.add("Result saved",1,{important:!0})}))}function $e(e){if(ce=e,H.pushKeypressesToHistory(),be(!0),!U.savingEnabled)return;const t=v.calculateTestSeconds(performance.now()),o=v.calculateAfkSeconds(t);let n=f.roundTo2(t-o);n<0&&(n=0),v.incrementIncompleteSeconds(n),v.incrementRestartCount();const i=f.roundTo2(v.calculateAccuracy());v.pushIncompleteTest(i,n)}t.retrySavingResult=ye,t.finish=be,t.fail=$e,$(".pageTest").on("click","#testModesNotice .textButton.restart",(()=>{fe()})),$(document).on("keypress","#restartTestButton",(e=>{"Enter"===e.key&&fe()})),$(".pageTest").on("click","#restartTestButton",(()=>{d.set(),l.resultCalculating||(U.isActive&&"typing"===c.default.repeatQuotes&&"quote"===c.default.mode?fe({withSameWordset:!0}):fe())})),$(".pageTest").on("click","#retrySavingResultButton",ye),$(document).on("keypress","#nextTestButton",(e=>{"Enter"===e.key&&fe()})),$(".pageTest").on("click","#nextTestButton",(()=>{d.set(),fe()})),$(".pageTest").on("click","#restartTestButtonWithSameWordset",(()=>{"zen"!=c.default.mode?(d.set(),fe({withSameWordset:!0})):h.add("Repeat test disabled in zen mode")})),$(document).on("keypress","#restartTestButtonWithSameWordset",(e=>{"zen"!=c.default.mode?"Enter"===e.key&&fe({withSameWordset:!0}):h.add("Repeat test disabled in zen mode")})),$(".pageTest").on("click","#testConfig .mode .textButton",(e=>{var t;if(l.testRestarting)return;if($(e.currentTarget).hasClass("active"))return;const o=null!==(t=$(e.currentTarget).attr("mode"))&&void 0!==t?t:"time";void 0!==o&&(p.setMode(o),d.set(),fe())})),$(".pageTest").on("click","#testConfig .wordCount .textButton",(e=>{var t;if(l.testRestarting)return;const o=null!==(t=$(e.currentTarget).attr("wordCount"))&&void 0!==t?t:"15";"custom"!=o&&(p.setWordCount(parseInt(o)),d.set(),fe())})),$(".pageTest").on("click","#testConfig .time .textButton",(e=>{var t;if(l.testRestarting)return;const o=null!==(t=$(e.currentTarget).attr("timeConfig"))&&void 0!==t?t:"10";"custom"!=o&&(p.setTimeConfig(parseInt(o)),d.set(),fe())})),$(".pageTest").on("click","#testConfig .quoteLength .textButton",(e=>{var t;if(l.testRestarting)return;let o=parseInt(null!==(t=$(e.currentTarget).attr("quoteLength"))&&void 0!==t?t:"1");-2!=o&&(-1==o&&(o=[0,1,2,3]),p.setQuoteLength(o,!1,e.shiftKey),d.set(),fe())})),$(".pageTest").on("click","#testConfig .punctuationMode.textButton",(()=>{l.testRestarting||(p.setPunctuation(!c.default.punctuation),d.set(),fe())})),$(".pageTest").on("click","#testConfig .numbersMode.textButton",(()=>{l.testRestarting||(p.setNumbers(!c.default.numbers),d.set(),fe())})),$("#popups").on("click","#practiseWordsPopup .button.missed",(()=>{y.init(!0,!1)&&(y.hidePopup(),fe({practiseMissed:!0}))})),$("#popups").on("click","#practiseWordsPopup .button.slow",(()=>{y.init(!1,!0)&&(y.hidePopup(),fe({practiseMissed:!0}))})),$("#popups").on("click","#practiseWordsPopup .button.both",(()=>{y.init(!0,!0)&&(y.hidePopup(),fe({practiseMissed:!0}))})),$("#popups").on("click","#quoteSearchPopup #quoteSearchResults .searchResult",(e=>{var t;if(e.target.classList.contains("report")||e.target.classList.contains("favorite"))return;const o=parseInt(null!==(t=$(e.currentTarget).attr("id"))&&void 0!==t?t:"");A.setSelectedId(o),!0===A.apply(o)&&fe()})),$("#top").on("click","#menu #startTestButton, .logo",(()=>{"test"===K.get()&&fe()})),J.subscribe(((e,t,o)=>{"test"===K.get()&&("difficulty"!==e||o||fe(),"showAllLines"!==e||o||fe(),"keymapMode"!==e||o||fe(),"tapeMode"!==e||o||fe(),"customLayoutFluid"===e&&c.default.funbox.includes("layoutfluid")&&fe()),"lazyMode"!==e||!1!==t||o||(he=!1)})),Y.subscribe(((e,t)=>{"fail"===e&&void 0!==t&&$e(t),"finish"===e&&be()}))},1322:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setSaving=t.setActiveChallenge=t.setActive=t.setPaceRepeat=t.setRepeated=t.savingEnabled=t.activeChallenge=t.isActive=t.isPaceRepeat=t.isRepeated=void 0,t.isRepeated=!1,t.isPaceRepeat=!1,t.isActive=!1,t.activeChallenge=null,t.savingEnabled=!0,t.setRepeated=function(e){t.isRepeated=e},t.setPaceRepeat=function(e){t.isPaceRepeat=e},t.setActive=function(e){t.isActive=e},t.setActiveChallenge=function(e){t.activeChallenge=e},t.setSaving=function(e){t.savingEnabled=e}},2474:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.calculateStats=t.removeAfkData=t.calculateAccuracy=t.calculateBurst=t.setLastSecondNotRound=t.calculateAfkSeconds=t.setStart=t.setEnd=t.calculateWpmAndRaw=t.calculateTestSeconds=t.setInvalid=t.resetIncomplete=t.pushIncompleteTest=t.incrementIncompleteSeconds=t.incrementRestartCount=t.incompleteTests=t.incompleteSeconds=t.restartCount=t.restart=t.getStats=t.wpmCalculationDebug=t.setLastResult=t.lastResult=t.setLastTestWpm=t.lastTestWpm=t.lastSecondNotRound=t.end2=t.start2=t.end=t.start=t.invalid=void 0;const s=r(o(6943)),u=r(o(6705)),l=a(o(3388)),d=a(o(4897)),c=a(o(9470)),p=a(o(732)),f=a(o(1322));t.invalid=!1,t.lastSecondNotRound=!1,t.lastTestWpm=0,t.setLastTestWpm=function(e){t.lastTestWpm=e},t.setLastResult=function(e){t.lastResult=e};let h=!1;function m(e){return void 0===e?(t.end-t.start)/1e3:(e-t.start)/1e3}t.wpmCalculationDebug=function(){console.log("wpm calculation debug enabled"),h=!0},t.getStats=function(){const e={lastResult:t.lastResult,start:t.start,end:t.end,wpmHistory:d.wpmHistory,rawHistory:d.rawHistory,burstHistory:d.burstHistory,keypressPerSecond:d.keypressPerSecond,currentKeypress:d.currentKeypress,lastKeypress:d.lastKeypress,currentBurstStart:d.currentBurstStart,lastSecondNotRound:t.lastSecondNotRound,missedWords:d.missedWords,accuracy:d.accuracy,keypressTimings:d.keypressTimings};try{e.keySpacingStats={average:d.keypressTimings.spacing.array.reduce(((e,t)=>t+e))/d.keypressTimings.spacing.array.length,sd:l.stdDev(d.keypressTimings.spacing.array)}}catch(e){}try{e.keyDurationStats={average:d.keypressTimings.duration.array.reduce(((e,t)=>t+e))/d.keypressTimings.duration.array.length,sd:l.stdDev(d.keypressTimings.duration.array)}}catch(e){}return e},t.restart=function(){t.start=0,t.end=0,t.invalid=!1,t.lastSecondNotRound=!1},t.restartCount=0,t.incompleteSeconds=0,t.incompleteTests=[],t.incrementRestartCount=function(){t.restartCount++},t.incrementIncompleteSeconds=function(e){t.incompleteSeconds+=e},t.pushIncompleteTest=function(e,o){t.incompleteTests.push({acc:e,seconds:o})},t.resetIncomplete=function(){t.restartCount=0,t.incompleteSeconds=0,t.incompleteTests=[]},t.setInvalid=function(){t.invalid=!0},t.calculateTestSeconds=m;let g=0;function v(){const e=d.accuracy.correct/(d.accuracy.correct+d.accuracy.incorrect)*100;return isNaN(e)?100:e}t.calculateWpmAndRaw=function(){var e;const o=performance.now(),n=d.input.getKoreanStatus();let i=0,a=0,r=0;const h=n?s.default.disassemble(d.input.current):d.input.current;for(let e=0;e<d.input.history.length;e++){const t=n?"zen"==u.default.mode?s.default.disassemble(d.input.getHistory(e)).join(""):s.default.disassemble(c.words.get(e)).join(""):"zen"==u.default.mode?d.input.getHistory(e):c.words.get(e);(n?s.default.disassemble(d.input.getHistory(e)).join(""):d.input.getHistory(e))===t&&(a+=t.length,e<d.input.history.length-1&&"\n"!==l.getLastChar(d.input.getHistory(e))&&r++),i+=n?s.default.disassemble(d.input.getHistory(e)).length:d.input.getHistory(e).length}if(""!==h){const t="zen"==u.default.mode?h:n?s.default.disassemble(null!==(e=c.words.getCurrent())&&void 0!==e?e:""):c.words.getCurrent(),o={correct:0,incorrect:0,missed:0};for(let e=0;e<t.length;e++)e<h.length?h[e]===t[e]?o.correct++:o.incorrect++:o.missed++;i+=o.correct,i+=o.incorrect,i+=o.missed,0==o.incorrect&&(a+=o.correct)}p.get(u.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("nospace")}))&&(r=0),i+=h.length;const v=m(f.isActive?performance.now():t.end),y=Math.round((a+r)*(60/v)/5),b=Math.round((i+r)*(60/v)/5),w=performance.now();return g=(w-o+g)/2,{wpm:y,raw:b}},t.setEnd=function(e){t.end=e,t.end2=Date.now()},t.setStart=function(e){t.start=e,t.start2=Date.now()},t.calculateAfkSeconds=function(e){let t=0;return void 0!==e&&(t="time"===u.default.mode?Math.round(e)-d.keypressPerSecond.length:Math.ceil(e)-d.keypressPerSecond.length,t<0&&(t=0)),d.keypressPerSecond.filter((e=>e.afk)).length+t},t.setLastSecondNotRound=function(){t.lastSecondNotRound=!0},t.calculateBurst=function(){var e,t,o,n;const i=d.input.getKoreanStatus(),a=(performance.now()-d.currentBurstStart)/1e3;let r;if(r=i?s.default.disassemble(d.input.current).length:d.input.current.length,0==r&&(r=i?null!==(n=null===(o=s.default.disassemble(d.input.getHistoryLast()))||void 0===o?void 0:o.length)&&void 0!==n?n:0:null!==(t=null===(e=d.input.getHistoryLast())||void 0===e?void 0:e.length)&&void 0!==t?t:0),0==r)return 0;const u=l.roundTo2(r*(60/a)/5);return Math.round(u)},t.calculateAccuracy=v,t.removeAfkData=function(){const e=m();d.keypressPerSecond.splice(e),d.wpmHistory.splice(e),d.burstHistory.splice(e),d.rawHistory.splice(e)},t.calculateStats=function(){let e=m();h&&(console.log("date based time",(t.end2-t.start2)/1e3),console.log("performance.now based time",e)),"custom"!=u.default.mode&&(e=l.roundTo2(e),h&&(console.log("mode is not custom - wounding"),console.log("new time",e)));const o=function(){let e=0,t=0,o=0,n=0,i=0,a=0,r=0;for(let p=0;p<d.input.history.length;p++){const f=d.input.getKoreanStatus(),h=f?"zen"==u.default.mode?s.default.disassemble(d.input.getHistory(p)).join(""):s.default.disassemble(c.words.get(p)).join(""):"zen"==u.default.mode?d.input.getHistory(p):c.words.get(p);if(""===d.input.getHistory(p))continue;const m=f?s.default.disassemble(d.input.getHistory(p)).join(""):d.input.getHistory(p);if(m==h)e+=h.length,t+=h.length,p<d.input.history.length-1&&"\n"!==l.getLastChar(m)&&r++;else if(m.length>=h.length)for(let e=0;e<m.length;e++)e<h.length?m[e]==h[e]?t++:o++:n++;else{const n={correct:0,incorrect:0,missed:0};for(let e=0;e<h.length;e++)e<m.length?m[e]==h[e]?n.correct++:n.incorrect++:n.missed++;t+=n.correct,o+=n.incorrect,p===d.input.history.length-1&&"time"==u.default.mode?0===n.incorrect&&(e+=n.correct):i+=n.missed}p<d.input.history.length-1&&a++}return p.get(u.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.includes("nospace")}))&&(a=0,r=0),{spaces:a,correctWordChars:e,allCorrectChars:t,incorrectChars:"zen"==u.default.mode?d.accuracy.incorrect:o,extraChars:n,missedChars:i,correctSpaces:r}}(),n=l.roundTo2((o.correctWordChars+o.correctSpaces)*(60/e)/5),i=l.roundTo2((o.allCorrectChars+o.spaces+o.incorrectChars+o.extraChars)*(60/e)/5);h&&(console.log("chars",o),console.log("wpm",(o.correctWordChars+o.correctSpaces)*(60/e)/5),console.log("wpm rounded to 2",n),console.log("wpmraw",i));const a=l.roundTo2(v());return{wpm:isNaN(n)?0:n,wpmRaw:isNaN(i)?0:i,acc:a,correctChars:o.correctWordChars,incorrectChars:o.incorrectChars,missedChars:o.missedChars,extraChars:o.extraChars,allChars:o.allCorrectChars+o.spaces+o.incorrectChars+o.extraChars,time:l.roundTo2(e),spaces:o.spaces,correctSpaces:o.correctSpaces}}},6084:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.start=t.getTimerStats=t.clear=t.enableTimerDebug=void 0;const s=a(o(6705)),u=s,l=a(o(8248)),d=a(o(8824)),c=a(o(3261)),p=a(o(2474)),f=a(o(4897)),h=a(o(9470)),m=a(o(7353)),g=a(o(3388)),v=a(o(3368)),y=a(o(4292)),b=a(o(210)),w=a(o(1322)),$=a(o(195)),C=a(o(6507)),_=a(o(6883));let S=0,P=null;let x=0,k=!1;t.enableTimerDebug=function(){k=!0},t.clear=function(){$.set(0),null!==P&&clearTimeout(P)};let T=[];t.getTimerStats=function(){return T},t.start=function(){return r(this,void 0,void 0,(function*(){b.clear(),S=0,T=[],x=p.start+1e3,function e(){const t=x-performance.now();T.push({dateNow:Date.now(),now:performance.now(),expected:x,nextDelay:t}),("time"===s.default.mode&&s.default.time<130&&s.default.time>0||"words"===s.default.mode&&s.default.words<250&&s.default.words>0)&&(t<500&&b.set(),t<100&&(S++,S>5&&(v.add('This could be caused by "efficiency mode" on Microsoft Edge.'),v.add("Stopping the test due to bad performance. This would cause test calculations to be incorrect. If this happens a lot, please report this.",-1),C.dispatch("fail","slow timer")))),P=setTimeout((function(){if(!w.isActive)return null!==P&&clearTimeout(P),b.clear(),void(S=0);(function(){r(this,void 0,void 0,(function*(){k&&console.time("timer step -----------------------------"),$.increment(),function(){k&&console.time("premid");const e=document.querySelector("#premidSecondsLeft");null!==e&&(e.innerHTML=(s.default.time-$.get()).toString()),k&&console.timeEnd("premid")}(),k&&console.time("timer progress update"),("time"===s.default.mode||"custom"===s.default.mode&&l.isTimeRandom)&&d.update(),k&&console.timeEnd("timer progress update");const e=function(){k&&console.time("calculate wpm and raw");const e=p.calculateWpmAndRaw();return k&&console.timeEnd("calculate wpm and raw"),k&&console.time("update live wpm"),c.update(e.wpm,e.raw),k&&console.timeEnd("update live wpm"),k&&console.time("push to history"),f.pushToWpmHistory(e.wpm),f.pushToRawHistory(e.raw),k&&console.timeEnd("push to history"),e}(),t=function(){k&&console.time("calculate acc");const e=g.roundTo2(p.calculateAccuracy());return k&&console.timeEnd("calculate acc"),e}();!function(e){k&&console.time("update monkey");const t=s.default.blindMode?e.raw:e.wpm;m.updateFastOpacity(t),k&&console.timeEnd("update monkey")}(e),function(){if(k&&console.time("layoutfluid"),s.default.funbox.split("#").includes("layoutfluid")&&"time"===s.default.mode){const e=s.default.customLayoutfluid?s.default.customLayoutfluid.split("#"):["qwerty","dvorak","colemak"],t=s.default.time/e.length,o=$.get(),n=Math.floor(o/t),i=e[n],a=[];for(let o=1;o<e.length;o++)a.push(Math.floor(t*o));a.includes(o+3)?(_.show(),_.update(3,e[n+1])):a.includes(o+2)?_.update(2,e[n+1]):a.includes(o+1)&&_.update(1,e[n+1]),s.default.layout!==i&&void 0!==i&&(_.hide(),u.setLayout(i,!0),u.setKeymapLayout(i,!0))}k&&console.timeEnd("layoutfluid")}(),function(e,t){k&&console.time("fail conditions"),f.pushKeypressesToHistory(),"custom"===s.default.minWpm&&e.wpm<s.default.minWpmCustomSpeed&&h.words.currentIndex>3?(null!==P&&clearTimeout(P),b.clear(),S=0,C.dispatch("fail","min wpm")):"custom"===s.default.minAcc&&t<s.default.minAccCustom?(null!==P&&clearTimeout(P),b.clear(),S=0,C.dispatch("fail","min accuracy")):k&&console.timeEnd("fail conditions")}(e,t),function(){if(k&&console.time("times up check"),("time"==s.default.mode||"custom"===s.default.mode&&l.isTimeRandom)&&($.get()>=s.default.time&&0!==s.default.time&&"time"===s.default.mode||$.get()>=l.time&&0!==l.time&&"custom"===s.default.mode))return null!==P&&clearTimeout(P),y.hide(),f.input.pushHistory(),f.corrected.pushHistory(),b.clear(),S=0,void C.dispatch("finish");k&&console.timeEnd("times up check")}(),k&&console.timeEnd("timer step -----------------------------")}))})(),x+=1e3,e()}),t)}()}))}},8673:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.highlightBadWord=t.applyBurstHeatmap=t.toggleResultWords=t.setLigatures=t.setRightToLeft=t.lineJump=t.scrollTape=t.updateWordElement=t.screenshot=t.colorful=t.flipColors=t.addWord=t.updateWordsInputPosition=t.showWords=t.updateActiveElement=t.focusWords=t.reset=t.setResultCalculating=t.setTestRestarting=t.setActiveWordTop=t.setCurrentWordElementIndex=t.setResultVisible=t.resultCalculating=t.currentTestLine=t.lineTransition=t.testRestartingPromise=t.testRestarting=t.activeWordTop=t.resultVisible=t.currentWordElementIndex=void 0;const u=a(o(3368)),l=a(o(4203)),d=a(o(6705)),c=d,p=a(o(6350)),f=a(o(9470)),h=a(o(4897)),m=a(o(8248)),g=a(o(4292)),v=a(o(1333)),y=a(o(4626)),b=a(o(3388)),w=a(o(210)),C=a(o(8526)),_=a(o(1446)),S=a(o(6943)),P=s(o(9546)),x=o(6617),k=o(5344),T=a(o(732)),O=(0,o(2189).debounce)(250,(()=>{b.checkIfLanguageSupportsZipf(d.default.language).then((e=>{"no"===e&&u.add(`${b.capitalizeFirstLetter(d.default.language.replace(/_/g," "))} does not support Zipf funbox, because the list is not ordered by frequency. Please try another word list.`,0,{duration:7}),"unknown"===e&&u.add(`${b.capitalizeFirstLetter(d.default.language.replace(/_/g," "))} may not support Zipf funbox, because we don't know if it's ordered by frequency or not. If you would like to add this label, please contact us.`,0,{duration:7})}))}));let M;function A(){$("#wordsWrapper").hasClass("hidden")||$("#wordsInput").trigger("focus")}function j(e,o=!1){const n=document.querySelector("#words .active");"zen"==d.default.mode&&e?null==n||n.remove():null!==n&&("word"==d.default.highlightMode&&n.querySelectorAll("letter").forEach((e=>{e.classList.remove("correct")})),n.classList.remove("active"));try{const e=document.querySelectorAll("#words .word")[t.currentWordElementIndex];e.classList.add("active"),e.classList.remove("error"),t.activeWordTop=document.querySelector("#words .active").offsetTop,"word"==d.default.highlightMode&&e.querySelectorAll("letter").forEach((e=>{e.classList.add("correct")}))}catch(e){}!o&&(W.some((e=>d.default.language.startsWith(e)))||"time"!==d.default.mode&&d.default.showAllLines)&&B()}function L(e){var t;let o=!1,n="<div class='word'>";const i=T.get(d.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.getWordHtml}));for(let a=0;a<e.length;a++)(null===(t=null==i?void 0:i.functions)||void 0===t?void 0:t.getWordHtml)?n+=i.functions.getWordHtml(e.charAt(a),!0):"\t"===e.charAt(a)?n+="<letter class='tabChar'><i class=\"fas fa-long-arrow-alt-right\"></i></letter>":"\n"===e.charAt(a)?(o=!0,n+="<letter class='nlChar'><i class=\"fas fa-angle-down\"></i></letter>"):n+="<letter>"+e.charAt(a)+"</letter>";return n+="</div>",o&&(n+="<div class='newline'></div>"),n}_.subscribe(((e,t,o)=>{"language"!==e&&"funbox"!==e||!d.default.funbox.split("#").includes("zipf")||O(),"fontSize"!==e||o||setTimeout((()=>{I(!0),B(!0)}),0),"theme"===e&&K(),void 0!==t&&"boolean"==typeof t&&("flipTestColors"===e&&E(t),"colorfulMode"===e&&F(t),"highlightMode"===e&&R(t),"burstHeatmap"===e&&K())})),t.currentWordElementIndex=0,t.resultVisible=!1,t.activeWordTop=0,t.testRestarting=!1,t.lineTransition=!1,t.currentTestLine=0,t.resultCalculating=!1,t.setResultVisible=function(e){t.resultVisible=e},t.setCurrentWordElementIndex=function(e){t.currentWordElementIndex=e},t.setActiveWordTop=function(e){t.activeWordTop=e},t.setTestRestarting=function(e){t.testRestarting=e,!0===e?t.testRestartingPromise=new Promise((e=>{M=e})):(M&&M(),M=null)},t.setResultCalculating=function(e){t.resultCalculating=e},t.reset=function(){t.currentTestLine=0,t.currentWordElementIndex=0},t.focusWords=A,t.updateActiveElement=j,t.showWords=function(){$("#words").empty(),"off"!==d.default.tapeMode?($("#words").addClass("tape"),$("#wordsWrapper").addClass("tape")):($("#words").removeClass("tape"),$("#wordsWrapper").removeClass("tape")),"below"===d.default.indicateTypos?($("#words").addClass("indicateTyposBelow"),$("#wordsWrapper").addClass("indicateTyposBelow")):($("#words").removeClass("indicateTyposBelow"),$("#wordsWrapper").removeClass("indicateTyposBelow"));let e="";if("zen"!==d.default.mode)for(let t=0;t<f.words.length;t++)e+=L(f.words.get(t));else e='<div class="word">word height</div><div class="word active"></div>';$("#words").html(e),I(!0),j(void 0,!0),g.updatePosition(),B(!0)};const W=["japanese","chinese","korean"];function B(e=!1){var t;if("off"!==d.default.tapeMode&&!e)return;const o=document.querySelector("#wordsInput"),n=document.querySelector("#words .active");if(!n)return o.style.top="0px",void(o.style.left="0px");const i=window.getComputedStyle(n),a=parseInt(i.marginTop)+parseInt(i.marginBottom),r=(null===(t=document.querySelector("#wordsWrapper"))||void 0===t?void 0:t.offsetTop)||0;if("off"!==d.default.tapeMode)return o.style.top=r+n.offsetHeight+.25*a+-o.offsetHeight+"px",void(o.style.left=n.offsetLeft+"px");e&&!W.some((e=>d.default.language.startsWith(e)))?(o.style.left="0px",o.style.top=r+2*n.offsetHeight+1.5*a+-o.offsetHeight+"px"):(o.style.left=n.offsetLeft+"px",o.style.top=n.offsetTop-a+r+n.offsetHeight+a+-o.offsetHeight+"px")}function I(e=!1){if(!e&&"custom"!==d.default.mode)return;$("#wordsWrapper").removeClass("hidden");const t=$(document.querySelector(".word")).outerHeight(!0),o=$(document.querySelector("#words")).outerHeight(!0);if(!d.default.showAllLines||"time"==d.default.mode||m.isWordRandom&&0==m.word||m.isTimeRandom){let e,o;if("off"!==d.default.tapeMode)e=2*t,o=t;else{let t=0,n=0,i=0;const a=document.querySelectorAll("#words .word");let r=0;const s=window.getComputedStyle(a[0]),u=parseInt(s.marginTop),l=parseInt(s.marginBottom);for(;t<3;){const e=a[i];if(!e)break;const o=e.offsetTop;o>n&&(t++,r+=e.offsetHeight+u+l,n=o),i++}t<3&&(r*=3/t),e=r/3*4,o=r}$("#words").css("height",e+"px").css("overflow","hidden"),"off"!==d.default.tapeMode?$("#words").css("width","200%").css("margin-left","50%"):$("#words").css("width","100%").css("margin-left","unset"),$("#wordsWrapper").css("height",o+"px").css("overflow","hidden"),$(".outOfFocusWarning").css("line-height",o+"px")}else{$("#words").css("height","auto").css("overflow","hidden").css("width","100%").css("margin-left","unset"),$("#wordsWrapper").css("height","auto").css("overflow","hidden");let e=3*t;e>o&&(e=o),$(".outOfFocusWarning").css("line-height",e+"px")}"zen"===d.default.mode&&$(document.querySelector(".word")).remove()}function E(e){e?$("#words").addClass("flipped"):$("#words").removeClass("flipped")}function F(e){e?$("#words").addClass("colorfulMode"):$("#words").removeClass("colorfulMode")}function D(){var e,t,o,n,i;return r(this,void 0,void 0,(function*(){let a=!1,s=!1;function d(){$("#ad-result-wrapper").removeClass("hidden"),$("#ad-result-small-wrapper").removeClass("hidden"),$("#testConfig").removeClass("hidden"),$(".pageTest .screenshotSpacer").remove(),$("#notificationCenter").removeClass("hidden"),$("#commandLineMobileButton").removeClass("hidden"),$(".pageTest .ssWatermark").addClass("hidden"),$(".pageTest .ssWatermark").text("monkeytype.com"),$(".pageTest .buttons").removeClass("hidden"),$("noscript").removeClass("hidden"),$("#nocss").removeClass("hidden"),$("#top, #bottom").removeClass("invisible"),$("#result").removeClass("noBalloons"),s&&$("#cookiePopupWrapper").removeClass("hidden"),a&&$("#resultReplay").removeClass("hidden"),(null===x.Auth||void 0===x.Auth?void 0:x.Auth.currentUser)||$(".pageTest .loginTip").removeClass("hidden"),document.querySelector("html").style.scrollBehavior="smooth"}b.isElementVisible("#cookiePopupWrapper")&&(s=!0),$("#resultReplay").hasClass("hidden")||(a=!0,y.pauseReplay());const c=new Date(Date.now());$("#resultReplay").addClass("hidden"),$(".pageTest .ssWatermark").removeClass("hidden"),$(".pageTest .ssWatermark").text((0,P.default)(c,"dd MMM yyyy HH:mm")+" | monkeytype.com "),(null===x.Auth||void 0===x.Auth?void 0:x.Auth.currentUser)&&$(".pageTest .ssWatermark").text((null===(e=p.getSnapshot())||void 0===e?void 0:e.name)+" | "+(0,P.default)(c,"dd MMM yyyy HH:mm")+" | monkeytype.com  "),$(".pageTest .buttons").addClass("hidden"),$("#notificationCenter").addClass("hidden"),$("#commandLineMobileButton").addClass("hidden"),$(".pageTest .loginTip").addClass("hidden"),$("noscript").addClass("hidden"),$("#nocss").addClass("hidden"),$("#ad-result-wrapper").addClass("hidden"),$("#ad-result-small-wrapper").addClass("hidden"),$("#testConfig").addClass("hidden"),$(".page.pageTest").prepend("<div class='screenshotSpacer'></div>"),$("#top, #bottom").addClass("invisible"),$("#result").addClass("noBalloons"),s&&$("#cookiePopupWrapper").addClass("hidden"),document.querySelector("html").style.scrollBehavior="auto",window.scrollTo({top:0});const f=$("#result"),h=null!==(o=null===(t=f.offset())||void 0===t?void 0:t.left)&&void 0!==o?o:0,m=null!==(i=null===(n=f.offset())||void 0===n?void 0:n.top)&&void 0!==i?i:0,g=f.outerWidth(!0),v=f.outerHeight(!0);try{const e=b.convertRemToPixels(2),t=b.convertRemToPixels(2);(yield html2canvas(document.body,{backgroundColor:yield l.get("bg"),width:g+2*e,height:v+2*t,x:h-e,y:m-t})).toBlob((e=>r(this,void 0,void 0,(function*(){try{if(null===e)throw new Error("Could not create imgage, blob is null");const t=new ClipboardItem(Object.defineProperty({},e.type,{value:e,enumerable:!0}));yield navigator.clipboard.write([t]),u.add("Copied to clipboard",1,{duration:2})}catch(t){console.error("Error while saving image to clipboard",t),e?(u.add("Could not save image to clipboard. Opening in new tab instead (make sure popups are allowed)",0,{duration:5}),open(URL.createObjectURL(e))):u.add(b.createErrorMessage(t,"Error saving image to clipboard"),-1)}d()}))))}catch(e){u.add(b.createErrorMessage(e,"Error creating image"),-1),d()}setTimeout((()=>{d()}),3e3)}))}function R(e=!d.default.blindMode){var t,o;const n=h.input.current,i=document.querySelector("#words .word.active"),a=f.words.getCurrent();if(!a&&"zen"!==d.default.mode)return;let r="",s=!1;if("zen"===d.default.mode)for(let e=0;e<h.input.current.length;e++)"\t"===h.input.current[e]?r+='<letter class=\'tabChar correct\' style="opacity: 0"><i class="fas fa-long-arrow-alt-right"></i></letter>':"\n"===h.input.current[e]?(s=!0,r+='<letter class=\'nlChar correct\' style="opacity: 0"><i class="fas fa-angle-down"></i></letter>'):r+=`<letter class="correct">${h.input.current[e]}</letter>`;else{let s=!1;const u=h.input.getKoreanStatus();if(u){const e=S.disassemble(a).join(""),t=S.disassemble(n).join(""),o=b.trailingComposeChars.test(n)?n.search(b.trailingComposeChars):t.length;n.search(b.trailingComposeChars)<S.d(e).length&&e.slice(0,o)===t.slice(0,o)&&(s=!0)}else{const e=b.trailingComposeChars.test(n)?n.search(b.trailingComposeChars):n.length;n.search(b.trailingComposeChars)<a.length&&a.slice(0,e)===n.slice(0,e)&&(s=!0)}let l=s?"correct":"incorrect";d.default.blindMode&&(l="correct");const c=T.get(d.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.getWordHtml}));for(let o=0;o<n.length;o++){const i=a[o]==n[o];let p="correct";"off"==d.default.highlightMode&&(p="");let f=a[o],h="",m="";if(null===(t=null==c?void 0:c.functions)||void 0===t?void 0:t.getWordHtml){const e=c.functions.getWordHtml(f);""!=e&&(f=e)}else"\t"===f?(h="tabChar",f='<i class="fas fa-long-arrow-alt-right"></i>'):"\n"===f&&(m="nlChar",f='<i class="fas fa-angle-down"></i>');if(i)r+=`<letter class="${"word"==d.default.highlightMode?l:p} ${h}${m}">${f}</letter>`;else if(void 0!==f&&C.getComposing()&&o>=C.getStartPos()&&(!u||s))r+=`<letter class="${"word"==d.default.highlightMode?l:""} dead">${f}</letter>`;else if(e)if(void 0===f){if(!d.default.hideExtraLetters){let e=n[o];" "!=e&&"\t"!=e&&"\n"!=e||(e="_"),r+=`<letter class="${"word"==d.default.highlightMode?l:"incorrect"} extra ${h}${m}">${e}</letter>`}}else r+=`<letter class="${"word"==d.default.highlightMode?l:"incorrect"} ${h}${m}">`+("replace"===d.default.indicateTypos?" "==n[o]?"_":n[o]:f)+("below"===d.default.indicateTypos?`<hint>${n[o]}</hint>`:"")+"</letter>";else void 0!==f&&(r+=`<letter class="${"word"==d.default.highlightMode?l:p} ${h}${m}">${f}</letter>`)}for(let e=n.length;e<a.length;e++)(null===(o=null==c?void 0:c.functions)||void 0===o?void 0:o.getWordHtml)?r+=c.functions.getWordHtml(a[e],!0):"\t"===a[e]?r+="<letter class='tabChar'><i class=\"fas fa-long-arrow-alt-right\"></i></letter>":"\n"===a[e]?r+="<letter class='nlChar'><i class=\"fas fa-angle-down\"></i></letter>":r+=`<letter class="${"word"==d.default.highlightMode?l:""}">`+a[e]+"</letter>";"letter"===d.default.highlightMode&&d.default.hideExtraLetters&&(n.length>a.length&&!d.default.blindMode?i.classList.add("error"):n.length==a.length&&i.classList.remove("error"))}i.innerHTML=r,s&&$("#words").append("<div class='newline'></div>")}t.updateWordsInputPosition=B,t.addWord=function(e){$("#words").append(L(e))},t.flipColors=E,t.colorful=F,t.screenshot=D,t.updateWordElement=R,t.scrollTape=function(){var e,o,n;const i=document.querySelector("#wordsWrapper").offsetWidth;let a=0;const r=[];let s=0;if(t.currentWordElementIndex>0){for(let n=0;n<t.currentWordElementIndex;n++){const t=document.querySelectorAll("#words .word")[n];if(a+=null!==(e=$(t).outerWidth(!0))&&void 0!==e?e:0,Math.floor(t.offsetLeft)<0-Math.floor(t.offsetWidth)){const e=$($("#words .word")[n]);r.push(e),s+=null!==(o=e.outerWidth(!0))&&void 0!==o?o:0}}if(r.length>0){t.currentWordElementIndex-=r.length,r.forEach((e=>e.remove())),a-=s;const e=parseInt($("#words").css("margin-left"),10);$("#words").css("margin-left",`${e+s}px`)}}let u=0;if("letter"===d.default.tapeMode&&h.input.current.length>0)for(let e=0;e<h.input.current.length;e++){const o=document.querySelectorAll("#words .word");u+=null!==(n=$(o[t.currentWordElementIndex].querySelectorAll("letter")[e]).outerWidth(!0))&&void 0!==n?n:0}const l=i/2-(a+u);d.default.smoothLineScroll?$("#words").stop(!0,!1).animate({marginLeft:l},w.get()?0:125):$("#words").css("margin-left",`${l}px`)};let V=0;function q(e=!1){t.resultVisible&&($("#resultWordsHistory").stop(!0,!0).hasClass("hidden")?$("#showWordHistoryButton").hasClass("loaded")?(d.default.burstHeatmap&&K(),$("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(e?0:250)):($("#words").html('<div class="preloader"><i class="fas fa-fw fa-spin fa-circle-notch"></i></div>'),function(){return r(this,void 0,void 0,(function*(){$("#resultWordsHistory .words").empty();let e="";for(let t=0;t<h.input.history.length+2;t++){const o=h.input.getHistory(t),n=f.words.get(t),i=(null==o?void 0:o.match(/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g))||(null==n?void 0:n.match(/[\uac00-\ud7af]|[\u1100-\u11ff]|[\u3130-\u318f]|[\ua960-\ua97f]|[\ud7b0-\ud7ff]/g));let a="";try{if(""===o)throw new Error("empty input word");if(void 0!==h.corrected.getHistory(t)&&""!==h.corrected.getHistory(t)){const e=i?S.assemble(h.corrected.getHistory(t).split("")):h.corrected.getHistory(t);a=`<div class='word' burst="${h.burstHistory[t]}" input="${e.replace(/"/g,"&quot;").replace(/ /g,"_")}">`}else a=`<div class='word' burst="${h.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`;if(t===h.input.history.length-1){const e={correct:0,incorrect:0,missed:0},i="zen"==d.default.mode?o.length:n.length;for(let t=0;t<i;t++)t<o.length?"zen"==d.default.mode||o[t]==n[t]?e.correct++:e.incorrect++:e.missed++;0===e.incorrect&&"time"===d.default.mode||"zen"!=d.default.mode&&o!==n&&(a=`<div class='word error' burst="${h.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`)}else"zen"!=d.default.mode&&o!==n&&(a=`<div class='word error' burst="${h.burstHistory[t]}" input="${o.replace(/"/g,"&quot;").replace(/ /g,"_")}">`);let e;e="zen"==d.default.mode||o.length>n.length?o.length:n.length;for(let r=0;r<e;r++){let s;try{s=i?S.assemble(h.corrected.getHistory(t).split(""))[r]:h.corrected.getHistory(t)[r]}catch(e){s=void 0}let u="";const l=i?S.assemble(h.corrected.getHistory(t).split("")):h.corrected.getHistory(t);r+1===e&&void 0!==l&&l.length>o.length&&(u="extraCorrected"),"zen"==d.default.mode||void 0!==n[r]?"zen"==d.default.mode||o[r]===n[r]?s===o[r]||void 0===s?a+=`<letter class="correct ${u}">${o[r]}</letter>`:a+=`<letter class="corrected ${u}">`+o[r]+"</letter>":o[r]===h.input.current?a+=`<letter class='correct ${u}'>`+n[r]+"</letter>":void 0===o[r]?a+="<letter>"+n[r]+"</letter>":a+=`<letter class="incorrect ${u}">`+n[r]+"</letter>":a+='<letter class="incorrect extra">'+o[r]+"</letter>"}a+="</div>"}catch(e){try{a="<div class='word'>";for(let e=0;e<n.length;e++)a+="<letter>"+n[e]+"</letter>";a+="</div>"}catch(e){}}e+=a}return $("#resultWordsHistory .words").html(e),$("#showWordHistoryButton").addClass("loaded"),!0}))}().then((()=>{d.default.burstHeatmap&&K(),$("#resultWordsHistory").removeClass("hidden").css("display","none").slideDown(e?0:250,(()=>{d.default.burstHeatmap&&K()}))}))):$("#resultWordsHistory").slideUp(250,(()=>{$("#resultWordsHistory").addClass("hidden")})))}function K(){var e,t;return r(this,void 0,void 0,(function*(){if(d.default.burstHeatmap){$("#resultWordsHistory .heatmapLegend").removeClass("hidden");let o=[...h.burstHistory];o=o.filter((e=>e!==1/0)),o=o.filter((e=>e<350)),(null===(e=h.input.getHistory(h.input.getHistory().length-1))||void 0===e?void 0:e.length)!==(null===(t=f.words.getCurrent())||void 0===t?void 0:t.length)&&(o=o.splice(0,o.length-1));const n=b.median(o),i=[];o.forEach((e=>{i.push(Math.abs(n-e))}));const a=b.mean(i),r=yield l.getAll();let s=[r.colorfulError,b.blendTwoHexColors(r.colorfulError,r.text,.5),r.text,b.blendTwoHexColors(r.main,r.text,.5),r.main],u=r.sub;r.main===r.text&&(s=[r.colorfulError,b.blendTwoHexColors(r.colorfulError,r.text,.5),r.sub,b.blendTwoHexColors(r.sub,r.text,.5),r.main],u=r.subAlt);const d=[{val:0,colorId:0},{val:n-1.5*a,colorId:1},{val:n-.5*a,colorId:2},{val:n+.5*a,colorId:3},{val:n+1.5*a,colorId:4}];d.forEach(((e,t)=>{let o="";o=0===t?`<${Math.round(d[t+1].val)}`:4===t?`${Math.round(e.val-1)}+`:`${Math.round(e.val)}-${Math.round(d[t+1].val)-1}`,$("#resultWordsHistory .heatmapLegend .box"+t).html(`<div>${o}</div>`)})),$("#resultWordsHistory .words .word").each(((e,t)=>{const o=$(t).attr("burst");if(void 0===o)$(t).css("color",u);else{const e=parseInt(o);d.forEach((o=>{e>=o.val&&($(t).addClass("heatmapInherit"),$(t).css("color",s[o.colorId]))}))}})),$("#resultWordsHistory .heatmapLegend .boxes .box").each(((e,t)=>{$(t).css("background",s[e])}))}else $("#resultWordsHistory .heatmapLegend").addClass("hidden"),$("#resultWordsHistory .words .word").removeClass("heatmapInherit"),$("#resultWordsHistory .words .word").css("color",""),$("#resultWordsHistory .heatmapLegend .boxes .box").css("color","")}))}t.lineJump=function(e){var o,n;if("off"===d.default.tapeMode&&t.currentTestLine>0||"off"!==d.default.tapeMode&&t.currentTestLine>=0){const i=e,a=[],r=$("#words .word");for(let e=0;e<t.currentWordElementIndex;e++)$(r[e]).hasClass("hidden")||Math.floor(r[e].offsetTop)<("off"===d.default.tapeMode?i-10:i+10)&&a.push($($("#words .word")[e]));const s=$(document.querySelector(".word")).outerHeight(!0);if(d.default.smoothLineScroll&&a.length>0){t.lineTransition=!0;const e=$("#words .smoothScroller");0===e.length?$("#words").prepend(`<div class="smoothScroller" style="position: fixed;height:${s}px;width:100%"></div>`):e.css("height",`${(null!==(o=e.outerHeight(!0))&&void 0!==o?o:0)+s}px`),$("#words .smoothScroller").stop(!0,!1).animate({height:0},w.get()?0:125,(()=>{$("#words .smoothScroller").remove()})),$("#paceCaret").stop(!0,!1).animate({top:(null===(n=document.querySelector("#paceCaret"))||void 0===n?void 0:n.offsetTop)-s},w.get()?0:125);const i={marginTop:`-${s*(V+1)}px`};if("off"!==d.default.tapeMode){const e=document.querySelector("#wordsWrapper").offsetWidth/2;i.marginLeft=`${e}px`}V++,$("#words").stop(!0,!1).animate(i,w.get()?0:125,(()=>{V=0,t.activeWordTop=document.querySelector("#words .active").offsetTop,t.currentWordElementIndex-=a.length,t.lineTransition=!1,a.forEach((e=>e.remove())),$("#words").css("marginTop","0")}))}else a.forEach((e=>e.remove())),t.currentWordElementIndex-=a.length,$("#paceCaret").css({top:document.querySelector("#paceCaret").offsetTop-s})}t.currentTestLine++,I()},t.setRightToLeft=function(e){e?($("#words").addClass("rightToLeftTest"),$("#resultWordsHistory .words").addClass("rightToLeftTest"),$("#resultReplay .words").addClass("rightToLeftTest")):($("#words").removeClass("rightToLeftTest"),$("#resultWordsHistory .words").removeClass("rightToLeftTest"),$("#resultReplay .words").removeClass("rightToLeftTest"))},t.setLigatures=function(e){e?($("#words").addClass("withLigatures"),$("#resultWordsHistory .words").addClass("withLigatures"),$("#resultReplay .words").addClass("withLigatures")):($("#words").removeClass("withLigatures"),$("#resultWordsHistory .words").removeClass("withLigatures"),$("#resultReplay .words").removeClass("withLigatures"))},t.toggleResultWords=q,t.applyBurstHeatmap=K,t.highlightBadWord=function(e,t){t&&$($("#words .word")[e]).addClass("error")},$(".pageTest").on("click","#saveScreenshotButton",(()=>{D()})),$("#saveScreenshotButton").on("keypress",(e=>{"Enter"===e.key&&D()})),$(".pageTest #copyWordsListButton").on("click",(()=>r(void 0,void 0,void 0,(function*(){try{let e;e="zen"==d.default.mode?h.input.history.join(" "):f.words.get().slice(0,h.input.history.length).join(" "),yield navigator.clipboard.writeText(e),u.add("Copied to clipboard",0,{duration:2})}catch(e){u.add("Could not copy to clipboard: "+e,-1)}})))),$(".pageTest #toggleBurstHeatmap").on("click",(()=>r(void 0,void 0,void 0,(function*(){c.setBurstHeatmap(!d.default.burstHeatmap)})))),$(".pageTest #resultWordsHistory").on("mouseleave",".words .word",(()=>{$(".wordInputAfter").remove()})),$(".pageTest #result #wpmChart").on("mouseleave",(()=>{$(".wordInputAfter").remove()})),$(".pageTest #resultWordsHistory").on("mouseenter",".words .word",(e=>{if(t.resultVisible){const t=$(e.currentTarget).attr("input"),o=parseInt($(e.currentTarget).attr("burst"));null!=t&&$(e.currentTarget).append(`<div class="wordInputAfter">\n          <div class="text">\n          ${t.replace(/\t/g,"_").replace(/\n/g,"_").replace(/</g,"&lt").replace(/>/g,"&gt")}\n          </div>\n          <div class="speed">\n          ${Math.round(d.default.alwaysShowCPM?5*o:o)}${d.default.alwaysShowCPM?"cpm":"wpm"}\n          </div>\n          </div>`)}})),$("#wordsInput").on("focus",(()=>{!t.resultVisible&&d.default.showOutOfFocusWarning&&v.hide(),g.show()})),$("#wordsInput").on("focusout",(()=>{!t.resultVisible&&d.default.showOutOfFocusWarning&&v.show(),g.hide()})),$(document).on("keypress","#showWordHistoryButton",(e=>{"Enter"===e.key&&q()})),$(".pageTest").on("click","#showWordHistoryButton",(()=>{q()})),$("#wordsWrapper").on("click",(()=>{A()})),$(document).on("keypress",(()=>{t.resultVisible&&(0,k.skipXpBreakdown)()}))},9470:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.setHasNumbers=t.setHasTab=t.setRandomQuote=t.randomQuote=t.hasNumbers=t.hasTab=t.words=void 0,t.words=new class{constructor(){this.list=[],this.sectionIndexList=[],this.length=0,this.currentIndex=0}get(e,t=!1){var o,n;return void 0===e?this.list:t?null===(n=null===(o=this.list[e])||void 0===o?void 0:o.replace(/[.?!":\-,]/g,""))||void 0===n?void 0:n.toLowerCase():this.list[e]}getCurrent(){return this.list[this.currentIndex]}getLast(){return this.list[this.list.length-1]}push(e,t){this.list.push(e),this.sectionIndexList.push(t),this.length=this.list.length}reset(){this.list=[],this.sectionIndexList=[],this.currentIndex=0,this.length=this.list.length}resetCurrentIndex(){this.currentIndex=0}decreaseCurrentIndex(){this.currentIndex--}increaseCurrentIndex(){this.currentIndex++}clean(){for(const e of this.list)if(/ +/.test(e)){const t=this.list.indexOf(e),o=e.split(" ");this.list.splice(t,1);for(let e=0;e<o.length;e++)this.list.splice(t+e,0,o[e])}}},t.hasTab=!1,t.hasNumbers=!1,t.randomQuote=null,t.setRandomQuote=function(e){t.randomQuote=e},t.setHasTab=function(e){t.hasTab=e},t.setHasNumbers=function(e){t.hasNumbers=e}},8824:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateStyle=t.update=t.restart=t.hide=t.show=void 0;const s=r(o(6705)),u=a(o(8248)),l=a(o(3388)),d=a(o(9470)),c=a(o(4897)),p=a(o(195)),f=a(o(210)),h=a(o(1322)),m=a(o(1446));function g(){const e=s.default.showTimerProgress?parseFloat(s.default.timerOpacity):0;"zen"!=s.default.mode&&"bar"===s.default.timerStyle?$("#timerWrapper").stop(!0,!0).removeClass("hidden").animate({opacity:e},125):"text"===s.default.timerStyle?$("#timerNumber").stop(!0,!0).removeClass("hidden").css("opacity",0).animate({opacity:e},125):"zen"!=s.default.mode&&"mini"!==s.default.timerStyle||e>0&&$("#miniTimerAndLiveWpm .time").stop(!0,!0).removeClass("hidden").animate({opacity:e},125)}function v(){$("#timerWrapper").stop(!0,!0).animate({opacity:0},125),$("#miniTimerAndLiveWpm .time").stop(!0,!0).animate({opacity:0},125,(()=>{$("#miniTimerAndLiveWpm .time").addClass("hidden")})),$("#timerNumber").stop(!0,!0).animate({opacity:0},125)}t.show=g,t.hide=v,t.restart=function(){"bar"===s.default.timerStyle&&("time"===s.default.mode?$("#timer").stop(!0,!0).animate({width:"100vw"},0):"words"!==s.default.mode&&"custom"!==s.default.mode||$("#timer").stop(!0,!0).animate({width:"0vw"},0))};const y=document.querySelector("#timerNumber"),b=document.querySelector("#miniTimerAndLiveWpm .time");function w(){return"custom"===s.default.mode&&u.isSectionRandom?d.words.sectionIndexList[d.words.currentIndex]-1:c.input.history.length}function C(){var e,t,o;const n=p.get();if("time"===s.default.mode||"custom"===s.default.mode&&u.isTimeRandom){let e=s.default.time;if("custom"===s.default.mode&&u.isTimeRandom&&(e=u.time),"bar"===s.default.timerStyle){const t=100-(n+1)/e*100;$("#timer").stop(!0,!0).animate({width:t+"vw"},f.get()?0:1e3,"linear")}else if("text"===s.default.timerStyle){let t=l.secondsToString(e-n);0===e&&(t=l.secondsToString(n)),null!==y&&(y.innerHTML="<div>"+t+"</div>")}else if("mini"===s.default.timerStyle){let t=l.secondsToString(e-n);0===e&&(t=l.secondsToString(n)),null!==b&&(b.innerHTML=t)}}else if("words"===s.default.mode||"custom"===s.default.mode||"quote"===s.default.mode){let n=d.words.length;if("words"===s.default.mode&&(n=s.default.words),"custom"===s.default.mode&&(n=u.isWordRandom?u.word:u.isSectionRandom?u.section:u.text.length),"quote"===s.default.mode&&(n=null!==(o=null===(t=null===(e=d.randomQuote)||void 0===e?void 0:e.textSplit)||void 0===t?void 0:t.length)&&void 0!==o?o:1),"bar"===s.default.timerStyle){const e=Math.floor((d.words.currentIndex+1)/n*100);$("#timer").stop(!0,!0).animate({width:e+"vw"},f.get()?0:250)}else"text"===s.default.timerStyle?0===n?null!==y&&(y.innerHTML=`<div>${c.input.history.length}</div>`):null!==y&&(y.innerHTML=`<div>${w()}/${n}</div>`):"mini"===s.default.timerStyle&&(0===n?null!==b&&(b.innerHTML=`${c.input.history.length}`):null!==b&&(b.innerHTML=`${w()}/${n}`))}else"zen"==s.default.mode&&("text"===s.default.timerStyle?null!==y&&(y.innerHTML=`<div>${c.input.history.length}</div>`):null!==b&&(b.innerHTML=`${c.input.history.length}`))}function _(){h.isActive&&(v(),C(),setTimeout((()=>{g()}),125))}t.update=C,t.updateStyle=_,m.subscribe(((e,t)=>{"showTimerProgress"===e&&(!0===t&&h.isActive?g():v()),"timerStyle"===e&&_()}))},2026:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.addAllFromToday=t.getString=t.addSeconds=void 0;const r=a(o(3388)),s=a(o(6350));let u,l=0,d=!1;t.addSeconds=function(e){d&&(new Date).getDate()>u?l=e:l+=e},t.getString=function(){return r.secondsToString(Math.round(l),!0,!0)+(!0===d?" today":" session")},t.addAllFromToday=function(){const e=new Date;e.setSeconds(0),e.setMinutes(0),e.setHours(0),e.setMilliseconds(0),u=e.getDate();const t=e.getTime();l=0;const o=s.getSnapshot();if(!o)return;const n=o.results;null==n||n.forEach((e=>{const o=new Date(e.timestamp);o.setSeconds(0),o.setMinutes(0),o.setHours(0),o.setMilliseconds(0),o.getTime()>=t&&(l+=e.testDuration+e.incompleteTestSeconds-e.afkDuration)})),d=!0}},6857:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.speak=t.clear=t.init=t.setLanguage=void 0;const u=s(o(6705)),l=a(o(3388)),d=a(o(1446)),c=a(o(5012));let p;function f(e=u.default.language){return r(this,void 0,void 0,(function*(){if(!p)return;const t=yield l.getLanguage(e),o=t.bcp47?t.bcp47:"en-US";p.lang=o}))}function h(){return r(this,void 0,void 0,(function*(){p=new SpeechSynthesisUtterance,f()}))}function m(){p=void 0}function g(e){window.speechSynthesis.cancel(),void 0===p&&h(),void 0!==p&&(p.text=e,window.speechSynthesis.speak(p))}t.setLanguage=f,t.init=h,t.clear=m,t.speak=g,d.subscribe(((e,t)=>{"funbox"===e&&("none"===t?m():"tts"===t&&h()),"language"===e&&u.default.funbox.split("#").includes("tts")&&f()})),c.subscribe((e=>{g(e)}))},5708:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.getWord=t.updateScore=void 0;const r=a(o(4897)),s={};class u{constructor(){this.average=0,this.count=0}update(e){this.count<50&&this.count++;const t=1/this.count;this.average=e*t+this.average*(1-t)}}function l(e){let t=0,o=0;for(const n of e)n in s&&(t+=s[n].average,o++);return 0==o?0:t/o}t.updateScore=function(e,t){const o=r.keypressTimings.spacing.array;if(0===o.length||"string"==typeof o)return;let n=o[o.length-1];t||(n+=5e3),e in s||(s[e]=new u),s[e].update(n)},t.getWord=function(e){let t,o="";for(let n=0;n<20;n++){const i=e.randomWord("normal"),a=l(i);(0==n||void 0===t||a>t)&&(o=i,t=a)}return o}},277:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.getSection=t.getTLD=void 0;const s=a(o(9817)),u=a(o(3388)),l=o(3388);function d(e){return r(this,void 0,void 0,(function*(){switch(e.name){case"english":default:return"en";case"spanish":return"es";case"french":return"fr";case"german":return"de";case"portuguese":return"pt";case"italian":return"it";case"dutch":return"nl"}}))}t.getTLD=d,t.getSection=function(e){return r(this,void 0,void 0,(function*(){s.show();let t,o="en";try{t=yield u.findCurrentGroup(e)}catch(e){console.error(u.createErrorMessage(e,"Failed to find current language group"))}void 0!==t&&(o=yield d(t));const n=`https://${o}.wikipedia.org/api/rest_v1/page/random/summary`,i={title:"",author:""},a=yield fetch(n);let r=0;if(200==a.status){const e=yield a.json();i.title=e.title,i.author=e.author,r=e.pageid}return new Promise(((e,t)=>{200!=a.status&&(s.hide(),t(a.status));const n=`https://${o}.wikipedia.org/w/api.php?action=query&format=json&pageids=${r}&prop=extracts&exintro=true&origin=*`,d=new XMLHttpRequest;d.onload=()=>{if(4==d.readyState)if(200==d.status){let t=JSON.parse(d.responseText).query.pages[r.toString()].extract;t=t.replace(/<\/p><p>+/g," "),t=u.htmlToText(t),t=t.replace(/\[\d+\]/gi,""),t=t.replace(/[\u200B-\u200D\uFEFF]/g,""),t=t.replace(/\s+/g," "),t=t.trim();const o=t.split(" "),n=new l.Section(i.title,i.author,o);s.hide(),e(n)}else s.hide(),t(d.status)},d.open("GET",n),d.send()}))}))}},9510:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.getNextWord=t.currentSection=t.sectionIndex=t.generateWords=t.WordGenError=t.getWordsLimit=t.punctuateWord=void 0;const u=a(o(6705)),l=u,d=a(o(732)),c=a(o(8248)),p=a(o(4905)),f=s(o(6750)),h=a(o(2338)),m=a(o(9470)),g=a(o(262)),v=a(o(3439)),y=a(o(476)),b=a(o(9196)),w=a(o(3388));let $="";function C(e,t,o,n){var i;return r(this,void 0,void 0,(function*(){let a=t;const s=u.default.language.split("_")[0],l=w.getLastChar(e),c=d.get(u.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.punctuateWord}));if(null===(i=null==c?void 0:c.functions)||void 0===i?void 0:i.punctuateWord)return c.functions.punctuateWord(a);if("code"==s||"georgian"==s||0!=o&&!function(e){return/[?!.]/.test(e)}(l))if(Math.random()<.1&&"."!=l&&","!=l&&o!=n-2||o==n-1)if("spanish"==s||"catalan"==s)"?"!=$&&"!"!=$||(a+=$,$="");else{const e=Math.random();e<=.8?a+="kurdish"==s?".":"nepali"===s?"":".":e>.8&&e<.9?"french"==s?a="?":a+="arabic"==s||"persian"==s||"urdu"==s||"kurdish"==s?"":"greek"==s?";":"?":"french"==s?a="!":a+="!"}else if(Math.random()<.01&&","!=l&&"."!=l&&"russian"!==s)a=`"${a}"`;else if(Math.random()<.011&&","!=l&&"."!=l&&"russian"!==s&&"ukrainian"!==s&&"slovak"!==s)a=`'${a}'`;else if(Math.random()<.012&&","!=l&&"."!=l)if("code"==s){const e=Math.random();a=e<.25?`(${a})`:e<.5?`{${a}}`:e<.75?`[${a}]`:`<${a}>`}else a=`(${a})`;else if(Math.random()<.013&&","!=l&&"."!=l&&";"!=l&&""!=l&&":"!=l)"french"==s?a=":":"greek"==s?a="":a+=":";else if(Math.random()<.014&&","!=l&&"."!=l&&"-"!=e)a="-";else if(Math.random()<.015&&","!=l&&"."!=l&&";"!=l&&""!=l&&":"!=l)"french"==s?a=";":"greek"==s?a="":a+="arabic"==s||"kurdish"==s?"":";";else if(Math.random()<.2&&","!=l)a+="arabic"==s||"urdu"==s||"persian"==s||"kurdish"==s?"":",";else if(Math.random()<.25&&"code"==s){const e=["{","}","[","]","(",")",";","=","+","%","/"],t=["{","}","[","]","(",")",";","=","+","%","/","/*","*/","//","!=","==","<=",">=","||","&&","<<",">>","%=","&=","*=","++","+=","--","-=","/=","^=","|="];a=u.default.language.startsWith("code_c")&&!u.default.language.startsWith("code_css")||u.default.language.startsWith("code_arduino")?w.randomElementFromArray(t):w.randomElementFromArray(e)}else Math.random()<.5&&"english"===s&&(yield y.check(a))&&(a=yield function(e){return r(this,void 0,void 0,(function*(){return y.replace(e)}))}(a));else if(a=w.capitalizeFirstLetterOfEachWord(a),"turkish"==s&&(a=a.replace(/I/g,"")),"spanish"==s||"catalan"==s){const e=Math.random();e>.9?(a=""+a,$="?"):e>.8&&(a=""+a,$="!")}return a}))}function _(){var e,t;let o=100;const n=null===(t=null===(e=d.get(u.default.funbox).find((e=>{var t;return null===(t=e.properties)||void 0===t?void 0:t.find((e=>e.startsWith("toPush")))})))||void 0===e?void 0:e.properties)||void 0===t?void 0:t.find((e=>e.startsWith("toPush:")));if(u.default.showAllLines&&("custom"===u.default.mode&&(c.isWordRandom?o=c.word:c.isTimeRandom||c.isWordRandom||(o=c.text.length)),"words"==u.default.mode&&(o=u.default.words)),"words"===u.default.mode&&0===u.default.words&&(o=100),"custom"===u.default.mode&&c.isWordRandom&&0===c.word&&(o=100),"custom"===u.default.mode&&"|"===c.delimiter&&(o=100),n&&(o=+n.split(":")[1]),"words"===u.default.mode&&0!==u.default.words&&u.default.words<o&&(o=u.default.words),"custom"===u.default.mode&&!c.isSectionRandom&&!c.isTimeRandom&&c.isWordRandom&&0!==c.word&&c.word<o&&(o=c.word),"custom"===u.default.mode&&!c.isTimeRandom&&!c.isWordRandom&&!c.isSectionRandom&&0!==c.text.length&&c.text.length<o){let e=0;for(const t of c.text)/ /g.test(t)?e+=t.split(" ").length:e++;o=e}return o}t.punctuateWord=C,t.getWordsLimit=_;class S extends Error{constructor(e){super(e),this.name="WordGenError"}}t.WordGenError=S;let P=[];t.generateWords=function(e){var o,n;return r(this,void 0,void 0,(function*(){P=[],t.currentSection=[],t.sectionIndex=0,x=[];const i={words:[],sectionIndexes:[]},a=_();let s=e.words;"custom"==u.default.mode&&(s=c.text);const g=yield p.withWords(s);if("quote"===u.default.mode)return yield function(e,t,o){var n,i;return r(this,void 0,void 0,(function*(){const a={words:[],sectionIndexes:[]},r=e.name.startsWith("swiss_german")?"german":e.name;if(0===(yield f.default.getQuotes(r,u.default.quoteLength)).length)throw l.setMode("words"),new S(`No ${u.default.language.replace(/_\d*k$/g,"").replace(/_/g," ")} quotes found`);let s;if(u.default.quoteLength.includes(-2)&&1===u.default.quoteLength.length){const e=f.default.getQuoteById(h.selectedId);if(void 0===e)throw l.setQuoteLength(-1),new S(`Quote ${h.selectedId} does not exist`);s=e}else if(u.default.quoteLength.includes(-3)){const e=f.default.getRandomFavoriteQuote(u.default.language);if(null===e)throw l.setQuoteLength(-1),new S("No favorite quotes found");s=e}else{const e=f.default.getRandomQuote();if(null===e)throw l.setQuoteLength(-1),new S("No quotes found for selected quote length");s=e}if(s.language=u.default.language.replace(/_\d*k$/g,""),s.text=s.text.replace(/ +/gm," "),s.text=s.text.replace(/\\\\t/gm,"\t"),s.text=s.text.replace(/\\\\n/gm,"\n"),s.text=s.text.replace(/\\t/gm,"\t"),s.text=s.text.replace(/\\n/gm,"\n"),s.text=s.text.replace(/( *(\r\n|\r|\n) *)/g,"\n "),s.text=s.text.replace(//g,"..."),s.text=s.text.trim(),s.textSplit=s.text.split(" "),m.setRandomQuote(s),void 0===m.randomQuote.textSplit)throw new S("Random quote textSplit is undefined");P=m.randomQuote.textSplit;for(let r=0;r<Math.min(o,P.length);r++){const s=yield k(t,r,e,o,null!==(n=w.nthElementFromArray(a.words,-1))&&void 0!==n?n:"",null!==(i=w.nthElementFromArray(a.words,-2))&&void 0!==i?i:"");a.words.push(s.word),a.sectionIndexes.push(r)}return a}))}(e,g,a);if("time"===u.default.mode||"words"===u.default.mode||"custom"===u.default.mode){const s=yield function(e){var t;return r(this,void 0,void 0,(function*(){const o=[],n=d.get(u.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.pullSection}));if(null===(t=null==n?void 0:n.functions)||void 0===t?void 0:t.pullSection)for(;o.length<e;){const e=yield n.functions.pullSection(u.default.language);if(!1===e)throw l.toggleFunbox(n.name),new Error("Failed to pull section");if(void 0!==e)for(const t of e.words){if(o.length>=u.default.words&&"words"==u.default.mode)break;o.push(t)}}return o}))}(a);if(s.length>0){const e=[];for(let t=0;t<s.length;t++)e.push(t);return{words:s,sectionIndexes:e}}let p=!1,f=0;for(;!1===p;){const r=yield k(g,f,e,a,null!==(o=w.nthElementFromArray(i.words,-1))&&void 0!==o?o:"",null!==(n=w.nthElementFromArray(i.words,-2))&&void 0!==n?n:"");i.words.push(r.word),i.sectionIndexes.push(r.sectionIndex);const s=c.isSectionRandom&&0!==c.section&&t.sectionIndex>=c.section,l=!c.isSectionRandom&&!c.isTimeRandom&&t.sectionIndex>=g.length;("custom"===u.default.mode&&0===t.currentSection.length&&"|"===c.delimiter&&(s||l)||i.words.length>=a)&&(p=!0),f++}}return x=[],i}))},t.sectionIndex=0,t.currentSection=[];let x=[];function k(e,o,n,i,a,s){var l;return r(this,void 0,void 0,(function*(){console.debug("Getting next word",{wordset:e,wordIndex:o,language:n,wordsBound:i,previousWord:a,previousWord2:s});const p=null!==(l=function(){var e;const t=d.get(u.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.getWordsFrequencyMode}));if(null===(e=null==t?void 0:t.functions)||void 0===e?void 0:e.getWordsFrequencyMode)return t.functions.getWordsFrequencyMode()}())&&void 0!==l?l:"normal";let f=e.randomWord(p);const h=a.replace(/[.?!":\-,]/g,"").toLowerCase(),m=s.replace(/[.?!":\-,']/g,"").toLowerCase();if(0===t.currentSection.length){if("quote"===u.default.mode)f=P[o];else if("custom"!=u.default.mode||c.isWordRandom||c.isTimeRandom||c.isSectionRandom)if("custom"==u.default.mode&&(c.isWordRandom||c.isTimeRandom||c.isSectionRandom)&&(e.length<4||null!==b.before.mode))f=e.randomWord(p);else if("custom"===u.default.mode&&c.isSectionRandom){f=e.randomWord(p);const t=w.nthElementFromArray(x,-1),o=w.nthElementFromArray(x,-2);let n=0;for(;n<100&&(t===f||o===f);)n++,f=e.randomWord(p)}else{let t=0,o=f.split(" ")[0].toLowerCase();for(;t<100&&(h==o||m==o||"custom"!==u.default.mode&&!u.default.punctuation&&"I"==f||"custom"!==u.default.mode&&!u.default.punctuation&&!u.default.language.startsWith("code")&&/[-=_+[\]{};'\\:"|,./<>?]/i.test(f)||"custom"!==u.default.mode&&!u.default.numbers&&/[0-9]/i.test(f));)t++,f=e.randomWord(p),o=f.split(" ")[0]}else f=c.text[t.sectionIndex];f=f.replace(/ +/g," "),f=f.replace(/(^ )|( $)/g,""),f=function(e,t,o){var n;const i=d.get(u.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.getWord}));return(null===(n=null==i?void 0:i.functions)||void 0===n?void 0:n.getWord)&&(e=i.functions.getWord(o,t)),e}(f,o,e),t.currentSection=[...f.split(" ")],x.push(f),f=t.currentSection.shift(),t.sectionIndex++}else f=t.currentSection.shift();if(void 0===f)throw new S("Random word is undefined");if(""===f)throw new S("Random word is empty");if(/ /g.test(f))throw new S("Random word contains spaces");return"custom"===u.default.mode||"quote"===u.default.mode||!/[A-Z]/.test(f)||u.default.punctuation||u.default.language.startsWith("german")||u.default.language.startsWith("swiss_german")||u.default.language.startsWith("code")||(f=f.toLowerCase()),f=f.replace(/ +/gm," "),f=f.replace(/(^ )|( $)/gm,""),f=function(e,t){return!0!==u.default.lazyMode||t.noLazyMode||(e=v.replaceAccents(e,t.accents)),e}(f,n),f=yield function(e){return r(this,void 0,void 0,(function*(){return u.default.britishEnglish&&/english/.test(u.default.language)&&(e=yield g.replace(e)),e}))}(f),"swiss_german"===u.default.language&&(f=f.replace(//g,"ss")),u.default.punctuation&&1==!n.originalPunctuation&&(f=yield C(a,f,o,i)),u.default.numbers&&Math.random()<.1&&(f=w.getNumbers(4),u.default.language.startsWith("kurdish")?f=w.convertNumberToArabic(f):u.default.language.startsWith("nepali")&&(f=w.convertNumberToNepali(f))),f=function(e){var t;for(const o of d.get(u.default.funbox))(null===(t=o.functions)||void 0===t?void 0:t.alterText)&&(e=o.functions.alterText(e));return e}(f),console.debug("Word:",f),{word:f,sectionIndex:t.sectionIndex}}))}t.getNextWord=k},4905:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.withWords=t.Wordset=void 0;const u=a(o(732)),l=o(3388),d=s(o(6705));let c=null;class p{constructor(e){this.words=e,this.length=this.words.length}randomWord(e){return"zipf"===e?this.words[(0,l.dreymarIndex)(this.words.length)]:(0,l.randomElementFromArray)(this.words)}}t.Wordset=p,t.withWords=function(e){var t;return r(this,void 0,void 0,(function*(){const o=u.get(d.default.funbox).find((e=>{var t;return null===(t=e.functions)||void 0===t?void 0:t.withWords}));return(null===(t=null==o?void 0:o.functions)||void 0===t?void 0:t.withWords)?o.functions.withWords(e):(null!=c&&e===c.words||(c=new p(e)),c)}))}},5209:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.updateKeytips=void 0;const u=s(o(6705)),l=a(o(4292)),d=a(o(3368)),c=a(o(8248)),p=a(o(1322)),f=a(o(1446)),h=o(2189),m=a(o(8673)),g=o(7346),v=o(3388);function y(){const e=window.navigator.userAgent.toLowerCase().includes("mac")?"cmd":"ctrl";"esc"===u.default.quickRestart?$(".pageSettings .tip").html(`\n    tip: You can also change all these settings quickly using the\n    command line (<key>${e}</key>+<key>shift</key>+<key>p</key>)`):$(".pageSettings .tip").html(`\n    tip: You can also change all these settings quickly using the\n    command line (<key>esc</key> or <key>${e}</key>+<key>shift</key>+<key>p</key>)`),"esc"===u.default.quickRestart?$("#bottom .keyTips").html(`\n    <key>esc</key> - restart test<br>\n    <key>tab</key> or <key>${e}</key>+<key>shift</key>+<key>p</key> - command line`):"tab"===u.default.quickRestart?$("#bottom .keyTips").html(`\n    <key>tab</key> - restart test<br>\n      <key>esc</key> or <key>${e}</key>+<key>shift</key>+<key>p</key> - command line`):$("#bottom .keyTips").html(`\n    <key>tab</key> + <key>enter</key> - restart test<br>\n    <key>esc</key> or <key>${e}</key>+<key>shift</key>+<key>p</key> - command line`)}t.updateKeytips=y,(0,v.isLocalhost)()&&(window.onerror=function(e){d.add(e.toString(),-1)},$("#top .logo .top").text("localhost"),$("head title").text($("head title").text()+" (localhost)"),$("body").append('<div class="devIndicator tl">local</div><div class="devIndicator br">local</div>')),window.addEventListener("keydown",(function(e){"Space"===e.code&&e.target===document.body&&e.preventDefault()})),window.addEventListener("beforeunload",(e=>{"words"===u.default.mode&&u.default.words<1e3||"time"===u.default.mode&&u.default.time<3600||"quote"===u.default.mode||"custom"===u.default.mode&&c.isWordRandom&&c.word<1e3||"custom"===u.default.mode&&c.isTimeRandom&&c.time<1e3||"custom"===u.default.mode&&!c.isWordRandom&&c.text.length<1e3||p.isActive&&(e.preventDefault(),e.returnValue="")}));const b=(0,h.debounce)(250,(()=>r(void 0,void 0,void 0,(function*(){if(l.updatePosition(),"test"===(0,g.get)()&&!m.resultVisible)if("off"!==u.default.tapeMode)m.scrollTape();else{const e=document.querySelectorAll("#words .word")[m.currentWordElementIndex-1];if(e){const t=Math.floor(e.offsetTop);m.lineJump(t)}}setTimeout((()=>{$("#wordsInput").is(":focus")&&l.show()}),250)})))),w=(0,h.throttle)(250,(()=>{l.hide()}));$(window).on("resize",(()=>{w(),b()})),f.subscribe((e=>{"quickRestart"===e&&y()}))},1072:(e,t,o)=>{var n;Object.defineProperty(t,"__esModule",{value:!0}),t.debug=t.error=t.warn=t.info=t.toggleDebugLogs=void 0;const i=o(3388),a=console.log,r=console.warn,s=console.error;let u=null!==(n="true"===localStorage.getItem("debugLogs"))&&void 0!==n&&n;function l(...e){a("%cINFO","background:#4CAF50;color: #111;padding:0 5px;border-radius:10px",...e)}function d(...e){r("%cWRN","background:#FFC107;color: #111;padding:0 5px;border-radius:10px",...e)}function c(...e){s("%cERR","background:#F44336;color: #111;padding:0 5px;border-radius:10px",...e)}function p(...e){u&&a("%cDEBG","background:#2196F3;color: #111;padding:0 5px;border-radius:10px",...e)}(0,i.isLocalhost)()&&(u=!0,p("Debug logs automatically enabled on localhost")),t.toggleDebugLogs=function(){u=!u,l("Debug logs "+(u?"enabled":"disabled")),localStorage.setItem("debugLogs",u.toString())},t.info=l,t.warn=d,t.error=c,t.debug=p,console.log=l,console.warn=d,console.error=c,console.debug=p},3388:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.escapeHTML=t.escapeRegExp=t.remove_non_ascii=t.getWords=t.toggleFullscreen=t.objectToQueryString=t.checkIfGetParameterExists=t.findGetParameter=t.getPositionString=t.chart2Word=t.getASCII=t.getSpecials=t.convertNumberToNepali=t.convertNumberToArabic=t.getNumbers=t.secondsToString=t.getGibberish=t.findLineByLeastSquares=t.roundTo2=t.whorf=t.kogasa=t.isASCIILetter=t.capitalizeFirstLetter=t.capitalizeFirstLetterOfEachWord=t.getLastChar=t.getReleasesFromGitHub=t.getLatestReleaseFromGitHub=t.median=t.mean=t.stdDev=t.smooth=t.isColorDark=t.isColorLight=t.blendTwoHexColors=t.getContributorsList=t.getSupportersList=t.getChallengeList=t.getFontsList=t.getFunbox=t.getFunboxList=t.findCurrentGroup=t.getCurrentLanguage=t.getLanguage=t.getLanguageGroups=t.getLanguageList=t.getSortedThemesList=t.getThemesList=t.getLayout=t.getLayoutsList=t.cachedFetchJson=void 0,t.isToday=t.isYesterday=t.getCurrentDayTimestamp=t.getStartOfDayTimestamp=t.checkIfLanguageSupportsZipf=t.dreymarIndex=t.getBinary=t.isLocalhost=t.loadCSS=t.camelCaseToWords=t.htmlToText=t.intersect=t.areSortedArraysEqual=t.areUnsortedArraysEqual=t.isPasswordStrong=t.Section=t.memoizeAsync=t.sleep=t.abbreviateNumber=t.promiseAnimation=t.getXpForLevel=t.getLevel=t.getDiscordAvatarUrl=t.isAnyPopupVisible=t.isPopupVisible=t.isElementVisible=t.createErrorMessage=t.randomElementFromObject=t.nthElementFromArray=t.randomElementFromArray=t.shuffle=t.randomIntFromRange=t.downloadResultsCSV=t.getMode2=t.swapElements=t.convertRemToPixels=t.trailingComposeChars=t.convertRGBtoHEX=t.regexIndexOf=t.setCharAt=t.clearTimeouts=t.canQuickRestart=t.mapRange=t.isUsernameValid=t.cleanTypographySymbols=void 0;const s=a(o(9817)),u=o(5256);function l(){return r(this,void 0,void 0,(function*(){try{return yield(0,t.cachedFetchJson)("/./layouts/_list.json")}catch(e){throw new Error("Layouts JSON fetch failed")}}))}let d,c,p,f,h;function m(){return r(this,void 0,void 0,(function*(){if(d)return d;{let e=yield(0,t.cachedFetchJson)("/./themes/_list.json");return e=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0})),d=e,d}}))}function g(){return r(this,void 0,void 0,(function*(){try{return yield(0,t.cachedFetchJson)("/./languages/_groups.json")}catch(e){throw new Error("Language groups JSON fetch failed")}}))}function v(e){return r(this,void 0,void 0,(function*(){return null!=p&&p.name===e||(p=yield(0,t.cachedFetchJson)(`/./languages/${e}.json`)),p}))}function y(){return r(this,void 0,void 0,(function*(){if(f)return f;{let e=yield(0,t.cachedFetchJson)("/./funbox/_list.json");return e=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0})),f=e,f}}))}function b(e){if(4!=e.length&&7!=e.length&&!e.startsWith("#"))return;let t,o,n;if(4==e.length)t="0x"+e[1]+e[1],o="0x"+e[2]+e[2],n="0x"+e[3]+e[3];else{if(7!=e.length)return;t="0x"+e[1]+e[2],o="0x"+e[3]+e[4],n="0x"+e[5]+e[6]}return{r:t,g:o,b:n}}function w(e){let t,o,n;4==e.length?(t="0x"+e[1]+e[1],o="0x"+e[2]+e[2],n="0x"+e[3]+e[3]):7==e.length?(t="0x"+e[1]+e[2],o="0x"+e[3]+e[4],n="0x"+e[5]+e[6]):(t=0,o=0,n=0),t/=255,o/=255,n/=255;const i=Math.min(t,o,n),a=Math.max(t,o,n),r=a-i;let s=0,u=0,l=0;return s=0==r?0:a==t?(o-n)/r%6:a==o?(n-t)/r+2:(t-o)/r+4,s=Math.round(60*s),s<0&&(s+=360),l=(a+i)/2,u=0==r?0:r/(1-Math.abs(2*l-1)),u=+(100*u).toFixed(1),l=+(100*l).toFixed(1),{hue:s,sat:u,lgt:l,string:"hsl("+s+","+u+"%,"+l+"%)"}}function C(e){return Math.round(100*(e+Number.EPSILON))/100}t.cachedFetchJson=B((function(e){return r(this,void 0,void 0,(function*(){try{if(!e)throw new Error("No URL");const t=yield fetch(e);if(t.ok)return yield t.json();throw new Error(`${t.status} ${t.statusText}`)}catch(t){throw console.error("Error fetching JSON: "+e,t),t}}))})),t.getLayoutsList=l,t.getLayout=function(e){return r(this,void 0,void 0,(function*(){const t=(yield l())[e];if(void 0===t)throw new Error(`Layout ${e} is undefined`);return t}))},t.getThemesList=m,t.getSortedThemesList=function(){return r(this,void 0,void 0,(function*(){if(c)return c;{if(d||(yield m()),!d)throw new Error("Themes list is undefined");let e=[...d];return e=e.sort(((e,t)=>{const o=w(e.bgColor);return w(t.bgColor).lgt-o.lgt})),c=e,c}}))},t.getLanguageList=function(){return r(this,void 0,void 0,(function*(){try{return yield(0,t.cachedFetchJson)("/./languages/_list.json")}catch(e){throw new Error("Language list JSON fetch failed")}}))},t.getLanguageGroups=g,t.getLanguage=v,t.getCurrentLanguage=function(e){return r(this,void 0,void 0,(function*(){return yield v(e)}))},t.findCurrentGroup=function(e){return r(this,void 0,void 0,(function*(){let t;return(yield g()).forEach((o=>{void 0===t&&o.languages.includes(e)&&(t=o)})),t}))},t.getFunboxList=y,t.getFunbox=function(e){return r(this,void 0,void 0,(function*(){return(yield y()).find((function(t){return t.name==e}))}))},t.getFontsList=function(){return r(this,void 0,void 0,(function*(){if(h)return h;{let e=yield(0,t.cachedFetchJson)("/./fonts/_list.json");return e=e.sort((function(e,t){const o=e.name.toLowerCase(),n=t.name.toLowerCase();return o<n?-1:o>n?1:0})),h=e,h}}))},t.getChallengeList=function(){return r(this,void 0,void 0,(function*(){try{return yield(0,t.cachedFetchJson)("/./challenges/_list.json")}catch(e){throw new Error("Challenge list JSON fetch failed")}}))},t.getSupportersList=function(){return r(this,void 0,void 0,(function*(){try{return yield(0,t.cachedFetchJson)("/./about/supporters.json")}catch(e){throw new Error("Supporters list JSON fetch failed")}}))},t.getContributorsList=function(){return r(this,void 0,void 0,(function*(){try{return yield(0,t.cachedFetchJson)("/./about/contributors.json")}catch(e){throw new Error("Contributors list JSON fetch failed")}}))},t.blendTwoHexColors=function(e,t,o){const n=b(e),i=b(t);if(n&&i){const e={r:n.r,g:n.g,b:n.b,a:1},t={r:i.r,g:i.g,b:i.b,a:o},a=(0,u.normal)(e,t);return"#"+((1<<24)+(a.r<<16)+(a.g<<8)+a.b).toString(16).slice(1)}return"#000000"},t.isColorLight=function(e){return w(e).lgt>=50},t.isColorDark=function(e){return w(e).lgt<50},t.smooth=function(e,t,o=(e=>e)){const n=o,i=[];for(let o=0;o<e.length;o+=1){const a=o-t,r=o+t+1;let s=0,u=0;for(let t=a>=0?a:0;t<r&&t<e.length;t+=1)u+=n(e[t]),s+=1;i[o]=u/s}return i},t.stdDev=function(e){try{const t=e.length,o=e.reduce(((e,t)=>e+t))/t;return Math.sqrt(e.map((e=>Math.pow(e-o,2))).reduce(((e,t)=>e+t))/t)}catch(e){return 0}},t.mean=function(e){try{return e.reduce(((e,t)=>t+e))/e.length}catch(e){return 0}},t.median=function(e){try{const t=Math.floor(e.length/2),o=[...e].sort(((e,t)=>e-t));return e.length%2!=0?o[t]:(o[t-1]+o[t])/2}catch(e){return 0}},t.getLatestReleaseFromGitHub=function(){return r(this,void 0,void 0,(function*(){return(yield $.getJSON("https://api.github.com/repos/monkeytypegame/monkeytype/releases?per_page=1"))[0].name}))},t.getReleasesFromGitHub=function(){return r(this,void 0,void 0,(function*(){return $.getJSON("https://api.github.com/repos/monkeytypegame/monkeytype/releases?per_page=5")}))},t.getLastChar=function(e){try{return e.charAt(e.length-1)}catch(e){return""}},t.capitalizeFirstLetterOfEachWord=function(e){return e.split(/ +/).map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},t.capitalizeFirstLetter=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},t.isASCIILetter=function(e){return 1===e.length&&/[a-z]/i.test(e)},t.kogasa=function(e){return 100*(1-Math.tanh(e+Math.pow(e,3)/3+Math.pow(e,5)/5))},t.whorf=function(e,t){return Math.min(e,Math.floor(e*Math.pow(1.03,-2*(t-3))))},t.roundTo2=C,t.findLineByLeastSquares=function(e){let t=0,o=0,n=0,i=0,a=0,r=0,s=0;const u=e.length;if(0===u)return[[],[]];for(let l=0;l<u;l++)r=l+1,s=e[l],t+=r,o+=s,i+=r*r,n+=r*s,a++;const l=(a*n-t*o)/(a*i-t*t),d=o/a-l*t/a;return[[1,1*l+d],[u,u*l+d]]},t.getGibberish=function(){const e=A(1,7);let t="";for(let o=0;o<e;o++)t+=String.fromCharCode(97+A(0,25));return t},t.secondsToString=function(e,t=!1,o=!1,n=":",i=!0,a=!1){e=Math.abs(e);let r,s=0;a?(s=Math.floor(e/86400),r=Math.floor(e%86400/3600)):r=Math.floor(e/3600);const u=Math.floor(e%3600/60),l=C(e%3600%60);let d,c,p,f;a&&(d=s<10&&"text"!==n?"0"+s:s),c=r<10&&"text"!==n?"0"+r:r,p=u<10&&"text"!==n?"0"+u:u,f=l<10&&(u>0||r>0||t)&&"text"!==n?"0"+l:l;let h="";return s>0&&a&&(h+=d,h+="text"===n?1==s?" day ":" days ":n),(r>0||o)&&(h+=c,h+="text"===n?1==r?" hour ":" hours ":n),(u>0||r>0||t)&&(h+=p,"text"===n?h+=1==u?" minute ":" minutes ":i&&(h+=n)),i&&(h+=f,"text"===n&&(h+=1==l?" second":" seconds")),0!==r||0!==u||i||"text"!==n||(h="less than 1 minute"),h.trim()},t.getNumbers=function(e){const t=A(1,e);let o="";for(let e=0;e<t;e++){let t;t=A(0===e?1:0,9),o+=t.toString()}return o},t.convertNumberToArabic=function(e){let t="";for(let o=0;o<e.length;o++)t+=""[parseInt(e[o])];return t},t.convertNumberToNepali=function(e){let t="";for(let o=0;o<e.length;o++)t+=""[parseInt(e[o])];return t},t.getSpecials=function(){const e=A(1,7);let t="";const o=["!","@","#","$","%","^","&","*","(",")","-","_","=","+","{","}","[","]","'",'"',"/","\\","|","?",";",":",">","<"];for(let n=0;n<e;n++)t+=j(o);return t},t.getASCII=function(){const e=A(1,10);let t="";for(let o=0;o<e;o++){const e=33+A(0,93);t+=String.fromCharCode(e)}return t};let _=!1,S=0,P=0,x=0,k=3,T=0,O=0;function M(e){P--;let t=Math.round(Math.random()),o=Math.round(5*Math.random()-.5);return e?(_=Boolean(Math.round(Math.random())),o=_?3:0):(_?(x===t?T++:T=0,(T>1||O>0&&T>0)&&(t=1-t,T=0),x=t,o=t*(S+1)):(k===t?O++:O=0,(O>1||O>0&&T>0)&&(t=1-t,O=0),k=t,o=3-t*(S+1)),_=!_,P<0&&0===t&&(S=1-S,P=Math.floor(3*Math.random())+3)),o}function A(e,t){const o=Math.ceil(e),n=Math.floor(t);return Math.floor(Math.random()*(n-o+1)+o)}function j(e){return e[A(0,e.length-1)]}function L(e){const t=document.querySelector(e);return!!t&&!!t.getClientRects().length}function W(e){return L(`#popups #${e}`)}function B(e,t){const o=new Map;return(...n)=>r(this,void 0,void 0,(function*(){const i=t?t.apply(n):n[0];if(o.has(i)){const e=yield o.get(i);if(void 0!==e)return e}const a=e.apply(null,n);return o.set(i,a),a}))}function I(e){return e-e%864e5}t.chart2Word=function(e){const t=["","","",""];let o="";for(let n=0;n<4;n++)o+=t[M(0===n&&e)];return o},t.getPositionString=function(e){let t="th";const o=e%10,n=e%100;return 1==o&&11!=n&&(t="st"),2==o&&12!=n&&(t="nd"),3==o&&13!=n&&(t="rd"),e+t},t.findGetParameter=function(e,t){let o=null,n=[],i=location.search;return t&&(i=t),i.substr(1).split("&").forEach((function(t){n=t.split("="),n[0]===e&&(o=decodeURIComponent(n[1]))})),o},t.checkIfGetParameterExists=function(e,t){let o=!1,n=[],i=location.search;return t&&(i=t),i.substr(1).split("&").forEach((function(t){n=t.split("="),n[0]===e&&(o=!0)})),o},t.objectToQueryString=function(e){const t=[];for(const o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.push(encodeURIComponent(o)+"="+encodeURIComponent(e[o]));return t.join("&")},t.toggleFullscreen=function(){const e=document.documentElement;document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():e.requestFullscreen?e.requestFullscreen():e.msRequestFullscreen?e.msRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT)},t.getWords=function(){return[...document.querySelectorAll("#words .word")].map((e=>[...e.querySelectorAll("letter")].map((e=>e.textContent)).join(""))).join(" ")},t.remove_non_ascii=function(e){return null===e||""===e?"":(e=e.toString()).replace(/[^\x20-\x7E]/g,"")},t.escapeRegExp=function(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},t.escapeHTML=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")},t.cleanTypographySymbols=function(e){const t={"":'"',"":'"',"":"'","":"'",",":",","":"-","":"...","":"<<","":">>","":"-","":" ","":" ","":" "};return e.replace(/[,\u2007\u202F\u00A0]/g,(e=>t[e]||""))},t.isUsernameValid=function(e){return null!=e&&""!==e&&!/miodec/.test(e.toLowerCase())&&!/bitly/.test(e.toLowerCase())&&!(e.length>14)&&!/^\..*/.test(e.toLowerCase())&&/^[0-9a-zA-Z_.-]+$/.test(e)},t.mapRange=function(e,t,o,n,i){let a=(e-t)*(i-n)/(o-t)+n;return n>i?a>n?a=n:a<i&&(a=i):a<n?a=n:a>i&&(a=i),a},t.canQuickRestart=function(e,t,o,n,i){const a="words"===e&&(t>=1e3||0===t),r="time"===e&&(o>=900||0===o),s="custom"===e&&1==i,u="custom"===e&&n.isWordRandom&&n.word>=1e3,l="custom"===e&&n.isTimeRandom&&n.time>900,d="custom"===e&&!n.isWordRandom&&!n.isTimeRandom&&n.text.length>=1e3;return!(a||r||s||u||l||d)},t.clearTimeouts=function(e){e.forEach((e=>{clearTimeout(e)}))},t.setCharAt=function(e,t,o){return t>e.length-1?e:e.substring(0,t)+o+e.substring(t+1)},t.regexIndexOf=function(e,t,o){const n=e.substring(o||0).search(t);return n>=0?n+(o||0):n},t.convertRGBtoHEX=function(e){const t=e.match(/^rgb\((\d+), \s*(\d+), \s*(\d+)\)$/);if(null!==t&&!(t.length<3))return"#"+o(t[1])+o(t[2])+o(t[3]);function o(e){return("0"+parseInt(e).toString(16)).slice(-2)}},String.prototype.lastIndexOfRegex=function(e){const t=this.match(e);return t?this.lastIndexOf(t[t.length-1]):-1},t.trailingComposeChars=/[\u02B0-\u02FF`^~]+$|.*$/,t.convertRemToPixels=function(e){return e*parseFloat(getComputedStyle(document.documentElement).fontSize)},t.swapElements=function(e,t,o,n=function(){return r(this,void 0,void 0,(function*(){return Promise.resolve()}))},i=function(){return r(this,void 0,void 0,(function*(){return Promise.resolve()}))}){return r(this,void 0,void 0,(function*(){if(e.hasClass("hidden")&&!t.hasClass("hidden")||!e.hasClass("hidden")&&t.hasClass("hidden")){if(e.hasClass("hidden"))return yield i(),yield n(),!1;$(e).removeClass("hidden").css("opacity",1).animate({opacity:0},o/2,(()=>r(this,void 0,void 0,(function*(){yield i(),$(e).addClass("hidden"),$(t).removeClass("hidden").css("opacity",0).animate({opacity:1},o/2,(()=>{n()}))}))))}else e.hasClass("hidden")&&t.hasClass("hidden")?(yield i(),$(t).removeClass("hidden").css("opacity",0).animate({opacity:1},o,(()=>r(this,void 0,void 0,(function*(){yield n()}))))):(yield i(),yield n())}))},t.getMode2=function(e,t){const o=e.mode;return"time"===o?e.time.toString():"words"===o?e.words.toString():"custom"===o?"custom":"zen"===o?"zen":"quote"===o?t.id.toString():""},t.downloadResultsCSV=function(e){return r(this,void 0,void 0,(function*(){s.show();const t=[["_id","isPb","wpm","acc","rawWpm","consistency","charStats","mode","mode2","quoteLength","restartCount","testDuration","afkDuration","incompleteTestSeconds","punctuation","numbers","language","funbox","difficulty","lazyMode","blindMode","bailedOut","tags","timestamp"],...e.map((e=>[e._id,e.isPb,e.wpm,e.acc,e.rawWpm,e.consistency,e.charStats.join(","),e.mode,e.mode2,e.quoteLength,e.restartCount,e.testDuration,e.afkDuration,e.incompleteTestSeconds,e.punctuation,e.numbers,e.language,e.funbox,e.difficulty,e.lazyMode,e.blindMode,e.bailedOut,e.tags.join(","),e.timestamp]))].map((e=>e.join("|"))).join("\n"),o=new Blob([t],{type:"text/csv"}),n=window.URL.createObjectURL(o),i=document.createElement("a");i.setAttribute("href",n),i.setAttribute("download","results.csv"),document.body.appendChild(i),i.click(),i.remove(),s.hide()}))},t.randomIntFromRange=A,t.shuffle=function(e){for(let t=e.length-1;t>0;--t){const o=A(0,t),n=e[o];e[o]=e[t],e[t]=n}},t.randomElementFromArray=j,t.nthElementFromArray=function(e,t){return e[t=t<0?e.length+t:t]},t.randomElementFromObject=function(e){return j(Object.values(e))},t.createErrorMessage=function(e,t){if(e instanceof Error)return`${t}: ${e.message}`;const o=e;return(null==o?void 0:o.message)?`${t}: ${o.message}`:t},t.isElementVisible=L,t.isPopupVisible=W,t.isAnyPopupVisible=function(){const e=document.querySelectorAll("#popups .popupWrapper");let t=!1;for(const o of e)if(W(o.id)){t=!0;break}return t},t.getDiscordAvatarUrl=function(e,t,o=32){return r(this,void 0,void 0,(function*(){if(!e||!t)return null;try{const n=`https://cdn.discordapp.com/avatars/${e}/${t}.png?size=${o}`;return(yield fetch(n)).ok?n:null}catch(e){}return null}))},t.getLevel=function(e){return 1/98*(-151+Math.sqrt(392*e+22801))+1},t.getXpForLevel=function(e){return 49*(e-1)+100},t.promiseAnimation=function(e,t,o,n){return r(this,void 0,void 0,(function*(){return new Promise((i=>{e.animate(t,o,n,i)}))}))},t.abbreviateNumber=function(e,t=1){if(e<1e3)return e.toString();const o=Math.floor(Math.log(e)/Math.log(1e3)),n="kmbtqQsSond".charAt(o-1);return(e/Math.pow(1e3,o)).toFixed(t)+n},t.sleep=function(e){return r(this,void 0,void 0,(function*(){return new Promise((t=>setTimeout(t,e)))}))},t.memoizeAsync=B,t.Section=class{constructor(e,t,o){this.title=e,this.author=t,this.words=o}},t.isPasswordStrong=function(e){const t=!!e.match(/[A-Z]/),o=!!e.match(/[\d]/),n=!!e.match(/[!@#$%^&*()_+\-=[\]{};':"\\|,.<>/?]/),i=e.length>=8,a=e.length<=64;return t&&o&&n&&i&&a},t.areUnsortedArraysEqual=function(e,t){return e.length===t.length&&e.every((e=>t.includes(e)))},t.areSortedArraysEqual=function(e,t){return e.length===t.length&&e.every(((e,o)=>e===t[o]))},t.intersect=function(e,t,o=!1){let n;t.length>e.length&&(n=t,t=e,e=n);const i=e.filter((function(e){return t.indexOf(e)>-1}));return o?[...new Set(i)]:i},t.htmlToText=function(e){const t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},t.camelCaseToWords=function(e){return e.replace(/([A-Z])/g," $1").trim().toLowerCase()},t.loadCSS=function(e,t=!1){const o=document.createElement("link");o.type="text/css",o.rel="stylesheet",o.href=e,t?document.getElementsByTagName("head")[0].prepend(o):document.getElementsByTagName("head")[0].appendChild(o)},t.isLocalhost=function(){return"localhost"===location.hostname||"127.0.0.1"===location.hostname||""===location.hostname},t.getBinary=function(){return Math.floor(256*Math.random()).toString(2).padStart(8,"0")},t.dreymarIndex=function(e){const t=e,o=.5772156649,n=Math.log(t)+o,i=Math.random(),a=Math.exp(i*n-o);return Math.ceil(a)-1},t.checkIfLanguageSupportsZipf=function(e){return r(this,void 0,void 0,(function*(){const t=yield v(e);return!0===t.orderedByFrequency?"yes":!1===t.orderedByFrequency?"no":"unknown"}))},t.getStartOfDayTimestamp=I,t.getCurrentDayTimestamp=function(){return I(Date.now())},t.isYesterday=function(e){return I(Date.now()-864e5)===I(e)},t.isToday=function(e){return I(Date.now())===I(e)}},6690:function(e,t,o){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.buildSearchService=void 0;const i=o(1161),a=n(o(7718)),r={fuzzyMatchSensitivity:.2,scoreForSimilarMatch:.5,scoreForExactMatch:1};function s(e){return e.match(/[^\\\][.,"/#!?$%^&*;:{}=\-_`~()\s]+/g)||[]}t.buildSearchService=(e,t,o=r)=>{const n={},u={};e.forEach(((e,o)=>{const a=s(t(e)),r={id:o,termFrequencies:{},maxTermFrequency:0};let l=0;a.forEach((e=>{const t=(0,i.stemmer)(e);t in u||(u[t]=new Set),u[t].add(e),t in n||(n[t]=new Set),n[t].add(r),t in r.termFrequencies||(r.termFrequencies[t]=0),r.termFrequencies[t]++,l=Math.max(l,r.termFrequencies[t])})),r.maxTermFrequency=l}));const l=Object.keys(n);return{query:t=>{const r={results:[],matchedQueryTerms:[]},d=new Set(s(t).map((e=>(0,i.stemmer)(e))));if(0===d.size)return r;const c=new Map,p=new Set;d.forEach((t=>{l.forEach((i=>{const{similarity:r}=(0,a.default)(t,i),s=i===t,l=r>=1-o.fuzzyMatchSensitivity;if(s||l){const t=n[i],a=(d=e.length,0===(f=t.size)?0:Math.log10(d/f));t.forEach((e=>{var t;const n=null!==(t=c.get(e.id))&&void 0!==t?t:0,r=function(e,t){return.4+t.termFrequencies[e]/t.maxTermFrequency*.6}(i,e),u=((s?o.scoreForExactMatch:0)+(l?o.scoreForSimilarMatch:0))*a*r;c.set(e.id,n+u)})),u[i].forEach((e=>{p.add(e)}))}var d,f}))}));const f=[...c].sort(((e,t)=>t[1]-e[1])).map((t=>e[t[0]]));return r.results=f,r.matchedQueryTerms=[...p],r}}}},6037:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.splitByAndKeep=void 0,t.splitByAndKeep=function(e,t){const o=[];let n=[];const i=new Set(t);for(const t of e)i.has(t)?(n.length>0&&o.push(n.join("")),o.push(t),n=[]):n.push(t);return n.length>0&&o.push(n.join("")),o}},9608:function(e,t,o){var n=this&&this.__createBinding||(Object.create?function(e,t,o,n){void 0===n&&(n=o),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[o]}})}:function(e,t,o,n){void 0===n&&(n=o),e[n]=t[o]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),a=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return i(t,e),t},r=this&&this.__awaiter||function(e,t,o,n){return new(o||(o=Promise))((function(i,a){function r(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(r,s)}u((n=n.apply(e,t||[])).next())}))},s=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.loadTestSettingsFromUrl=t.loadCustomThemeFromUrl=t.linkDiscord=void 0;const u=a(o(3388)),l=a(o(6705)),d=l,c=a(o(3368)),p=o(6965),f=a(o(2338)),h=a(o(2203)),m=a(o(8248)),g=s(o(7355)),v=a(o(8835)),y=a(o(6350)),b=a(o(9817)),w=a(o(5344)),$=o(3013);t.linkDiscord=function(e){return r(this,void 0,void 0,(function*(){if(!e)return;const t=new URLSearchParams(e.slice(1));if(t.has("access_token")){history.replaceState(null,"","/");const e=t.get("access_token"),o=t.get("token_type"),n=t.get("state");b.show();const i=yield g.default.users.linkDiscord(o,e,n);if(b.hide(),200!==i.status)return c.add("Failed to link Discord: "+i.message,-1);c.add(i.message,1);const a=y.getSnapshot();if(!a)return;const{discordId:r,discordAvatar:s}=i.data;r?a.discordId=r:a.discordAvatar=s,y.setSnapshot(a),w.update(void 0,r,s),v.updateDiscordSection()}}))},t.loadCustomThemeFromUrl=function(e){const t=u.findGetParameter("customTheme",e);if(null===t)return;let o=null;try{o=JSON.parse(atob(t))}catch(e){return c.add("Invalid custom theme ",0)}let n,i,a,r=[];if(Array.isArray(o.c)&&10===o.c.length?(r=o.c,n=o.i,i=o.s,a=o.f):Array.isArray(o)&&10===o.length&&(r=o),0===r.length)return c.add("Invalid custom theme ",0);const s=l.default.customTheme,p=l.default.customThemeColors;try{d.setCustomThemeColors(r),c.add("Custom theme applied",1),void 0!==n&&(d.setCustomBackground(n),d.setCustomBackgroundSize(i),d.setCustomBackgroundFilter(a)),l.default.customTheme||d.setCustomTheme(!0)}catch(e){c.add("Something went wrong. Reverting to previous state.",0),console.error(e),d.setCustomTheme(s),d.setCustomThemeColors(p)}},t.loadTestSettingsFromUrl=function(e){var t;const o=u.findGetParameter("testSettings",e);if(null===o)return;const n=JSON.parse(null!==(t=(0,p.decompressFromURI)(o))&&void 0!==t?t:""),i={};if(n[0]&&(d.setMode(n[0],!0),i.mode=n[0]),n[1]&&("time"===l.default.mode?d.setTimeConfig(parseInt(n[1],10),!0):"words"===l.default.mode?d.setWordCount(parseInt(n[1],10),!0):"quote"===l.default.mode&&(d.setQuoteLength(-2,!1),f.setSelectedId(parseInt(n[1],10)),h.set()),i.mode2=n[1]),n[2]){const e=n[2];m.setPopupTextareaState(e.text.join(e.delimiter)),m.setText(e.text),m.setIsTimeRandom(e.isTimeRandom),m.setIsWordRandom(e.isWordRandom),e.isTimeRandom&&m.setWord(e.time),e.isWordRandom&&m.setTime(e.word),m.setDelimiter(e.delimiter),i["custom text settings"]=""}n[3]&&(d.setPunctuation(n[3],!0),i.punctuation=n[3]?"on":"off"),n[4]&&(d.setNumbers(n[4],!0),i.numbers=n[4]?"on":"off"),n[5]&&(d.setLanguage(n[5],!0),i.language=n[5]),n[6]&&(d.setDifficulty(n[6],!0),i.difficulty=n[6]),n[7]&&(d.setFunbox(n[7],!0),i.funbox=n[7]),(0,$.restart)();let a="";Object.keys(i).forEach((e=>{const t=i[e];a+=`${e}${t?": "+t:""}<br>`})),""!==a&&c.add("Settings applied from URL:<br><br>"+a,1,{duration:10,allowHTML:!0})}}},o={};function n(e){var i=o[e];if(void 0!==i)return i.exports;var a=o[e]={exports:{}};return t[e].call(a.exports,a,a.exports,n),a.exports}n.m=t,e=[],n.O=(t,o,i,a)=>{if(!o){var r=1/0;for(d=0;d<e.length;d++){for(var[o,i,a]=e[d],s=!0,u=0;u<o.length;u++)(!1&a||r>=a)&&Object.keys(n.O).every((e=>n.O[e](o[u])))?o.splice(u--,1):(s=!1,a<r&&(r=a));if(s){e.splice(d--,1);var l=i();void 0!==l&&(t=l)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[o,i,a]},n.d=(e,t)=>{for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={96:0};n.O.j=t=>0===e[t];var t=(t,o)=>{var i,a,[r,s,u]=o,l=0;if(r.some((t=>0!==e[t]))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(u)var d=u(n)}for(t&&t(o);l<r.length;l++)a=r[l],n.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return n.O(d)},o=self.webpackChunkmonkeytype_frontend=self.webpackChunkmonkeytype_frontend||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))})();var i=n.O(void 0,[736],(()=>n(9294)));i=n.O(i)})();